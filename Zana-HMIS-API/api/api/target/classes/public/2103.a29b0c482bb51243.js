"use strict";(self.webpackChunkzana_hmis=self.webpackChunkzana_hmis||[]).push([[2103],{2103:(U,m,l)=>{l.r(m),l.d(m,{RadiologyTypePriceComponent:()=>O});var y=l(5861),g=l(6814),u=l(9862),p=l(95),T=l(4716),v=l(4185),C=l(553),e=l(6689),I=l(6466),E=l(1581),Z=l(585),f=l(379);function M(t,c){if(1&t){const i=e.EpF();e.TgZ(0,"span"),e._uU(1,"COVERED "),e.TgZ(2,"button",19),e.NdJ("click",function(){e.CHM(i);const n=e.oxw(2).$implicit,r=e.oxw();return e.KtG(r.changeRadiologyTypeCoverage(r.insurancePlanId,null==n||null==n.radiologyTypeInsurancePlan||null==n.radiologyTypeInsurancePlan.radiologyType?null:n.radiologyTypeInsurancePlan.radiologyType.id,!1))}),e._uU(3,"Change"),e.qZA()()}}function R(t,c){if(1&t){const i=e.EpF();e.TgZ(0,"span"),e._uU(1,"NOT COVERED "),e.TgZ(2,"button",19),e.NdJ("click",function(){e.CHM(i);const n=e.oxw(2).$implicit,r=e.oxw();return e.KtG(r.changeRadiologyTypeCoverage(r.insurancePlanId,null==n||null==n.radiologyTypeInsurancePlan||null==n.radiologyTypeInsurancePlan.radiologyType?null:n.radiologyTypeInsurancePlan.radiologyType.id,!0))}),e._uU(3,"Change"),e.qZA()()}}function A(t,c){if(1&t&&(e.TgZ(0,"div"),e.YNc(1,M,4,0,"span",18),e.YNc(2,R,4,0,"span",18),e.qZA()),2&t){const i=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",!0===(null==i||null==i.radiologyTypeInsurancePlan?null:i.radiologyTypeInsurancePlan.covered)),e.xp6(1),e.Q6J("ngIf",!1===(null==i||null==i.radiologyTypeInsurancePlan?null:i.radiologyTypeInsurancePlan.covered))}}function x(t,c){if(1&t){const i=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td",14),e._uU(6),e.ALo(7,"currency"),e.qZA(),e.TgZ(8,"td")(9,"input",15),e.NdJ("ngModelChange",function(n){const o=e.CHM(i).$implicit;return e.KtG(o.price=n)}),e.qZA()(),e.TgZ(10,"td")(11,"button",16),e.NdJ("click",function(){const r=e.CHM(i).$implicit,o=e.oxw();return e.KtG(o.updateRadiologyTypePriceByInsurance(o.insurancePlanId,null==r||null==r.radiologyType?null:r.radiologyType.id,r.price))}),e._UZ(12,"i",17),e._uU(13,"Save"),e.qZA()(),e.TgZ(14,"td"),e.YNc(15,A,3,2,"div",18),e.qZA()()}if(2&t){const i=c.$implicit;e.xp6(2),e.Oqu(i.radiologyType.id),e.xp6(2),e.Oqu(i.radiologyType.name),e.xp6(2),e.Oqu(e.Dn7(7,5,i.price,"","")),e.xp6(3),e.Q6J("ngModel",i.price),e.xp6(6),e.Q6J("ngIf",null!=(null==i||null==i.radiologyTypeInsurancePlan?null:i.radiologyTypeInsurancePlan.covered))}}const h=C.N.apiUrl;let O=(()=>{var t;class c{constructor(a,n,r,o,_){this.auth=a,this.http=n,this.modalService=r,this.spinner=o,this.msgBox=_,this.insurancePlanId=null,this.insurancePlanName="",this.radiologyTypes=[],this.radiologyTypePrices=[],this.filterRecords=""}ngOnInit(){this.insurancePlanId=localStorage.getItem("insurance_plan_id"),this.insurancePlanName=localStorage.getItem("insurance_plan_name"),localStorage.removeItem("insurance_plan_id"),localStorage.removeItem("insurance_plan_name"),this.loadRadiologyTypesByInsurance(this.insurancePlanId)}loadRadiologyTypesByInsurance(a){var n=this;return(0,y.Z)(function*(){n.radiologyTypes=[];let r={headers:(new u.WM).set("Authorization","Bearer "+n.auth.user.access_token)};n.spinner.show(),yield n.http.get(h+"/insurance_plans/get_radiology_type_prices?insurance_plan_id="+a,r).pipe((0,T.x)(()=>n.spinner.hide())).toPromise().then(o=>{n.radiologyTypePrices=o}).catch(o=>{n.msgBox.showErrorMessage(o,"Could not load Radiology types")})})()}changeRadiologyTypeCoverage(a,n,r){var o=this;return(0,y.Z)(function*(){let _={headers:(new u.WM).set("Authorization","Bearer "+o.auth.user.access_token)};var P={radiologyType:{id:n},radiologyTypeInsurancePlan:{insurancePlan:{id:a},covered:r}};o.spinner.show(),yield o.http.post(h+"/insurance_plans/change_radiology_type_coverage",P,_).pipe((0,T.x)(()=>o.spinner.hide())).toPromise().then(s=>{o.radiologyTypePrices.forEach(d=>{s.radiologyType.id===d.radiologyType.id&&(d.radiologyTypeInsurancePlan.covered=s.radiologyTypeInsurancePlan.covered)})}).catch(s=>{o.msgBox.showErrorMessage(s,"Could not change coverage")})})()}updateRadiologyTypePriceByInsurance(a,n,r){var o=this;return(0,y.Z)(function*(){let _={headers:(new u.WM).set("Authorization","Bearer "+o.auth.user.access_token)};var P={radiologyType:{id:n},radiologyTypeInsurancePlan:{insurancePlan:{id:a}},price:r};o.spinner.show(),yield o.http.post(h+"/insurance_plans/update_radiology_type_price_by_insurance",P,_).pipe((0,T.x)(()=>o.spinner.hide())).toPromise().then(s=>{o.radiologyTypePrices.forEach(d=>{s.radiologyType.id===d.radiologyType.id&&(d.price=s.price,d.covered=s.covered)}),o.msgBox.showSuccessMessage("Price updated successifully")}).catch(s=>{o.msgBox.showErrorMessage(s,"Could not update price")})})()}}return(t=c).\u0275fac=function(a){return new(a||t)(e.Y36(I.e),e.Y36(u.eN),e.Y36(E.FF),e.Y36(Z.t2),e.Y36(f.l))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-radiology-type-price"]],standalone:!0,features:[e.jDz],decls:37,vars:6,consts:[[1,"content-header"],[1,"header-title"],[1,"content"],[1,"row"],[1,"col-sm-12"],[1,"panel","panel-bd","lobidrag"],[1,"panel-heading"],[1,"text-primary"],[1,"panel-body"],[1,"col-sm-12",2,"height","100%","overflow","scroll"],[1,"col-sm-4"],["type","text","placeholder","Search...",1,"form-control","pull-right",2,"max-width","8cm",3,"ngModel","ngModelChange"],[1,"table","table-bordered","table-small"],[4,"ngFor","ngForOf"],[2,"text-align","right"],["type","text",1,"form-control",2,"text-align","center",3,"ngModel","ngModelChange"],[1,"btn","btn-success",3,"click"],[1,"glyphicon","glyphicon-floppy-disk"],[4,"ngIf"],[3,"click"]],template:function(a,n){1&a&&(e.TgZ(0,"section",0)(1,"div",1)(2,"h1"),e._uU(3,"Radiology Type Prices"),e.qZA()()(),e.TgZ(4,"section",2)(5,"div",3)(6,"div",4)(7,"div",5)(8,"div",6)(9,"h4",7),e._uU(10),e.qZA()(),e.TgZ(11,"div",8)(12,"div",9)(13,"div",3),e._UZ(14,"div",10)(15,"div",10),e.TgZ(16,"div",10)(17,"input",11),e.NdJ("ngModelChange",function(o){return n.filterRecords=o}),e.qZA()()(),e._UZ(18,"br"),e.TgZ(19,"table",12)(20,"thead")(21,"tr")(22,"td"),e._uU(23,"ID"),e.qZA(),e.TgZ(24,"td"),e._uU(25,"Test"),e.qZA(),e.TgZ(26,"td"),e._uU(27,"Price"),e.qZA(),e.TgZ(28,"td"),e._uU(29,"Edit Price"),e.qZA(),e.TgZ(30,"td"),e._uU(31,"Action"),e.qZA(),e.TgZ(32,"td"),e._uU(33,"Coverage"),e.qZA()()(),e.TgZ(34,"tbody"),e.YNc(35,x,16,9,"tr",13),e.ALo(36,"searchFilter"),e.qZA()()()()()()()()),2&a&&(e.xp6(10),e.hij("Package: ",n.insurancePlanName,""),e.xp6(7),e.Q6J("ngModel",n.filterRecords),e.xp6(18),e.Q6J("ngForOf",e.xi3(36,3,n.radiologyTypePrices,n.filterRecords)))},dependencies:[g.ez,g.sg,g.O5,g.H9,p.u5,p.Fj,p.JJ,p.On,p.UX,v.G]}),c})()}}]);