"use strict";(self.webpackChunkzana_hmis=self.webpackChunkzana_hmis||[]).push([[3491],{3491:(D,p,o)=>{o.r(p),o.d(p,{DoctorInpatientListComponent:()=>M});var _=o(5861),c=o(6814),d=o(9862),r=o(95),m=o(8237),h=o(4716),Z=o(4185),v=o(553),t=o(6689),A=o(6466),E=o(585),T=o(379);function U(l,u){if(1&l){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td")(14,"a",21),t.NdJ("click",function(){const a=t.CHM(e).$implicit,s=t.oxw();return t.KtG(s.postAdmission(a.id))}),t._uU(15,"Attend"),t.qZA()()()}if(2&l){const e=u.$implicit;t.xp6(2),t.Oqu((null==e||null==e.patient?null:e.patient.firstName)+" "+(null==e||null==e.patient?null:e.patient.middleName)+" "+(null==e||null==e.patient?null:e.patient.lastName)),t.xp6(2),t.Oqu(null==e||null==e.patient?null:e.patient.no),t.xp6(2),t.Oqu(null==e||null==e.patient?null:e.patient.paymentType),t.xp6(2),t.Oqu(null==e||null==e.patient?null:e.patient.gender),t.xp6(2),t.Oqu(null==e||null==e.wardBed||null==e.wardBed.ward?null:e.wardBed.ward.name),t.xp6(2),t.Oqu(null==e||null==e.wardBed?null:e.wardBed.no)}}const g=v.N.apiUrl;let M=(()=>{var l;class u{constructor(n,i,a,s,f){this.auth=n,this.http=i,this.spinner=a,this.router=s,this.msgBox=f,this.admissions=[],this.filterRecords="",this.clinicianId=null}ngOnInit(){var n=this;return(0,_.Z)(function*(){yield n.loadClinician(),null!=n.clinicianId?n.loadInpatientList():n.msgBox.showErrorMessage3("User not found in doctors register")})()}loadInpatientList(){var n=this;return(0,_.Z)(function*(){n.admissions=[];let i={headers:(new d.WM).set("Authorization","Bearer "+n.auth.user.access_token)};n.spinner.show(),yield n.http.get(g+"/patients/get_doctor_inpatient_list",i).pipe((0,h.x)(()=>n.spinner.hide())).toPromise().then(a=>{n.admissions=a,console.log(n.admissions)}).catch(a=>{n.msgBox.showErrorMessage(a,"Could not load patients")})})()}loadClinician(){var n=this;return(0,_.Z)(function*(){var i=localStorage.getItem("username");let a={headers:(new d.WM).set("Authorization","Bearer "+n.auth.user.access_token)};n.spinner.show(),yield n.http.get(g+"/clinicians/load_clinician_by_username?username="+i,a).pipe((0,h.x)(()=>n.spinner.hide())).toPromise().then(s=>{n.clinicianId=s}).catch(s=>{n.msgBox.showErrorMessage(s,"Could not load doctor")})})()}postAdmission(n){var i=this;return(0,_.Z)(function*(){localStorage.setItem("admission-id",n),i.router.navigate(["doctor-inpatient"])})()}grant(n){var i=!1;return n.forEach(a=>{this.auth.checkPrivilege(a)&&(i=!0)}),i}}return(l=u).\u0275fac=function(n){return new(n||l)(t.Y36(A.e),t.Y36(d.eN),t.Y36(E.t2),t.Y36(m.F0),t.Y36(T.l))},l.\u0275cmp=t.Xpm({type:l,selectors:[["app-doctor-inpatient-list"]],standalone:!0,features:[t.jDz],decls:53,vars:5,consts:[[1,"content-header"],[1,"header-title"],[1,"content"],[1,"row"],[1,"col-sm-12"],[1,"panel","panel-bd","lobidrag"],[1,"panel-heading"],[1,"btn-group"],["routerLink","/list-from-reception",1,"btn","btn-primary","btn-outline",2,"margin","1px"],[1,"fa","fa-list"],["routerLink","/my-consultation",1,"btn","btn-primary","btn-outline",2,"margin","1px"],["routerLink","/doctor-inpatient-list",1,"btn","btn-primary",2,"margin","1px"],[1,"panel-body"],[1,"col-sm-12",2,"height","100%","overflow","scroll"],[1,"col-sm-4"],["type","text","placeholder","Search...",1,"form-control","pull-right",2,"max-width","8cm",3,"ngModel","ngModelChange"],[1,"table-responsive"],[1,"table","table-bordered","table-hover","text-small"],[1,"success"],[4,"ngFor","ngForOf"],[1,"table","table-bordered","table-hover"],[1,"btn","btn-success",3,"click"]],template:function(n,i){1&n&&(t.TgZ(0,"section",0)(1,"div",1)(2,"h1"),t._uU(3,"Inpatient List"),t.qZA()()(),t.TgZ(4,"section",2)(5,"div",3)(6,"div",4)(7,"div",5)(8,"div",6)(9,"div",7)(10,"a",8),t._UZ(11,"i",9),t._uU(12,"List From Reception"),t.qZA(),t.TgZ(13,"a",10),t._UZ(14,"i",9),t._uU(15,"My Consultations"),t.qZA(),t.TgZ(16,"a",11),t._UZ(17,"i",9),t._uU(18,"Inpatient List"),t.qZA()()(),t.TgZ(19,"div",12)(20,"div",13)(21,"div",3),t._UZ(22,"div",14)(23,"div",14),t.TgZ(24,"div",14)(25,"input",15),t.NdJ("ngModelChange",function(s){return i.filterRecords=s}),t.qZA()()(),t._UZ(26,"br"),t.TgZ(27,"div",16)(28,"table",17)(29,"thead",18)(30,"tr")(31,"th"),t._uU(32,"Name"),t.qZA(),t.TgZ(33,"th"),t._uU(34,"Patient's File No"),t.qZA(),t.TgZ(35,"th"),t._uU(36,"Payment Type"),t.qZA(),t.TgZ(37,"th"),t._uU(38,"Gender"),t.qZA(),t.TgZ(39,"th"),t._uU(40,"Ward"),t.qZA(),t.TgZ(41,"th"),t._uU(42,"Bed/Room"),t.qZA(),t.TgZ(43,"th"),t._uU(44,"Action"),t.qZA()()(),t.TgZ(45,"tbody"),t.YNc(46,U,16,6,"tr",19),t.ALo(47,"searchFilter"),t.qZA()()()()(),t.TgZ(48,"div",16)(49,"table",20)(50,"thead",18),t._UZ(51,"tr"),t.qZA(),t._UZ(52,"tbody"),t.qZA()()()()()()),2&n&&(t.xp6(25),t.Q6J("ngModel",i.filterRecords),t.xp6(21),t.Q6J("ngForOf",t.xi3(47,2,i.admissions,i.filterRecords)))},dependencies:[c.ez,c.sg,r.u5,r.Fj,r.JJ,r.On,r.UX,Z.G,m.rH]}),u})()}}]);