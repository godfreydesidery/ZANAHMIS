"use strict";(self.webpackChunkzana_hmis=self.webpackChunkzana_hmis||[]).push([[4970],{4970:(U,h,i)=>{i.r(h),i.d(h,{WardCategoryComponent:()=>E});var p=i(5861),u=i(6814),g=i(9862),l=i(95),c=i(4716),m=i(4185),C=i(553),e=i(6689),Z=i(6466),f=i(585),y=i(379);function v(r,d){if(1&r){const s=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td")(8,"a",30),e.NdJ("click",function(){const a=e.CHM(s).$implicit,n=e.oxw();return e.KtG(n.getWardCategory(a.id))}),e._UZ(9,"i",31),e._uU(10,"Edit"),e.qZA()()()}if(2&r){const s=d.$implicit;e.xp6(2),e.Oqu(s.code),e.xp6(2),e.Oqu(s.name),e.xp6(2),e.Oqu(s.description)}}function M(r,d){1&r&&(e.TgZ(0,"h1",32),e._uU(1,"Add Ward Category"),e.qZA())}function T(r,d){1&r&&(e.TgZ(0,"h1",32),e._uU(1,"Edit Ward Category"),e.qZA())}function W(r,d){1&r&&(e.TgZ(0,"span"),e._uU(1,"Update"),e.qZA())}function A(r,d){1&r&&(e.TgZ(0,"span"),e._uU(1,"Add"),e.qZA())}const _=C.N.apiUrl;let E=(()=>{var r;class d{constructor(t,o,a,n){this.auth=t,this.http=o,this.spinner=a,this.msgBox=n,this.code="",this.name="",this.description="",this.active=!0,this.wardCategories=[],this.filterRecords=""}ngOnInit(){this.loadWardCategories()}saveWardCategory(){var t=this;return(0,p.Z)(function*(){let o={headers:(new g.WM).set("Authorization","Bearer "+t.auth.user.access_token)};var a={id:t.id,code:t.code,name:t.name,description:t.description,active:!0};null==t.id||""==t.id?(t.spinner.show(),yield t.http.post(_+"/ward_categories/save",a,o).pipe((0,c.x)(()=>t.spinner.hide())).toPromise().then(n=>{t.id=n?.id,t.code=n.code,t.name=n.name,t.description=n.description,t.msgBox.showSuccessMessage("Ward category created successifully"),t.loadWardCategories(),t.clear()}).catch(n=>{t.msgBox.showErrorMessage(n,"")})):(t.spinner.show(),yield t.http.post(_+"/ward_categories/save",a,o).pipe((0,c.x)(()=>t.spinner.hide())).toPromise().then(n=>{t.id=n?.id,t.code=n.code,t.name=n.name,t.description=n.description,t.msgBox.showSuccessMessage("Ward category updated successifully"),t.loadWardCategories()}).catch(n=>{t.msgBox.showErrorMessage(n,"")}))})()}loadWardCategories(){var t=this;return(0,p.Z)(function*(){t.wardCategories=[];let o={headers:(new g.WM).set("Authorization","Bearer "+t.auth.user.access_token)};t.spinner.show(),yield t.http.get(_+"/ward_categories",o).pipe((0,c.x)(()=>t.spinner.hide())).toPromise().then(a=>{a?.forEach(n=>{t.wardCategories.push(n)})}).catch(a=>{t.msgBox.showErrorMessage(a,"Could not load ward categories")})})()}clear(){this.id=null,this.code="",this.name="",this.description=""}getWardCategory(t){var o=this;return(0,p.Z)(function*(){if(""==t)return;let a={headers:(new g.WM).set("Authorization","Bearer "+o.auth.user.access_token)};o.spinner.show(),yield o.http.get(_+"/ward_categories/get?id="+t,a).pipe((0,c.x)(()=>o.spinner.hide())).toPromise().then(n=>{o.id=n?.id,o.code=n.code,o.name=n.name,o.description=n.description}).catch(n=>{console.log(n),o.msgBox.showErrorMessage(n,"Could not find ward category")})})()}grant(t){var o=!1;return t.forEach(a=>{this.auth.checkPrivilege(a)&&(o=!0)}),o}}return(r=d).\u0275fac=function(t){return new(t||r)(e.Y36(Z.e),e.Y36(g.eN),e.Y36(f.t2),e.Y36(y.l))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-ward-category"]],standalone:!0,features:[e.jDz],decls:66,vars:13,consts:[[1,"content-header"],[1,"header-title"],[1,"content"],[1,"row"],[1,"col-sm-12"],[1,"panel","panel-bd","lobidrag"],[1,"panel-heading"],[1,"btn"],["type","button","data-toggle","modal","data-target","#add-edit-modal",1,"btn","btn-success","m-r-2","m-b-5",3,"click"],[1,"panel-body"],[1,"col-sm-12",2,"height","100%","overflow","scroll"],[1,"col-sm-4"],["type","text","placeholder","Search...",1,"form-control","pull-right",2,"max-width","8cm",3,"ngModel","ngModelChange"],[1,"table","table-bordered","table-small"],[4,"ngFor","ngForOf"],["id","add-edit-modal","tabindex","-1","role","dialog",1,"modal","fade","modal-success"],["role","document",1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],["class","modal-title",4,"ngIf"],[1,"modal-body"],["type","hidden",3,"ngModel","ngModelChange"],[1,"col-xs-12"],["type","text",1,"form-control",3,"ngModel","ngModelChange"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-danger"],["type","button","data-dismiss","modal",1,"btn","btn-success",3,"click"],[4,"ngIf"],["data-toggle","modal","data-target","#add-edit-modal",3,"click"],[1,"glyphicon","glyphicon-pencil"],[1,"modal-title"]],template:function(t,o){1&t&&(e.TgZ(0,"section",0)(1,"div",1)(2,"h1"),e._uU(3,"Ward Category Register"),e.qZA()()(),e.TgZ(4,"section",2)(5,"div",3)(6,"div",4)(7,"div",5)(8,"div",6)(9,"div",7)(10,"button",8),e.NdJ("click",function(){return o.clear()}),e._uU(11,"New WardCategory"),e.qZA()()(),e.TgZ(12,"div",9)(13,"div",10)(14,"div",3),e._UZ(15,"div",11)(16,"div",11),e.TgZ(17,"div",11)(18,"input",12),e.NdJ("ngModelChange",function(n){return o.filterRecords=n}),e.qZA()()(),e._UZ(19,"br"),e.TgZ(20,"table",13)(21,"thead")(22,"tr")(23,"td"),e._uU(24,"Code"),e.qZA(),e.TgZ(25,"td"),e._uU(26,"Name"),e.qZA(),e.TgZ(27,"td"),e._uU(28,"Description"),e.qZA(),e.TgZ(29,"td"),e._uU(30,"Action"),e.qZA()()(),e.TgZ(31,"tbody"),e.YNc(32,v,11,3,"tr",14),e.ALo(33,"searchFilter"),e.qZA()()()()()()()(),e.TgZ(34,"div",15)(35,"div",16)(36,"div",17)(37,"div",18)(38,"button",19)(39,"span",20),e._uU(40,"\xd7"),e.qZA()(),e.YNc(41,M,2,0,"h1",21),e.YNc(42,T,2,0,"h1",21),e.qZA(),e.TgZ(43,"div",22)(44,"div",3)(45,"input",23),e.NdJ("ngModelChange",function(n){return o.id=n}),e.qZA(),e.TgZ(46,"div",24)(47,"label"),e._uU(48,"Ward Category Code*"),e.qZA(),e.TgZ(49,"input",25),e.NdJ("ngModelChange",function(n){return o.code=n}),e.qZA()()(),e.TgZ(50,"div",3)(51,"div",24)(52,"label"),e._uU(53,"Ward Category Name*"),e.qZA(),e.TgZ(54,"input",25),e.NdJ("ngModelChange",function(n){return o.name=n}),e.qZA()()(),e.TgZ(55,"div",3)(56,"div",24)(57,"label"),e._uU(58,"Description"),e.qZA(),e.TgZ(59,"input",25),e.NdJ("ngModelChange",function(n){return o.description=n}),e.qZA()()()(),e.TgZ(60,"div",26)(61,"button",27),e._uU(62,"Close"),e.qZA(),e.TgZ(63,"button",28),e.NdJ("click",function(){return o.saveWardCategory()}),e.YNc(64,W,2,0,"span",29),e.YNc(65,A,2,0,"span",29),e.qZA()()()()()),2&t&&(e.xp6(18),e.Q6J("ngModel",o.filterRecords),e.xp6(14),e.Q6J("ngForOf",e.xi3(33,10,o.wardCategories,o.filterRecords)),e.xp6(9),e.Q6J("ngIf",null===o.id),e.xp6(1),e.Q6J("ngIf",null!=o.id),e.xp6(3),e.Q6J("ngModel",o.id),e.xp6(4),e.Q6J("ngModel",o.code),e.xp6(5),e.Q6J("ngModel",o.name),e.xp6(5),e.Q6J("ngModel",o.description),e.xp6(5),e.Q6J("ngIf",null!=o.id),e.xp6(1),e.Q6J("ngIf",null===o.id))},dependencies:[u.ez,u.sg,u.O5,l.u5,l.Fj,l.JJ,l.On,l.UX,m.G]}),d})()}}]);