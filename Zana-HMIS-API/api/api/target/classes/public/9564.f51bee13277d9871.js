"use strict";(self.webpackChunkzana_hmis=self.webpackChunkzana_hmis||[]).push([[9564],{9564:(C,l,a)=>{a.r(l),a.d(l,{PharmacyOutpatientListComponent:()=>A});var c=a(5861),m=a(6814),h=a(9862),_=a(95),u=a(8237),d=a(4716),O=a(4185),E=a(553),t=a(6689),P=a(6466),v=a(7140),Z=a(585),M=a(379);function y(o,p){if(1&o){const r=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td")(10,"a",17),t.NdJ("click",function(){const s=t.CHM(r).$implicit,i=t.oxw();return t.KtG(i.attend(s.id))}),t._uU(11,"Attend"),t.qZA()()()}if(2&o){const r=p.$implicit;t.xp6(2),t.Oqu(r.firstName+" "+r.middleName+" "+r.lastName),t.xp6(2),t.Oqu(r.no),t.xp6(2),t.Oqu(r.paymentType),t.xp6(2),t.Oqu(r.gender)}}const g=E.N.apiUrl;let A=(()=>{var o;class p{constructor(e,n,s,i,T,U){this.auth=e,this.http=n,this.modalService=s,this.spinner=i,this.router=T,this.msgBox=U,this.patients=[],this.pharmacyName=localStorage.getItem("selected-pharmacy-name"),this.filterRecords=""}ngOnInit(){var e=this;return(0,c.Z)(function*(){yield e.loadPharmacist(),yield e.loadOutpatientList()})()}loadPharmacist(){var e=this;return(0,c.Z)(function*(){var n=localStorage.getItem("username");let s={headers:(new h.WM).set("Authorization","Bearer "+e.auth.user.access_token)};e.spinner.show(),yield e.http.get(g+"/pharmacists/load_pharmacist_by_username?username="+n,s).pipe((0,d.x)(()=>e.spinner.hide())).toPromise().then(i=>{e.pharmacistId=i}).catch(i=>{e.msgBox.showErrorMessage(i,"Could not load pharmacist")})})()}loadOutpatientList(){var e=this;return(0,c.Z)(function*(){let n={headers:(new h.WM).set("Authorization","Bearer "+e.auth.user.access_token)};e.spinner.show(),yield e.http.get(g+"/patients/get_pharmacy_outpatient_list",n).pipe((0,d.x)(()=>e.spinner.hide())).toPromise().then(s=>{console.log(s),s?.forEach(i=>{e.patients.push(i)})}).catch(s=>{e.msgBox.showErrorMessage(s,""),console.log(s)})})()}attend(e){localStorage.setItem("pharmacy-patient-id",e),this.router.navigate(["patient-pharmacy"])}grant(e){var n=!1;return e.forEach(s=>{this.auth.checkPrivilege(s)&&(n=!0)}),n}}return(o=p).\u0275fac=function(e){return new(e||o)(t.Y36(P.e),t.Y36(h.eN),t.Y36(v.FF),t.Y36(Z.t2),t.Y36(u.F0),t.Y36(M.l))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-pharmacy-outpatient-list"]],standalone:!0,features:[t.jDz],decls:40,vars:6,consts:[[1,"content-header"],[1,"header-title"],[1,"text-primary"],[1,"content"],[1,"row"],[1,"col-sm-12"],[1,"panel","panel-bd","lobidrag"],[1,"panel-heading"],["routerLink","/pharmacy-outpatient-list",1,"btn","btn-primary"],["routerLink","/pharmacy-inpatient-list",1,"btn","btn-primary","btn-outline"],[1,"panel-body"],[1,"col-sm-4"],["type","text","placeholder","Search...",1,"form-control","pull-right",2,"max-width","8cm",3,"ngModel","ngModelChange"],[1,"table-responsive"],[1,"table","table-bordered","table-hover"],[1,"success"],[4,"ngFor","ngForOf"],[1,"btn","btn-success",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"section",0)(1,"div",1)(2,"h1"),t._uU(3,"Pharmacy - Outpatient List ("),t.TgZ(4,"span",2),t._uU(5),t.qZA(),t._uU(6,")"),t.qZA()()(),t.TgZ(7,"section",3)(8,"div",4)(9,"div",5)(10,"div",6)(11,"div",7)(12,"button",8),t._uU(13,"Outpatient List"),t.qZA(),t.TgZ(14,"button",9),t._uU(15,"Inpatient List"),t.qZA()(),t.TgZ(16,"div",10)(17,"div",4),t._UZ(18,"div",11)(19,"div",11),t.TgZ(20,"div",11)(21,"input",12),t.NdJ("ngModelChange",function(i){return n.filterRecords=i}),t.qZA()()(),t._UZ(22,"br"),t.TgZ(23,"div",13)(24,"table",14)(25,"thead",15)(26,"tr")(27,"th"),t._uU(28,"Name"),t.qZA(),t.TgZ(29,"th"),t._uU(30,"Patient's File No"),t.qZA(),t.TgZ(31,"th"),t._uU(32,"Payment Type"),t.qZA(),t.TgZ(33,"th"),t._uU(34,"Gender"),t.qZA(),t.TgZ(35,"th"),t._uU(36,"Action"),t.qZA()()(),t.TgZ(37,"tbody"),t.YNc(38,y,12,4,"tr",16),t.ALo(39,"searchFilter"),t.qZA()()()()()()()()),2&e&&(t.xp6(5),t.Oqu(n.pharmacyName),t.xp6(16),t.Q6J("ngModel",n.filterRecords),t.xp6(17),t.Q6J("ngForOf",t.xi3(39,3,n.patients,n.filterRecords)))},dependencies:[m.ez,m.sg,_.u5,_.Fj,_.JJ,_.On,_.UX,O.G,u.rH]}),p})()}}]);