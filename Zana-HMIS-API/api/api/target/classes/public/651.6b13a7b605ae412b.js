"use strict";(self.webpackChunkzana_hmis=self.webpackChunkzana_hmis||[]).push([[651],{651:(f,l,i)=>{i.r(l),i.d(l,{PatientPaymentComponent:()=>E});var _=i(5861),h=i(6814),m=i(9862),p=i(95),c=i(4716),P=i(553),e=i(6689),N=i(6466),u=i(7140),y=i(585);function g(a,r){1&a&&(e.TgZ(0,"div")(1,"div",3)(2,"div",9)(3,"div",3)(4,"div",4)(5,"label"),e._uU(6,"Search Patient"),e.qZA()(),e.TgZ(7,"div",4)(8,"div",3)(9,"div",10),e._UZ(10,"input",11),e.qZA(),e.TgZ(11,"div",12)(12,"button",13),e._uU(13,"Search"),e.qZA()()()()()(),e._UZ(14,"br"),e.qZA(),e._UZ(15,"br"),e.qZA())}const v=P.N.apiUrl;let E=(()=>{var a;class r{constructor(t,s,o,n){this.auth=t,this.http=s,this.modalService=o,this.spinner=n,this.patientRecordMode="",this.insurancePlan="",this.registrationFee=0,this.registrationFeeStatus="",this.cardValidationStatus="",this.filterRecords="",this.id=null,this.no="",this.firstName="",this.middleName="",this.lastName="",this.gender="",this.paymentType="",this.memberShipNo="",this.phoneNo="",this.address="",this.email="",this.nationality="",this.nationalId="",this.passportNo="",this.kinFullName="",this.kinRelationship="",this.kinPhoneNo=""}ngOnInit(){}clear(){this.id=null,this.no="",this.firstName="",this.middleName="",this.lastName="",this.gender="",this.paymentType="",this.memberShipNo="",this.phoneNo="",this.address="",this.email="",this.nationality="",this.nationalId="",this.passportNo="",this.kinFullName="",this.kinRelationship="",this.kinPhoneNo=""}newPatientPrompt(){this.patientRecordMode="new",this.id=null,this.clear()}existingPatientPrompt(){this.patientRecordMode="",this.clear()}changePaymentType(t){this.paymentType=t}searchPatient(t){this.id=1}registerPatient(){var t=this;return(0,_.Z)(function*(){let s={headers:(new m.WM).set("Authorization","Bearer "+t.auth.user.access_token)};var o={id:t.id,no:t.no,firstName:t.firstName,middleName:t.middleName,lastName:t.lastName,gender:t.gender,dateOfBirth:t.dateOfBirth,paymentType:t.paymentType,memberShipNo:t.memberShipNo,phoneNo:t.phoneNo,address:t.address,email:t.email,nationality:t.nationality,nationalId:t.nationalId,passportNo:t.passportNo,kinFullName:t.kinFullName,kinRelationship:t.kinRelationship,kinPhoneNo:t.kinPhoneNo};(null==t.id||""==t.id)&&(""==t.no&&(t.no="NA"),t.spinner.show(),yield t.http.post(v+"/patients/register",o,s).pipe((0,c.x)(()=>t.spinner.hide())).toPromise().then(n=>{alert("Patient Registered successifully. Please note patients File No"),t.id=n.id,t.no=n.no,t.firstName=n.firstName,t.middleName=n.middleName,t.lastName=n.lastName,t.gender=n.gender,t.paymentType=n.paymentType,t.phoneNo=n.phoneNo,t.address=n.address,t.email=n.email,t.nationality=n.nationality,t.nationalId=n.nationalId,t.passportNo=n.passportNo,t.kinFullName=n.kinFullName,t.kinRelationship=n.kinRelationship,t.kinPhoneNo=n.kinPhoneNo,t.patientRecordMode=""}).catch(n=>{console.log(n),alert("Could not register patient")}))})()}grant(t){var s=!1;return t.forEach(o=>{this.auth.checkPrivilege(o)&&(s=!0)}),s}}return(a=r).\u0275fac=function(t){return new(t||a)(e.Y36(N.e),e.Y36(m.eN),e.Y36(u.FF),e.Y36(y.t2))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-patient-payment"]],standalone:!0,features:[e.jDz],decls:11,vars:1,consts:[[1,"content-header"],[1,"header-title"],[1,"content"],[1,"row"],[1,"col-sm-12"],[1,"panel","panel-bd","lobidrag"],[1,"panel-heading"],[1,"panel-body"],[4,"ngIf"],[1,"col-sm-4"],[1,"col-xs-8"],["type","text","placeholder","Search by File#",1,"form-control"],[1,"col-xs-4"],[1,"btn","btn-success","btn-outline"]],template:function(t,s){1&t&&(e.TgZ(0,"section",0)(1,"div",1)(2,"h1"),e._uU(3,"Payments from Patients"),e.qZA()()(),e.TgZ(4,"section",2)(5,"div",3)(6,"div",4)(7,"div",5),e._UZ(8,"div",6),e.TgZ(9,"div",7),e.YNc(10,g,16,0,"div",8),e.qZA()()()()()),2&t&&(e.xp6(10),e.Q6J("ngIf",""===s.patientRecordMode))},dependencies:[h.ez,h.O5,p.u5,p.UX]}),r})()}}]);