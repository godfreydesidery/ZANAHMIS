"use strict";(self.webpackChunkzana_hmis=self.webpackChunkzana_hmis||[]).push([[9644],{9644:(y,f,s)=>{s.r(f),s.d(f,{WardConfigurationComponent:()=>N});var _=s(5861),m=s(6814),u=s(9862),g=s(95),c=s(4716),C=s(4185),Z=s(553),e=s(6689),v=s(6466),b=s(585),w=s(379),T=s(8237);function B(i,l){if(1&i&&(e.TgZ(0,"span",40),e._uU(1),e.qZA()),2&i){const a=e.oxw().$implicit;e.xp6(1),e.Oqu(a.no)}}function M(i,l){if(1&i&&(e.TgZ(0,"span",41),e._uU(1),e.qZA()),2&i){const a=e.oxw().$implicit;e.xp6(1),e.Oqu(a.no)}}function A(i,l){if(1&i&&(e.TgZ(0,"span",40),e._uU(1),e.qZA()),2&i){const a=e.oxw().$implicit;e.xp6(1),e.Oqu(a.status)}}function E(i,l){if(1&i&&(e.TgZ(0,"span",42),e._uU(1),e.qZA()),2&i){const a=e.oxw().$implicit;e.xp6(1),e.Oqu(a.status)}}function x(i,l){1&i&&(e.TgZ(0,"span",40),e._uU(1,"Active"),e.qZA())}function W(i,l){1&i&&(e.TgZ(0,"span",42),e._uU(1,"Inactive"),e.qZA())}function U(i,l){if(1&i){const a=e.EpF();e.TgZ(0,"button",43),e.NdJ("click",function(){e.CHM(a);const t=e.oxw().$implicit,r=e.oxw();return e.KtG(r.activateBed(t.id))}),e._uU(1,"Activate"),e.qZA()}}function O(i,l){if(1&i){const a=e.EpF();e.TgZ(0,"button",43),e.NdJ("click",function(){e.CHM(a);const t=e.oxw().$implicit,r=e.oxw();return e.KtG(r.deactivateBed(t.id))}),e._uU(1,"Deactivate"),e.qZA()}}function I(i,l){if(1&i){const a=e.EpF();e.TgZ(0,"tr")(1,"td",33),e.YNc(2,B,2,1,"span",34),e.YNc(3,M,2,1,"span",35),e.qZA(),e.TgZ(4,"td"),e.YNc(5,A,2,1,"span",34),e.YNc(6,E,2,1,"span",36),e.qZA(),e.TgZ(7,"td"),e.YNc(8,x,2,0,"span",34),e.YNc(9,W,2,0,"span",36),e.qZA(),e.TgZ(10,"td"),e.YNc(11,U,2,0,"button",37),e.YNc(12,O,2,0,"button",37),e.qZA(),e.TgZ(13,"td")(14,"span",38),e.NdJ("click",function(){const r=e.CHM(a).$implicit,n=e.oxw();return e.KtG(n.getWardBed(r.id))}),e._UZ(15,"i",39),e._uU(16,"Edit"),e.qZA()()()}if(2&i){const a=l.$implicit;e.xp6(2),e.Q6J("ngIf",!0===(null==a?null:a.active)),e.xp6(1),e.Q6J("ngIf",!1===(null==a?null:a.active)),e.xp6(2),e.Q6J("ngIf",!0===(null==a?null:a.active)),e.xp6(1),e.Q6J("ngIf",!1===(null==a?null:a.active)),e.xp6(2),e.Q6J("ngIf",!0===(null==a?null:a.active)),e.xp6(1),e.Q6J("ngIf",!1===(null==a?null:a.active)),e.xp6(2),e.Q6J("ngIf",!1===a.active),e.xp6(1),e.Q6J("ngIf",!0===a.active)}}const p=Z.N.apiUrl;let N=(()=>{var i;class l{constructor(o,t,r,n,d){this.auth=o,this.http=t,this.spinner=r,this.msgBox=n,this.router=d,this.id=null,this.bedId=null,this.bedNo="",this.wardBeds=[],this.filterRecords=""}ngOnInit(){var o=this;return(0,_.Z)(function*(){o.id=localStorage.getItem("ward-id"),localStorage.removeItem("ward-id"),yield o.getWard(o.id),yield o.loadWardBeds(o.id)})()}getWard(o){var t=this;return(0,_.Z)(function*(){let r={headers:(new u.WM).set("Authorization","Bearer "+t.auth.user.access_token)};t.spinner.show(),yield t.http.get(p+"/wards/get?id="+o,r).pipe((0,c.x)(()=>t.spinner.hide())).toPromise().then(n=>{t.ward=n}).catch(n=>{console.log(n),t.msgBox.showErrorMessage(n,"")})})()}registerBed(o){var t=this;return(0,_.Z)(function*(){let r={headers:(new u.WM).set("Authorization","Bearer "+t.auth.user.access_token)};var n={no:o,ward:{id:t.id}};t.spinner.show(),yield t.http.post(p+"/wards/register_bed",n,r).pipe((0,c.x)(()=>t.spinner.hide())).toPromise().then(d=>{t.wardBeds.push(d),t.msgBox.showSuccessMessage("Bed/ Room created scuccessifully"),t.clear()}).catch(d=>{console.log(d),t.msgBox.showErrorMessage(d,""),t.clear()})})()}activateBed(o){var t=this;return(0,_.Z)(function*(){let r={headers:(new u.WM).set("Authorization","Bearer "+t.auth.user.access_token)};var n={id:o};t.spinner.show(),yield t.http.post(p+"/wards/activate_bed",n,r).pipe((0,c.x)(()=>t.spinner.hide())).toPromise().then(d=>{t.wardBeds.forEach(h=>{h.id===d.id&&(h.active=d.active)})}).catch(d=>{console.log(d),t.msgBox.showErrorMessage(d,"")})})()}deactivateBed(o){var t=this;return(0,_.Z)(function*(){let r={headers:(new u.WM).set("Authorization","Bearer "+t.auth.user.access_token)};var n={id:o};t.spinner.show(),yield t.http.post(p+"/wards/deactivate_bed",n,r).pipe((0,c.x)(()=>t.spinner.hide())).toPromise().then(d=>{t.wardBeds.forEach(h=>{h.id===d.id&&(h.active=d.active)})}).catch(d=>{console.log(d),t.msgBox.showErrorMessage(d,"")})})()}loadWardBeds(o){var t=this;return(0,_.Z)(function*(){let r={headers:(new u.WM).set("Authorization","Bearer "+t.auth.user.access_token)};t.spinner.show(),yield t.http.get(p+"/wards/get_ward_beds?ward_id="+o,r).pipe((0,c.x)(()=>t.spinner.hide())).toPromise().then(n=>{console.log(n),t.wardBeds=n}).catch(n=>{console.log(n),t.msgBox.showErrorMessage(n,"")})})()}clear(){this.bedNo=""}getWardBed(o){var t=this;return(0,_.Z)(function*(){let r={headers:(new u.WM).set("Authorization","Bearer "+t.auth.user.access_token)};t.spinner.show(),yield t.http.get(p+"/wards/get_ward_bed?bed_id="+o,r).pipe((0,c.x)(()=>t.spinner.hide())).toPromise().then(n=>{t.bedId=n?.id,t.bedNo=n.no}).catch(n=>{console.log(n),t.msgBox.showErrorMessage(n,"Could not find ward bed/room")})})()}updateBed(){var o=this;return(0,_.Z)(function*(){let t={headers:(new u.WM).set("Authorization","Bearer "+o.auth.user.access_token)};var r={id:o.bedId,no:o.bedNo};o.spinner.show(),yield o.http.post(p+"/wards/update_bed",r,t).pipe((0,c.x)(()=>o.spinner.hide())).toPromise().then(n=>{o.wardBeds.forEach(d=>{d.id===n?.id&&(d.no=n.no)})}).catch(n=>{o.msgBox.showErrorMessage(n,"")})})()}}return(i=l).\u0275fac=function(o){return new(o||i)(e.Y36(v.e),e.Y36(u.eN),e.Y36(b.t2),e.Y36(w.l),e.Y36(T.F0))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-ward-configuration"]],standalone:!0,features:[e.jDz],decls:73,vars:12,consts:[[1,"content-header"],[1,"header-title"],[1,"content"],[1,"row"],[1,"col-sm-12"],[1,"panel","panel-bd","lobidrag"],[1,"panel-heading"],[1,"text-primary"],[1,"panel-body"],[1,"col-sm-12",2,"height","100%","overflow","scroll"],[1,"col-sm-3"],["type","text","placeholder","Enter Bed/Room No",1,"form-control",2,"text-align","center",3,"ngModel","ngModelChange"],[1,"col-sm-2"],[1,"btn","btn-primary","btn-outline",3,"click"],[1,"glyphicon","glyphicon-plus-sign"],[1,"col-sm-4"],["type","text","placeholder","Search...",1,"form-control","pull-right",2,"max-width","8cm",3,"ngModel","ngModelChange"],[1,"table","table-bordered","table-small","table-responsive"],[4,"ngFor","ngForOf"],["id","edit-modal","tabindex","-1","role","dialog",1,"modal","fade","modal-success"],["role","document",1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-title"],[1,"modal-body"],["type","hidden",3,"ngModel","ngModelChange"],[1,"col-xs-12"],["type","text",1,"form-control",3,"ngModel","ngModelChange"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-danger"],["type","button","data-dismiss","modal",1,"btn","btn-success",3,"click"],[2,"text-align","center"],["class","label-success label label-default",4,"ngIf"],["class","label-success label label-danger",4,"ngIf"],["class","label-default label label-danger",4,"ngIf"],[3,"click",4,"ngIf"],["data-toggle","modal","data-target","#edit-modal",1,"text-success",3,"click"],[1,"fa","fa-pencil"],[1,"label-success","label","label-default"],[1,"label-success","label","label-danger"],[1,"label-default","label","label-danger"],[3,"click"]],template:function(o,t){1&o&&(e.TgZ(0,"section",0)(1,"div",1)(2,"h1"),e._uU(3,"Ward Configuration"),e.qZA()()(),e.TgZ(4,"section",2)(5,"div",3)(6,"div",4)(7,"div",5)(8,"div",6)(9,"h4",7),e._uU(10,"Ward : "),e.TgZ(11,"b"),e._uU(12),e.qZA(),e._uU(13," Category : "),e.TgZ(14,"b"),e._uU(15),e.qZA(),e._uU(16," Type : "),e.TgZ(17,"b"),e._uU(18),e.qZA(),e._uU(19," Max No of Beds/Rooms : "),e.TgZ(20,"b"),e._uU(21),e.qZA()()(),e.TgZ(22,"div",8)(23,"div",3)(24,"div",9)(25,"div",3)(26,"div",10)(27,"input",11),e.NdJ("ngModelChange",function(n){return t.bedNo=n}),e.qZA()(),e.TgZ(28,"div",12)(29,"button",13),e.NdJ("click",function(){return t.registerBed(t.bedNo)}),e._UZ(30,"i",14),e._uU(31," Add"),e.qZA()(),e._UZ(32,"div",10),e.TgZ(33,"div",15)(34,"input",16),e.NdJ("ngModelChange",function(n){return t.filterRecords=n}),e.qZA()()(),e._UZ(35,"br"),e.TgZ(36,"table",17)(37,"thead")(38,"tr")(39,"td"),e._uU(40,"Bed/Room No"),e.qZA(),e.TgZ(41,"td"),e._uU(42,"Occupied Status"),e.qZA(),e.TgZ(43,"td"),e._uU(44,"Active Status"),e.qZA(),e.TgZ(45,"td"),e._uU(46,"Activate"),e.qZA(),e.TgZ(47,"td"),e._uU(48,"Action"),e.qZA()()(),e.TgZ(49,"tbody"),e.YNc(50,I,17,8,"tr",18),e.ALo(51,"searchFilter"),e.qZA()()()()()()()()(),e.TgZ(52,"div",19)(53,"div",20)(54,"div",21)(55,"div",22)(56,"button",23)(57,"span",24),e._uU(58,"\xd7"),e.qZA()(),e.TgZ(59,"h1",25),e._uU(60,"Edit Bed/Room No"),e.qZA()(),e.TgZ(61,"div",26)(62,"div",3)(63,"input",27),e.NdJ("ngModelChange",function(n){return t.bedId=n}),e.qZA(),e.TgZ(64,"div",28)(65,"label"),e._uU(66,"Bed/Room No*"),e.qZA(),e.TgZ(67,"input",29),e.NdJ("ngModelChange",function(n){return t.bedNo=n}),e.qZA()()()(),e.TgZ(68,"div",30)(69,"button",31),e._uU(70,"Close"),e.qZA(),e.TgZ(71,"button",32),e.NdJ("click",function(){return t.updateBed()}),e._uU(72,"Update"),e.qZA()()()()()),2&o&&(e.xp6(12),e.Oqu(null==t.ward?null:t.ward.name),e.xp6(3),e.Oqu(null==t.ward||null==t.ward.wardCategory?null:t.ward.wardCategory.name),e.xp6(3),e.Oqu(null==t.ward||null==t.ward.wardType?null:t.ward.wardType.name),e.xp6(3),e.Oqu(null==t.ward?null:t.ward.noOfBeds),e.xp6(6),e.Q6J("ngModel",t.bedNo),e.xp6(7),e.Q6J("ngModel",t.filterRecords),e.xp6(16),e.Q6J("ngForOf",e.xi3(51,9,t.wardBeds,t.filterRecords)),e.xp6(13),e.Q6J("ngModel",t.bedId),e.xp6(4),e.Q6J("ngModel",t.bedNo))},dependencies:[m.ez,m.sg,m.O5,g.u5,g.Fj,g.JJ,g.On,g.UX,C.G]}),l})()}}]);