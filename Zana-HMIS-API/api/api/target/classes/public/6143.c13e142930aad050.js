(self.webpackChunkzana_hmis=self.webpackChunkzana_hmis||[]).push([[6143],{6143:(Z,r,x)=>{"use strict";x.r(r),x.d(r,{LabTestComponent:()=>re});var a=x(5861),v=x(6814),F=x(9862),O=x(95),Q=x(4716),M=x(4512),C=x(553);function G(K){return(G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(ce){return typeof ce}:function(ce){return ce&&"function"==typeof Symbol&&ce.constructor===Symbol&&ce!==Symbol.prototype?"symbol":typeof ce})(K)}function y(K,ce,de){return(ce=function W(K){var ce=function q(K,ce){if("object"!==G(K)||null===K)return K;var de=K[Symbol.toPrimitive];if(void 0!==de){var z=de.call(K,ce||"default");if("object"!==G(z))return z;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===ce?String:Number)(K)}(K,"string");return"symbol"===G(ce)?ce:String(ce)}(ce))in K?Object.defineProperty(K,ce,{value:de,enumerable:!0,configurable:!0,writable:!0}):K[ce]=de,K}var t=x(6689),s=x(2438),_=x(8645),P=x(7715),p=x(9773),A=x(4352),u=x(9360),i=x(8251),o=x(2181),m=x(9627),S=x.t(m,2),f=x(1016),c=x.t(f,2);const b=["pdfViewerContainer"];function H(K,ce,de){K[ce]=de}function B(){return typeof window>"u"}B()||H(S,"verbosity",m.VerbosityLevel.INFOS);var U=function(K){return K[K.DISABLED=0]="DISABLED",K[K.ENABLED=1]="ENABLED",K[K.ENHANCED=2]="ENHANCED",K}(U||{});let j=(()=>{var K;class ce{set cMapsUrl(z){this._cMapsUrl=z}set page(z){const I=z=parseInt(z,10)||1;this._pdf&&(z=this.getValidPageNumber(z)),this._page=z,I!==z&&this.pageChange.emit(z)}set renderText(z){this._renderText=z}set renderTextMode(z){this._renderTextMode=z}set originalSize(z){this._originalSize=z}set showAll(z){this._showAll=z}set stickToPage(z){this._stickToPage=z}set zoom(z){z<=0||(this._zoom=z)}get zoom(){return this._zoom}set zoomScale(z){this._zoomScale=z}get zoomScale(){return this._zoomScale}set rotation(z){"number"==typeof z&&z%90==0?this._rotation=z:console.warn("Invalid pages rotation angle.")}set externalLinkTarget(z){this._externalLinkTarget=z}set autoresize(z){this._canAutoResize=!!z}set fitToPage(z){this._fitToPage=!!z}set showBorders(z){this._showBorders=!!z}static getLinkTarget(z){switch(z){case"blank":return f.LinkTarget.BLANK;case"none":return f.LinkTarget.NONE;case"self":return f.LinkTarget.SELF;case"parent":return f.LinkTarget.PARENT;case"top":return f.LinkTarget.TOP}return null}constructor(z,I){if(y(this,"element",void 0),y(this,"ngZone",void 0),y(this,"pdfViewerContainer",void 0),y(this,"eventBus",void 0),y(this,"pdfLinkService",void 0),y(this,"pdfFindController",void 0),y(this,"pdfViewer",void 0),y(this,"isVisible",!1),y(this,"_cMapsUrl",typeof S<"u"?`https://unpkg.com/pdfjs-dist@${m.version}/cmaps/`:null),y(this,"_imageResourcesPath",typeof S<"u"?`https://unpkg.com/pdfjs-dist@${m.version}/web/images/`:void 0),y(this,"_renderText",!0),y(this,"_renderTextMode",U.ENABLED),y(this,"_stickToPage",!1),y(this,"_originalSize",!0),y(this,"_pdf",void 0),y(this,"_page",1),y(this,"_zoom",1),y(this,"_zoomScale","page-width"),y(this,"_rotation",0),y(this,"_showAll",!0),y(this,"_canAutoResize",!0),y(this,"_fitToPage",!1),y(this,"_externalLinkTarget","blank"),y(this,"_showBorders",!1),y(this,"lastLoaded",void 0),y(this,"_latestScrolledPage",void 0),y(this,"resizeTimeout",null),y(this,"pageScrollTimeout",null),y(this,"isInitialized",!1),y(this,"loadingTask",void 0),y(this,"destroy$",new _.x),y(this,"afterLoadComplete",new t.vpe),y(this,"pageRendered",new t.vpe),y(this,"pageInitialized",new t.vpe),y(this,"textLayerRendered",new t.vpe),y(this,"onError",new t.vpe),y(this,"onProgress",new t.vpe),y(this,"pageChange",new t.vpe(!0)),y(this,"src",void 0),this.element=z,this.ngZone=I,B())return;let ae;const Se=m.version;ae=window[`pdfWorkerSrc${Se}`]||(window.hasOwnProperty("pdfWorkerSrc")&&"string"==typeof window.pdfWorkerSrc&&window.pdfWorkerSrc?window.pdfWorkerSrc:`https://cdn.jsdelivr.net/npm/pdfjs-dist@${Se}/legacy/build/pdf.worker.min.js`),H(m.GlobalWorkerOptions,"workerSrc",ae)}ngAfterViewChecked(){if(this.isInitialized)return;const z=this.pdfViewerContainer.nativeElement.offsetParent;!0!==this.isVisible||null!=z?!1===this.isVisible&&null!=z&&(this.isVisible=!0,setTimeout(()=>{this.initialize(),this.ngOnChanges({src:this.src})})):this.isVisible=!1}ngOnInit(){this.initialize(),this.setupResizeListener()}ngOnDestroy(){this.clear(),this.destroy$.next(),this.loadingTask=null}ngOnChanges(z){if(!B()&&this.isVisible)if("src"in z)this.loadPDF();else if(this._pdf){if("renderText"in z?(this.pdfViewer.textLayerMode=this._renderText?this._renderTextMode:U.DISABLED,this.resetPdfDocument()):"showAll"in z&&(this.setupViewer(),this.resetPdfDocument()),"page"in z){const{page:I}=z;if(I.currentValue===this._latestScrolledPage)return;this.pdfViewer.scrollPageIntoView({pageNumber:this._page})}this.update()}}updateSize(){(0,P.D)(this._pdf.getPage(this.pdfViewer.currentPageNumber)).pipe((0,p.R)(this.destroy$)).subscribe({next:z=>{const I=this._rotation+z.rotate,ae=z.getViewport({scale:this._zoom,rotation:I}).width*ce.CSS_UNITS;let Se=this._zoom,ye=!0;if(!this._originalSize||this._fitToPage&&ae>this.pdfViewerContainer.nativeElement.clientWidth){const xe=z.getViewport({scale:1,rotation:I});Se=this.getScale(xe.width,xe.height),ye=!this._stickToPage}this.pdfViewer._setScale(Se,ye)}})}clear(){this.loadingTask&&!this.loadingTask.destroyed&&this.loadingTask.destroy(),this._pdf&&(this._latestScrolledPage=0,this._pdf.destroy(),this._pdf=void 0),this.pdfViewer&&this.pdfViewer.setDocument(null),this.pdfLinkService&&this.pdfLinkService.setDocument(null,null),this.pdfFindController&&this.pdfFindController.setDocument(null)}getPDFLinkServiceConfig(){const z=ce.getLinkTarget(this._externalLinkTarget);return z?{externalLinkTarget:z}:{}}initEventBus(){this.eventBus=function N(K,ce){const de=new K.EventBus;return function R(K,ce){(0,s.R)(K,"documentload").pipe((0,p.R)(ce)).subscribe(()=>{const de=document.createEvent("CustomEvent");de.initCustomEvent("documentload",!0,!0,{}),window.dispatchEvent(de)}),(0,s.R)(K,"pagerendered").pipe((0,p.R)(ce)).subscribe(({pageNumber:de,cssTransform:z,source:I})=>{const ae=document.createEvent("CustomEvent");ae.initCustomEvent("pagerendered",!0,!0,{pageNumber:de,cssTransform:z}),I.div.dispatchEvent(ae)}),(0,s.R)(K,"textlayerrendered").pipe((0,p.R)(ce)).subscribe(({pageNumber:de,source:z})=>{const I=document.createEvent("CustomEvent");I.initCustomEvent("textlayerrendered",!0,!0,{pageNumber:de}),z.textLayerDiv.dispatchEvent(I)}),(0,s.R)(K,"pagechanging").pipe((0,p.R)(ce)).subscribe(({pageNumber:de,source:z})=>{const I=document.createEvent("UIEvents");I.initEvent("pagechanging",!0,!0),I.pageNumber=de,z.container.dispatchEvent(I)}),(0,s.R)(K,"pagesinit").pipe((0,p.R)(ce)).subscribe(({source:de})=>{const z=document.createEvent("CustomEvent");z.initCustomEvent("pagesinit",!0,!0,null),de.container.dispatchEvent(z)}),(0,s.R)(K,"pagesloaded").pipe((0,p.R)(ce)).subscribe(({pagesCount:de,source:z})=>{const I=document.createEvent("CustomEvent");I.initCustomEvent("pagesloaded",!0,!0,{pagesCount:de}),z.container.dispatchEvent(I)}),(0,s.R)(K,"scalechange").pipe((0,p.R)(ce)).subscribe(({scale:de,presetValue:z,source:I})=>{const ae=document.createEvent("UIEvents");ae.initEvent("scalechange",!0,!0),ae.scale=de,ae.presetValue=z,I.container.dispatchEvent(ae)}),(0,s.R)(K,"updateviewarea").pipe((0,p.R)(ce)).subscribe(({location:de,source:z})=>{const I=document.createEvent("UIEvents");I.initEvent("updateviewarea",!0,!0),I.location=de,z.container.dispatchEvent(I)}),(0,s.R)(K,"find").pipe((0,p.R)(ce)).subscribe(({source:de,type:z,query:I,phraseSearch:ae,caseSensitive:Se,highlightAll:ye,findPrevious:xe})=>{if(de===window)return;const D=document.createEvent("CustomEvent");D.initCustomEvent("find"+z,!0,!0,{query:I,phraseSearch:ae,caseSensitive:Se,highlightAll:ye,findPrevious:xe}),window.dispatchEvent(D)}),(0,s.R)(K,"attachmentsloaded").pipe((0,p.R)(ce)).subscribe(({attachmentsCount:de,source:z})=>{const I=document.createEvent("CustomEvent");I.initCustomEvent("attachmentsloaded",!0,!0,{attachmentsCount:de}),z.container.dispatchEvent(I)}),(0,s.R)(K,"sidebarviewchanged").pipe((0,p.R)(ce)).subscribe(({view:de,source:z})=>{const I=document.createEvent("CustomEvent");I.initCustomEvent("sidebarviewchanged",!0,!0,{view:de}),z.outerContainer.dispatchEvent(I)}),(0,s.R)(K,"pagemode").pipe((0,p.R)(ce)).subscribe(({mode:de,source:z})=>{const I=document.createEvent("CustomEvent");I.initCustomEvent("pagemode",!0,!0,{mode:de}),z.pdfViewer.container.dispatchEvent(I)}),(0,s.R)(K,"namedaction").pipe((0,p.R)(ce)).subscribe(({action:de,source:z})=>{const I=document.createEvent("CustomEvent");I.initCustomEvent("namedaction",!0,!0,{action:de}),z.pdfViewer.container.dispatchEvent(I)}),(0,s.R)(K,"presentationmodechanged").pipe((0,p.R)(ce)).subscribe(({active:de,switchInProgress:z})=>{const I=document.createEvent("CustomEvent");I.initCustomEvent("presentationmodechanged",!0,!0,{active:de,switchInProgress:z}),window.dispatchEvent(I)}),(0,s.R)(K,"outlineloaded").pipe((0,p.R)(ce)).subscribe(({outlineCount:de,source:z})=>{const I=document.createEvent("CustomEvent");I.initCustomEvent("outlineloaded",!0,!0,{outlineCount:de}),z.container.dispatchEvent(I)})}(de,ce),de}(c,this.destroy$),(0,s.R)(this.eventBus,"pagerendered").pipe((0,p.R)(this.destroy$)).subscribe(z=>{this.pageRendered.emit(z)}),(0,s.R)(this.eventBus,"pagesinit").pipe((0,p.R)(this.destroy$)).subscribe(z=>{this.pageInitialized.emit(z)}),(0,s.R)(this.eventBus,"pagechanging").pipe((0,p.R)(this.destroy$)).subscribe(({pageNumber:z})=>{this.pageScrollTimeout&&clearTimeout(this.pageScrollTimeout),this.pageScrollTimeout=window.setTimeout(()=>{this._latestScrolledPage=z,this.pageChange.emit(z)},100)}),(0,s.R)(this.eventBus,"textlayerrendered").pipe((0,p.R)(this.destroy$)).subscribe(z=>{this.textLayerRendered.emit(z)})}initPDFServices(){this.pdfLinkService=new f.PDFLinkService({eventBus:this.eventBus,...this.getPDFLinkServiceConfig()}),this.pdfFindController=new f.PDFFindController({eventBus:this.eventBus,linkService:this.pdfLinkService})}getPDFOptions(){return{eventBus:this.eventBus,container:this.element.nativeElement.querySelector("div"),removePageBorders:!this._showBorders,linkService:this.pdfLinkService,textLayerMode:this._renderText?this._renderTextMode:U.DISABLED,findController:this.pdfFindController,l10n:new f.GenericL10n("en"),imageResourcesPath:this._imageResourcesPath}}setupViewer(){H(S,"disableTextLayer",!this._renderText),this.initPDFServices(),this.pdfViewer=this._showAll?new f.PDFViewer(this.getPDFOptions()):new f.PDFSinglePageViewer(this.getPDFOptions()),this.pdfLinkService.setViewer(this.pdfViewer),this.pdfViewer._currentPageNumber=this._page}getValidPageNumber(z){return z<1?1:z>this._pdf.numPages?this._pdf.numPages:z}getDocumentParams(){const z=typeof this.src;if(!this._cMapsUrl)return this.src;const I={cMapUrl:this._cMapsUrl,cMapPacked:!0,enableXfa:!0};return"string"===z?I.url=this.src:"object"===z&&(void 0!==this.src.byteLength?I.data=this.src:Object.assign(I,this.src)),I}loadPDF(){if(!this.src)return;if(this.lastLoaded===this.src)return void this.update();this.clear(),this.setupViewer(),this.loadingTask=m.getDocument(this.getDocumentParams()),this.loadingTask.onProgress=I=>{this.onProgress.emit(I)};const z=this.src;(0,P.D)(this.loadingTask.promise).pipe((0,p.R)(this.destroy$)).subscribe({next:I=>{this._pdf=I,this.lastLoaded=z,this.afterLoadComplete.emit(I),this.resetPdfDocument(),this.update()},error:I=>{this.lastLoaded=null,this.onError.emit(I)}})}update(){this.page=this._page,this.render()}render(){this._page=this.getValidPageNumber(this._page),(0!==this._rotation||this.pdfViewer.pagesRotation!==this._rotation)&&setTimeout(()=>{this.pdfViewer.pagesRotation=this._rotation}),this._stickToPage&&setTimeout(()=>{this.pdfViewer.currentPageNumber=this._page}),this.updateSize()}getScale(z,I){const ae=this._showBorders?2*ce.BORDER_WIDTH:0,Se=this.pdfViewerContainer.nativeElement.clientWidth-ae,ye=this.pdfViewerContainer.nativeElement.clientHeight-ae;if(0===ye||0===I||0===Se||0===z)return 1;let xe=1;switch(this._zoomScale){case"page-fit":xe=Math.min(ye/I,Se/z);break;case"page-height":xe=ye/I;break;default:xe=Se/z}return this._zoom*xe/ce.CSS_UNITS}resetPdfDocument(){this.pdfLinkService.setDocument(this._pdf,null),this.pdfFindController.setDocument(this._pdf),this.pdfViewer.setDocument(this._pdf)}initialize(){B()||!this.isVisible||(this.isInitialized=!0,this.initEventBus(),this.setupViewer())}setupResizeListener(){B()||this.ngZone.runOutsideAngular(()=>{(0,s.R)(window,"resize").pipe(function e(K,ce=A.z){return(0,u.e)((de,z)=>{let I=null,ae=null,Se=null;const ye=()=>{if(I){I.unsubscribe(),I=null;const D=ae;ae=null,z.next(D)}};function xe(){const D=Se+K,ne=ce.now();if(ne<D)return I=this.schedule(void 0,D-ne),void z.add(I);ye()}de.subscribe((0,i.x)(z,D=>{ae=D,Se=ce.now(),I||(I=ce.schedule(xe,K),z.add(I))},()=>{ye(),z.complete()},void 0,()=>{ae=I=null}))})}(100),(0,o.h)(()=>this._canAutoResize&&!!this._pdf),(0,p.R)(this.destroy$)).subscribe(()=>{this.updateSize()})})}}return K=ce,y(ce,"CSS_UNITS",96/72),y(ce,"BORDER_WIDTH",9),y(ce,"\u0275fac",function(z){return new(z||K)(t.Y36(t.SBq),t.Y36(t.R0b))}),y(ce,"\u0275cmp",t.Xpm({type:K,selectors:[["pdf-viewer"]],viewQuery:function(z,I){if(1&z&&t.Gf(b,5),2&z){let ae;t.iGM(ae=t.CRH())&&(I.pdfViewerContainer=ae.first)}},inputs:{src:"src",cMapsUrl:["c-maps-url","cMapsUrl"],page:"page",renderText:["render-text","renderText"],renderTextMode:["render-text-mode","renderTextMode"],originalSize:["original-size","originalSize"],showAll:["show-all","showAll"],stickToPage:["stick-to-page","stickToPage"],zoom:"zoom",zoomScale:["zoom-scale","zoomScale"],rotation:"rotation",externalLinkTarget:["external-link-target","externalLinkTarget"],autoresize:"autoresize",fitToPage:["fit-to-page","fitToPage"],showBorders:["show-borders","showBorders"]},outputs:{afterLoadComplete:"after-load-complete",pageRendered:"page-rendered",pageInitialized:"pages-initialized",textLayerRendered:"text-layer-rendered",onError:"error",onProgress:"on-progress",pageChange:"pageChange"},features:[t.TTD],decls:3,vars:0,consts:[[1,"ng2-pdf-viewer-container"],["pdfViewerContainer",""],[1,"pdfViewer"]],template:function(z,I){1&z&&(t.TgZ(0,"div",0,1),t._UZ(2,"div",2),t.qZA())},styles:['.ng2-pdf-viewer-container[_ngcontent-%COMP%]{overflow-x:auto;position:absolute;height:100%;width:100%;-webkit-overflow-scrolling:touch}[_nghost-%COMP%]{display:block;position:relative}[_nghost-%COMP%]    {--pdfViewer-padding-bottom: 0;--page-margin: 1px auto -8px;--page-border: 9px solid transparent;--spreadHorizontalWrapped-margin-LR: -3.5px;--viewer-container-height: 0;--annotation-unfocused-field-background: url("data:image/svg+xml;charset=UTF-8,<svg width=\'1px\' height=\'1px\' xmlns=\'http://www.w3.org/2000/svg\'><rect width=\'100%\' height=\'100%\' style=\'fill:rgba(0, 54, 255, 0.13);\'/></svg>");--xfa-unfocused-field-background: var( --annotation-unfocused-field-background );--page-border-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAYAAAByUDbMAAAA1ElEQVQ4jbWUWw6EIAxFy2NFs/8NzR4UJhpqLsdi5mOmSSMUOfYWqv3S0gMr4XlYH/64gZa/gN3ANYA7KAXALt4ktoQ5MI9YxqaG8bWmsIysMuT6piSQCa4whZThCu8CM4zP9YJaKci9jicPq3NcBWYoPMGUlhG7ivtkB+gVyFY75wXghOvh8t5mto1Mdim6e+MBqH6XsY+YAwjpq3vGF7weTWQptLEDVCZvPTMl5JZZsdh47FHW6qFMyvLYqjcnmdFfY9Xk/KDOlzCusX2mi/ofM7MPkzBcSp4Q1/wAAAAASUVORK5CYII=) 9 9 repeat;--scale-factor: 1;--focus-outline: solid 2px blue;--hover-outline: dashed 2px blue;--freetext-line-height: 1.35;--freetext-padding: 2px;--editorInk-editing-cursor: pointer}@media screen and (forced-colors: active){[_nghost-%COMP%]    {--pdfViewer-padding-bottom: 9px;--page-margin: 8px auto -1px;--page-border: 1px solid CanvasText;--page-border-image: none;--spreadHorizontalWrapped-margin-LR: 3.5px}}@media (forced-colors: active){[_nghost-%COMP%]    {--focus-outline: solid 3px ButtonText;--hover-outline: dashed 3px ButtonText}}[_nghost-%COMP%]     .textLayer{position:absolute;text-align:initial;inset:0;overflow:hidden;opacity:.2;line-height:1;-webkit-text-size-adjust:none;text-size-adjust:none;forced-color-adjust:none}[_nghost-%COMP%]     .textLayer span, [_nghost-%COMP%]     .textLayer br{color:transparent;position:absolute;white-space:pre;cursor:text;transform-origin:0% 0%}[_nghost-%COMP%]     .textLayer span.markedContent{top:0;height:0}[_nghost-%COMP%]     .textLayer .highlight{margin:-1px;padding:1px;background-color:#b400aa;border-radius:4px}[_nghost-%COMP%]     .textLayer .highlight.appended{position:initial}[_nghost-%COMP%]     .textLayer .highlight.begin{border-radius:4px 0 0 4px}[_nghost-%COMP%]     .textLayer .highlight.end{border-radius:0 4px 4px 0}[_nghost-%COMP%]     .textLayer .highlight.middle{border-radius:0}[_nghost-%COMP%]     .textLayer .highlight.selected{background-color:#006400}[_nghost-%COMP%]     .textLayer ::selection{background:rgb(0,0,255)}[_nghost-%COMP%]     .textLayer br::selection{background:transparent}[_nghost-%COMP%]     .textLayer .endOfContent{display:block;position:absolute;inset:100% 0 0;z-index:-1;cursor:default;-webkit-user-select:none;user-select:none}[_nghost-%COMP%]     .textLayer .endOfContent.active{top:0}@media (forced-colors: active){[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input:required, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea:required, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select:required, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:required, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input:required{outline:1.5px solid selectedItem}}[_nghost-%COMP%]     .annotationLayer{position:absolute;top:0;left:0;pointer-events:none;transform-origin:0 0}[_nghost-%COMP%]     .annotationLayer section{position:absolute;text-align:initial;pointer-events:auto;box-sizing:border-box;transform-origin:0 0}[_nghost-%COMP%]     .annotationLayer .linkAnnotation>a, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.pushButton>a{position:absolute;font-size:1em;top:0;left:0;width:100%;height:100%}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.pushButton>canvas{width:100%;height:100%}[_nghost-%COMP%]     .annotationLayer .linkAnnotation>a:hover, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.pushButton>a:hover{opacity:.2;background:rgb(255,255,0);box-shadow:0 2px 10px #ff0}[_nghost-%COMP%]     .annotationLayer .textAnnotation img{position:absolute;cursor:pointer;width:100%;height:100%}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input{background-image:var(--annotation-unfocused-field-background);border:1px solid transparent;box-sizing:border-box;font:calc(9px * var(--scale-factor)) sans-serif;height:100%;margin:0;vertical-align:top;width:100%}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input:required, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea:required, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select:required, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:required, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input:required{outline:1.5px solid red}[_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select option{padding:0}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input{border-radius:50%}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea{resize:none}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input[disabled], [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea[disabled], [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select[disabled], [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input[disabled], [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input[disabled]{background:none;border:1px solid transparent;cursor:not-allowed}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input:hover, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea:hover, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select:hover, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:hover, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input:hover{border:1px solid rgb(0,0,0)}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input:focus, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea:focus, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select:focus{background:none;border:1px solid transparent}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input :focus, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea :focus, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select :focus, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox :focus, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton :focus{background-image:none;background-color:transparent;outline:auto}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:before, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:after, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input:checked:before{background-color:CanvasText;content:"";display:block;position:absolute}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:before, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:after{height:80%;left:45%;width:1px}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:before{transform:rotate(45deg)}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:after{transform:rotate(-45deg)}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input:checked:before{border-radius:50%;height:50%;left:30%;top:20%;width:50%}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input.comb{font-family:monospace;padding-left:2px;padding-right:0}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input.comb:focus{width:103%}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input{-webkit-appearance:none;appearance:none}[_nghost-%COMP%]     .annotationLayer .popupTriggerArea{height:100%;width:100%}[_nghost-%COMP%]     .annotationLayer .popupWrapper{position:absolute;font-size:calc(9px * var(--scale-factor));width:100%;min-width:calc(180px * var(--scale-factor));pointer-events:none}[_nghost-%COMP%]     .annotationLayer .popup{position:absolute;max-width:calc(180px * var(--scale-factor));background-color:#ff9;box-shadow:0 calc(2px * var(--scale-factor)) calc(5px * var(--scale-factor)) #888;border-radius:calc(2px * var(--scale-factor));padding:calc(6px * var(--scale-factor));margin-left:calc(5px * var(--scale-factor));cursor:pointer;font:message-box;white-space:normal;word-wrap:break-word;pointer-events:auto}[_nghost-%COMP%]     .annotationLayer .popup>*{font-size:calc(9px * var(--scale-factor))}[_nghost-%COMP%]     .annotationLayer .popup h1{display:inline-block}[_nghost-%COMP%]     .annotationLayer .popupDate{display:inline-block;margin-left:calc(5px * var(--scale-factor))}[_nghost-%COMP%]     .annotationLayer .popupContent{border-top:1px solid rgb(51,51,51);margin-top:calc(2px * var(--scale-factor));padding-top:calc(2px * var(--scale-factor))}[_nghost-%COMP%]     .annotationLayer .richText>*{white-space:pre-wrap;font-size:calc(9px * var(--scale-factor))}[_nghost-%COMP%]     .annotationLayer .highlightAnnotation, [_nghost-%COMP%]     .annotationLayer .underlineAnnotation, [_nghost-%COMP%]     .annotationLayer .squigglyAnnotation, [_nghost-%COMP%]     .annotationLayer .strikeoutAnnotation, [_nghost-%COMP%]     .annotationLayer .freeTextAnnotation, [_nghost-%COMP%]     .annotationLayer .lineAnnotation svg line, [_nghost-%COMP%]     .annotationLayer .squareAnnotation svg rect, [_nghost-%COMP%]     .annotationLayer .circleAnnotation svg ellipse, [_nghost-%COMP%]     .annotationLayer .polylineAnnotation svg polyline, [_nghost-%COMP%]     .annotationLayer .polygonAnnotation svg polygon, [_nghost-%COMP%]     .annotationLayer .caretAnnotation, [_nghost-%COMP%]     .annotationLayer .inkAnnotation svg polyline, [_nghost-%COMP%]     .annotationLayer .stampAnnotation, [_nghost-%COMP%]     .annotationLayer .fileAttachmentAnnotation{cursor:pointer}[_nghost-%COMP%]     .annotationLayer section svg{position:absolute;width:100%;height:100%}[_nghost-%COMP%]     .annotationLayer .annotationTextContent{position:absolute;width:100%;height:100%;opacity:0;color:transparent;-webkit-user-select:none;user-select:none;pointer-events:none}[_nghost-%COMP%]     .annotationLayer .annotationTextContent span{width:100%;display:inline-block}@media (forced-colors: active){[_nghost-%COMP%]     .xfaLayer *:required{outline:1.5px solid selectedItem}}[_nghost-%COMP%]     .xfaLayer .highlight{margin:-1px;padding:1px;background-color:#efcbed;border-radius:4px}[_nghost-%COMP%]     .xfaLayer .highlight.appended{position:initial}[_nghost-%COMP%]     .xfaLayer .highlight.begin{border-radius:4px 0 0 4px}[_nghost-%COMP%]     .xfaLayer .highlight.end{border-radius:0 4px 4px 0}[_nghost-%COMP%]     .xfaLayer .highlight.middle{border-radius:0}[_nghost-%COMP%]     .xfaLayer .highlight.selected{background-color:#cbdfcb}[_nghost-%COMP%]     .xfaLayer ::selection{background:rgb(0,0,255)}[_nghost-%COMP%]     .xfaPage{overflow:hidden;position:relative}[_nghost-%COMP%]     .xfaContentarea{position:absolute}[_nghost-%COMP%]     .xfaPrintOnly{display:none}[_nghost-%COMP%]     .xfaLayer{position:absolute;text-align:initial;top:0;left:0;transform-origin:0 0;line-height:1.2}[_nghost-%COMP%]     .xfaLayer *{color:inherit;font:inherit;font-style:inherit;font-weight:inherit;font-kerning:inherit;letter-spacing:-.01px;text-align:inherit;text-decoration:inherit;box-sizing:border-box;background-color:transparent;padding:0;margin:0;pointer-events:auto;line-height:inherit}[_nghost-%COMP%]     .xfaLayer *:required{outline:1.5px solid red}[_nghost-%COMP%]     .xfaLayer div{pointer-events:none}[_nghost-%COMP%]     .xfaLayer svg{pointer-events:none}[_nghost-%COMP%]     .xfaLayer svg *{pointer-events:none}[_nghost-%COMP%]     .xfaLayer a{color:#00f}[_nghost-%COMP%]     .xfaRich li{margin-left:3em}[_nghost-%COMP%]     .xfaFont{color:#000;font-weight:400;font-kerning:none;font-size:10px;font-style:normal;letter-spacing:0;text-decoration:none;vertical-align:0}[_nghost-%COMP%]     .xfaCaption{overflow:hidden;flex:0 0 auto}[_nghost-%COMP%]     .xfaCaptionForCheckButton{overflow:hidden;flex:1 1 auto}[_nghost-%COMP%]     .xfaLabel{height:100%;width:100%}[_nghost-%COMP%]     .xfaLeft{display:flex;flex-direction:row;align-items:center}[_nghost-%COMP%]     .xfaRight{display:flex;flex-direction:row-reverse;align-items:center}[_nghost-%COMP%]     .xfaLeft>.xfaCaption, [_nghost-%COMP%]     .xfaLeft>.xfaCaptionForCheckButton, [_nghost-%COMP%]     .xfaRight>.xfaCaption, [_nghost-%COMP%]     .xfaRight>.xfaCaptionForCheckButton{max-height:100%}[_nghost-%COMP%]     .xfaTop{display:flex;flex-direction:column;align-items:flex-start}[_nghost-%COMP%]     .xfaBottom{display:flex;flex-direction:column-reverse;align-items:flex-start}[_nghost-%COMP%]     .xfaTop>.xfaCaption, [_nghost-%COMP%]     .xfaTop>.xfaCaptionForCheckButton, [_nghost-%COMP%]     .xfaBottom>.xfaCaption, [_nghost-%COMP%]     .xfaBottom>.xfaCaptionForCheckButton{width:100%}[_nghost-%COMP%]     .xfaBorder{background-color:transparent;position:absolute;pointer-events:none}[_nghost-%COMP%]     .xfaWrapped{width:100%;height:100%}[_nghost-%COMP%]     .xfaTextfield:focus, [_nghost-%COMP%]     .xfaSelect:focus{background-image:none;background-color:transparent;outline:auto;outline-offset:-1px}[_nghost-%COMP%]     .xfaCheckbox:focus, [_nghost-%COMP%]     .xfaRadio:focus{outline:auto}[_nghost-%COMP%]     .xfaTextfield, [_nghost-%COMP%]     .xfaSelect{height:100%;width:100%;flex:1 1 auto;border:none;resize:none;background-image:var(--xfa-unfocused-field-background)}[_nghost-%COMP%]     .xfaTop>.xfaTextfield, [_nghost-%COMP%]     .xfaTop>.xfaSelect, [_nghost-%COMP%]     .xfaBottom>.xfaTextfield, [_nghost-%COMP%]     .xfaBottom>.xfaSelect{flex:0 1 auto}[_nghost-%COMP%]     .xfaButton{cursor:pointer;width:100%;height:100%;border:none;text-align:center}[_nghost-%COMP%]     .xfaLink{width:100%;height:100%;position:absolute;top:0;left:0}[_nghost-%COMP%]     .xfaCheckbox, [_nghost-%COMP%]     .xfaRadio{width:100%;height:100%;flex:0 0 auto;border:none}[_nghost-%COMP%]     .xfaRich{white-space:pre-wrap;width:100%;height:100%}[_nghost-%COMP%]     .xfaImage{object-position:left top;object-fit:contain;width:100%;height:100%}[_nghost-%COMP%]     .xfaLrTb, [_nghost-%COMP%]     .xfaRlTb, [_nghost-%COMP%]     .xfaTb{display:flex;flex-direction:column;align-items:stretch}[_nghost-%COMP%]     .xfaLr{display:flex;flex-direction:row;align-items:stretch}[_nghost-%COMP%]     .xfaRl{display:flex;flex-direction:row-reverse;align-items:stretch}[_nghost-%COMP%]     .xfaTb>div{justify-content:left}[_nghost-%COMP%]     .xfaPosition{position:relative}[_nghost-%COMP%]     .xfaArea{position:relative}[_nghost-%COMP%]     .xfaValignMiddle{display:flex;align-items:center}[_nghost-%COMP%]     .xfaTable{display:flex;flex-direction:column;align-items:stretch}[_nghost-%COMP%]     .xfaTable .xfaRow{display:flex;flex-direction:row;align-items:stretch}[_nghost-%COMP%]     .xfaTable .xfaRlRow{display:flex;flex-direction:row-reverse;align-items:stretch;flex:1}[_nghost-%COMP%]     .xfaTable .xfaRlRow>div{flex:1}[_nghost-%COMP%]     .xfaNonInteractive input, [_nghost-%COMP%]     .xfaNonInteractive textarea, [_nghost-%COMP%]     .xfaDisabled input, [_nghost-%COMP%]     .xfaDisabled textarea, [_nghost-%COMP%]     .xfaReadOnly input, [_nghost-%COMP%]     .xfaReadOnly textarea{background:initial}@media print{[_nghost-%COMP%]     .xfaTextfield, [_nghost-%COMP%]     .xfaSelect{background:transparent}[_nghost-%COMP%]     .xfaSelect{-webkit-appearance:none;appearance:none;text-indent:1px;text-overflow:""}}[_nghost-%COMP%]     [data-editor-rotation="90"]{transform:rotate(90deg)}[_nghost-%COMP%]     [data-editor-rotation="180"]{transform:rotate(180deg)}[_nghost-%COMP%]     [data-editor-rotation="270"]{transform:rotate(270deg)}[_nghost-%COMP%]     .annotationEditorLayer{background:transparent;position:absolute;top:0;left:0;font-size:calc(100px * var(--scale-factor));transform-origin:0 0}[_nghost-%COMP%]     .annotationEditorLayer .selectedEditor{outline:var(--focus-outline);resize:none}[_nghost-%COMP%]     .annotationEditorLayer .freeTextEditor{position:absolute;background:transparent;border-radius:3px;padding:calc(var(--freetext-padding) * var(--scale-factor));resize:none;width:auto;height:auto;z-index:1;transform-origin:0 0;touch-action:none}[_nghost-%COMP%]     .annotationEditorLayer .freeTextEditor .internal{background:transparent;border:none;top:0;left:0;overflow:visible;white-space:nowrap;resize:none;font:10px sans-serif;line-height:var(--freetext-line-height)}[_nghost-%COMP%]     .annotationEditorLayer .freeTextEditor .overlay{position:absolute;display:none;background:transparent;top:0;left:0;width:100%;height:100%}[_nghost-%COMP%]     .annotationEditorLayer .freeTextEditor .overlay.enabled{display:block}[_nghost-%COMP%]     .annotationEditorLayer .freeTextEditor .internal:empty:before{content:attr(default-content);color:gray}[_nghost-%COMP%]     .annotationEditorLayer .freeTextEditor .internal:focus{outline:none}[_nghost-%COMP%]     .annotationEditorLayer .inkEditor.disabled{resize:none}[_nghost-%COMP%]     .annotationEditorLayer .inkEditor.disabled.selectedEditor{resize:horizontal}[_nghost-%COMP%]     .annotationEditorLayer .freeTextEditor:hover:not(.selectedEditor), [_nghost-%COMP%]     .annotationEditorLayer .inkEditor:hover:not(.selectedEditor){outline:var(--hover-outline)}[_nghost-%COMP%]     .annotationEditorLayer .inkEditor{position:absolute;background:transparent;border-radius:3px;overflow:auto;width:100%;height:100%;z-index:1;transform-origin:0 0;cursor:auto}[_nghost-%COMP%]     .annotationEditorLayer .inkEditor.editing{resize:none;cursor:var(--editorInk-editing-cursor),pointer}[_nghost-%COMP%]     .annotationEditorLayer .inkEditor .inkEditorCanvas{position:absolute;top:0;left:0;width:100%;height:100%;touch-action:none}[_nghost-%COMP%]     [data-main-rotation="90"]{transform:rotate(90deg) translateY(-100%)}[_nghost-%COMP%]     [data-main-rotation="180"]{transform:rotate(180deg) translate(-100%,-100%)}[_nghost-%COMP%]     [data-main-rotation="270"]{transform:rotate(270deg) translate(-100%)}[_nghost-%COMP%]     .pdfViewer{padding-bottom:var(--pdfViewer-padding-bottom)}[_nghost-%COMP%]     .pdfViewer .canvasWrapper{overflow:hidden}[_nghost-%COMP%]     .pdfViewer .page{direction:ltr;width:816px;height:1056px;margin:var(--page-margin);position:relative;overflow:visible;border:var(--page-border);border-image:var(--page-border-image);background-clip:content-box;background-color:#fff}[_nghost-%COMP%]     .pdfViewer .dummyPage{position:relative;width:0;height:var(--viewer-container-height)}[_nghost-%COMP%]     .pdfViewer.removePageBorders .page{margin:0 auto 10px;border:none}[_nghost-%COMP%]     .pdfViewer.singlePageView{display:inline-block}[_nghost-%COMP%]     .pdfViewer.singlePageView .page{margin:0;border:none}[_nghost-%COMP%]     .pdfViewer.scrollHorizontal, [_nghost-%COMP%]     .pdfViewer.scrollWrapped, [_nghost-%COMP%]     .spread{margin-left:3.5px;margin-right:3.5px;text-align:center}[_nghost-%COMP%]     .pdfViewer.scrollHorizontal, [_nghost-%COMP%]     .spread{white-space:nowrap}[_nghost-%COMP%]     .pdfViewer.removePageBorders, [_nghost-%COMP%]     .pdfViewer.scrollHorizontal .spread, [_nghost-%COMP%]     .pdfViewer.scrollWrapped .spread{margin-left:0;margin-right:0}[_nghost-%COMP%]     .spread .page, [_nghost-%COMP%]     .spread .dummyPage, [_nghost-%COMP%]     .pdfViewer.scrollHorizontal .page, [_nghost-%COMP%]     .pdfViewer.scrollWrapped .page, [_nghost-%COMP%]     .pdfViewer.scrollHorizontal .spread, [_nghost-%COMP%]     .pdfViewer.scrollWrapped .spread{display:inline-block;vertical-align:middle}[_nghost-%COMP%]     .spread .page, [_nghost-%COMP%]     .pdfViewer.scrollHorizontal .page, [_nghost-%COMP%]     .pdfViewer.scrollWrapped .page{margin-left:var(--spreadHorizontalWrapped-margin-LR);margin-right:var(--spreadHorizontalWrapped-margin-LR)}[_nghost-%COMP%]     .pdfViewer.removePageBorders .spread .page, [_nghost-%COMP%]     .pdfViewer.removePageBorders.scrollHorizontal .page, [_nghost-%COMP%]     .pdfViewer.removePageBorders.scrollWrapped .page{margin-left:5px;margin-right:5px}[_nghost-%COMP%]     .pdfViewer .page canvas{margin:0;display:block}[_nghost-%COMP%]     .pdfViewer .page canvas[hidden]{display:none}[_nghost-%COMP%]     .pdfViewer .page .loadingIcon{position:absolute;display:block;inset:0;background:url(data:image/gif;base64,R0lGODlhGAAYAPQQAM7Ozvr6+uDg4LCwsOjo6I6OjsjIyJycnNjY2KioqMDAwPLy8nZ2doaGhri4uGhoaP///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh/ilPcHRpbWl6ZWQgd2l0aCBodHRwczovL2V6Z2lmLmNvbS9vcHRpbWl6ZQAh+QQJBwAQACwAAAAAGAAYAAAFmiAkjiTkOGVaBgjZNGSgkgKjjM8zLoI8iy+BKCdiCX8iBeMAhEEIPRXLxViYUE9CbCQoFAzFhHY3zkaT3oPvBz1zE4UBsr1eWZH4vAowOBwGAHk8AoQLfH6Agm0Ed3qOAXWOIgQKiWyFJQgDgJEpdG+WEACNEFNFmKVlVzJQk6qdkwqBoi1mebJ3ALNGeIZHtGSwNDS1RZKueCEAIfkECQcAEAAsAAAAABgAGAAABZcgJI4kpChlWgYCWRQkEKgjURgjw4zOg9CjVwuiEyEeO6CxkBC9nA+HiuUqLEyoBZI0Mx4SAFFgQCDZuguBoGv6Dtg0gvpqdhxQQDkBzuUr/4A1JwMKP39pc2mDhYCIc4GQYn6QCwCMeY91l0p6dBAEJ0OfcFRimZ91Mwt0alxxAIZyRmuAsKxDLKKvZbM1tJxmvGKRpn8hACH5BAkHABAALAAAAAAYABgAAAWhICSOJGQYZVoGAnkcJBKoI3EAY1GMCtPSosSBINKJBIwGkHdwBGGQA0OhYpEGQxNqkYzNIITBACEKKBaxxNfBeOCO4vMy0Hg8nDHFeCktkKtfNAtoS4UqAicKBj9zBAKPC4iKi4aRkISGmWWBmjUIAIyHkCUEAKCVo2WmREecVqoCgZhgP4NHrGWCj7e3szSpuxAsoVWxnp6cVV4kyZW+KSEAIfkECQcAEAAsAAAAABgAGAAABZkgJI4kBABlWgYEOQykEKgjMSDjcYxG0dKi108nEhQKQN4rCIMkCgbawjWYnSCLY2yGVSgEooBhWqsGGwxc0RtNBgoMhmJ1QgETjANYFeBKyUmBKQQIdT9JDmgPDQ6EhoKJD4sOgpWWgiwChyqEBH5hmptSoSOZgJ4kLKWkYTF7C2SaqaM/hEWygay4mYG8t6uffFuzl1iANCEAIfkECQcAEAAsAAAAABgAGAAABZ0gJI4khCBlmhKkopBCoI6LIozDMAIHO4uuBVBnOiR+I4FrCDwAZsKdQnaCLIwwmRUA8JmioprWUCjcwlwUMnAoG0qL03k2KCS8cC0UjOzDCQKBfHQFDAwFU4CCfgqFhy9+kZJWgzSKSAcPZn+BfQENDw8OljGWJAFeDoZPYTBnC1GdSXqnsoBolSulX2GyP6hgvnG0KrS3NJNhuSQhACH5BAkHABAALAAAAAAYABgAAAWaICSOJCQIZZoupGGQRKCOC0CMijIiwz2LABtQZxoMfjQhxAXszWQ7gOwECRhh0MCJJRJARTUoIHFAgbfI6uBwAJS01J/i4PClVYHvfV8lbLlIBmwFbQt+aGmChG18jXeGT4dICQxlb4g/AQUMDER9XjR6BAdiDQwINDBmkAsPDVh4cX4imw53iLKuaVqAcUsPqEiidkt6j4AzIQAh+QQJBwAQACwAAAAAGAAYAAAFmSAkjiREEGWaBiSCtCoZCMsIAKOg1LEo0KKbaKFQ9EYLoOkFuQlirNxzCQkUW9GZ0hQd4nyDAWr4G/esYSbyZFYZwu3jqiuvr8u8I2BwOAwASXh1e31/doeHC3klWnElfAlTd46MfQUGk2stCVEGBQWSdCciDg5VDAVYKoEiDQ0iBwxGcj9RDw8+qHIzebc2DJJQJK6qiKVyIQAh+QQJBwAQACwAAAAAGAAYAAAFmSAkjiS0LGWaBiRBtCoZCKgoCCMB1DF0sz6cCQDo5W62l28XAyZFpyECBv3lnCbhUqHMIo0Qg4Jbmn1jRCa4iV27TzfXGjEecOFWMN1OdvvfPGUuXSoKBw6EXokrAwcHRVU0UAeEBANAAAmUI1gNDyhjJgUHLW0iDg8FIqOnBQZrDA9TELE2rEYIDw4jta2LMpCrqld/YQpgIQAh+QQJBwAQACwAAAAAGAAYAAAFmyAkjiS0LGWaBiRBkKw6BgIqCsJcyyMe4yJajhcEml5H26o1PN2QQd3uFiv2AADlAgflIbDdZLgkABOJgep5LfWty4p4zeU+w+XsvJWXliEKDwdEBgMKYQ4PDw1qK3EDCCMAiQ5BCV0LCj+FSDQkgCgGBiYHAy2MIgoMghAHqw4HAGsNDEMFBTekdgwKI7aRB2MwkL2rVHoQoWchACH5BAkHABAALAAAAAAYABgAAAWWICSOJLQsZZoGJEGQrDoGAioKwlzLIx7jIlqOFwSaXkfbqjU83ZBB3e4WK0qrCxyU55peid0qcUwuixyNx6PhILsAcAJazXYj4lvz2MkLiFsHDAlEcABKZwwMBX8pBgoKQxAIigpBA1sLBj+PSDQkB4uSACYDlTMyBgWDEKVnl2QFBUigN61gBQYjtLV5JZ4jtlR6omMhACH5BAkHABAALAAAAAAYABgAAAWaICSOJLQsZZoGJEGQrDoGAioKwlzLIx7jIlqOFwSaXkdbidYanm7I4AjwYDh6saJuJ3JUG1mZi9srPA7EcRimJLrfJYWZUVC8TziXnEG3u/E+cIJaPAFrPQl1aQAIbRAGBZGHJQiMUQKRBkEKbQsAPZaEXQcslSYKmjMyAAdXj34ACkNEiUgDA5t+PAQHn6Ogjkuzry2DNwhuIQAh+QQFBwAQACwAAAAAGAAYAAAFnCAkjiS0LGVaBgBJEGSguo8zCsK4CPIsMg+ECCcKEH0ix6MwhJl4KiOp8UCdmrEbo6EoHpxF8A6aBBZ6vhf5dmAkkGr0CoWs21WGQ2FvsI9xC3l7B311fy93iWGKJQQOhHCAJQB6A3IqcWwJLU90i2FkUiMKlhBELEI6MwgDXRAGhQgAYD6tTqRFAJxpA6mvrqazSKJJhUWMpjlIIQA7) center no-repeat}[_nghost-%COMP%]     .pdfViewer .page .loadingIcon.notVisible{background:none}[_nghost-%COMP%]     .pdfViewer.enablePermissions .textLayer span{-webkit-user-select:none!important;user-select:none!important;cursor:not-allowed}[_nghost-%COMP%]     .pdfPresentationMode .pdfViewer{padding-bottom:0}[_nghost-%COMP%]     .pdfPresentationMode .spread{margin:0}[_nghost-%COMP%]     .pdfPresentationMode .pdfViewer .page{margin:0 auto;border:2px solid transparent}']})),ce})(),ee=(()=>{var K;class ce{}return K=ce,y(ce,"\u0275fac",function(z){return new(z||K)}),y(ce,"\u0275mod",t.oAB({type:K})),y(ce,"\u0275inj",t.cJS({})),ce})();var le=x(6466),V=x(1581),g=x(585),l=x(8237),E=x(379);const T=C.N.apiUrl;let w=(()=>{var K;class ce{constructor(z,I){this.http=z,this.auth=I}uploadLabTestAttachment(z,I,ae){(new F.WM).set("Authorization","Bearer "+this.auth.user.access_token);const ye=new FormData;ye.append("file",z);const xe=new F.aW("POST",T+"/patients/upload_lab_test_attachment?lab_test_id="+I.id+"&name="+ae,ye,{reportProgress:!0,responseType:"json"});return this.http.request(xe)}getFiles(){return this.http.get(T+"/files")}}return(K=ce).\u0275fac=function(z){return new(z||K)(t.LFG(F.eN),t.LFG(le.e))},K.\u0275prov=t.Yz7({token:K,factory:K.\u0275fac,providedIn:"root"}),ce})();var n=x(7398);const h=C.N.apiUrl;let d=(()=>{var K;class ce{constructor(z){this.http=z}downloadLabTestAttachment(z){return this.http.get(h+"/patients/download_lab_test_attachment?file_name="+z,{responseType:"blob"}).pipe((0,n.U)(I=>({filename:z,data:I})))}}return(K=ce).\u0275fac=function(z){return new(z||K)(t.LFG(F.eN))},K.\u0275prov=t.Yz7({token:K,factory:K.\u0275fac,providedIn:"root"}),ce})();var L=x(6593);function k(K,ce){1&K&&(t.TgZ(0,"span"),t._uU(1,"NONE"),t.qZA())}function X(K,ce){if(1&K){const de=t.EpF();t.TgZ(0,"div")(1,"h5"),t._uU(2,"Reason for rejection"),t.qZA(),t.TgZ(3,"input",31),t.NdJ("ngModelChange",function(I){t.CHM(de);const ae=t.oxw().$implicit;return t.KtG(ae.rejectComment=I)}),t.qZA(),t._UZ(4,"br"),t.TgZ(5,"button",32),t.NdJ("click",function(){t.CHM(de);const I=t.oxw().$implicit,ae=t.oxw();return t.KtG(ae.saveReasonForRejection(I.id,I.rejectComment))}),t._uU(6,"Save Reason for Rejection"),t.qZA()()}if(2&K){const de=t.oxw().$implicit;t.xp6(3),t.Q6J("ngModel",de.rejectComment)}}function Y(K,ce){if(1&K){const de=t.EpF();t.TgZ(0,"textarea",43),t.NdJ("ngModelChange",function(I){t.CHM(de);const ae=t.oxw(2).$implicit;return t.KtG(ae.result=I)}),t.qZA()}if(2&K){const de=t.oxw(2).$implicit;t.Q6J("ngModel",de.result)}}function he(K,ce){if(1&K){const de=t.EpF();t.TgZ(0,"textarea",43),t.NdJ("ngModelChange",function(I){t.CHM(de);const ae=t.oxw(2).$implicit;return t.KtG(ae.result=I)}),t.qZA()}if(2&K){const de=t.oxw(2).$implicit;t.Q6J("ngModel",de.result)}}function ie(K,ce){if(1&K){const de=t.EpF();t.TgZ(0,"textarea",44),t.NdJ("ngModelChange",function(I){t.CHM(de);const ae=t.oxw(2).$implicit;return t.KtG(ae.result=I)}),t.qZA()}if(2&K){const de=t.oxw(2).$implicit;t.Q6J("ngModel",de.result)}}function ue(K,ce){if(1&K&&(t.TgZ(0,"option"),t._uU(1),t.qZA()),2&K){const de=ce.$implicit;t.xp6(1),t.Oqu(de.name)}}function ve(K,ce){if(1&K){const de=t.EpF();t.TgZ(0,"div",33)(1,"div",4)(2,"span"),t._uU(3,"Results"),t.qZA(),t.YNc(4,Y,1,1,"textarea",34),t.YNc(5,he,1,1,"textarea",34),t.YNc(6,ie,1,1,"textarea",35),t.qZA(),t.TgZ(7,"div",36)(8,"span"),t._uU(9,"Range"),t.qZA(),t.TgZ(10,"select",37),t.NdJ("ngModelChange",function(I){t.CHM(de);const ae=t.oxw().$implicit;return t.KtG(ae.range=I)}),t._UZ(11,"option"),t.YNc(12,ue,2,1,"option",38),t.qZA()(),t.TgZ(13,"div",36)(14,"span"),t._uU(15,"Level"),t.qZA(),t.TgZ(16,"select",37),t.NdJ("ngModelChange",function(I){t.CHM(de);const ae=t.oxw().$implicit;return t.KtG(ae.level=I)}),t._UZ(17,"option"),t.TgZ(18,"option"),t._uU(19,"Low"),t.qZA(),t.TgZ(20,"option"),t._uU(21,"Medium"),t.qZA(),t.TgZ(22,"option"),t._uU(23,"High"),t.qZA()()(),t.TgZ(24,"div",36)(25,"span"),t._uU(26,"Unit"),t.qZA(),t.TgZ(27,"input",39),t.NdJ("ngModelChange",function(I){t.CHM(de);const ae=t.oxw().$implicit;return t.KtG(ae.unit=I)}),t.qZA()(),t.TgZ(28,"div",4),t._UZ(29,"hr"),t.TgZ(30,"div",3)(31,"div",40),t._uU(32," Attachments "),t.TgZ(33,"div"),t._uU(34,"Temporarily disabled"),t.qZA()()()(),t.TgZ(35,"div",4)(36,"button",41),t.NdJ("click",function(){t.CHM(de);const I=t.oxw().$implicit,ae=t.oxw();return t.KtG(ae.verifyLabTest(I))}),t._uU(37,"Verify Results"),t.qZA()(),t.TgZ(38,"div",4),t._UZ(39,"br"),t.TgZ(40,"span",42),t._uU(41),t.qZA()()()}if(2&K){const de=t.oxw().$implicit;t.xp6(4),t.Q6J("ngIf","ACCEPTED"===(null==de?null:de.status)),t.xp6(1),t.Q6J("ngIf","VERIFIED"===(null==de?null:de.status)),t.xp6(1),t.Q6J("ngIf","COLLECTED"===(null==de?null:de.status)),t.xp6(4),t.Q6J("ngModel",de.range),t.xp6(2),t.Q6J("ngForOf",de.labTestType.labTestTypeRanges),t.xp6(4),t.Q6J("ngModel",de.level),t.xp6(11),t.Q6J("ngModel",de.unit),t.xp6(14),t.hij("Verified At | By: ",de.verified,"")}}function fe(K,ce){if(1&K){const de=t.EpF();t.TgZ(0,"div",26)(1,"div",27)(2,"div",4)(3,"h4")(4,"b"),t._uU(5),t.qZA()(),t.TgZ(6,"span"),t._uU(7,"Status: "),t.qZA(),t.TgZ(8,"span")(9,"small"),t._uU(10),t.qZA()(),t._UZ(11,"br")(12,"br"),t.TgZ(13,"span"),t._uU(14),t.YNc(15,k,2,0,"span",28),t.qZA(),t._UZ(16,"br")(17,"br"),t.TgZ(18,"small"),t._uU(19),t.qZA(),t._UZ(20,"br"),t.TgZ(21,"button",29),t.NdJ("click",function(){const ae=t.CHM(de).$implicit,Se=t.oxw();return t.KtG(Se.acceptLabTest(ae))}),t._uU(22,"Accept"),t.qZA(),t.TgZ(23,"button",29),t.NdJ("click",function(){const ae=t.CHM(de).$implicit,Se=t.oxw();return t.KtG(Se.rejectLabTest(ae))}),t._uU(24,"Reject"),t.qZA(),t.TgZ(25,"button",29),t.NdJ("click",function(){const ae=t.CHM(de).$implicit,Se=t.oxw();return t.KtG(Se.collectLabTest(ae))}),t._uU(26,"Collect"),t.qZA(),t.YNc(27,X,7,1,"div",28),t._UZ(28,"hr"),t.qZA(),t.TgZ(29,"div",4),t.YNc(30,ve,42,8,"div",30),t.qZA()()()}if(2&K){const de=ce.$implicit;t.xp6(5),t.Oqu(de.labTestType.name),t.xp6(5),t.Oqu(de.status),t.xp6(4),t.hij("Diagnosis: ",null==de||null==de.diagnosisType?null:de.diagnosisType.name," "),t.xp6(1),t.Q6J("ngIf",null===(null==de||null==de.diagnosisType?null:de.diagnosisType.name)),t.xp6(4),t.hij("Ordered At | By: ",null==de?null:de.created,""),t.xp6(8),t.Q6J("ngIf","REJECTED"===(null==de?null:de.status)),t.xp6(3),t.Q6J("ngIf","ACCEPTED"===(null==de?null:de.status)||"COLLECTED"===(null==de?null:de.status)||"VERIFIED"===(null==de?null:de.status))}}function me(K,ce){if(1&K&&t._UZ(0,"img",45),2&K){const de=t.oxw();t.Q6J("src",de.attachmentUrl,t.LSH)}}function we(K,ce){if(1&K&&t._UZ(0,"pdf-viewer",46),2&K){const de=t.oxw();t.Q6J("src",de.attachmentUrl)("original-size",!1)}}const Ae=C.N.apiUrl;let re=(()=>{var K;class ce{constructor(z,I,ae,Se,ye,xe,D,ne,oe){this.auth=z,this.http=I,this.modalService=ae,this.spinner=Se,this.router=ye,this.msgBox=xe,this.uploadService=D,this.downloadService=ne,this.sanitizer=oe,this.labTests=[],this.rs=[1,2,3.4,5,6],this.filterRecords="",this.progress=0,this.message="",this.name="",this.fileExtension=""}ngOnInit(){var z=this;return(0,a.Z)(function*(){z.id=localStorage.getItem("lab-test-patient-id"),localStorage.removeItem("lab-test-patient-id"),yield z.loadPatient(z.id),yield z.loadLabTestsByPatient(z.id),z.fileInfos=z.uploadService.getFiles()})()}loadPatient(z){var I=this;return(0,a.Z)(function*(){let ae={headers:(new F.WM).set("Authorization","Bearer "+I.auth.user.access_token)};I.spinner.show(),yield I.http.get(Ae+"/patients/get?id="+z,ae).pipe((0,Q.x)(()=>I.spinner.hide())).toPromise().then(Se=>{I.id=Se?.id,I.patient=Se,console.log(Se)}).catch(Se=>{I.msgBox.showErrorMessage(Se,"Could not load patient"),console.log(Se)})})()}loadLabTestsByPatient(z){var I=this;return(0,a.Z)(function*(){let ae={headers:(new F.WM).set("Authorization","Bearer "+I.auth.user.access_token)};I.spinner.show(),yield I.http.get(Ae+"/patients/get_lab_tests_by_patient_id?id="+z,ae).pipe((0,Q.x)(()=>I.spinner.hide())).toPromise().then(Se=>{I.labTests=Se,console.log(I.labTests)}).catch(Se=>{I.labTests=[],I.msgBox.showErrorMessage(Se,"Could not load lab tests")})})()}acceptLabTest(z){var I=this;return(0,a.Z)(function*(){let ae={headers:(new F.WM).set("Authorization","Bearer "+I.auth.user.access_token)};var Se={id:z.id,result:z.result,range:z.range,level:z.level,unit:z.unit};I.spinner.show(),yield I.http.post(Ae+"/patients/accept_lab_test",Se,ae).pipe((0,Q.x)(()=>I.spinner.hide())).toPromise().then(ye=>{I.msgBox.showSuccessMessage("Status changed : ACCEPTED")}).catch(ye=>{I.msgBox.showErrorMessage(ye,"")}),I.loadLabTestsByPatient(I.id)})()}rejectLabTest(z){var I=this;return(0,a.Z)(function*(){let ae={headers:(new F.WM).set("Authorization","Bearer "+I.auth.user.access_token)};var Se={id:z.id,result:z.result,range:z.range,level:z.level,unit:z.unit};I.spinner.show(),yield I.http.post(Ae+"/patients/reject_lab_test",Se,ae).pipe((0,Q.x)(()=>I.spinner.hide())).toPromise().then(ye=>{I.msgBox.showSuccessMessage("Status changed : REJECTED")}).catch(ye=>{I.msgBox.showErrorMessage(ye,"")}),I.loadLabTestsByPatient(I.id)})()}holdLabTest(z){var I=this;return(0,a.Z)(function*(){let ae={headers:(new F.WM).set("Authorization","Bearer "+I.auth.user.access_token)};var Se={id:z.id,result:z.result,range:z.range,level:z.level,unit:z.unit};I.spinner.show(),yield I.http.post(Ae+"/patients/hold_lab_test",Se,ae).pipe((0,Q.x)(()=>I.spinner.hide())).toPromise().then(ye=>{I.msgBox.showSuccessMessage("Status changed : PENDING")}).catch(ye=>{I.msgBox.showErrorMessage(ye,"")}),I.loadLabTestsByPatient(I.id)})()}collectLabTest(z){var I=this;return(0,a.Z)(function*(){let ae={headers:(new F.WM).set("Authorization","Bearer "+I.auth.user.access_token)};var Se={id:z.id,result:z.result,range:z.range,level:z.level,unit:z.unit};I.spinner.show(),yield I.http.post(Ae+"/patients/collect_lab_test",Se,ae).pipe((0,Q.x)(()=>I.spinner.hide())).toPromise().then(ye=>{I.msgBox.showSuccessMessage("Status changed : COLLECTED")}).catch(ye=>{I.msgBox.showErrorMessage(ye,"")}),I.loadLabTestsByPatient(I.id)})()}verifyLabTest(z){var I=this;return(0,a.Z)(function*(){let ae={headers:(new F.WM).set("Authorization","Bearer "+I.auth.user.access_token)};var Se={id:z.id,result:z.result,range:z.range,level:z.level,unit:z.unit};I.spinner.show(),yield I.http.post(Ae+"/patients/verify_lab_test",Se,ae).pipe((0,Q.x)(()=>I.spinner.hide())).toPromise().then(ye=>{I.msgBox.showSuccessMessage("Status changed : VERIFIED, Saved successifully")}).catch(ye=>{I.msgBox.showErrorMessage(ye,"")}),I.loadLabTestsByPatient(I.id)})()}saveReasonForRejection(z,I){var ae=this;return(0,a.Z)(function*(){let Se={headers:(new F.WM).set("Authorization","Bearer "+ae.auth.user.access_token)};var ye={id:z,rejectComment:I};ae.spinner.show(),yield ae.http.post(Ae+"/patients/lab_tests/save_reason_for_rejection",ye,Se).pipe((0,Q.x)(()=>ae.spinner.hide())).toPromise().then(xe=>{ae.msgBox.showSuccessMessage("Success")}).catch(xe=>{ae.msgBox.showErrorMessage(xe,"")})})()}selectFile(z){this.selectedFiles=z.target.files}upload(z){var I=this;""!==this.name?(this.progress=0,this.currentFile=this.selectedFiles.item(0),this.uploadService.uploadLabTestAttachment(this.currentFile,z,this.name).subscribe(function(){var ae=(0,a.Z)(function*(Se){Se.type===F.dt.UploadProgress?I.progress=Math.round(100*Se.loaded/Se.total):Se instanceof F.Zn&&(I.message=Se.body.message),I.labTests=[],yield I.loadLabTestsByPatient(I.id)});return function(Se){return ae.apply(this,arguments)}}(),ae=>{console.log(ae),this.progress=0,this.message="Could not upload the file!",this.currentFile=void 0,this.msgBox.showErrorMessage(ae,"")}),this.selectedFiles=void 0):this.msgBox.showErrorMessage3("Please provide tittle name")}showAttachment(z){alert(z)}downloadFile(z){this.attachmentUrl="",this.downloadService.downloadLabTestAttachment(z).subscribe(I=>{console.log(I);var ae=[];ae.push(I.data);var Se=window.URL.createObjectURL(new Blob(ae,{type:"application/*"}));this.attachmentUrl=Se,"pdf"===I.filename.substr(I.filename.lastIndexOf(".")+1)&&(this.fileExtension="pdf")},I=>{console.log(I)})}grant(z){var I=!1;return z.forEach(ae=>{this.auth.checkPrivilege(ae)&&(I=!0)}),I}}return(K=ce).\u0275fac=function(z){return new(z||K)(t.Y36(le.e),t.Y36(F.eN),t.Y36(V.FF),t.Y36(g.t2),t.Y36(l.F0),t.Y36(E.l),t.Y36(w),t.Y36(d),t.Y36(L.H7))},K.\u0275cmp=t.Xpm({type:K,selectors:[["app-lab-test"]],standalone:!0,features:[t.jDz],decls:50,vars:15,consts:[[1,"content-header"],[1,"header-title"],[1,"content"],[1,"row"],[1,"col-sm-12"],[1,"panel","panel-bd","lobidrag"],[1,"panel-heading"],["routerLink","/lab-outpatient-list",1,"btn","btn-success",2,"margin-right","1mm"],["routerLink","/lab-inpatient-list",1,"btn","btn-success",2,"margin-right","1mm"],["routerLink","/lab-outsider-list",1,"btn","btn-success",2,"margin-right","1mm"],[1,"panel-body"],["role","alert",1,"col-sm-12","alert","alert-primary"],[1,"text-primary"],["class","col-sm-6",4,"ngFor","ngForOf"],["id","view-attachment-modal","tabindex","-1","role","dialog",1,"modal","fade","modal-success"],["role","document",1,"modal-dialog","modal-lg",2,"width","75%"],[1,"modal-content"],[1,"modal-header"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-title"],[1,"modal-body"],["style","height: 100%; width: 100%;",3,"src",4,"ngIf"],["style","height: 100%; width: 100%;",3,"src","original-size",4,"ngIf"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-danger","pull-right"],[1,"col-sm-6"],[1,"row",2,"margin","1mm","background-color","rgb(246, 246, 248)"],[4,"ngIf"],[1,"btn","btn-default","btn-rounded",3,"click"],["class","row","style","padding-left: 3mm; padding-right: 3mm;",4,"ngIf"],["type","text","placeholder","Reason for rejection",1,"form-control",3,"ngModel","ngModelChange"],[1,"btn","btn-info",3,"click"],[1,"row",2,"padding-left","3mm","padding-right","3mm"],["class","form-control","placeholder","Input Results","style","height: 5cm;","readonly","",3,"ngModel","ngModelChange",4,"ngIf"],["class","form-control","placeholder","Input Results","style","height: 5cm;",3,"ngModel","ngModelChange",4,"ngIf"],[1,"col-sm-4"],[1,"form-control",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],["type","text","placeholder","Unit",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-sm-12",2,"text-align","center"],[1,"btn","btn-primary",3,"click"],[1,"label","label-info","m-r-15","pull-right"],["placeholder","Input Results","readonly","",1,"form-control",2,"height","5cm",3,"ngModel","ngModelChange"],["placeholder","Input Results",1,"form-control",2,"height","5cm",3,"ngModel","ngModelChange"],[2,"height","100%","width","100%",3,"src"],[2,"height","100%","width","100%",3,"src","original-size"]],template:function(z,I){1&z&&(t.TgZ(0,"section",0)(1,"div",1)(2,"h1"),t._uU(3,"Lab Test"),t.qZA()()(),t.TgZ(4,"section",2)(5,"div",3)(6,"div",4)(7,"div",5)(8,"div",6)(9,"a",7),t._uU(10,"Outpatient List"),t.qZA(),t.TgZ(11,"a",8),t._uU(12,"Inpatient List"),t.qZA(),t.TgZ(13,"a",9),t._uU(14,"Outsider List"),t.qZA()(),t.TgZ(15,"div",10)(16,"div",3)(17,"div",11)(18,"h3",12),t._uU(19,"Name: "),t.TgZ(20,"b"),t._uU(21),t.qZA(),t._uU(22,", File No: "),t.TgZ(23,"b"),t._uU(24),t.qZA(),t._uU(25,", Date of birth: "),t.TgZ(26,"b"),t._uU(27),t.ALo(28,"date"),t.qZA(),t._uU(29,", Age: "),t.TgZ(30,"b"),t._uU(31),t.ALo(32,"age"),t.qZA(),t._uU(33),t.qZA()(),t._UZ(34,"hr"),t.qZA(),t.YNc(35,fe,31,7,"div",13),t.qZA()()()()(),t.TgZ(36,"div",14)(37,"div",15)(38,"div",16)(39,"div",17)(40,"button",18)(41,"span",19),t._uU(42,"\xd7"),t.qZA()(),t._UZ(43,"h2",20),t.qZA(),t.TgZ(44,"div",21),t.YNc(45,me,1,1,"img",22),t.YNc(46,we,1,2,"pdf-viewer",23),t.qZA(),t.TgZ(47,"div",24)(48,"button",25),t._uU(49,"Close"),t.qZA()()()()()),2&z&&(t.xp6(21),t.lnq("",I.patient.firstName," ",I.patient.middleName," ",I.patient.lastName,""),t.xp6(3),t.Oqu(I.patient.no),t.xp6(3),t.Oqu(t.lcZ(28,11,I.patient.dateOfBirth)),t.xp6(4),t.Oqu(t.lcZ(32,13,I.patient.dateOfBirth)),t.xp6(2),t.AsE(", ",I.patient.gender,", ",I.patient.paymentType,""),t.xp6(2),t.Q6J("ngForOf",I.labTests),t.xp6(10),t.Q6J("ngIf","pdf"!=I.fileExtension),t.xp6(1),t.Q6J("ngIf","pdf"===I.fileExtension))},dependencies:[v.ez,v.sg,v.O5,v.uU,O.u5,O.YN,O.Kr,O.Fj,O.EJ,O.JJ,O.On,O.UX,M.C,ee,j]}),ce})()},9627:(module,__unused_webpack_exports,__webpack_require__)=>{var _classStaticPrivateMethodGet=__webpack_require__(5764).default,_defineProperty=__webpack_require__(8416).default,_classPrivateMethodInitSpec=__webpack_require__(1860).default,_classPrivateMethodGet=__webpack_require__(4467).default,_classPrivateFieldInitSpec=__webpack_require__(9159).default,_classPrivateFieldSet=__webpack_require__(5661).default,_classPrivateFieldGet=__webpack_require__(468).default,_classStaticPrivateFieldSpecSet=__webpack_require__(9382).default,_classStaticPrivateFieldSpecGet=__webpack_require__(1280).default,_asyncToGenerator=__webpack_require__(7156).default,x;globalThis,x=()=>(()=>{"use strict";var __webpack_modules__=[,(Z,r,x)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.VerbosityLevel=r.Util=r.UnknownErrorException=r.UnexpectedResponseException=r.UNSUPPORTED_FEATURES=r.TextRenderingMode=r.StreamType=r.RenderingIntentFlag=r.PermissionFlag=r.PasswordResponses=r.PasswordException=r.PageActionEventType=r.OPS=r.MissingPDFException=r.LINE_FACTOR=r.LINE_DESCENT_FACTOR=r.InvalidPDFException=r.ImageKind=r.IDENTITY_MATRIX=r.FormatError=r.FontType=r.FeatureTest=r.FONT_IDENTITY_MATRIX=r.DocumentActionEventType=r.CMapCompressionType=r.BaseException=r.AnnotationType=r.AnnotationStateModelType=r.AnnotationReviewState=r.AnnotationReplyType=r.AnnotationMode=r.AnnotationMarkedState=r.AnnotationFlag=r.AnnotationFieldFlag=r.AnnotationEditorType=r.AnnotationEditorPrefix=r.AnnotationEditorParamsType=r.AnnotationBorderStyleType=r.AnnotationActionEventType=r.AbortException=void 0,r.arrayByteLength=ve,r.arraysToBytes=function fe(te){const $=te.length;if(1===$&&te[0]instanceof Uint8Array)return te[0];let J=0;for(let ge=0;ge<$;ge++)J+=ve(te[ge]);let Pe=0;const Me=new Uint8Array(J);for(let ge=0;ge<$;ge++){let _e=te[ge];_e instanceof Uint8Array||(_e="string"==typeof _e?ue(_e):new Uint8Array(_e));const Ee=_e.byteLength;Me.set(_e,Pe),Pe+=Ee}return Me},r.assert=function l(te,$){te||g($)},r.bytesToString=function ie(te){("object"!=typeof te||null===te||void 0===te.length)&&g("Invalid argument for bytesToString");const $=te.length,J=8192;if($<J)return String.fromCharCode.apply(null,te);const Pe=[];for(let Me=0;Me<$;Me+=J){const ge=Math.min(Me+J,$),_e=te.subarray(Me,ge);Pe.push(String.fromCharCode.apply(null,_e))}return Pe.join("")},r.createPromiseCapability=function be(){const te=Object.create(null);let $=!1;return Object.defineProperty(te,"settled",{get:()=>$}),te.promise=new Promise(function(J,Pe){te.resolve=function(Me){$=!0,J(Me)},te.reject=function(Me){$=!0,Pe(Me)}}),te},r.createValidAbsoluteUrl=function T(te,$=null,J=null){if(!te)return null;try{if(J&&"string"==typeof te){if(J.addDefaultProtocol&&te.startsWith("www.")){const Me=te.match(/\./g);Me&&Me.length>=2&&(te=`http://${te}`)}if(J.tryConvertEncoding)try{te=D(te)}catch{}}const Pe=$?new URL(te,$):new URL(te);if(function E(te){if(!te)return!1;switch(te.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}(Pe))return Pe}catch{}return null},r.escapeString=function Se(te){return te.replace(/([()\\\n\r])/g,$=>"\n"===$?"\\n":"\r"===$?"\\r":`\\${$}`)},r.getModificationDate=function pe(te=new Date){return[te.getUTCFullYear().toString(),(te.getUTCMonth()+1).toString().padStart(2,"0"),te.getUTCDate().toString().padStart(2,"0"),te.getUTCHours().toString().padStart(2,"0"),te.getUTCMinutes().toString().padStart(2,"0"),te.getUTCSeconds().toString().padStart(2,"0")].join("")},r.getVerbosityLevel=function ee(){return U},r.info=function le(te){U>=b.INFOS&&console.log(`Info: ${te}`)},r.isArrayBuffer=function oe(te){return"object"==typeof te&&null!==te&&void 0!==te.byteLength},r.isArrayEqual=function se(te,$){if(te.length!==$.length)return!1;for(let J=0,Pe=te.length;J<Pe;J++)if(te[J]!==$[J])return!1;return!0},r.isAscii=function ye(te){return/^[\x00-\x7F]*$/.test(te)},r.objectFromMap=function Ae(te){const $=Object.create(null);for(const[J,Pe]of te)$[J]=Pe;return $},r.objectSize=function we(te){return Object.keys(te).length},r.setVerbosityLevel=function j(te){Number.isInteger(te)&&(U=te)},r.shadow=w,r.string32=function me(te){return String.fromCharCode(te>>24&255,te>>16&255,te>>8&255,255&te)},r.stringToBytes=ue,r.stringToPDFString=function ae(te){if(te[0]>="\xef"){let J;if("\xfe"===te[0]&&"\xff"===te[1]?J="utf-16be":"\xff"===te[0]&&"\xfe"===te[1]?J="utf-16le":"\xef"===te[0]&&"\xbb"===te[1]&&"\xbf"===te[2]&&(J="utf-8"),J)try{const Pe=new TextDecoder(J,{fatal:!0}),Me=ue(te);return Pe.decode(Me)}catch(Pe){V(`stringToPDFString: "${Pe}".`)}}const $=[];for(let J=0,Pe=te.length;J<Pe;J++){const Me=I[te.charCodeAt(J)];$.push(Me?String.fromCharCode(Me):te.charAt(J))}return $.join("")},r.stringToUTF16BEString=function xe(te){const $=["\xfe\xff"];for(let J=0,Pe=te.length;J<Pe;J++){const Me=te.charCodeAt(J);$.push(String.fromCharCode(Me>>8&255),String.fromCharCode(255&Me))}return $.join("")},r.stringToUTF8String=D,r.unreachable=g,r.utf8StringToString=function ne(te){return unescape(encodeURIComponent(te))},r.warn=V,x(2),r.IDENTITY_MATRIX=[1,0,0,1,0,0],r.FONT_IDENTITY_MATRIX=[.001,0,0,.001,0,0],r.LINE_FACTOR=1.35,r.LINE_DESCENT_FACTOR=.35,r.RenderingIntentFlag={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256},r.AnnotationMode={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},r.AnnotationEditorPrefix="pdfjs_internal_editor_",r.AnnotationEditorType={DISABLE:-1,NONE:0,FREETEXT:3,INK:15},r.AnnotationEditorParamsType={FREETEXT_SIZE:1,FREETEXT_COLOR:2,FREETEXT_OPACITY:3,INK_COLOR:11,INK_THICKNESS:12,INK_OPACITY:13},r.PermissionFlag={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},r.TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},r.ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},r.AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},r.AnnotationStateModelType={MARKED:"Marked",REVIEW:"Review"},r.AnnotationMarkedState={MARKED:"Marked",UNMARKED:"Unmarked"},r.AnnotationReviewState={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"},r.AnnotationReplyType={GROUP:"Group",REPLY:"R"},r.AnnotationFlag={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512},r.AnnotationFieldFlag={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864},r.AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},r.AnnotationActionEventType={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"},r.DocumentActionEventType={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"},r.PageActionEventType={O:"PageOpen",C:"PageClose"},r.StreamType={UNKNOWN:"UNKNOWN",FLATE:"FLATE",LZW:"LZW",DCT:"DCT",JPX:"JPX",JBIG:"JBIG",A85:"A85",AHX:"AHX",CCF:"CCF",RLX:"RLX"},r.FontType={UNKNOWN:"UNKNOWN",TYPE1:"TYPE1",TYPE1STANDARD:"TYPE1STANDARD",TYPE1C:"TYPE1C",CIDFONTTYPE0:"CIDFONTTYPE0",CIDFONTTYPE0C:"CIDFONTTYPE0C",TRUETYPE:"TRUETYPE",CIDFONTTYPE2:"CIDFONTTYPE2",TYPE3:"TYPE3",OPENTYPE:"OPENTYPE",TYPE0:"TYPE0",MMTYPE1:"MMTYPE1"};const b={ERRORS:0,WARNINGS:1,INFOS:5};r.VerbosityLevel=b,r.CMapCompressionType={NONE:0,BINARY:1,STREAM:2},r.OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},r.UNSUPPORTED_FEATURES={unknown:"unknown",forms:"forms",javaScript:"javaScript",signatures:"signatures",smask:"smask",shadingPattern:"shadingPattern",font:"font",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontBuildPath:"errorFontBuildPath",errorFontGetPath:"errorFontGetPath",errorMarkedContent:"errorMarkedContent",errorContentSubStream:"errorContentSubStream"},r.PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let U=b.WARNINGS;function V(te){U>=b.WARNINGS&&console.log(`Warning: ${te}`)}function g(te){throw new Error(te)}function w(te,$,J){return Object.defineProperty(te,$,{value:J,enumerable:!0,configurable:!0,writable:!1}),J}const n=function(){function $(J,Pe){this.constructor===$&&g("Cannot initialize BaseException."),this.message=J,this.name=Pe}return $.prototype=new Error,$.constructor=$,$}();function ue(te){"string"!=typeof te&&g("Invalid argument for stringToBytes");const $=te.length,J=new Uint8Array($);for(let Pe=0;Pe<$;++Pe)J[Pe]=255&te.charCodeAt(Pe);return J}function ve(te){return void 0!==te.length?te.length:void 0!==te.byteLength?te.byteLength:void g("Invalid argument for arrayByteLength")}r.BaseException=n,r.PasswordException=class h extends n{constructor($,J){super($,"PasswordException"),this.code=J}},r.UnknownErrorException=class d extends n{constructor($,J){super($,"UnknownErrorException"),this.details=J}},r.InvalidPDFException=class L extends n{constructor($){super($,"InvalidPDFException")}},r.MissingPDFException=class k extends n{constructor($){super($,"MissingPDFException")}},r.UnexpectedResponseException=class X extends n{constructor($,J){super($,"UnexpectedResponseException"),this.status=J}},r.FormatError=class Y extends n{constructor($){super($,"FormatError")}},r.AbortException=class he extends n{constructor($){super($,"AbortException")}},r.FeatureTest=class ce{static get isLittleEndian(){return w(this,"isLittleEndian",function re(){const te=new Uint8Array(4);return te[0]=1,1===new Uint32Array(te.buffer,0,1)[0]}())}static get isEvalSupported(){return w(this,"isEvalSupported",function K(){try{return new Function(""),!0}catch{return!1}}())}static get isOffscreenCanvasSupported(){return w(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}};const de=[...Array(256).keys()].map(te=>te.toString(16).padStart(2,"0"));class z{static makeHexColor($,J,Pe){return`#${de[$]}${de[J]}${de[Pe]}`}static scaleMinMax($,J){let Pe;$[0]?($[0]<0&&(Pe=J[0],J[0]=J[1],J[1]=Pe),J[0]*=$[0],J[1]*=$[0],$[3]<0&&(Pe=J[2],J[2]=J[3],J[3]=Pe),J[2]*=$[3],J[3]*=$[3]):(Pe=J[0],J[0]=J[2],J[2]=Pe,Pe=J[1],J[1]=J[3],J[3]=Pe,$[1]<0&&(Pe=J[2],J[2]=J[3],J[3]=Pe),J[2]*=$[1],J[3]*=$[1],$[2]<0&&(Pe=J[0],J[0]=J[1],J[1]=Pe),J[0]*=$[2],J[1]*=$[2]),J[0]+=$[4],J[1]+=$[4],J[2]+=$[5],J[3]+=$[5]}static transform($,J){return[$[0]*J[0]+$[2]*J[1],$[1]*J[0]+$[3]*J[1],$[0]*J[2]+$[2]*J[3],$[1]*J[2]+$[3]*J[3],$[0]*J[4]+$[2]*J[5]+$[4],$[1]*J[4]+$[3]*J[5]+$[5]]}static applyTransform($,J){return[$[0]*J[0]+$[1]*J[2]+J[4],$[0]*J[1]+$[1]*J[3]+J[5]]}static applyInverseTransform($,J){const Pe=J[0]*J[3]-J[1]*J[2];return[($[0]*J[3]-$[1]*J[2]+J[2]*J[5]-J[4]*J[3])/Pe,(-$[0]*J[1]+$[1]*J[0]+J[4]*J[1]-J[5]*J[0])/Pe]}static getAxialAlignedBoundingBox($,J){const Pe=z.applyTransform($,J),Me=z.applyTransform($.slice(2,4),J),ge=z.applyTransform([$[0],$[3]],J),_e=z.applyTransform([$[2],$[1]],J);return[Math.min(Pe[0],Me[0],ge[0],_e[0]),Math.min(Pe[1],Me[1],ge[1],_e[1]),Math.max(Pe[0],Me[0],ge[0],_e[0]),Math.max(Pe[1],Me[1],ge[1],_e[1])]}static inverseTransform($){const J=$[0]*$[3]-$[1]*$[2];return[$[3]/J,-$[1]/J,-$[2]/J,$[0]/J,($[2]*$[5]-$[4]*$[3])/J,($[4]*$[1]-$[5]*$[0])/J]}static apply3dTransform($,J){return[$[0]*J[0]+$[1]*J[1]+$[2]*J[2],$[3]*J[0]+$[4]*J[1]+$[5]*J[2],$[6]*J[0]+$[7]*J[1]+$[8]*J[2]]}static singularValueDecompose2dScale($){const J=[$[0],$[2],$[1],$[3]],Pe=$[0]*J[0]+$[1]*J[2],_e=$[2]*J[1]+$[3]*J[3],Ee=(Pe+_e)/2,Ce=Math.sqrt((Pe+_e)**2-4*(Pe*_e-($[2]*J[0]+$[3]*J[2])*($[0]*J[1]+$[1]*J[3])))/2,ke=Ee-Ce||1;return[Math.sqrt(Ee+Ce||1),Math.sqrt(ke)]}static normalizeRect($){const J=$.slice(0);return $[0]>$[2]&&(J[0]=$[2],J[2]=$[0]),$[1]>$[3]&&(J[1]=$[3],J[3]=$[1]),J}static intersect($,J){const Pe=Math.max(Math.min($[0],$[2]),Math.min(J[0],J[2])),Me=Math.min(Math.max($[0],$[2]),Math.max(J[0],J[2]));if(Pe>Me)return null;const ge=Math.max(Math.min($[1],$[3]),Math.min(J[1],J[3])),_e=Math.min(Math.max($[1],$[3]),Math.max(J[1],J[3]));return ge>_e?null:[Pe,ge,Me,_e]}static bezierBoundingBox($,J,Pe,Me,ge,_e,Ee,Ce){const Te=[],ke=[[],[]];let Re,Le,Oe,Fe,Ie,Ge,We,Be;for(let qe=0;qe<2;++qe)if(0===qe?(Le=6*$-12*Pe+6*ge,Re=-3*$+9*Pe-9*ge+3*Ee,Oe=3*Pe-3*$):(Le=6*J-12*Me+6*_e,Re=-3*J+9*Me-9*_e+3*Ce,Oe=3*Me-3*J),Math.abs(Re)<1e-12){if(Math.abs(Le)<1e-12)continue;Fe=-Oe/Le,0<Fe&&Fe<1&&Te.push(Fe)}else We=Le*Le-4*Oe*Re,Be=Math.sqrt(We),!(We<0)&&(Ie=(-Le+Be)/(2*Re),0<Ie&&Ie<1&&Te.push(Ie),Ge=(-Le-Be)/(2*Re),0<Ge&&Ge<1&&Te.push(Ge));let De,Ne=Te.length;const ze=Ne;for(;Ne--;)Fe=Te[Ne],De=1-Fe,ke[0][Ne]=De*De*De*$+3*De*De*Fe*Pe+3*De*Fe*Fe*ge+Fe*Fe*Fe*Ee,ke[1][Ne]=De*De*De*J+3*De*De*Fe*Me+3*De*Fe*Fe*_e+Fe*Fe*Fe*Ce;return ke[0][ze]=$,ke[1][ze]=J,ke[0][ze+1]=Ee,ke[1][ze+1]=Ce,ke[0].length=ke[1].length=ze+2,[Math.min(...ke[0]),Math.min(...ke[1]),Math.max(...ke[0]),Math.max(...ke[1])]}}r.Util=z;const I=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function D(te){return decodeURIComponent(escape(te))}},(Z,r,x)=>{x(3)},(Z,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.isNodeJS=void 0;const x=!("object"!=typeof process||process+""!="[object process]"||process.versions.nw||process.versions.electron&&process.type&&"browser"!==process.type);r.isNodeJS=x},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.build=exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,exports.getDocument=getDocument,exports.setPDFNetworkStreamFactory=setPDFNetworkStreamFactory,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(5),_display_utils=__w_pdfjs_require__(8),_font_loader=__w_pdfjs_require__(11),_canvas=__w_pdfjs_require__(12),_worker_options=__w_pdfjs_require__(15),_is_node=__w_pdfjs_require__(3),_message_handler=__w_pdfjs_require__(16),_metadata=__w_pdfjs_require__(17),_optional_content_config=__w_pdfjs_require__(18),_transport_stream=__w_pdfjs_require__(19),_xfa_text=__w_pdfjs_require__(20);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100;let DefaultCanvasFactory=_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;let DefaultCMapReaderFactory=_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;let DefaultStandardFontDataFactory=_display_utils.DOMStandardFontDataFactory,createPDFNetworkStream;if(exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory,_is_node.isNodeJS){const{NodeCanvasFactory:Z,NodeCMapReaderFactory:r,NodeStandardFontDataFactory:x}=__w_pdfjs_require__(21);exports.DefaultCanvasFactory=DefaultCanvasFactory=Z,exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory=r,exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory=x}function setPDFNetworkStreamFactory(Z){createPDFNetworkStream=Z}function getDocument(Z){const r=new PDFDocumentLoadingTask;let x;if("string"==typeof Z||Z instanceof URL)x={url:Z};else if((0,_util.isArrayBuffer)(Z))x={data:Z};else if(Z instanceof PDFDataRangeTransport)x={range:Z};else{if("object"!=typeof Z)throw new Error("Invalid parameter in getDocument, need either string, URL, TypedArray, or parameter object.");if(!Z.url&&!Z.data&&!Z.range)throw new Error("Invalid parameter object: need either .data, .range or .url");x=Z}const a=Object.create(null);let v=null,F=null;for(const Q in x){const M=x[Q];switch(Q){case"url":if(typeof window<"u")try{a[Q]=new URL(M,window.location).href;continue}catch(C){(0,_util.warn)(`Cannot create valid URL: "${C}".`)}else if("string"==typeof M||M instanceof URL){a[Q]=M.toString();continue}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.");case"range":v=M;continue;case"worker":F=M;continue;case"data":if(_is_node.isNodeJS&&typeof Buffer<"u"&&M instanceof Buffer)a[Q]=new Uint8Array(M);else{if(M instanceof Uint8Array)break;if("string"==typeof M)a[Q]=(0,_util.stringToBytes)(M);else if("object"!=typeof M||null===M||isNaN(M.length)){if(!(0,_util.isArrayBuffer)(M))throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.");a[Q]=new Uint8Array(M)}else a[Q]=new Uint8Array(M)}continue}a[Q]=M}if(a.CMapReaderFactory=a.CMapReaderFactory||DefaultCMapReaderFactory,a.StandardFontDataFactory=a.StandardFontDataFactory||DefaultStandardFontDataFactory,a.ignoreErrors=!0!==a.stopAtErrors,a.fontExtraProperties=!0===a.fontExtraProperties,a.pdfBug=!0===a.pdfBug,a.enableXfa=!0===a.enableXfa,(!Number.isInteger(a.rangeChunkSize)||a.rangeChunkSize<1)&&(a.rangeChunkSize=DEFAULT_RANGE_CHUNK_SIZE),("string"!=typeof a.docBaseUrl||(0,_display_utils.isDataScheme)(a.docBaseUrl))&&(a.docBaseUrl=null),(!Number.isInteger(a.maxImageSize)||a.maxImageSize<-1)&&(a.maxImageSize=-1),"string"!=typeof a.cMapUrl&&(a.cMapUrl=null),"string"!=typeof a.standardFontDataUrl&&(a.standardFontDataUrl=null),"boolean"!=typeof a.useWorkerFetch&&(a.useWorkerFetch=a.CMapReaderFactory===_display_utils.DOMCMapReaderFactory&&a.StandardFontDataFactory===_display_utils.DOMStandardFontDataFactory),"boolean"!=typeof a.isEvalSupported&&(a.isEvalSupported=!0),"boolean"!=typeof a.disableFontFace&&(a.disableFontFace=_is_node.isNodeJS),"boolean"!=typeof a.useSystemFonts&&(a.useSystemFonts=!_is_node.isNodeJS&&!a.disableFontFace),("object"!=typeof a.ownerDocument||null===a.ownerDocument)&&(a.ownerDocument=globalThis.document),"boolean"!=typeof a.disableRange&&(a.disableRange=!1),"boolean"!=typeof a.disableStream&&(a.disableStream=!1),"boolean"!=typeof a.disableAutoFetch&&(a.disableAutoFetch=!1),(0,_util.setVerbosityLevel)(a.verbosity),!F){const Q={verbosity:a.verbosity,port:_worker_options.GlobalWorkerOptions.workerPort};F=Q.port?PDFWorker.fromPort(Q):new PDFWorker(Q),r._worker=F}const O=r.docId;return F.promise.then(function(){if(r.destroyed)throw new Error("Loading aborted");const Q=_fetchDocument(F,a,v,O),M=new Promise(function(C){let G;v?G=new _transport_stream.PDFDataTransportStream({length:a.length,initialData:a.initialData,progressiveDone:a.progressiveDone,contentDispositionFilename:a.contentDispositionFilename,disableRange:a.disableRange,disableStream:a.disableStream},v):a.data||(G=createPDFNetworkStream({url:a.url,length:a.length,httpHeaders:a.httpHeaders,withCredentials:a.withCredentials,rangeChunkSize:a.rangeChunkSize,disableRange:a.disableRange,disableStream:a.disableStream})),C(G)});return Promise.all([Q,M]).then(function([C,G]){if(r.destroyed)throw new Error("Loading aborted");const q=new _message_handler.MessageHandler(O,C,F.port),W=new WorkerTransport(q,r,G,a);r._transport=W,q.send("Ready",null)})}).catch(r._capability.reject),r}function _fetchDocument(Z,r,x,a){return _fetchDocument2.apply(this,arguments)}function _fetchDocument2(){return(_fetchDocument2=_asyncToGenerator(function*(Z,r,x,a){if(Z.destroyed)throw new Error("Worker was destroyed");x&&(r.length=x.length,r.initialData=x.initialData,r.progressiveDone=x.progressiveDone,r.contentDispositionFilename=x.contentDispositionFilename);const v=yield Z.messageHandler.sendWithPromise("GetDocRequest",{docId:a,apiVersion:"2.16.105",source:{data:r.data,url:r.url,password:r.password,disableAutoFetch:r.disableAutoFetch,rangeChunkSize:r.rangeChunkSize,length:r.length},maxImageSize:r.maxImageSize,disableFontFace:r.disableFontFace,docBaseUrl:r.docBaseUrl,ignoreErrors:r.ignoreErrors,isEvalSupported:r.isEvalSupported,fontExtraProperties:r.fontExtraProperties,enableXfa:r.enableXfa,useSystemFonts:r.useSystemFonts,cMapUrl:r.useWorkerFetch?r.cMapUrl:null,standardFontDataUrl:r.useWorkerFetch?r.standardFontDataUrl:null});if(r.data&&(r.data=null),Z.destroyed)throw new Error("Worker was destroyed");return v})).apply(this,arguments)}class PDFDocumentLoadingTask{constructor(){var r,x;this._capability=(0,_util.createPromiseCapability)(),this._transport=null,this._worker=null,this.docId=`d${_classStaticPrivateFieldSpecSet(PDFDocumentLoadingTask,PDFDocumentLoadingTask,_docId,(r=_classStaticPrivateFieldSpecGet(PDFDocumentLoadingTask,PDFDocumentLoadingTask,_docId),x=r++,r)),x}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null,this.onUnsupportedFeature=null}get promise(){return this._capability.promise}destroy(){var r=this;return _asyncToGenerator(function*(){r.destroyed=!0,yield r._transport?.destroy(),r._transport=null,r._worker&&(r._worker.destroy(),r._worker=null)})()}}var _docId={writable:!0,value:0};exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(r,x,a=!1,v=null){this.length=r,this.initialData=x,this.progressiveDone=a,this.contentDispositionFilename=v,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=(0,_util.createPromiseCapability)()}addRangeListener(r){this._rangeListeners.push(r)}addProgressListener(r){this._progressListeners.push(r)}addProgressiveReadListener(r){this._progressiveReadListeners.push(r)}addProgressiveDoneListener(r){this._progressiveDoneListeners.push(r)}onDataRange(r,x){for(const a of this._rangeListeners)a(r,x)}onDataProgress(r,x){this._readyCapability.promise.then(()=>{for(const a of this._progressListeners)a(r,x)})}onDataProgressiveRead(r){this._readyCapability.promise.then(()=>{for(const x of this._progressiveReadListeners)x(r)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const r of this._progressiveDoneListeners)r()})}transportReady(){this._readyCapability.resolve()}requestDataRange(r,x){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(r,x){var v,a=this;this._pdfInfo=r,this._transport=x,Object.defineProperty(this,"fingerprint",{get(){return(0,_display_utils.deprecated)("`PDFDocumentProxy.fingerprint`, please use `PDFDocumentProxy.fingerprints` instead."),this.fingerprints[0]}}),Object.defineProperty(this,"getStats",{value:(v=_asyncToGenerator(function*(){return(0,_display_utils.deprecated)("`PDFDocumentProxy.getStats`, please use the `PDFDocumentProxy.stats`-getter instead."),a.stats||{streamTypes:{},fontTypes:{}}}),function(){return v.apply(this,arguments)})})}get annotationStorage(){return this._transport.annotationStorage}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get stats(){return this._transport.stats}get isPureXfa(){return!!this._transport._htmlForXfa}get allXfaHtml(){return this._transport._htmlForXfa}getPage(r){return this._transport.getPage(r)}getPageIndex(r){return this._transport.getPageIndex(r)}getDestinations(){return this._transport.getDestinations()}getDestination(r){return this._transport.getDestination(r)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(r=!1){return this._transport.startCleanup(r||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}saveDocument(){return this._transport.annotationStorage.size<=0&&(0,_display_utils.deprecated)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead."),this._transport.saveDocument()}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(r,x,a,v,F=!1){this._pageIndex=r,this._pageInfo=x,this._ownerDocument=v,this._transport=a,this._stats=F?new _display_utils.StatTimer:null,this._pdfBug=F,this.commonObjs=a.commonObjs,this.objs=new PDFObjects,this._bitmaps=new Set,this.cleanupAfterRender=!1,this.pendingCleanup=!1,this._intentStates=new Map,this._annotationPromises=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:r,rotation:x=this.rotate,offsetX:a=0,offsetY:v=0,dontFlip:F=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:r,rotation:x,offsetX:a,offsetY:v,dontFlip:F})}getAnnotations({intent:r="display"}={}){const x=this._transport.getRenderingIntent(r);let a=this._annotationPromises.get(x.cacheKey);return a||(a=this._transport.getAnnotations(this._pageIndex,x.renderingIntent),this._annotationPromises.set(x.cacheKey,a),a=a.then(v=>{for(const F of v)void 0!==F.titleObj&&Object.defineProperty(F,"title",{get:()=>((0,_display_utils.deprecated)("`title`-property on annotation, please use `titleObj` instead."),F.titleObj.str)}),void 0!==F.contentsObj&&Object.defineProperty(F,"contents",{get:()=>((0,_display_utils.deprecated)("`contents`-property on annotation, please use `contentsObj` instead."),F.contentsObj.str)});return v})),a}getJSActions(){return this._jsActionsPromise||=this._transport.getPageJSActions(this._pageIndex)}getXfa(){var r=this;return _asyncToGenerator(function*(){return r._transport._htmlForXfa?.children[r._pageIndex]||null})()}render({canvasContext:r,viewport:x,intent:a="display",annotationMode:v=_util.AnnotationMode.ENABLE,transform:F=null,imageLayer:O=null,canvasFactory:Q=null,background:M=null,optionalContentConfigPromise:C=null,annotationCanvasMap:G=null,pageColors:q=null,printAnnotationStorage:W=null}){void 0!==arguments[0]?.renderInteractiveForms&&((0,_display_utils.deprecated)("render no longer accepts the `renderInteractiveForms`-option, please use the `annotationMode`-option instead."),!0===arguments[0].renderInteractiveForms&&v===_util.AnnotationMode.ENABLE&&(v=_util.AnnotationMode.ENABLE_FORMS)),void 0!==arguments[0]?.includeAnnotationStorage&&((0,_display_utils.deprecated)("render no longer accepts the `includeAnnotationStorage`-option, please use the `annotationMode`-option instead."),!0===arguments[0].includeAnnotationStorage&&v===_util.AnnotationMode.ENABLE&&(v=_util.AnnotationMode.ENABLE_STORAGE)),this._stats&&this._stats.time("Overall");const y=this._transport.getRenderingIntent(a,v,W);this.pendingCleanup=!1,C||(C=this._transport.getOptionalContentConfig());let t=this._intentStates.get(y.cacheKey);t||(t=Object.create(null),this._intentStates.set(y.cacheKey,t)),t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null);const s=Q||new DefaultCanvasFactory({ownerDocument:this._ownerDocument}),_=!!(y.renderingIntent&_util.RenderingIntentFlag.PRINT);t.displayReadyCapability||(t.displayReadyCapability=(0,_util.createPromiseCapability)(),t.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(y));const P=u=>{t.renderTasks.delete(p),(this.cleanupAfterRender||_)&&(this.pendingCleanup=!0),this._tryCleanup(),u?(p.capability.reject(u),this._abortOperatorList({intentState:t,reason:u instanceof Error?u:new Error(u)})):p.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"))},p=new InternalRenderTask({callback:P,params:{canvasContext:r,viewport:x,transform:F,imageLayer:O,background:M},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:G,operatorList:t.operatorList,pageIndex:this._pageIndex,canvasFactory:s,useRequestAnimationFrame:!_,pdfBug:this._pdfBug,pageColors:q});(t.renderTasks||=new Set).add(p);const A=p.task;return Promise.all([t.displayReadyCapability.promise,C]).then(([u,i])=>{this.pendingCleanup?P():(this._stats&&this._stats.time("Rendering"),p.initializeGraphics({transparency:u,optionalContentConfig:i}),p.operatorListChanged())}).catch(P),A}getOperatorList({intent:r="display",annotationMode:x=_util.AnnotationMode.ENABLE,printAnnotationStorage:a=null}={}){const F=this._transport.getRenderingIntent(r,x,a,!0);let Q,O=this._intentStates.get(F.cacheKey);return O||(O=Object.create(null),this._intentStates.set(F.cacheKey,O)),O.opListReadCapability||(Q=Object.create(null),Q.operatorListChanged=function v(){O.operatorList.lastChunk&&(O.opListReadCapability.resolve(O.operatorList),O.renderTasks.delete(Q))},O.opListReadCapability=(0,_util.createPromiseCapability)(),(O.renderTasks||=new Set).add(Q),O.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(F)),O.opListReadCapability.promise}streamTextContent({disableCombineTextItems:r=!1,includeMarkedContent:x=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,combineTextItems:!0!==r,includeMarkedContent:!0===x},{highWaterMark:100,size:v=>v.items.length})}getTextContent(r={}){if(this._transport._htmlForXfa)return this.getXfa().then(a=>_xfa_text.XfaText.textContent(a));const x=this.streamTextContent(r);return new Promise(function(a,v){const O=x.getReader(),Q={items:[],styles:Object.create(null)};!function F(){O.read().then(function({value:M,done:C}){C?a(Q):(Object.assign(Q.styles,M.styles),Q.items.push(...M.items),F())},v)}()})}getStructTree(){return this._structTreePromise||=this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const r=[];for(const x of this._intentStates.values())if(this._abortOperatorList({intentState:x,reason:new Error("Page was destroyed."),force:!0}),!x.opListReadCapability)for(const a of x.renderTasks)r.push(a.completed),a.cancel();this.objs.clear();for(const x of this._bitmaps)x.close();return this._bitmaps.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,this.pendingCleanup=!1,Promise.all(r)}cleanup(r=!1){return this.pendingCleanup=!0,this._tryCleanup(r)}_tryCleanup(r=!1){if(!this.pendingCleanup)return!1;for(const{renderTasks:x,operatorList:a}of this._intentStates.values())if(x.size>0||!a.lastChunk)return!1;this._intentStates.clear(),this.objs.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,r&&this._stats&&(this._stats=new _display_utils.StatTimer);for(const x of this._bitmaps)x.close();return this._bitmaps.clear(),this.pendingCleanup=!1,!0}_startRenderPage(r,x){const a=this._intentStates.get(x);a&&(this._stats&&this._stats.timeEnd("Page Request"),a.displayReadyCapability&&a.displayReadyCapability.resolve(r))}_renderPageChunk(r,x){for(let a=0,v=r.length;a<v;a++)x.operatorList.fnArray.push(r.fnArray[a]),x.operatorList.argsArray.push(r.argsArray[a]);x.operatorList.lastChunk=r.lastChunk,x.operatorList.separateAnnots=r.separateAnnots;for(const a of x.renderTasks)a.operatorListChanged();r.lastChunk&&this._tryCleanup()}_pumpOperatorList({renderingIntent:r,cacheKey:x,annotationStorageMap:a}){const F=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:r,cacheKey:x,annotationStorage:a}).getReader(),O=this._intentStates.get(x);O.streamReader=F;const Q=()=>{F.read().then(({value:M,done:C})=>{C?O.streamReader=null:this._transport.destroyed||(this._renderPageChunk(M,O),Q())},M=>{if(O.streamReader=null,!this._transport.destroyed){if(O.operatorList){O.operatorList.lastChunk=!0;for(const C of O.renderTasks)C.operatorListChanged();this._tryCleanup()}if(O.displayReadyCapability)O.displayReadyCapability.reject(M);else{if(!O.opListReadCapability)throw M;O.opListReadCapability.reject(M)}}})};Q()}_abortOperatorList({intentState:r,reason:x,force:a=!1}){if(r.streamReader){if(!a){if(r.renderTasks.size>0)return;if(x instanceof _display_utils.RenderingCancelledException)return void(r.streamReaderCancelTimeout=setTimeout(()=>{this._abortOperatorList({intentState:r,reason:x,force:!0}),r.streamReaderCancelTimeout=null},RENDERING_CANCELLED_TIMEOUT))}if(r.streamReader.cancel(new _util.AbortException(x.message)).catch(()=>{}),r.streamReader=null,!this._transport.destroyed){for(const[v,F]of this._intentStates)if(F===r){this._intentStates.delete(v);break}this.cleanup()}}}get stats(){return this._stats}}exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){this._listeners=[],this._deferred=Promise.resolve()}postMessage(r,x){const a={data:structuredClone(r,x)};this._deferred.then(()=>{for(const v of this._listeners)v.call(this,a)})}addEventListener(r,x){this._listeners.push(x)}removeEventListener(r,x){const a=this._listeners.indexOf(x);this._listeners.splice(a,1)}terminate(){this._listeners.length=0}}exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};if(exports.PDFWorkerUtil=PDFWorkerUtil,_is_node.isNodeJS)PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if("object"==typeof document){const Z=document?.currentScript?.src;Z&&(PDFWorkerUtil.fallbackWorkerSrc=Z.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(Z,r){let x;try{if(x=new URL(Z),!x.origin||"null"===x.origin)return!1}catch{return!1}const a=new URL(r,x);return x.origin===a.origin},PDFWorkerUtil.createCDNWrapper=function(Z){return URL.createObjectURL(new Blob([`importScripts("${Z}");`]))};class PDFWorker{constructor({name:Z=null,port:r=null,verbosity:x=(0,_util.getVerbosityLevel)()}={}){if(r&&_classStaticPrivateFieldSpecGet(PDFWorker,PDFWorker,_workerPorts).has(r))throw new Error("Cannot use more than one PDFWorker per port.");if(this.name=Z,this.destroyed=!1,this.verbosity=x,this._readyCapability=(0,_util.createPromiseCapability)(),this._port=null,this._webWorker=null,this._messageHandler=null,r)return _classStaticPrivateFieldSpecGet(PDFWorker,PDFWorker,_workerPorts).set(r,this),void this._initializeFromPort(r);this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(Z){this._port=Z,this._messageHandler=new _message_handler.MessageHandler("main","worker",Z),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve()}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:Z}=PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,Z)||(Z=PDFWorkerUtil.createCDNWrapper(new URL(Z,window.location).href));const r=new Worker(Z),x=new _message_handler.MessageHandler("main","worker",r),a=()=>{r.removeEventListener("error",v),x.destroy(),r.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},v=()=>{this._webWorker||a()};r.addEventListener("error",v),x.on("test",O=>{r.removeEventListener("error",v),this.destroyed?a():O?(this._messageHandler=x,this._port=r,this._webWorker=r,this._readyCapability.resolve(),x.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),x.destroy(),r.terminate())}),x.on("ready",O=>{if(r.removeEventListener("error",v),this.destroyed)a();else try{F()}catch{this._setupFakeWorker()}});const F=()=>{const O=new Uint8Array;x.send("test",O,[O.buffer])};return void F()}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),PDFWorker._setupFakeWorkerGlobal.then(Z=>{if(this.destroyed)return void this._readyCapability.reject(new Error("Worker was destroyed"));const r=new LoopbackPort;this._port=r;const x="fake"+PDFWorkerUtil.fakeWorkerId++,a=new _message_handler.MessageHandler(x+"_worker",x,r);Z.setup(a,r);const v=new _message_handler.MessageHandler(x,x+"_worker",r);this._messageHandler=v,this._readyCapability.resolve(),v.send("configure",{verbosity:this.verbosity})}).catch(Z=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${Z.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),_classStaticPrivateFieldSpecGet(PDFWorker,PDFWorker,_workerPorts).delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(Z){if(!Z?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return _classStaticPrivateFieldSpecGet(this,PDFWorker,_workerPorts).has(Z.port)?_classStaticPrivateFieldSpecGet(this,PDFWorker,_workerPorts).get(Z.port):new PDFWorker(Z)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(null!==PDFWorkerUtil.fallbackWorkerSrc)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}}static get _setupFakeWorkerGlobal(){var _this4=this;const loader=function(){var _ref2=_asyncToGenerator(function*(){const mainWorkerMessageHandler=_this4._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS){const worker=eval("require")(_this4.workerSrc);return worker.WorkerMessageHandler}return yield(0,_display_utils.loadScript)(_this4.workerSrc),window.pdfjsWorker.WorkerMessageHandler});return function Z(){return _ref2.apply(this,arguments)}}();return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}}var _workerPorts={writable:!0,value:new WeakMap};exports.PDFWorker=PDFWorker,PDFWorker.getWorkerSrc=function(){return(0,_display_utils.deprecated)("`PDFWorker.getWorkerSrc()`, please use `PDFWorker.workerSrc` instead."),this.workerSrc};var _docStats=new WeakMap,_pageCache=new WeakMap,_pagePromises=new WeakMap,_metadataPromise=new WeakMap;class WorkerTransport{constructor(r,x,a,v){_classPrivateFieldInitSpec(this,_docStats,{writable:!0,value:null}),_classPrivateFieldInitSpec(this,_pageCache,{writable:!0,value:new Map}),_classPrivateFieldInitSpec(this,_pagePromises,{writable:!0,value:new Map}),_classPrivateFieldInitSpec(this,_metadataPromise,{writable:!0,value:null}),this.messageHandler=r,this.loadingTask=x,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({docId:x.docId,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),ownerDocument:v.ownerDocument,styleElement:v.styleElement}),this._params=v,v.useWorkerFetch||(this.CMapReaderFactory=new v.CMapReaderFactory({baseUrl:v.cMapUrl,isCompressed:v.cMapPacked}),this.StandardFontDataFactory=new v.StandardFontDataFactory({baseUrl:v.standardFontDataUrl})),this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=a,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=(0,_util.createPromiseCapability)(),this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}get stats(){return _classPrivateFieldGet(this,_docStats)}getRenderingIntent(r,x=_util.AnnotationMode.ENABLE,a=null,v=!1){let F=_util.RenderingIntentFlag.DISPLAY,O=null;switch(r){case"any":F=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":F=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${r}`)}switch(x){case _util.AnnotationMode.DISABLE:F+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:F+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:F+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,O=(F&_util.RenderingIntentFlag.PRINT&&a instanceof _annotation_storage.PrintAnnotationStorage?a:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${x}`)}return v&&(F+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:F,cacheKey:`${F}_${_annotation_storage.AnnotationStorage.getHash(O)}`,annotationStorageMap:O}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=(0,_util.createPromiseCapability)(),this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));const r=[];for(const a of _classPrivateFieldGet(this,_pageCache).values())r.push(a._destroy());_classPrivateFieldGet(this,_pageCache).clear(),_classPrivateFieldGet(this,_pagePromises).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const x=this.messageHandler.sendWithPromise("Terminate",null);return r.push(x),Promise.all(r).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),_classPrivateFieldSet(this,_metadataPromise,null),this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null,this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:r,loadingTask:x}=this;r.on("GetReader",(a,v)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=F=>{this._lastProgress={loaded:F.loaded,total:F.total}},v.onPull=()=>{this._fullReader.read().then(function({value:F,done:O}){O?v.close():((0,_util.assert)((0,_util.isArrayBuffer)(F),"GetReader - expected an ArrayBuffer."),v.enqueue(new Uint8Array(F),1,[F]))}).catch(F=>{v.error(F)})},v.onCancel=F=>{this._fullReader.cancel(F),v.ready.catch(O=>{if(!this.destroyed)throw O})}}),r.on("ReaderHeadersReady",a=>{const v=(0,_util.createPromiseCapability)(),F=this._fullReader;return F.headersReady.then(()=>{(!F.isStreamingSupported||!F.isRangeSupported)&&(this._lastProgress&&x.onProgress?.(this._lastProgress),F.onProgress=O=>{x.onProgress?.({loaded:O.loaded,total:O.total})}),v.resolve({isStreamingSupported:F.isStreamingSupported,isRangeSupported:F.isRangeSupported,contentLength:F.contentLength})},v.reject),v.promise}),r.on("GetRangeReader",(a,v)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const F=this._networkStream.getRangeReader(a.begin,a.end);F?(v.onPull=()=>{F.read().then(function({value:O,done:Q}){Q?v.close():((0,_util.assert)((0,_util.isArrayBuffer)(O),"GetRangeReader - expected an ArrayBuffer."),v.enqueue(new Uint8Array(O),1,[O]))}).catch(O=>{v.error(O)})},v.onCancel=O=>{F.cancel(O),v.ready.catch(Q=>{if(!this.destroyed)throw Q})}):v.close()}),r.on("GetDoc",({pdfInfo:a})=>{this._numPages=a.numPages,this._htmlForXfa=a.htmlForXfa,delete a.htmlForXfa,x._capability.resolve(new PDFDocumentProxy(a,this))}),r.on("DocException",function(a){let v;switch(a.name){case"PasswordException":v=new _util.PasswordException(a.message,a.code);break;case"InvalidPDFException":v=new _util.InvalidPDFException(a.message);break;case"MissingPDFException":v=new _util.MissingPDFException(a.message);break;case"UnexpectedResponseException":v=new _util.UnexpectedResponseException(a.message,a.status);break;case"UnknownErrorException":v=new _util.UnknownErrorException(a.message,a.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}x._capability.reject(v)}),r.on("PasswordRequest",a=>{if(this._passwordCapability=(0,_util.createPromiseCapability)(),x.onPassword){const v=F=>{F instanceof Error?this._passwordCapability.reject(F):this._passwordCapability.resolve({password:F})};try{x.onPassword(v,a.code)}catch(F){this._passwordCapability.reject(F)}}else this._passwordCapability.reject(new _util.PasswordException(a.message,a.code));return this._passwordCapability.promise}),r.on("DataLoaded",a=>{x.onProgress?.({loaded:a.length,total:a.length}),this.downloadInfoCapability.resolve(a)}),r.on("StartRenderPage",a=>{this.destroyed||_classPrivateFieldGet(this,_pageCache).get(a.pageIndex)._startRenderPage(a.transparency,a.cacheKey)}),r.on("commonobj",([a,v,F])=>{if(!this.destroyed&&!this.commonObjs.has(a))switch(v){case"Font":const O=this._params;if("error"in F){const C=F.error;(0,_util.warn)(`Error during font loading: ${C}`),this.commonObjs.resolve(a,C);break}let Q=null;O.pdfBug&&globalThis.FontInspector?.enabled&&(Q={registerFont(C,G){globalThis.FontInspector.fontAdded(C,G)}});const M=new _font_loader.FontFaceObject(F,{isEvalSupported:O.isEvalSupported,disableFontFace:O.disableFontFace,ignoreErrors:O.ignoreErrors,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),fontRegistry:Q});this.fontLoader.bind(M).catch(C=>r.sendWithPromise("FontFallback",{id:a})).finally(()=>{!O.fontExtraProperties&&M.data&&(M.data=null),this.commonObjs.resolve(a,M)});break;case"FontPath":case"Image":this.commonObjs.resolve(a,F);break;default:throw new Error(`Got unknown common object type ${v}`)}}),r.on("obj",([a,v,F,O])=>{if(this.destroyed)return;const Q=_classPrivateFieldGet(this,_pageCache).get(v);if(!Q.objs.has(a))switch(F){case"Image":Q.objs.resolve(a,O);const M=8e6;if(O){let C;if(O.bitmap){const{bitmap:G,width:q,height:W}=O;C=q*W*4,Q._bitmaps.add(G)}else C=O.data?.length||0;C>M&&(Q.cleanupAfterRender=!0)}break;case"Pattern":Q.objs.resolve(a,O);break;default:throw new Error(`Got unknown object type ${F}`)}}),r.on("DocProgress",a=>{this.destroyed||x.onProgress?.({loaded:a.loaded,total:a.total})}),r.on("DocStats",a=>{this.destroyed||_classPrivateFieldSet(this,_docStats,Object.freeze({streamTypes:Object.freeze(a.streamTypes),fontTypes:Object.freeze(a.fontTypes)}))}),r.on("UnsupportedFeature",this._onUnsupportedFeature.bind(this)),r.on("FetchBuiltInCMap",a=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.CMapReaderFactory?this.CMapReaderFactory.fetch(a):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),r.on("FetchStandardFontData",a=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.StandardFontDataFactory?this.StandardFontDataFactory.fetch(a):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}_onUnsupportedFeature({featureId:r}){this.destroyed||this.loadingTask.onUnsupportedFeature?.(r)}getData(){return this.messageHandler.sendWithPromise("GetData",null)}getPage(r){if(!Number.isInteger(r)||r<=0||r>this._numPages)return Promise.reject(new Error("Invalid page request."));const x=r-1,a=_classPrivateFieldGet(this,_pagePromises).get(x);if(a)return a;const v=this.messageHandler.sendWithPromise("GetPage",{pageIndex:x}).then(F=>{if(this.destroyed)throw new Error("Transport destroyed");const O=new PDFPageProxy(x,F,this,this._params.ownerDocument,this._params.pdfBug);return _classPrivateFieldGet(this,_pageCache).set(x,O),O});return _classPrivateFieldGet(this,_pagePromises).set(x,v),v}getPageIndex(r){return"object"!=typeof r||null===r||!Number.isInteger(r.num)||r.num<0||!Number.isInteger(r.gen)||r.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:r.num,gen:r.gen})}getAnnotations(r,x){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:r,intent:x})}saveDocument(){return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:this._fullReader?.filename??null}).finally(()=>{this.annotationStorage.resetModified()})}getFieldObjects(){return this._getFieldObjectsPromise||=this.messageHandler.sendWithPromise("GetFieldObjects",null)}hasJSActions(){return this._hasJSActionsPromise||=this.messageHandler.sendWithPromise("HasJSActions",null)}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(r){return"string"!=typeof r?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:r})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}getPageJSActions(r){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:r})}getStructTree(r){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:r})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(r=>new _optional_content_config.OptionalContentConfig(r))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){return _classPrivateFieldGet(this,_metadataPromise)||_classPrivateFieldSet(this,_metadataPromise,this.messageHandler.sendWithPromise("GetMetadata",null).then(r=>({info:r[0],metadata:r[1]?new _metadata.Metadata(r[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null})))}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}startCleanup(r=!1){var x=this;return _asyncToGenerator(function*(){if(yield x.messageHandler.sendWithPromise("Cleanup",null),!x.destroyed){for(const a of _classPrivateFieldGet(x,_pageCache).values())if(!a.cleanup())throw new Error(`startCleanup: Page ${a.pageNumber} is currently rendering.`);x.commonObjs.clear(),r||x.fontLoader.clear(),_classPrivateFieldSet(x,_metadataPromise,null),x._getFieldObjectsPromise=null,x._hasJSActionsPromise=null}})()}get loadingParams(){const r=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:r.disableAutoFetch,enableXfa:r.enableXfa})}}var _objs=new WeakMap,_ensureObj=new WeakSet;class PDFObjects{constructor(){_classPrivateMethodInitSpec(this,_ensureObj),_classPrivateFieldInitSpec(this,_objs,{writable:!0,value:Object.create(null)})}get(r,x=null){if(x){const v=_classPrivateMethodGet(this,_ensureObj,_ensureObj2).call(this,r);return v.capability.promise.then(()=>x(v.data)),null}const a=_classPrivateFieldGet(this,_objs)[r];if(!a?.capability.settled)throw new Error(`Requesting object that isn't resolved yet ${r}.`);return a.data}has(r){return _classPrivateFieldGet(this,_objs)[r]?.capability.settled||!1}resolve(r,x=null){const a=_classPrivateMethodGet(this,_ensureObj,_ensureObj2).call(this,r);a.data=x,a.capability.resolve()}clear(){_classPrivateFieldSet(this,_objs,Object.create(null))}}function _ensureObj2(Z){return _classPrivateFieldGet(this,_objs)[Z]||(_classPrivateFieldGet(this,_objs)[Z]={capability:(0,_util.createPromiseCapability)(),data:null})}var _internalRenderTask=new WeakMap;class RenderTask{constructor(r){_classPrivateFieldInitSpec(this,_internalRenderTask,{writable:!0,value:null}),_classPrivateFieldSet(this,_internalRenderTask,r),this.onContinue=null}get promise(){return _classPrivateFieldGet(this,_internalRenderTask).capability.promise}cancel(){_classPrivateFieldGet(this,_internalRenderTask).cancel()}get separateAnnots(){const{separateAnnots:r}=_classPrivateFieldGet(this,_internalRenderTask).operatorList;if(!r)return!1;const{annotationCanvasMap:x}=_classPrivateFieldGet(this,_internalRenderTask);return r.form||r.canvas&&x?.size>0}}exports.RenderTask=RenderTask;class InternalRenderTask{constructor({callback:r,params:x,objs:a,commonObjs:v,annotationCanvasMap:F,operatorList:O,pageIndex:Q,canvasFactory:M,useRequestAnimationFrame:C=!1,pdfBug:G=!1,pageColors:q=null}){this.callback=r,this.params=x,this.objs=a,this.commonObjs=v,this.annotationCanvasMap=F,this.operatorListIdx=null,this.operatorList=O,this._pageIndex=Q,this.canvasFactory=M,this._pdfBug=G,this.pageColors=q,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=!0===C&&typeof window<"u",this.cancelled=!1,this.capability=(0,_util.createPromiseCapability)(),this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=x.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:r=!1,optionalContentConfig:x}){if(this.cancelled)return;if(this._canvas){if(_classStaticPrivateFieldSpecGet(InternalRenderTask,InternalRenderTask,_canvasInUse).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");_classStaticPrivateFieldSpecGet(InternalRenderTask,InternalRenderTask,_canvasInUse).add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:a,viewport:v,transform:F,imageLayer:O,background:Q}=this.params;this.gfx=new _canvas.CanvasGraphics(a,this.commonObjs,this.objs,this.canvasFactory,O,x,this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:F,viewport:v,transparency:r,background:Q}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback&&this.graphicsReadyCallback()}cancel(r=null){this.running=!1,this.cancelled=!0,this.gfx&&this.gfx.endDrawing(),this._canvas&&_classStaticPrivateFieldSpecGet(InternalRenderTask,InternalRenderTask,_canvasInUse).delete(this._canvas),this.callback(r||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,"canvas"))}operatorListChanged(){this.graphicsReady?(this.stepper&&this.stepper.updateOperatorList(this.operatorList),!this.running&&this._continue()):this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound)}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}_next(){var r=this;return _asyncToGenerator(function*(){r.cancelled||(r.operatorListIdx=r.gfx.executeOperatorList(r.operatorList,r.operatorListIdx,r._continueBound,r.stepper),r.operatorListIdx===r.operatorList.argsArray.length&&(r.running=!1,r.operatorList.lastChunk&&(r.gfx.endDrawing(),r._canvas&&_classStaticPrivateFieldSpecGet(InternalRenderTask,InternalRenderTask,_canvasInUse).delete(r._canvas),r.callback())))})()}}var _canvasInUse={writable:!0,value:new WeakSet};const version="2.16.105";exports.version=version;const build="172ccdbe5";exports.build=build},(Z,r,x)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.PrintAnnotationStorage=r.AnnotationStorage=void 0;var a=x(1),v=x(6),F=x(10),O=new WeakSet;class Q{constructor(){_classPrivateMethodInitSpec(this,O),this._storage=new Map,this._modified=!1,this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(W,y){const t=this._storage.get(W);return void 0===t?y:Object.assign(y,t)}getRawValue(W){return this._storage.get(W)}remove(W){if(this._storage.delete(W),0===this._storage.size&&this.resetModified(),"function"==typeof this.onAnnotationEditor){for(const y of this._storage.values())if(y instanceof v.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(W,y){const t=this._storage.get(W);let s=!1;if(void 0!==t)for(const[_,P]of Object.entries(y))t[_]!==P&&(s=!0,t[_]=P);else s=!0,this._storage.set(W,y);s&&_classPrivateMethodGet(this,O,M).call(this),y instanceof v.AnnotationEditor&&"function"==typeof this.onAnnotationEditor&&this.onAnnotationEditor(y.constructor._type)}has(W){return this._storage.has(W)}getAll(){return this._storage.size>0?(0,a.objectFromMap)(this._storage):null}get size(){return this._storage.size}resetModified(){this._modified&&(this._modified=!1,"function"==typeof this.onResetModified&&this.onResetModified())}get print(){return new G(this)}get serializable(){if(0===this._storage.size)return null;const W=new Map;for(const[y,t]of this._storage){const s=t instanceof v.AnnotationEditor?t.serialize():t;s&&W.set(y,s)}return W}static getHash(W){if(!W)return"";const y=new F.MurmurHash3_64;for(const[t,s]of W)y.update(`${t}:${JSON.stringify(s)}`);return y.hexdigest()}}function M(){this._modified||(this._modified=!0,"function"==typeof this.onSetModified&&this.onSetModified())}r.AnnotationStorage=Q;var C=new WeakMap;class G extends Q{constructor(W){super(),_classPrivateFieldInitSpec(this,C,{writable:!0,value:null}),_classPrivateFieldSet(this,C,structuredClone(W.serializable))}get print(){(0,a.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return _classPrivateFieldGet(this,C)}}r.PrintAnnotationStorage=G},(Z,r,x)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.AnnotationEditor=void 0;var a=x(7),v=x(1),F=new WeakMap,O=new WeakMap,Q=new WeakMap,M=new WeakMap,C=new WeakMap,G=new WeakMap;class q{constructor(y){_classPrivateFieldInitSpec(this,F,{writable:!0,value:this.focusin.bind(this)}),_classPrivateFieldInitSpec(this,O,{writable:!0,value:this.focusout.bind(this)}),_classPrivateFieldInitSpec(this,Q,{writable:!0,value:!1}),_classPrivateFieldInitSpec(this,M,{writable:!0,value:!1}),_classPrivateFieldInitSpec(this,C,{writable:!0,value:!1}),_classPrivateFieldInitSpec(this,G,{writable:!0,value:q._zIndex++}),this.constructor===q&&(0,v.unreachable)("Cannot initialize AnnotationEditor."),this.parent=y.parent,this.id=y.id,this.width=this.height=null,this.pageIndex=y.parent.pageIndex,this.name=y.name,this.div=null;const[t,s]=this.parent.viewportBaseDimensions;this.x=y.x/t,this.y=y.y/s,this.rotation=this.parent.viewport.rotation,this.isAttachedToDOM=!1}static get _defaultLineColor(){return(0,v.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=_classPrivateFieldGet(this,G)}focusin(y){_classPrivateFieldGet(this,Q)?_classPrivateFieldSet(this,Q,!1):this.parent.setSelected(this)}focusout(y){!this.isAttachedToDOM||y.relatedTarget?.closest(`#${this.id}`)||(y.preventDefault(),this.parent.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.parent.addToAnnotationStorage(this)}dragstart(y){const t=this.parent.div.getBoundingClientRect();this.startX=y.clientX-t.x,this.startY=y.clientY-t.y,y.dataTransfer.setData("text/plain",this.id),y.dataTransfer.effectAllowed="move"}setAt(y,t,s,_){const[P,p]=this.parent.viewportBaseDimensions;[s,_]=this.screenToPageTranslation(s,_),this.x=(y+s)/P,this.y=(t+_)/p,this.div.style.left=100*this.x+"%",this.div.style.top=100*this.y+"%"}translate(y,t){const[s,_]=this.parent.viewportBaseDimensions;[y,t]=this.screenToPageTranslation(y,t),this.x+=y/s,this.y+=t/_,this.div.style.left=100*this.x+"%",this.div.style.top=100*this.y+"%"}screenToPageTranslation(y,t){const{rotation:s}=this.parent.viewport;switch(s){case 90:return[t,-y];case 180:return[-y,-t];case 270:return[-t,y];default:return[y,t]}}setDims(y,t){const[s,_]=this.parent.viewportBaseDimensions;this.div.style.width=100*y/s+"%",this.div.style.height=100*t/_+"%"}getInitialTranslation(){return[0,0]}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",_classPrivateFieldGet(this,F)),this.div.addEventListener("focusout",_classPrivateFieldGet(this,O));const[y,t]=this.getInitialTranslation();return this.translate(y,t),(0,a.bindEvents)(this,this.div,["dragstart","pointerdown"]),this.div}pointerdown(y){const t=a.KeyboardManager.platform.isMac;0!==y.button||y.ctrlKey&&t?y.preventDefault():(y.ctrlKey&&!t||y.shiftKey||y.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this),_classPrivateFieldSet(this,Q,!0))}getRect(y,t){const[s,_]=this.parent.viewportBaseDimensions,[P,p]=this.parent.pageDimensions,A=P*y/s,u=p*t/_,i=this.x*P,e=this.y*p,o=this.width*P,m=this.height*p;switch(this.rotation){case 0:return[i+A,p-e-u-m,i+A+o,p-e-u];case 90:return[i+u,p-e+A,i+u+m,p-e+A+o];case 180:return[i-A-o,p-e+u,i-A,p-e+u+m];case 270:return[i-u-m,p-e-A-o,i-u,p-e-A];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(y,t){const[s,_,P,p]=y,A=P-s,u=p-_;switch(this.rotation){case 0:return[s,t-p,A,u];case 90:return[s,t-_,u,A];case 180:return[P,t-_,A,u];case 270:return[P,t-p,u,A];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){_classPrivateFieldSet(this,C,!0)}disableEditMode(){_classPrivateFieldSet(this,C,!1)}isInEditMode(){return _classPrivateFieldGet(this,C)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){this.div?.addEventListener("focusin",_classPrivateFieldGet(this,F))}serialize(){(0,v.unreachable)("An editor must be serializable")}static deserialize(y,t){const s=new this.prototype.constructor({parent:t,id:t.getNextId()});s.rotation=y.rotation;const[_,P]=t.pageDimensions,[p,A,u,i]=s.getRectInCurrentCoords(y.rect,P);return s.x=p/_,s.y=A/P,s.width=u/_,s.height=i/P,s}remove(){this.div.removeEventListener("focusin",_classPrivateFieldGet(this,F)),this.div.removeEventListener("focusout",_classPrivateFieldGet(this,O)),this.isEmpty()||this.commit(),this.parent.remove(this)}select(){this.div?.classList.add("selectedEditor")}unselect(){this.div?.classList.remove("selectedEditor")}updateParams(y,t){}disableEditing(){}enableEditing(){}get propertiesToUpdate(){return{}}get contentDiv(){return this.div}get isEditing(){return _classPrivateFieldGet(this,M)}set isEditing(y){_classPrivateFieldSet(this,M,y),y?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null)}}_defineProperty(q,"_colorManager",new a.ColorManager),_defineProperty(q,"_zIndex",1),r.AnnotationEditor=q},(Z,r,x)=>{var a;Object.defineProperty(r,"__esModule",{value:!0}),r.KeyboardManager=r.CommandManager=r.ColorManager=r.AnnotationEditorUIManager=void 0,r.bindEvents=function O(Ae,re,K){for(const ce of K)re.addEventListener(ce,Ae[ce].bind(Ae))},r.opacityToHex=function Q(Ae){return Math.round(Math.min(255,Math.max(1,255*Ae))).toString(16).padStart(2,"0")};var v=x(1),F=x(8),M=new WeakMap;class C{constructor(){_classPrivateFieldInitSpec(this,M,{writable:!0,value:0})}getId(){var re,K;return`${v.AnnotationEditorPrefix}${_classPrivateFieldSet(this,M,(re=_classPrivateFieldGet(this,M),K=re++,re)),K}`}}var G=new WeakMap,q=new WeakMap,W=new WeakMap,y=new WeakMap;class t{constructor(re=128){_classPrivateFieldInitSpec(this,G,{writable:!0,value:[]}),_classPrivateFieldInitSpec(this,q,{writable:!0,value:!1}),_classPrivateFieldInitSpec(this,W,{writable:!0,value:void 0}),_classPrivateFieldInitSpec(this,y,{writable:!0,value:-1}),_classPrivateFieldSet(this,W,re)}add({cmd:re,undo:K,mustExec:ce,type:de=NaN,overwriteIfSameType:z=!1,keepUndo:I=!1}){if(ce&&re(),_classPrivateFieldGet(this,q))return;const ae={cmd:re,undo:K,type:de};if(-1===_classPrivateFieldGet(this,y))return _classPrivateFieldGet(this,G).length>0&&(_classPrivateFieldGet(this,G).length=0),_classPrivateFieldSet(this,y,0),void _classPrivateFieldGet(this,G).push(ae);if(z&&_classPrivateFieldGet(this,G)[_classPrivateFieldGet(this,y)].type===de)return I&&(ae.undo=_classPrivateFieldGet(this,G)[_classPrivateFieldGet(this,y)].undo),void(_classPrivateFieldGet(this,G)[_classPrivateFieldGet(this,y)]=ae);const Se=_classPrivateFieldGet(this,y)+1;Se===_classPrivateFieldGet(this,W)?_classPrivateFieldGet(this,G).splice(0,1):(_classPrivateFieldSet(this,y,Se),Se<_classPrivateFieldGet(this,G).length&&_classPrivateFieldGet(this,G).splice(Se)),_classPrivateFieldGet(this,G).push(ae)}undo(){-1!==_classPrivateFieldGet(this,y)&&(_classPrivateFieldSet(this,q,!0),_classPrivateFieldGet(this,G)[_classPrivateFieldGet(this,y)].undo(),_classPrivateFieldSet(this,q,!1),_classPrivateFieldSet(this,y,_classPrivateFieldGet(this,y)-1))}redo(){_classPrivateFieldGet(this,y)<_classPrivateFieldGet(this,G).length-1&&(_classPrivateFieldSet(this,y,_classPrivateFieldGet(this,y)+1),_classPrivateFieldSet(this,q,!0),_classPrivateFieldGet(this,G)[_classPrivateFieldGet(this,y)].cmd(),_classPrivateFieldSet(this,q,!1))}hasSomethingToUndo(){return-1!==_classPrivateFieldGet(this,y)}hasSomethingToRedo(){return _classPrivateFieldGet(this,y)<_classPrivateFieldGet(this,G).length-1}destroy(){_classPrivateFieldSet(this,G,null)}}r.CommandManager=t;var s=new WeakSet;class _{constructor(re){_classPrivateMethodInitSpec(this,s),this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const K=_.platform.isMac;for(const[ce,de]of re)for(const z of ce){const I=z.startsWith("mac+");K&&I?(this.callbacks.set(z.slice(4),de),this.allKeys.add(z.split("+").at(-1))):!K&&!I&&(this.callbacks.set(z,de),this.allKeys.add(z.split("+").at(-1)))}}static get platform(){const re=typeof navigator<"u"?navigator.platform:"";return(0,v.shadow)(this,"platform",{isWin:re.includes("Win"),isMac:re.includes("Mac")})}exec(re,K){if(!this.allKeys.has(K.key))return;const ce=this.callbacks.get(_classPrivateMethodGet(this,s,P).call(this,K));ce&&(ce.bind(re)(),K.stopPropagation(),K.preventDefault())}}function P(Ae){Ae.altKey&&this.buffer.push("alt"),Ae.ctrlKey&&this.buffer.push("ctrl"),Ae.metaKey&&this.buffer.push("meta"),Ae.shiftKey&&this.buffer.push("shift"),this.buffer.push(Ae.key);const re=this.buffer.join("+");return this.buffer.length=0,re}r.KeyboardManager=_;var p=new WeakMap;class A{constructor(){_classPrivateFieldInitSpec(this,p,{writable:!0,value:null})}copy(re){re&&(Array.isArray(re)?_classPrivateFieldSet(this,p,re.map(K=>K.serialize())):_classPrivateFieldSet(this,p,[re.serialize()]),_classPrivateFieldSet(this,p,_classPrivateFieldGet(this,p).filter(K=>!!K)),0===_classPrivateFieldGet(this,p).length&&_classPrivateFieldSet(this,p,null))}paste(){return _classPrivateFieldGet(this,p)}isEmpty(){return null===_classPrivateFieldGet(this,p)}destroy(){_classPrivateFieldSet(this,p,null)}}class u{get _colors(){const re=new Map([["CanvasText",null],["Canvas",null]]);return(0,F.getColorValues)(re),(0,v.shadow)(this,"_colors",re)}convert(re){const K=(0,F.getRGB)(re);if(!window.matchMedia("(forced-colors: active)").matches)return K;for(const[ce,de]of this._colors)if(de.every((z,I)=>z===K[I]))return u._colorsMapping.get(ce);return K}getHexCode(re){const K=this._colors.get(re);return K?v.Util.makeHexColor(...K):re}}_defineProperty(u,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]])),r.ColorManager=u;var i=new WeakMap,e=new WeakMap,o=new WeakMap,m=new WeakMap,S=new WeakMap,f=new WeakMap,c=new WeakMap,b=new WeakMap,N=new WeakMap,R=new WeakMap,H=new WeakMap,B=new WeakMap,U=new WeakMap,j=new WeakMap,ee=new WeakMap,le=new WeakMap,V=new WeakMap,g=new WeakSet,l=new WeakSet,E=new WeakSet,T=new WeakSet,w=new WeakSet,n=new WeakSet,h=new WeakSet,d=new WeakSet,L=new WeakSet;class k{constructor(re,K){_classPrivateMethodInitSpec(this,L),_classPrivateMethodInitSpec(this,d),_classPrivateMethodInitSpec(this,h),_classPrivateMethodInitSpec(this,n),_classPrivateMethodInitSpec(this,w),_classPrivateMethodInitSpec(this,T),_classPrivateMethodInitSpec(this,E),_classPrivateMethodInitSpec(this,l),_classPrivateMethodInitSpec(this,g),_classPrivateFieldInitSpec(this,i,{writable:!0,value:null}),_classPrivateFieldInitSpec(this,e,{writable:!0,value:new Map}),_classPrivateFieldInitSpec(this,o,{writable:!0,value:new Map}),_classPrivateFieldInitSpec(this,m,{writable:!0,value:new A}),_classPrivateFieldInitSpec(this,S,{writable:!0,value:new t}),_classPrivateFieldInitSpec(this,f,{writable:!0,value:0}),_classPrivateFieldInitSpec(this,c,{writable:!0,value:null}),_classPrivateFieldInitSpec(this,b,{writable:!0,value:null}),_classPrivateFieldInitSpec(this,N,{writable:!0,value:new C}),_classPrivateFieldInitSpec(this,R,{writable:!0,value:!1}),_classPrivateFieldInitSpec(this,H,{writable:!0,value:v.AnnotationEditorType.NONE}),_classPrivateFieldInitSpec(this,B,{writable:!0,value:new Set}),_classPrivateFieldInitSpec(this,U,{writable:!0,value:this.keydown.bind(this)}),_classPrivateFieldInitSpec(this,j,{writable:!0,value:this.onEditingAction.bind(this)}),_classPrivateFieldInitSpec(this,ee,{writable:!0,value:this.onPageChanging.bind(this)}),_classPrivateFieldInitSpec(this,le,{writable:!0,value:{isEditing:!1,isEmpty:!0,hasEmptyClipboard:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1}}),_classPrivateFieldInitSpec(this,V,{writable:!0,value:null}),_classPrivateFieldSet(this,V,re),_classPrivateFieldSet(this,b,K),_classPrivateFieldGet(this,b)._on("editingaction",_classPrivateFieldGet(this,j)),_classPrivateFieldGet(this,b)._on("pagechanging",_classPrivateFieldGet(this,ee))}destroy(){_classPrivateMethodGet(this,l,Y).call(this),_classPrivateFieldGet(this,b)._off("editingaction",_classPrivateFieldGet(this,j)),_classPrivateFieldGet(this,b)._off("pagechanging",_classPrivateFieldGet(this,ee));for(const re of _classPrivateFieldGet(this,o).values())re.destroy();_classPrivateFieldGet(this,o).clear(),_classPrivateFieldGet(this,e).clear(),_classPrivateFieldSet(this,i,null),_classPrivateFieldGet(this,B).clear(),_classPrivateFieldGet(this,m).destroy(),_classPrivateFieldGet(this,S).destroy()}onPageChanging({pageNumber:re}){_classPrivateFieldSet(this,f,re-1)}focusMainContainer(){_classPrivateFieldGet(this,V).focus()}keydown(re){this.getActive()?.shouldGetKeyboardEvents()||k._keyboardManager.exec(this,re)}onEditingAction(re){["undo","redo","cut","copy","paste","delete","selectAll"].includes(re.name)&&this[re.name]()}setEditingState(re){re?(_classPrivateMethodGet(this,g,X).call(this),_classPrivateMethodGet(this,E,he).call(this,{isEditing:_classPrivateFieldGet(this,H)!==v.AnnotationEditorType.NONE,isEmpty:_classPrivateMethodGet(this,d,me).call(this),hasSomethingToUndo:_classPrivateFieldGet(this,S).hasSomethingToUndo(),hasSomethingToRedo:_classPrivateFieldGet(this,S).hasSomethingToRedo(),hasSelectedEditor:!1,hasEmptyClipboard:_classPrivateFieldGet(this,m).isEmpty()})):(_classPrivateMethodGet(this,l,Y).call(this),_classPrivateMethodGet(this,E,he).call(this,{isEditing:!1}))}registerEditorTypes(re){_classPrivateFieldSet(this,c,re);for(const K of _classPrivateFieldGet(this,c))_classPrivateMethodGet(this,T,ie).call(this,K.defaultPropertiesToUpdate)}getId(){return _classPrivateFieldGet(this,N).getId()}addLayer(re){_classPrivateFieldGet(this,o).set(re.pageIndex,re),_classPrivateFieldGet(this,R)?re.enable():re.disable()}removeLayer(re){_classPrivateFieldGet(this,o).delete(re.pageIndex)}updateMode(re){if(_classPrivateFieldSet(this,H,re),re===v.AnnotationEditorType.NONE)this.setEditingState(!1),_classPrivateMethodGet(this,n,ve).call(this);else{this.setEditingState(!0),_classPrivateMethodGet(this,w,ue).call(this);for(const K of _classPrivateFieldGet(this,o).values())K.updateMode(re)}}updateToolbar(re){re!==_classPrivateFieldGet(this,H)&&_classPrivateFieldGet(this,b).dispatch("switchannotationeditormode",{source:this,mode:re})}updateParams(re,K){for(const ce of _classPrivateFieldGet(this,B))ce.updateParams(re,K);for(const ce of _classPrivateFieldGet(this,c))ce.updateDefaultParams(re,K)}getEditors(re){const K=[];for(const ce of _classPrivateFieldGet(this,e).values())ce.pageIndex===re&&K.push(ce);return K}getEditor(re){return _classPrivateFieldGet(this,e).get(re)}addEditor(re){_classPrivateFieldGet(this,e).set(re.id,re)}removeEditor(re){_classPrivateFieldGet(this,e).delete(re.id),this.unselect(re)}setActiveEditor(re){_classPrivateFieldGet(this,i)!==re&&(_classPrivateFieldSet(this,i,re),re&&_classPrivateMethodGet(this,T,ie).call(this,re.propertiesToUpdate))}toggleSelected(re){if(_classPrivateFieldGet(this,B).has(re))return _classPrivateFieldGet(this,B).delete(re),re.unselect(),void _classPrivateMethodGet(this,E,he).call(this,{hasSelectedEditor:this.hasSelection});_classPrivateFieldGet(this,B).add(re),re.select(),_classPrivateMethodGet(this,T,ie).call(this,re.propertiesToUpdate),_classPrivateMethodGet(this,E,he).call(this,{hasSelectedEditor:!0})}setSelected(re){for(const K of _classPrivateFieldGet(this,B))K!==re&&K.unselect();_classPrivateFieldGet(this,B).clear(),_classPrivateFieldGet(this,B).add(re),re.select(),_classPrivateMethodGet(this,T,ie).call(this,re.propertiesToUpdate),_classPrivateMethodGet(this,E,he).call(this,{hasSelectedEditor:!0})}isSelected(re){return _classPrivateFieldGet(this,B).has(re)}unselect(re){re.unselect(),_classPrivateFieldGet(this,B).delete(re),_classPrivateMethodGet(this,E,he).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return 0!==_classPrivateFieldGet(this,B).size}undo(){_classPrivateFieldGet(this,S).undo(),_classPrivateMethodGet(this,E,he).call(this,{hasSomethingToUndo:_classPrivateFieldGet(this,S).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:_classPrivateMethodGet(this,d,me).call(this)})}redo(){_classPrivateFieldGet(this,S).redo(),_classPrivateMethodGet(this,E,he).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:_classPrivateFieldGet(this,S).hasSomethingToRedo(),isEmpty:_classPrivateMethodGet(this,d,me).call(this)})}addCommands(re){_classPrivateFieldGet(this,S).add(re),_classPrivateMethodGet(this,E,he).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:_classPrivateMethodGet(this,d,me).call(this)})}delete(){if(_classPrivateFieldGet(this,i)&&_classPrivateFieldGet(this,i).commitOrRemove(),!this.hasSelection)return;const re=[..._classPrivateFieldGet(this,B)];this.addCommands({cmd:()=>{for(const de of re)de.remove()},undo:()=>{for(const de of re)_classPrivateMethodGet(this,h,fe).call(this,de)},mustExec:!0})}copy(){if(_classPrivateFieldGet(this,i)&&_classPrivateFieldGet(this,i).commitOrRemove(),this.hasSelection){const re=[];for(const K of _classPrivateFieldGet(this,B))K.isEmpty()||re.push(K);if(0===re.length)return;_classPrivateFieldGet(this,m).copy(re),_classPrivateMethodGet(this,E,he).call(this,{hasEmptyClipboard:!1})}}cut(){this.copy(),this.delete()}paste(){if(_classPrivateFieldGet(this,m).isEmpty())return;this.unselectAll();const re=_classPrivateFieldGet(this,o).get(_classPrivateFieldGet(this,f)),K=_classPrivateFieldGet(this,m).paste().map(z=>re.deserialize(z));this.addCommands({cmd:()=>{for(const z of K)_classPrivateMethodGet(this,h,fe).call(this,z);_classPrivateMethodGet(this,L,we).call(this,K)},undo:()=>{for(const z of K)z.remove()},mustExec:!0})}selectAll(){for(const re of _classPrivateFieldGet(this,B))re.commit();_classPrivateMethodGet(this,L,we).call(this,_classPrivateFieldGet(this,e).values())}unselectAll(){if(_classPrivateFieldGet(this,i))_classPrivateFieldGet(this,i).commitOrRemove();else if(0!==_classPrivateMethodGet(this,L,we).size){for(const re of _classPrivateFieldGet(this,B))re.unselect();_classPrivateFieldGet(this,B).clear(),_classPrivateMethodGet(this,E,he).call(this,{hasSelectedEditor:!1})}}isActive(re){return _classPrivateFieldGet(this,i)===re}getActive(){return _classPrivateFieldGet(this,i)}getMode(){return _classPrivateFieldGet(this,H)}}function X(){_classPrivateFieldGet(this,V).addEventListener("keydown",_classPrivateFieldGet(this,U))}function Y(){_classPrivateFieldGet(this,V).removeEventListener("keydown",_classPrivateFieldGet(this,U))}function he(Ae){Object.entries(Ae).some(([K,ce])=>_classPrivateFieldGet(this,le)[K]!==ce)&&_classPrivateFieldGet(this,b).dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(_classPrivateFieldGet(this,le),Ae)})}function ie(Ae){_classPrivateFieldGet(this,b).dispatch("annotationeditorparamschanged",{source:this,details:Ae})}function ue(){if(!_classPrivateFieldGet(this,R)){_classPrivateFieldSet(this,R,!0);for(const Ae of _classPrivateFieldGet(this,o).values())Ae.enable()}}function ve(){if(this.unselectAll(),_classPrivateFieldGet(this,R)){_classPrivateFieldSet(this,R,!1);for(const Ae of _classPrivateFieldGet(this,o).values())Ae.disable()}}function fe(Ae){const re=_classPrivateFieldGet(this,o).get(Ae.pageIndex);re?re.addOrRebuild(Ae):this.addEditor(Ae)}function me(){if(0===_classPrivateFieldGet(this,e).size)return!0;if(1===_classPrivateFieldGet(this,e).size)for(const Ae of _classPrivateFieldGet(this,e).values())return Ae.isEmpty();return!1}function we(Ae){_classPrivateFieldGet(this,B).clear();for(const re of Ae)re.isEmpty()||(_classPrivateFieldGet(this,B).add(re),re.select());_classPrivateMethodGet(this,E,he).call(this,{hasSelectedEditor:!0})}_defineProperty(k,"_keyboardManager",new _([[["ctrl+a","mac+meta+a"],(a=k).prototype.selectAll],[["ctrl+c","mac+meta+c"],a.prototype.copy],[["ctrl+v","mac+meta+v"],a.prototype.paste],[["ctrl+x","mac+meta+x"],a.prototype.cut],[["ctrl+z","mac+meta+z"],a.prototype.undo],[["ctrl+y","ctrl+shift+Z","mac+meta+shift+Z"],a.prototype.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete"],a.prototype.delete],[["Escape","mac+Escape"],a.prototype.unselectAll]])),r.AnnotationEditorUIManager=k},(Z,r,x)=>{var a;Object.defineProperty(r,"__esModule",{value:!0}),r.StatTimer=r.RenderingCancelledException=r.PixelsPerInch=r.PageViewport=r.PDFDateString=r.DOMStandardFontDataFactory=r.DOMSVGFactory=r.DOMCanvasFactory=r.DOMCMapReaderFactory=r.AnnotationPrefix=void 0,r.deprecated=function m(B){console.log("Deprecated API usage: "+B)},r.getColorValues=function N(B){const U=document.createElement("span");U.style.visibility="hidden",document.body.append(U);for(const j of B.keys()){U.style.color=j;const ee=window.getComputedStyle(U).color;B.set(j,b(ee))}U.remove()},r.getCurrentTransform=function R(B){const{a:U,b:j,c:ee,d:le,e:V,f:g}=B.getTransform();return[U,j,ee,le,V,g]},r.getCurrentTransformInverse=function H(B){const{a:U,b:j,c:ee,d:le,e:V,f:g}=B.getTransform().invertSelf();return[U,j,ee,le,V,g]},r.getFilenameFromUrl=function A(B){const U=B.indexOf("#"),j=B.indexOf("?"),ee=Math.min(U>0?U:B.length,j>0?j:B.length);return B.substring(B.lastIndexOf("/",ee)+1,ee)},r.getPdfFilenameFromUrl=function u(B,U="document.pdf"){if("string"!=typeof B)return U;if(P(B))return(0,F.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),U;const ee=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,le=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/.exec(B);let V=ee.exec(le[1])||ee.exec(le[2])||ee.exec(le[3]);if(V&&(V=V[0],V.includes("%")))try{V=ee.exec(decodeURIComponent(V))[0]}catch{}return V||U},r.getRGB=b,r.getXfaPageViewport=function c(B,{scale:U=1,rotation:j=0}){const{width:ee,height:le}=B.attributes.style,V=[0,0,parseInt(ee),parseInt(le)];return new s({viewBox:V,scale:U,rotation:j})},r.isDataScheme=P,r.isPdfFile=function p(B){return"string"==typeof B&&/\.pdf$/i.test(B)},r.isValidFetchUrl=e,r.loadScript=function o(B,U=!1){return new Promise((j,ee)=>{const le=document.createElement("script");le.src=B,le.onload=function(V){U&&le.remove(),j(V)},le.onerror=function(){ee(new Error(`Cannot load script at: ${le.src}`))},(document.head||document.documentElement).append(le)})};var v=x(9),F=x(1);r.AnnotationPrefix="pdfjs_internal_id_";class M{}function G(B){return q.apply(this,arguments)}function q(){return(q=_asyncToGenerator(function*(B,U=!1){if(e(B,document.baseURI)){const j=yield fetch(B);if(!j.ok)throw new Error(j.statusText);return U?new Uint8Array(yield j.arrayBuffer()):(0,F.stringToBytes)(yield j.text())}return new Promise((j,ee)=>{const le=new XMLHttpRequest;le.open("GET",B,!0),U&&(le.responseType="arraybuffer"),le.onreadystatechange=()=>{if(le.readyState===XMLHttpRequest.DONE){if(200===le.status||0===le.status){let V;if(U&&le.response?V=new Uint8Array(le.response):!U&&le.responseText&&(V=(0,F.stringToBytes)(le.responseText)),V)return void j(V)}ee(new Error(le.statusText))}},le.send(null)})})).apply(this,arguments)}a=M,_defineProperty(M,"CSS",96),_defineProperty(M,"PDF",72),_defineProperty(M,"PDF_TO_CSS_UNITS",a.CSS/a.PDF),r.PixelsPerInch=M,r.DOMCanvasFactory=class C extends v.BaseCanvasFactory{constructor({ownerDocument:U=globalThis.document}={}){super(),this._document=U}_createCanvas(U,j){const ee=this._document.createElement("canvas");return ee.width=U,ee.height=j,ee}},r.DOMCMapReaderFactory=class W extends v.BaseCMapReaderFactory{_fetchData(U,j){return G(U,this.isCompressed).then(ee=>({cMapData:ee,compressionType:j}))}},r.DOMStandardFontDataFactory=class y extends v.BaseStandardFontDataFactory{_fetchData(U){return G(U,!0)}},r.DOMSVGFactory=class t extends v.BaseSVGFactory{_createSVG(U){return document.createElementNS("http://www.w3.org/2000/svg",U)}};class s{constructor({viewBox:U,scale:j,rotation:ee,offsetX:le=0,offsetY:V=0,dontFlip:g=!1}){this.viewBox=U,this.scale=j,this.rotation=ee,this.offsetX=le,this.offsetY=V;const l=(U[2]+U[0])/2,E=(U[3]+U[1])/2;let T,w,n,h,d,L,k,X;switch((ee%=360)<0&&(ee+=360),ee){case 180:T=-1,w=0,n=0,h=1;break;case 90:T=0,w=1,n=1,h=0;break;case 270:T=0,w=-1,n=-1,h=0;break;case 0:T=1,w=0,n=0,h=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}g&&(n=-n,h=-h),0===T?(d=Math.abs(E-U[1])*j+le,L=Math.abs(l-U[0])*j+V,k=Math.abs(U[3]-U[1])*j,X=Math.abs(U[2]-U[0])*j):(d=Math.abs(l-U[0])*j+le,L=Math.abs(E-U[1])*j+V,k=Math.abs(U[2]-U[0])*j,X=Math.abs(U[3]-U[1])*j),this.transform=[T*j,w*j,n*j,h*j,d-T*j*l-n*j*E,L-w*j*l-h*j*E],this.width=k,this.height=X}clone({scale:U=this.scale,rotation:j=this.rotation,offsetX:ee=this.offsetX,offsetY:le=this.offsetY,dontFlip:V=!1}={}){return new s({viewBox:this.viewBox.slice(),scale:U,rotation:j,offsetX:ee,offsetY:le,dontFlip:V})}convertToViewportPoint(U,j){return F.Util.applyTransform([U,j],this.transform)}convertToViewportRectangle(U){const j=F.Util.applyTransform([U[0],U[1]],this.transform),ee=F.Util.applyTransform([U[2],U[3]],this.transform);return[j[0],j[1],ee[0],ee[1]]}convertToPdfPoint(U,j){return F.Util.applyInverseTransform([U,j],this.transform)}}function P(B){const U=B.length;let j=0;for(;j<U&&""===B[j].trim();)j++;return"data:"===B.substring(j,j+5).toLowerCase()}function e(B,U){try{const{protocol:j}=U?new URL(B,U):new URL(B);return"http:"===j||"https:"===j}catch{return!1}}let S;function b(B){if(B.startsWith("#")){const U=parseInt(B.slice(1),16);return[(16711680&U)>>16,(65280&U)>>8,255&U]}return B.startsWith("rgb(")?B.slice(4,-1).split(",").map(U=>parseInt(U)):B.startsWith("rgba(")?B.slice(5,-1).split(",").map(U=>parseInt(U)).slice(0,3):((0,F.warn)(`Not a valid color format: "${B}"`),[0,0,0])}r.PageViewport=s,r.RenderingCancelledException=class _ extends F.BaseException{constructor(U,j){super(U,"RenderingCancelledException"),this.type=j}},r.StatTimer=class i{constructor(){this.started=Object.create(null),this.times=[]}time(U){U in this.started&&(0,F.warn)(`Timer is already running for ${U}`),this.started[U]=Date.now()}timeEnd(U){U in this.started||(0,F.warn)(`Timer has not been started for ${U}`),this.times.push({name:U,start:this.started[U],end:Date.now()}),delete this.started[U]}toString(){const U=[];let j=0;for(const ee of this.times){const le=ee.name;le.length>j&&(j=le.length)}for(const ee of this.times){const le=ee.end-ee.start;U.push(`${ee.name.padEnd(j)} ${le}ms\n`)}return U.join("")}},r.PDFDateString=class f{static toDateObject(U){if(!U||"string"!=typeof U)return null;S||(S=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const j=S.exec(U);if(!j)return null;const ee=parseInt(j[1],10);let le=parseInt(j[2],10);le=le>=1&&le<=12?le-1:0;let V=parseInt(j[3],10);V=V>=1&&V<=31?V:1;let g=parseInt(j[4],10);g=g>=0&&g<=23?g:0;let l=parseInt(j[5],10);l=l>=0&&l<=59?l:0;let E=parseInt(j[6],10);E=E>=0&&E<=59?E:0;const T=j[7]||"Z";let w=parseInt(j[8],10);w=w>=0&&w<=23?w:0;let n=parseInt(j[9],10)||0;return n=n>=0&&n<=59?n:0,"-"===T?(g+=w,l+=n):"+"===T&&(g-=w,l-=n),new Date(Date.UTC(ee,le,V,g,l,E))}}},(Z,r,x)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.BaseStandardFontDataFactory=r.BaseSVGFactory=r.BaseCanvasFactory=r.BaseCMapReaderFactory=void 0;var a=x(1);class v{constructor(){this.constructor===v&&(0,a.unreachable)("Cannot initialize BaseCanvasFactory.")}create(C,G){if(C<=0||G<=0)throw new Error("Invalid canvas size");const q=this._createCanvas(C,G);return{canvas:q,context:q.getContext("2d")}}reset(C,G,q){if(!C.canvas)throw new Error("Canvas is not specified");if(G<=0||q<=0)throw new Error("Invalid canvas size");C.canvas.width=G,C.canvas.height=q}destroy(C){if(!C.canvas)throw new Error("Canvas is not specified");C.canvas.width=0,C.canvas.height=0,C.canvas=null,C.context=null}_createCanvas(C,G){(0,a.unreachable)("Abstract method `_createCanvas` called.")}}r.BaseCanvasFactory=v;class F{constructor({baseUrl:C=null,isCompressed:G=!1}){this.constructor===F&&(0,a.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=C,this.isCompressed=G}fetch({name:C}){var G=this;return _asyncToGenerator(function*(){if(!G.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!C)throw new Error("CMap name must be specified.");const q=G.baseUrl+C+(G.isCompressed?".bcmap":"");return G._fetchData(q,G.isCompressed?a.CMapCompressionType.BINARY:a.CMapCompressionType.NONE).catch(y=>{throw new Error(`Unable to load ${G.isCompressed?"binary ":""}CMap at: ${q}`)})})()}_fetchData(C,G){(0,a.unreachable)("Abstract method `_fetchData` called.")}}r.BaseCMapReaderFactory=F;class O{constructor({baseUrl:C=null}){this.constructor===O&&(0,a.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=C}fetch({filename:C}){var G=this;return _asyncToGenerator(function*(){if(!G.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!C)throw new Error("Font filename must be specified.");const q=`${G.baseUrl}${C}`;return G._fetchData(q).catch(W=>{throw new Error(`Unable to load font data at: ${q}`)})})()}_fetchData(C){(0,a.unreachable)("Abstract method `_fetchData` called.")}}r.BaseStandardFontDataFactory=O;class Q{constructor(){this.constructor===Q&&(0,a.unreachable)("Cannot initialize BaseSVGFactory.")}create(C,G,q=!1){if(C<=0||G<=0)throw new Error("Invalid SVG dimensions");const W=this._createSVG("svg:svg");return W.setAttribute("version","1.1"),q||(W.setAttribute("width",`${C}px`),W.setAttribute("height",`${G}px`)),W.setAttribute("preserveAspectRatio","none"),W.setAttribute("viewBox",`0 0 ${C} ${G}`),W}createElement(C){if("string"!=typeof C)throw new Error("Invalid SVG element type");return this._createSVG(C)}_createSVG(C){(0,a.unreachable)("Abstract method `_createSVG` called.")}}r.BaseSVGFactory=Q},(Z,r,x)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.MurmurHash3_64=void 0;var a=x(1);const v=3285377520,F=4294901760,O=65535;r.MurmurHash3_64=class Q{constructor(C){this.h1=C?4294967295&C:v,this.h2=C?4294967295&C:v}update(C){let G,q;if("string"==typeof C){G=new Uint8Array(2*C.length),q=0;for(let o=0,m=C.length;o<m;o++){const S=C.charCodeAt(o);S<=255?G[q++]=S:(G[q++]=S>>>8,G[q++]=255&S)}}else{if(!(0,a.isArrayBuffer)(C))throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");G=C.slice(),q=G.byteLength}const W=q>>2,y=q-4*W,t=new Uint32Array(G.buffer,0,W);let s=0,_=0,P=this.h1,p=this.h2;const A=3432918353,u=461845907,i=A&O,e=u&O;for(let o=0;o<W;o++)1&o?(s=t[o],s=s*A&F|s*i&O,s=s<<15|s>>>17,s=s*u&F|s*e&O,P^=s,P=P<<13|P>>>19,P=5*P+3864292196):(_=t[o],_=_*A&F|_*i&O,_=_<<15|_>>>17,_=_*u&F|_*e&O,p^=_,p=p<<13|p>>>19,p=5*p+3864292196);switch(s=0,y){case 3:s^=G[4*W+2]<<16;case 2:s^=G[4*W+1]<<8;case 1:s^=G[4*W],s=s*A&F|s*i&O,s=s<<15|s>>>17,s=s*u&F|s*e&O,1&W?P^=s:p^=s}this.h1=P,this.h2=p}hexdigest(){let C=this.h1,G=this.h2;C^=G>>>1,C=3981806797*C&F|36045*C&O,G=4283543511*G&F|(2950163797*(G<<16|C>>>16)&F)>>>16,C^=G>>>1,C=444984403*C&F|60499*C&O,G=3301882366*G&F|(3120437893*(G<<16|C>>>16)&F)>>>16,C^=G>>>1;const q=(C>>>0).toString(16),W=(G>>>0).toString(16);return q.padStart(8,"0")+W.padStart(8,"0")}}},(Z,r,x)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.FontLoader=r.FontFaceObject=void 0;var a=x(1);class v{constructor({docId:M,onUnsupportedFeature:C,ownerDocument:G=globalThis.document,styleElement:q=null}){this.constructor===v&&(0,a.unreachable)("Cannot initialize BaseFontLoader."),this.docId=M,this._onUnsupportedFeature=C,this._document=G,this.nativeFontFaces=[],this.styleElement=null}addNativeFontFace(M){this.nativeFontFaces.push(M),this._document.fonts.add(M)}insertRule(M){let C=this.styleElement;C||(C=this.styleElement=this._document.createElement("style"),C.id=`PDFJS_FONT_STYLE_TAG_${this.docId}`,this._document.documentElement.getElementsByTagName("head")[0].append(C));const G=C.sheet;G.insertRule(M,G.cssRules.length)}clear(){for(const M of this.nativeFontFaces)this._document.fonts.delete(M);this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}bind(M){var C=this;return _asyncToGenerator(function*(){if(M.attached||M.missingFile)return;if(M.attached=!0,C.isFontLoadingAPISupported){const q=M.createNativeFontFace();if(q){C.addNativeFontFace(q);try{yield q.loaded}catch(W){throw C._onUnsupportedFeature({featureId:a.UNSUPPORTED_FEATURES.errorFontLoadNative}),(0,a.warn)(`Failed to load font '${q.family}': '${W}'.`),M.disableFontFace=!0,W}}return}const G=M.createFontFaceRule();if(G){if(C.insertRule(G),C.isSyncFontLoadingSupported)return;yield new Promise(q=>{const W=C._queueLoadingCallback(q);C._prepareFontLoadEvent([G],[M],W)})}})()}_queueLoadingCallback(M){(0,a.unreachable)("Abstract method `_queueLoadingCallback`.")}get isFontLoadingAPISupported(){return(0,a.shadow)(this,"isFontLoadingAPISupported",!!this._document?.fonts)}get isSyncFontLoadingSupported(){(0,a.unreachable)("Abstract method `isSyncFontLoadingSupported`.")}get _loadTestFont(){(0,a.unreachable)("Abstract method `_loadTestFont`.")}_prepareFontLoadEvent(M,C,G){(0,a.unreachable)("Abstract method `_prepareFontLoadEvent`.")}}let F;r.FontLoader=F,r.FontLoader=F=class extends v{constructor(M){super(M),this.loadingContext={requests:[],nextRequestId:0},this.loadTestFontId=0}get isSyncFontLoadingSupported(){let M=!1;return(typeof navigator>"u"||/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent)?.[1]>=14)&&(M=!0),(0,a.shadow)(this,"isSyncFontLoadingSupported",M)}_queueLoadingCallback(M){const G=this.loadingContext,q={id:"pdfjs-font-loading-"+G.nextRequestId++,done:!1,complete:function C(){for((0,a.assert)(!q.done,"completeRequest() cannot be called twice."),q.done=!0;G.requests.length>0&&G.requests[0].done;){const W=G.requests.shift();setTimeout(W.callback,0)}},callback:M};return G.requests.push(q),q}get _loadTestFont(){return(0,a.shadow)(this,"_loadTestFont",atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA=="))}_prepareFontLoadEvent(M,C,G){function q(N,R){return N.charCodeAt(R)<<24|N.charCodeAt(R+1)<<16|N.charCodeAt(R+2)<<8|255&N.charCodeAt(R+3)}function W(N,R,H,B){return N.substring(0,R)+B+N.substring(R+H)}let y,t;const s=this._document.createElement("canvas");s.width=1,s.height=1;const _=s.getContext("2d");let P=0;const A=`lt${Date.now()}${this.loadTestFontId++}`;let u=this._loadTestFont;u=W(u,976,A.length,A);const o=1482184792;let m=q(u,16);for(y=0,t=A.length-3;y<t;y+=4)m=m-o+q(A,y)|0;y<A.length&&(m=m-o+q(A+"XXX",y)|0),u=W(u,16,4,(0,a.string32)(m));const S=`url(data:font/opentype;base64,${btoa(u)});`;this.insertRule(`@font-face {font-family:"${A}";src:${S}}`);const c=[];for(const N of C)c.push(N.loadedName);c.push(A);const b=this._document.createElement("div");b.style.visibility="hidden",b.style.width=b.style.height="10px",b.style.position="absolute",b.style.top=b.style.left="0px";for(const N of c){const R=this._document.createElement("span");R.textContent="Hi",R.style.fontFamily=N,b.append(R)}this._document.body.append(b),function p(N,R){if(P++,P>30)return(0,a.warn)("Load test font never loaded."),void R();_.font="30px "+N,_.fillText(".",0,20),_.getImageData(0,0,1,1).data[3]>0?R():setTimeout(p.bind(null,N,R))}(A,()=>{b.remove(),G.complete()})}},r.FontFaceObject=class O{constructor(M,{isEvalSupported:C=!0,disableFontFace:G=!1,ignoreErrors:q=!1,onUnsupportedFeature:W,fontRegistry:y=null}){this.compiledGlyphs=Object.create(null);for(const t in M)this[t]=M[t];this.isEvalSupported=!1!==C,this.disableFontFace=!0===G,this.ignoreErrors=!0===q,this._onUnsupportedFeature=W,this.fontRegistry=y}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let M;if(this.cssFontInfo){const C={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(C.style=`oblique ${this.cssFontInfo.italicAngle}deg`),M=new FontFace(this.cssFontInfo.fontFamily,this.data,C)}else M=new FontFace(this.loadedName,this.data,{});return this.fontRegistry&&this.fontRegistry.registerFont(this),M}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const M=(0,a.bytesToString)(this.data),C=`url(data:${this.mimetype};base64,${btoa(M)});`;let G;if(this.cssFontInfo){let q=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(q+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),G=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${q}src:${C}}`}else G=`@font-face {font-family:"${this.loadedName}";src:${C}}`;return this.fontRegistry&&this.fontRegistry.registerFont(this,C),G}getPathGenerator(M,C){if(void 0!==this.compiledGlyphs[C])return this.compiledGlyphs[C];let G;try{G=M.get(this.loadedName+"_path_"+C)}catch(q){if(!this.ignoreErrors)throw q;return this._onUnsupportedFeature({featureId:a.UNSUPPORTED_FEATURES.errorFontGetPath}),(0,a.warn)(`getPathGenerator - ignoring character: "${q}".`),this.compiledGlyphs[C]=function(W,y){}}if(this.isEvalSupported&&a.FeatureTest.isEvalSupported){const q=[];for(const W of G){const y=void 0!==W.args?W.args.join(","):"";q.push("c.",W.cmd,"(",y,");\n")}return this.compiledGlyphs[C]=new Function("c","size",q.join(""))}return this.compiledGlyphs[C]=function(q,W){for(const y of G)"scale"===y.cmd&&(y.args=[W,-W]),q[y.cmd].apply(q,y.args)}}}},(Z,r,x)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.CanvasGraphics=void 0;var a=x(8),v=x(1),F=x(13),O=x(14),Q=x(3);const G=4096,y=Q.isNodeJS&&typeof Path2D>"u"?-1:1e3,t=16;class _{constructor(g){this.canvasFactory=g,this.cache=Object.create(null)}getCanvas(g,l,E){let T;return void 0!==this.cache[g]?(T=this.cache[g],this.canvasFactory.reset(T,l,E)):(T=this.canvasFactory.create(l,E),this.cache[g]=T),T}delete(g){delete this.cache[g]}clear(){for(const g in this.cache)this.canvasFactory.destroy(this.cache[g]),delete this.cache[g]}}function P(V,g,l,E,T,w,n,h,d,L){const[k,X,Y,he,ie,ue]=(0,a.getCurrentTransform)(V);if(0===X&&0===Y){const we=Math.round(n*k+ie),re=Math.round(h*he+ue),ce=Math.abs(Math.round((n+d)*k+ie)-we)||1,z=Math.abs(Math.round((h+L)*he+ue)-re)||1;return V.setTransform(Math.sign(k),0,0,Math.sign(he),we,re),V.drawImage(g,l,E,T,w,0,0,ce,z),V.setTransform(k,X,Y,he,ie,ue),[ce,z]}if(0===k&&0===he){const we=Math.round(h*Y+ie),re=Math.round(n*X+ue),ce=Math.abs(Math.round((h+L)*Y+ie)-we)||1,z=Math.abs(Math.round((n+d)*X+ue)-re)||1;return V.setTransform(0,Math.sign(X),Math.sign(Y),0,we,re),V.drawImage(g,l,E,T,w,0,0,z,ce),V.setTransform(k,X,Y,he,ie,ue),[z,ce]}return V.drawImage(g,l,E,T,w,n,h,d,L),[Math.hypot(k,X)*d,Math.hypot(Y,he)*L]}class A{constructor(g,l){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=v.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=v.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=v.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps=null,this.startNewPathAndClipBox([0,0,g,l])}clone(){const g=Object.create(this);return g.clipBox=this.clipBox.slice(),g}setCurrentPoint(g,l){this.x=g,this.y=l}updatePathMinMax(g,l,E){[l,E]=v.Util.applyTransform([l,E],g),this.minX=Math.min(this.minX,l),this.minY=Math.min(this.minY,E),this.maxX=Math.max(this.maxX,l),this.maxY=Math.max(this.maxY,E)}updateRectMinMax(g,l){const E=v.Util.applyTransform(l,g),T=v.Util.applyTransform(l.slice(2),g);this.minX=Math.min(this.minX,E[0],T[0]),this.minY=Math.min(this.minY,E[1],T[1]),this.maxX=Math.max(this.maxX,E[0],T[0]),this.maxY=Math.max(this.maxY,E[1],T[1])}updateScalingPathMinMax(g,l){v.Util.scaleMinMax(g,l),this.minX=Math.min(this.minX,l[0]),this.maxX=Math.max(this.maxX,l[1]),this.minY=Math.min(this.minY,l[2]),this.maxY=Math.max(this.maxY,l[3])}updateCurvePathMinMax(g,l,E,T,w,n,h,d,L,k){const X=v.Util.bezierBoundingBox(l,E,T,w,n,h,d,L);if(k)return k[0]=Math.min(k[0],X[0],X[2]),k[1]=Math.max(k[1],X[0],X[2]),k[2]=Math.min(k[2],X[1],X[3]),void(k[3]=Math.max(k[3],X[1],X[3]));this.updateRectMinMax(g,X)}getPathBoundingBox(g=F.PathType.FILL,l=null){const E=[this.minX,this.minY,this.maxX,this.maxY];if(g===F.PathType.STROKE){l||(0,v.unreachable)("Stroke bounding box must include transform.");const T=v.Util.singularValueDecompose2dScale(l),w=T[0]*this.lineWidth/2,n=T[1]*this.lineWidth/2;E[0]-=w,E[1]-=n,E[2]+=w,E[3]+=n}return E}updateClipFromPath(){const g=v.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(g||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(g){this.clipBox=g,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(g=F.PathType.FILL,l=null){return v.Util.intersect(this.clipBox,this.getPathBoundingBox(g,l))}}function u(V,g,l=null){if(typeof ImageData<"u"&&g instanceof ImageData)return void V.putImageData(g,0,0);const E=g.height,T=g.width,w=E%t,n=(E-w)/t,h=0===w?n:n+1,d=V.createImageData(T,t);let k,L=0;const X=g.data,Y=d.data;let he,ie,ue,ve,fe,me,we,Ae;if(l)switch(l.length){case 1:fe=l[0],me=l[0],we=l[0],Ae=l[0];break;case 4:fe=l[0],me=l[1],we=l[2],Ae=l[3]}if(g.kind===v.ImageKind.GRAYSCALE_1BPP){const re=X.byteLength,K=new Uint32Array(Y.buffer,0,Y.byteLength>>2),ce=K.length,de=T+7>>3;let z=4294967295,I=v.FeatureTest.isLittleEndian?4278190080:255;for(Ae&&255===Ae[0]&&0===Ae[255]&&([z,I]=[I,z]),he=0;he<h;he++){for(ue=he<n?t:w,k=0,ie=0;ie<ue;ie++){const ae=re-L;let Se=0;const ye=ae>de?T:8*ae-7,xe=-8&ye;let D=0,ne=0;for(;Se<xe;Se+=8)ne=X[L++],K[k++]=128&ne?z:I,K[k++]=64&ne?z:I,K[k++]=32&ne?z:I,K[k++]=16&ne?z:I,K[k++]=8&ne?z:I,K[k++]=4&ne?z:I,K[k++]=2&ne?z:I,K[k++]=1&ne?z:I;for(;Se<ye;Se++)0===D&&(ne=X[L++],D=128),K[k++]=ne&D?z:I,D>>=1}for(;k<ce;)K[k++]=0;V.putImageData(d,0,he*t)}}else if(g.kind===v.ImageKind.RGBA_32BPP){const re=!!(fe||me||we);for(ie=0,ve=T*t*4,he=0;he<n;he++){if(Y.set(X.subarray(L,L+ve)),L+=ve,re)for(let K=0;K<ve;K+=4)fe&&(Y[K+0]=fe[Y[K+0]]),me&&(Y[K+1]=me[Y[K+1]]),we&&(Y[K+2]=we[Y[K+2]]);V.putImageData(d,0,ie),ie+=t}if(he<h){if(ve=T*w*4,Y.set(X.subarray(L,L+ve)),re)for(let K=0;K<ve;K+=4)fe&&(Y[K+0]=fe[Y[K+0]]),me&&(Y[K+1]=me[Y[K+1]]),we&&(Y[K+2]=we[Y[K+2]]);V.putImageData(d,0,ie)}}else{if(g.kind!==v.ImageKind.RGB_24BPP)throw new Error(`bad image kind: ${g.kind}`);{const re=!!(fe||me||we);for(ue=t,ve=T*ue,he=0;he<h;he++){for(he>=n&&(ue=w,ve=T*ue),k=0,ie=ve;ie--;)Y[k++]=X[L++],Y[k++]=X[L++],Y[k++]=X[L++],Y[k++]=255;if(re)for(let K=0;K<k;K+=4)fe&&(Y[K+0]=fe[Y[K+0]]),me&&(Y[K+1]=me[Y[K+1]]),we&&(Y[K+2]=we[Y[K+2]]);V.putImageData(d,0,he*t)}}}}function i(V,g){if(g.bitmap)return void V.drawImage(g.bitmap,0,0);const l=g.height,E=g.width,T=l%t,w=(l-T)/t,n=0===T?w:w+1,h=V.createImageData(E,t);let d=0;const L=g.data,k=h.data;for(let X=0;X<n;X++){const Y=X<w?t:T;({srcPos:d}=(0,O.applyMaskImageData)({src:L,srcPos:d,dest:k,width:E,height:Y})),V.putImageData(h,0,X*t)}}function e(V,g){const l=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"];for(let E=0,T=l.length;E<T;E++){const w=l[E];void 0!==V[w]&&(g[w]=V[w])}void 0!==V.setLineDash&&(g.setLineDash(V.getLineDash()),g.lineDashOffset=V.lineDashOffset)}function o(V,g){V.strokeStyle=V.fillStyle=g||"#000000",V.fillRule="nonzero",V.globalAlpha=1,V.lineWidth=1,V.lineCap="butt",V.lineJoin="miter",V.miterLimit=10,V.globalCompositeOperation="source-over",V.font="10px sans-serif",void 0!==V.setLineDash&&(V.setLineDash([]),V.lineDashOffset=0)}function m(V,g,l,E){const T=V.length;for(let w=3;w<T;w+=4){const n=V[w];if(0===n)V[w-3]=g,V[w-2]=l,V[w-1]=E;else if(n<255){const h=255-n;V[w-3]=V[w-3]*n+g*h>>8,V[w-2]=V[w-2]*n+l*h>>8,V[w-1]=V[w-1]*n+E*h>>8}}}function S(V,g,l){const E=V.length;for(let w=3;w<E;w+=4)g[w]=g[w]*(l?l[V[w]]:V[w])*.00392156862745098|0}function f(V,g,l){const E=V.length;for(let T=3;T<E;T+=4){const w=77*V[T-3]+152*V[T-2]+28*V[T-1];g[T]=l?g[T]*l[w>>8]>>8:g[T]*w>>16}}function N(V,g){const l=v.Util.singularValueDecompose2dScale(V);l[0]=Math.fround(l[0]),l[1]=Math.fround(l[1]);const E=Math.fround((globalThis.devicePixelRatio||1)*a.PixelsPerInch.PDF_TO_CSS_UNITS);return void 0!==g?g:l[0]<=E||l[1]<=E}const R=["butt","round","square"],H=["miter","round","bevel"],B={},U={};var j=new WeakSet;class ee{constructor(g,l,E,T,w,n,h,d){_classPrivateMethodInitSpec(this,j),this.ctx=g,this.current=new A(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=l,this.objs=E,this.canvasFactory=T,this.imageLayer=w,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=[],this.optionalContentConfig=n,this.cachedCanvases=new _(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=h,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.backgroundColor=d?.background||null,this.foregroundColor=d?.foreground||null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(g,l=null){return"string"==typeof g?g.startsWith("g_")?this.commonObjs.get(g):this.objs.get(g):l}beginDrawing({transform:g,viewport:l,transparency:E=!1,background:T=null}){const w=this.ctx.canvas.width,n=this.ctx.canvas.height,h=T||"#ffffff";if(this.ctx.save(),this.foregroundColor&&this.backgroundColor){this.ctx.fillStyle=this.foregroundColor;const d=this.foregroundColor=this.ctx.fillStyle;this.ctx.fillStyle=this.backgroundColor;const L=this.backgroundColor=this.ctx.fillStyle;let k=!0,X=h;if(this.ctx.fillStyle=h,X=this.ctx.fillStyle,k="string"==typeof X&&/^#[0-9A-Fa-f]{6}$/.test(X),"#000000"===d&&"#ffffff"===L||d===L||!k)this.foregroundColor=this.backgroundColor=null;else{const[Y,he,ie]=(0,a.getRGB)(X),ue=fe=>(fe/=255)<=.03928?fe/12.92:((fe+.055)/1.055)**2.4,ve=Math.round(.2126*ue(Y)+.7152*ue(he)+.0722*ue(ie));this.selectColor=(fe,me,we)=>{const Ae=.2126*ue(fe)+.7152*ue(me)+.0722*ue(we);return Math.round(Ae)===ve?L:d}}}if(this.ctx.fillStyle=this.backgroundColor||h,this.ctx.fillRect(0,0,w,n),this.ctx.restore(),E){const d=this.cachedCanvases.getCanvas("transparent",w,n);this.compositeCtx=this.ctx,this.transparentCanvas=d.canvas,this.ctx=d.context,this.ctx.save(),this.ctx.transform(...(0,a.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),o(this.ctx,this.foregroundColor),g&&(this.ctx.transform(...g),this.outputScaleX=g[0],this.outputScaleY=g[0]),this.ctx.transform(...l.transform),this.viewportScale=l.scale,this.baseTransform=(0,a.getCurrentTransform)(this.ctx),this.imageLayer&&((0,a.deprecated)("The `imageLayer` functionality will be removed in the future."),this.imageLayer.beginLayout())}executeOperatorList(g,l,E,T){const w=g.argsArray,n=g.fnArray;let h=l||0;const d=w.length;if(d===h)return h;const L=d-h>10&&"function"==typeof E,k=L?Date.now()+15:0;let X=0;const Y=this.commonObjs,he=this.objs;let ie;for(;;){if(void 0!==T&&h===T.nextBreakPoint)return T.breakIt(h,E),h;if(ie=n[h],ie!==v.OPS.dependency)this[ie].apply(this,w[h]);else for(const ue of w[h]){const ve=ue.startsWith("g_")?Y:he;if(!ve.has(ue))return ve.get(ue,E),h}if(h++,h===d)return h;if(L&&++X>10){if(Date.now()>k)return E(),h;X=0}}}endDrawing(){_classPrivateMethodGet(this,j,le).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const g of this._cachedBitmapsMap.values()){for(const l of g.values())typeof HTMLCanvasElement<"u"&&l instanceof HTMLCanvasElement&&(l.width=l.height=0);g.clear()}this._cachedBitmapsMap.clear(),this.imageLayer&&this.imageLayer.endLayout()}_scaleImage(g,l){const E=g.width,T=g.height;let k,X,w=Math.max(Math.hypot(l[0],l[1]),1),n=Math.max(Math.hypot(l[2],l[3]),1),h=E,d=T,L="prescale1";for(;w>2&&h>1||n>2&&d>1;){let Y=h,he=d;w>2&&h>1&&(Y=Math.ceil(h/2),w/=h/Y),n>2&&d>1&&(he=Math.ceil(d/2),n/=d/he),k=this.cachedCanvases.getCanvas(L,Y,he),X=k.context,X.clearRect(0,0,Y,he),X.drawImage(g,0,0,h,d,0,0,Y,he),g=k.canvas,h=Y,d=he,L="prescale1"===L?"prescale2":"prescale1"}return{img:g,paintWidth:h,paintHeight:d}}_createMaskCanvas(g){const l=this.ctx,{width:E,height:T}=g,w=this.current.fillColor,n=this.current.patternFill,h=(0,a.getCurrentTransform)(l);let d,L,k,X;if((g.bitmap||g.data)&&g.count>1){const ce=g.bitmap||g.data.buffer,de=h.slice(0,4);L=JSON.stringify(n?de:[de,w]),d=this._cachedBitmapsMap.get(ce),d||(d=new Map,this._cachedBitmapsMap.set(ce,d));const z=d.get(L);if(z&&!n)return{canvas:z,offsetX:Math.round(Math.min(h[0],h[2])+h[4]),offsetY:Math.round(Math.min(h[1],h[3])+h[5])};k=z}k||(X=this.cachedCanvases.getCanvas("maskCanvas",E,T),i(X.context,g));let Y=v.Util.transform(h,[1/E,0,0,-1/T,0,0]);Y=v.Util.transform(Y,[1,0,0,1,0,-T]);const he=v.Util.applyTransform([0,0],Y),ie=v.Util.applyTransform([E,T],Y),ue=v.Util.normalizeRect([he[0],he[1],ie[0],ie[1]]),ve=Math.round(ue[2]-ue[0])||1,fe=Math.round(ue[3]-ue[1])||1,me=this.cachedCanvases.getCanvas("fillCanvas",ve,fe),we=me.context,Ae=Math.min(he[0],ie[0]),re=Math.min(he[1],ie[1]);we.translate(-Ae,-re),we.transform(...Y),k||(k=this._scaleImage(X.canvas,(0,a.getCurrentTransformInverse)(we)),k=k.img,d&&n&&d.set(L,k)),we.imageSmoothingEnabled=N((0,a.getCurrentTransform)(we),g.interpolate),P(we,k,0,0,k.width,k.height,0,0,E,T),we.globalCompositeOperation="source-in";const K=v.Util.transform((0,a.getCurrentTransformInverse)(we),[1,0,0,1,-Ae,-re]);return we.fillStyle=n?w.getPattern(l,this,K,F.PathType.FILL):w,we.fillRect(0,0,E,T),d&&!n&&(this.cachedCanvases.delete("fillCanvas"),d.set(L,me.canvas)),{canvas:me.canvas,offsetX:Math.round(Ae),offsetY:Math.round(re)}}setLineWidth(g){g!==this.current.lineWidth&&(this._cachedScaleForStroking=null),this.current.lineWidth=g,this.ctx.lineWidth=g}setLineCap(g){this.ctx.lineCap=R[g]}setLineJoin(g){this.ctx.lineJoin=H[g]}setMiterLimit(g){this.ctx.miterLimit=g}setDash(g,l){const E=this.ctx;void 0!==E.setLineDash&&(E.setLineDash(g),E.lineDashOffset=l)}setRenderingIntent(g){}setFlatness(g){}setGState(g){for(let l=0,E=g.length;l<E;l++){const T=g[l],n=T[1];switch(T[0]){case"LW":this.setLineWidth(n);break;case"LC":this.setLineCap(n);break;case"LJ":this.setLineJoin(n);break;case"ML":this.setMiterLimit(n);break;case"D":this.setDash(n[0],n[1]);break;case"RI":this.setRenderingIntent(n);break;case"FL":this.setFlatness(n);break;case"Font":this.setFont(n[0],n[1]);break;case"CA":this.current.strokeAlpha=T[1];break;case"ca":this.current.fillAlpha=T[1],this.ctx.globalAlpha=T[1];break;case"BM":this.ctx.globalCompositeOperation=n;break;case"SMask":this.current.activeSMask=n?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.current.transferMaps=n}}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const g=this.inSMaskMode;this.current.activeSMask&&!g?this.beginSMaskMode():!this.current.activeSMask&&g&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const T=this.cachedCanvases.getCanvas("smaskGroupAt"+this.groupLevel,this.ctx.canvas.width,this.ctx.canvas.height);this.suspendedCtx=this.ctx,this.ctx=T.context;const w=this.ctx;w.setTransform(...(0,a.getCurrentTransform)(this.suspendedCtx)),e(this.suspendedCtx,w),function s(V,g){if(V._removeMirroring)throw new Error("Context is already forwarding operations.");V.__originalSave=V.save,V.__originalRestore=V.restore,V.__originalRotate=V.rotate,V.__originalScale=V.scale,V.__originalTranslate=V.translate,V.__originalTransform=V.transform,V.__originalSetTransform=V.setTransform,V.__originalResetTransform=V.resetTransform,V.__originalClip=V.clip,V.__originalMoveTo=V.moveTo,V.__originalLineTo=V.lineTo,V.__originalBezierCurveTo=V.bezierCurveTo,V.__originalRect=V.rect,V.__originalClosePath=V.closePath,V.__originalBeginPath=V.beginPath,V._removeMirroring=()=>{V.save=V.__originalSave,V.restore=V.__originalRestore,V.rotate=V.__originalRotate,V.scale=V.__originalScale,V.translate=V.__originalTranslate,V.transform=V.__originalTransform,V.setTransform=V.__originalSetTransform,V.resetTransform=V.__originalResetTransform,V.clip=V.__originalClip,V.moveTo=V.__originalMoveTo,V.lineTo=V.__originalLineTo,V.bezierCurveTo=V.__originalBezierCurveTo,V.rect=V.__originalRect,V.closePath=V.__originalClosePath,V.beginPath=V.__originalBeginPath,delete V._removeMirroring},V.save=function(){g.save(),this.__originalSave()},V.restore=function(){g.restore(),this.__originalRestore()},V.translate=function(E,T){g.translate(E,T),this.__originalTranslate(E,T)},V.scale=function(E,T){g.scale(E,T),this.__originalScale(E,T)},V.transform=function(E,T,w,n,h,d){g.transform(E,T,w,n,h,d),this.__originalTransform(E,T,w,n,h,d)},V.setTransform=function(E,T,w,n,h,d){g.setTransform(E,T,w,n,h,d),this.__originalSetTransform(E,T,w,n,h,d)},V.resetTransform=function(){g.resetTransform(),this.__originalResetTransform()},V.rotate=function(E){g.rotate(E),this.__originalRotate(E)},V.clip=function(E){g.clip(E),this.__originalClip(E)},V.moveTo=function(l,E){g.moveTo(l,E),this.__originalMoveTo(l,E)},V.lineTo=function(l,E){g.lineTo(l,E),this.__originalLineTo(l,E)},V.bezierCurveTo=function(l,E,T,w,n,h){g.bezierCurveTo(l,E,T,w,n,h),this.__originalBezierCurveTo(l,E,T,w,n,h)},V.rect=function(l,E,T,w){g.rect(l,E,T,w),this.__originalRect(l,E,T,w)},V.closePath=function(){g.closePath(),this.__originalClosePath()},V.beginPath=function(){g.beginPath(),this.__originalBeginPath()}}(w,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),e(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(g){this.current.activeSMask&&(g?(g[0]=Math.floor(g[0]),g[1]=Math.floor(g[1]),g[2]=Math.ceil(g[2]),g[3]=Math.ceil(g[3])):g=[0,0,this.ctx.canvas.width,this.ctx.canvas.height],function b(V,g,l,E){const T=E[0],w=E[1],n=E[2]-T,h=E[3]-w;0===n||0===h||(function c(V,g,l,E,T,w,n,h,d,L,k){const X=!!w,Y=X?w[0]:0,he=X?w[1]:0,ie=X?w[2]:0;let ue;ue="Luminosity"===T?f:S;const fe=Math.min(E,Math.ceil(1048576/l));for(let me=0;me<E;me+=fe){const we=Math.min(fe,E-me),Ae=V.getImageData(h-L,me+(d-k),l,we),re=g.getImageData(h,me+d,l,we);X&&m(Ae.data,Y,he,ie),ue(Ae.data,re.data,n),g.putImageData(re,h,me+d)}}(g.context,l,n,h,g.subtype,g.backdrop,g.transferMap,T,w,g.offsetX,g.offsetY),V.save(),V.globalAlpha=1,V.globalCompositeOperation="source-over",V.setTransform(1,0,0,1,0,0),V.drawImage(l.canvas,0,0),V.restore())}(this.suspendedCtx,this.current.activeSMask,this.ctx,g),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore())}save(){this.inSMaskMode?(e(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const g=this.current;this.stateStack.push(g),this.current=g.clone()}restore(){0===this.stateStack.length&&this.inSMaskMode&&this.endSMaskMode(),0!==this.stateStack.length&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),e(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null)}transform(g,l,E,T,w,n){this.ctx.transform(g,l,E,T,w,n),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null}constructPath(g,l,E){const T=this.ctx,w=this.current;let d,L,n=w.x,h=w.y;const k=(0,a.getCurrentTransform)(T),X=0===k[0]&&0===k[3]||0===k[1]&&0===k[2],Y=X?E.slice(0):null;for(let he=0,ie=0,ue=g.length;he<ue;he++)switch(0|g[he]){case v.OPS.rectangle:n=l[ie++],h=l[ie++];const ve=l[ie++],fe=l[ie++],me=n+ve,we=h+fe;T.moveTo(n,h),0===ve||0===fe?T.lineTo(me,we):(T.lineTo(me,h),T.lineTo(me,we),T.lineTo(n,we)),X||w.updateRectMinMax(k,[n,h,me,we]),T.closePath();break;case v.OPS.moveTo:n=l[ie++],h=l[ie++],T.moveTo(n,h),X||w.updatePathMinMax(k,n,h);break;case v.OPS.lineTo:n=l[ie++],h=l[ie++],T.lineTo(n,h),X||w.updatePathMinMax(k,n,h);break;case v.OPS.curveTo:d=n,L=h,n=l[ie+4],h=l[ie+5],T.bezierCurveTo(l[ie],l[ie+1],l[ie+2],l[ie+3],n,h),w.updateCurvePathMinMax(k,d,L,l[ie],l[ie+1],l[ie+2],l[ie+3],n,h,Y),ie+=6;break;case v.OPS.curveTo2:d=n,L=h,T.bezierCurveTo(n,h,l[ie],l[ie+1],l[ie+2],l[ie+3]),w.updateCurvePathMinMax(k,d,L,n,h,l[ie],l[ie+1],l[ie+2],l[ie+3],Y),n=l[ie+2],h=l[ie+3],ie+=4;break;case v.OPS.curveTo3:d=n,L=h,n=l[ie+2],h=l[ie+3],T.bezierCurveTo(l[ie],l[ie+1],n,h,n,h),w.updateCurvePathMinMax(k,d,L,l[ie],l[ie+1],n,h,n,h,Y),ie+=4;break;case v.OPS.closePath:T.closePath()}X&&w.updateScalingPathMinMax(k,Y),w.setCurrentPoint(n,h)}closePath(){this.ctx.closePath()}stroke(g){g=!(typeof g<"u")||g;const l=this.ctx,E=this.current.strokeColor;l.globalAlpha=this.current.strokeAlpha,this.contentVisible&&("object"==typeof E&&E?.getPattern?(l.save(),l.strokeStyle=E.getPattern(l,this,(0,a.getCurrentTransformInverse)(l),F.PathType.STROKE),this.rescaleAndStroke(!1),l.restore()):this.rescaleAndStroke(!0)),g&&this.consumePath(this.current.getClippedPathBoundingBox()),l.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(g){g=!(typeof g<"u")||g;const l=this.ctx,E=this.current.fillColor;let w=!1;this.current.patternFill&&(l.save(),l.fillStyle=E.getPattern(l,this,(0,a.getCurrentTransformInverse)(l),F.PathType.FILL),w=!0);const n=this.current.getClippedPathBoundingBox();this.contentVisible&&null!==n&&(this.pendingEOFill?(l.fill("evenodd"),this.pendingEOFill=!1):l.fill()),w&&l.restore(),g&&this.consumePath(n)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=B}eoClip(){this.pendingClip=U}beginText(){this.current.textMatrix=v.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const g=this.pendingTextPaths,l=this.ctx;if(void 0!==g){l.save(),l.beginPath();for(const E of g)l.setTransform(...E.transform),l.translate(E.x,E.y),E.addToPath(l,E.fontSize);l.restore(),l.clip(),l.beginPath(),delete this.pendingTextPaths}else l.beginPath()}setCharSpacing(g){this.current.charSpacing=g}setWordSpacing(g){this.current.wordSpacing=g}setHScale(g){this.current.textHScale=g/100}setLeading(g){this.current.leading=-g}setFont(g,l){const E=this.commonObjs.get(g),T=this.current;if(!E)throw new Error(`Can't find font for ${g}`);if(T.fontMatrix=E.fontMatrix||v.FONT_IDENTITY_MATRIX,(0===T.fontMatrix[0]||0===T.fontMatrix[3])&&(0,v.warn)("Invalid font matrix for font "+g),l<0?(l=-l,T.fontDirection=-1):T.fontDirection=1,this.current.font=E,this.current.fontSize=l,E.isType3Font)return;let n="normal";E.black?n="900":E.bold&&(n="bold");const h=E.italic?"italic":"normal",d=`"${E.loadedName||"sans-serif"}", ${E.fallbackName}`;let L=l;l<16?L=16:l>100&&(L=100),this.current.fontSizeScale=l/L,this.ctx.font=`${h} ${n} ${L}px ${d}`}setTextRenderingMode(g){this.current.textRenderingMode=g}setTextRise(g){this.current.textRise=g}moveText(g,l){this.current.x=this.current.lineX+=g,this.current.y=this.current.lineY+=l}setLeadingMoveText(g,l){this.setLeading(-l),this.moveText(g,l)}setTextMatrix(g,l,E,T,w,n){this.current.textMatrix=[g,l,E,T,w,n],this.current.textMatrixScale=Math.hypot(g,l),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(g,l,E,T){const w=this.ctx,n=this.current,h=n.font,d=n.textRenderingMode,L=n.fontSize/n.fontSizeScale,k=d&v.TextRenderingMode.FILL_STROKE_MASK,X=!!(d&v.TextRenderingMode.ADD_TO_PATH_FLAG),Y=n.patternFill&&!h.missingFile;let he;(h.disableFontFace||X||Y)&&(he=h.getPathGenerator(this.commonObjs,g)),h.disableFontFace||Y?(w.save(),w.translate(l,E),w.beginPath(),he(w,L),T&&w.setTransform(...T),(k===v.TextRenderingMode.FILL||k===v.TextRenderingMode.FILL_STROKE)&&w.fill(),(k===v.TextRenderingMode.STROKE||k===v.TextRenderingMode.FILL_STROKE)&&w.stroke(),w.restore()):((k===v.TextRenderingMode.FILL||k===v.TextRenderingMode.FILL_STROKE)&&w.fillText(g,l,E),(k===v.TextRenderingMode.STROKE||k===v.TextRenderingMode.FILL_STROKE)&&w.strokeText(g,l,E)),X&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,a.getCurrentTransform)(w),x:l,y:E,fontSize:L,addToPath:he})}get isFontSubpixelAAEnabled(){const{context:g}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);g.scale(1.5,1),g.fillText("I",0,10);const l=g.getImageData(0,0,10,10).data;let E=!1;for(let T=3;T<l.length;T+=4)if(l[T]>0&&l[T]<255){E=!0;break}return(0,v.shadow)(this,"isFontSubpixelAAEnabled",E)}showText(g){const l=this.current,E=l.font;if(E.isType3Font)return this.showType3Text(g);const T=l.fontSize;if(0===T)return;const w=this.ctx,n=l.fontSizeScale,h=l.charSpacing,d=l.wordSpacing,L=l.fontDirection,k=l.textHScale*L,X=g.length,Y=E.vertical,he=Y?1:-1,ie=E.defaultVMetrics,ue=T*l.fontMatrix[0],ve=l.textRenderingMode===v.TextRenderingMode.FILL&&!E.disableFontFace&&!l.patternFill;let fe;if(w.save(),w.transform(...l.textMatrix),w.translate(l.x,l.y+l.textRise),w.scale(k,L>0?-1:1),l.patternFill){w.save();const K=l.fillColor.getPattern(w,this,(0,a.getCurrentTransformInverse)(w),F.PathType.FILL);fe=(0,a.getCurrentTransform)(w),w.restore(),w.fillStyle=K}let me=l.lineWidth;const we=l.textMatrixScale;if(0===we||0===me){const K=l.textRenderingMode&v.TextRenderingMode.FILL_STROKE_MASK;(K===v.TextRenderingMode.STROKE||K===v.TextRenderingMode.FILL_STROKE)&&(me=this.getSinglePixelWidth())}else me/=we;1!==n&&(w.scale(n,n),me/=n),w.lineWidth=me;let re,Ae=0;for(re=0;re<X;++re){const K=g[re];if("number"==typeof K){Ae+=he*K*T/1e3;continue}let ce=!1;const de=(K.isSpace?d:0)+h,z=K.fontChar,I=K.accent;let ae,Se,xe,ye=K.width;if(Y){const D=K.vmetric||ie,ne=-(K.vmetric?D[1]:.5*ye)*ue;ye=D?-D[0]:ye,ae=ne/n,Se=(Ae+D[2]*ue)/n}else ae=Ae/n,Se=0;if(E.remeasure&&ye>0){const D=1e3*w.measureText(z).width/T*n;if(ye<D&&this.isFontSubpixelAAEnabled){const ne=ye/D;ce=!0,w.save(),w.scale(ne,1),ae/=ne}else ye!==D&&(ae+=(ye-D)/2e3*T/n)}this.contentVisible&&(K.isInFont||E.missingFile)&&(ve&&!I?w.fillText(z,ae,Se):(this.paintChar(z,ae,Se,fe),I&&this.paintChar(I.fontChar,ae+T*I.offset.x/n,Se-T*I.offset.y/n,fe))),xe=Y?ye*ue-de*L:ye*ue+de*L,Ae+=xe,ce&&w.restore()}Y?l.y-=Ae:l.x+=Ae*k,w.restore(),this.compose()}showType3Text(g){const l=this.ctx,E=this.current,T=E.font,w=E.fontSize,n=E.fontDirection,h=T.vertical?1:-1,d=E.charSpacing,L=E.wordSpacing,k=E.textHScale*n,X=E.fontMatrix||v.FONT_IDENTITY_MATRIX,Y=g.length;let ie,ue,ve,fe;if(E.textRenderingMode!==v.TextRenderingMode.INVISIBLE&&0!==w){for(this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,l.save(),l.transform(...E.textMatrix),l.translate(E.x,E.y),l.scale(k,n),ie=0;ie<Y;++ie){if(ue=g[ie],"number"==typeof ue){fe=h*ue*w/1e3,this.ctx.translate(fe,0),E.x+=fe*k;continue}const me=(ue.isSpace?L:0)+d,we=T.charProcOperatorList[ue.operatorListId];we?(this.contentVisible&&(this.processingType3=ue,this.save(),l.scale(w,w),l.transform(...X),this.executeOperatorList(we),this.restore()),ve=v.Util.applyTransform([ue.width,0],X)[0]*w+me,l.translate(ve,0),E.x+=ve*k):(0,v.warn)(`Type3 character "${ue.operatorListId}" is not available.`)}l.restore(),this.processingType3=null}}setCharWidth(g,l){}setCharWidthAndBounds(g,l,E,T,w,n){this.ctx.rect(E,T,w-E,n-T),this.ctx.clip(),this.endPath()}getColorN_Pattern(g){let l;if("TilingPattern"===g[0]){const E=g[1],T=this.baseTransform||(0,a.getCurrentTransform)(this.ctx);l=new F.TilingPattern(g,E,this.ctx,{createCanvasGraphics:n=>new ee(n,this.commonObjs,this.objs,this.canvasFactory)},T)}else l=this._getPattern(g[1],g[2]);return l}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(g,l,E){const T=this.selectColor?.(g,l,E)||v.Util.makeHexColor(g,l,E);this.ctx.strokeStyle=T,this.current.strokeColor=T}setFillRGBColor(g,l,E){const T=this.selectColor?.(g,l,E)||v.Util.makeHexColor(g,l,E);this.ctx.fillStyle=T,this.current.fillColor=T,this.current.patternFill=!1}_getPattern(g,l=null){let E;return this.cachedPatterns.has(g)?E=this.cachedPatterns.get(g):(E=(0,F.getShadingPattern)(this.objs.get(g)),this.cachedPatterns.set(g,E)),l&&(E.matrix=l),E}shadingFill(g){if(!this.contentVisible)return;const l=this.ctx;this.save();const E=this._getPattern(g);l.fillStyle=E.getPattern(l,this,(0,a.getCurrentTransformInverse)(l),F.PathType.SHADING);const T=(0,a.getCurrentTransformInverse)(l);if(T){const w=l.canvas,n=w.width,h=w.height,d=v.Util.applyTransform([0,0],T),L=v.Util.applyTransform([0,h],T),k=v.Util.applyTransform([n,0],T),X=v.Util.applyTransform([n,h],T),Y=Math.min(d[0],L[0],k[0],X[0]),he=Math.min(d[1],L[1],k[1],X[1]),ie=Math.max(d[0],L[0],k[0],X[0]),ue=Math.max(d[1],L[1],k[1],X[1]);this.ctx.fillRect(Y,he,ie-Y,ue-he)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,v.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,v.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(g,l){this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(g)&&6===g.length&&this.transform(...g),this.baseTransform=(0,a.getCurrentTransform)(this.ctx),l)&&(this.ctx.rect(l[0],l[1],l[2]-l[0],l[3]-l[1]),this.current.updateRectMinMax((0,a.getCurrentTransform)(this.ctx),l),this.clip(),this.endPath())}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(g){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const l=this.ctx;g.isolated||(0,v.info)("TODO: Support non-isolated groups."),g.knockout&&(0,v.warn)("Knockout groups not supported.");const E=(0,a.getCurrentTransform)(l);if(g.matrix&&l.transform(...g.matrix),!g.bbox)throw new Error("Bounding box is required.");let T=v.Util.getAxialAlignedBoundingBox(g.bbox,(0,a.getCurrentTransform)(l));T=v.Util.intersect(T,[0,0,l.canvas.width,l.canvas.height])||[0,0,0,0];const n=Math.floor(T[0]),h=Math.floor(T[1]);let d=Math.max(Math.ceil(T[2])-n,1),L=Math.max(Math.ceil(T[3])-h,1),k=1,X=1;d>G&&(k=d/G,d=G),L>G&&(X=L/G,L=G),this.current.startNewPathAndClipBox([0,0,d,L]);let Y="groupAt"+this.groupLevel;g.smask&&(Y+="_smask_"+this.smaskCounter++%2);const he=this.cachedCanvases.getCanvas(Y,d,L),ie=he.context;ie.scale(1/k,1/X),ie.translate(-n,-h),ie.transform(...E),g.smask?this.smaskStack.push({canvas:he.canvas,context:ie,offsetX:n,offsetY:h,scaleX:k,scaleY:X,subtype:g.smask.subtype,backdrop:g.smask.backdrop,transferMap:g.smask.transferMap||null,startTransformInverse:null}):(l.setTransform(1,0,0,1,0,0),l.translate(n,h),l.scale(k,X),l.save()),e(l,ie),this.ctx=ie,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(l),this.groupLevel++}endGroup(g){if(!this.contentVisible)return;this.groupLevel--;const l=this.ctx,E=this.groupStack.pop();if(this.ctx=E,this.ctx.imageSmoothingEnabled=!1,g.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const T=(0,a.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...T);const w=v.Util.getAxialAlignedBoundingBox([0,0,l.canvas.width,l.canvas.height],T);this.ctx.drawImage(l.canvas,0,0),this.ctx.restore(),this.compose(w)}}beginAnnotation(g,l,E,T,w){if(_classPrivateMethodGet(this,j,le).call(this),o(this.ctx,this.foregroundColor),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(l)&&4===l.length){const n=l[2]-l[0],h=l[3]-l[1];if(w&&this.annotationCanvasMap){(E=E.slice())[4]-=l[0],E[5]-=l[1],(l=l.slice())[0]=l[1]=0,l[2]=n,l[3]=h;const[d,L]=v.Util.singularValueDecompose2dScale((0,a.getCurrentTransform)(this.ctx)),{viewportScale:k}=this,X=Math.ceil(n*this.outputScaleX*k),Y=Math.ceil(h*this.outputScaleY*k);this.annotationCanvas=this.canvasFactory.create(X,Y);const{canvas:he,context:ie}=this.annotationCanvas;this.annotationCanvasMap.set(g,he),this.annotationCanvas.savedCtx=this.ctx,this.ctx=ie,this.ctx.setTransform(d,0,0,-L,0,h*L),o(this.ctx,this.foregroundColor)}else o(this.ctx,this.foregroundColor),this.ctx.rect(l[0],l[1],n,h),this.ctx.clip(),this.endPath()}this.current=new A(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...E),this.transform(...T)}endAnnotation(){this.annotationCanvas&&(this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(g){if(!this.contentVisible)return;const l=g.count;(g=this.getObject(g.data,g)).count=l;const E=this.ctx,T=this.processingType3;if(T&&(void 0===T.compiled&&(T.compiled=function p(V){const{width:g,height:l}=V;if(g>y||l>y)return null;const T=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),w=g+1;let h,d,L,n=new Uint8Array(w*(l+1));const k=g+7&-8;let X=new Uint8Array(k*l),Y=0;for(const fe of V.data){let me=128;for(;me>0;)X[Y++]=fe&me?0:255,me>>=1}let he=0;for(Y=0,0!==X[Y]&&(n[0]=1,++he),d=1;d<g;d++)X[Y]!==X[Y+1]&&(n[d]=X[Y]?2:1,++he),Y++;for(0!==X[Y]&&(n[d]=2,++he),h=1;h<l;h++){Y=h*k,L=h*w,X[Y-k]!==X[Y]&&(n[L]=X[Y]?1:8,++he);let fe=(X[Y]?4:0)+(X[Y-k]?8:0);for(d=1;d<g;d++)fe=(fe>>2)+(X[Y+1]?4:0)+(X[Y-k+1]?8:0),T[fe]&&(n[L+d]=T[fe],++he),Y++;if(X[Y-k]!==X[Y]&&(n[L+d]=X[Y]?2:4,++he),he>1e3)return null}for(Y=k*(l-1),L=h*w,0!==X[Y]&&(n[L]=8,++he),d=1;d<g;d++)X[Y]!==X[Y+1]&&(n[L+d]=X[Y]?4:8,++he),Y++;if(0!==X[Y]&&(n[L+d]=4,++he),he>1e3)return null;const ie=new Int32Array([0,w,-1,0,-w,0,0,0,1]),ue=new Path2D;for(h=0;he&&h<=l;h++){let fe=h*w;const me=fe+g;for(;fe<me&&!n[fe];)fe++;if(fe===me)continue;ue.moveTo(fe%w,h);const we=fe;let Ae=n[fe];do{const re=ie[Ae];do{fe+=re}while(!n[fe]);const K=n[fe];5!==K&&10!==K?(Ae=K,n[fe]=0):(Ae=K&51*Ae>>4,n[fe]&=Ae>>2|Ae<<2),ue.lineTo(fe%w,fe/w|0),n[fe]||--he}while(we!==fe);--h}return X=null,n=null,function(fe){fe.save(),fe.scale(1/g,-1/l),fe.translate(0,-l),fe.fill(ue),fe.beginPath(),fe.restore()}}(g)),T.compiled))return void T.compiled(E);const w=this._createMaskCanvas(g),n=w.canvas;E.save(),E.setTransform(1,0,0,1,0,0),E.drawImage(n,w.offsetX,w.offsetY),E.restore(),this.compose()}paintImageMaskXObjectRepeat(g,l,E=0,T=0,w,n){if(!this.contentVisible)return;g=this.getObject(g.data,g);const h=this.ctx;h.save();const d=(0,a.getCurrentTransform)(h);h.transform(l,E,T,w,0,0);const L=this._createMaskCanvas(g);h.setTransform(1,0,0,1,0,0);for(let k=0,X=n.length;k<X;k+=2){const Y=v.Util.transform(d,[l,E,T,w,n[k],n[k+1]]),[he,ie]=v.Util.applyTransform([0,0],Y);h.drawImage(L.canvas,he,ie)}h.restore(),this.compose()}paintImageMaskXObjectGroup(g){if(!this.contentVisible)return;const l=this.ctx,E=this.current.fillColor,T=this.current.patternFill;for(const w of g){const{data:n,width:h,height:d,transform:L}=w,k=this.cachedCanvases.getCanvas("maskCanvas",h,d),X=k.context;X.save(),i(X,this.getObject(n,w)),X.globalCompositeOperation="source-in",X.fillStyle=T?E.getPattern(X,this,(0,a.getCurrentTransformInverse)(l),F.PathType.FILL):E,X.fillRect(0,0,h,d),X.restore(),l.save(),l.transform(...L),l.scale(1,-1),P(l,k.canvas,0,0,h,d,0,-1,1,1),l.restore()}this.compose()}paintImageXObject(g){if(!this.contentVisible)return;const l=this.getObject(g);l?this.paintInlineImageXObject(l):(0,v.warn)("Dependent image isn't ready yet")}paintImageXObjectRepeat(g,l,E,T){if(!this.contentVisible)return;const w=this.getObject(g);if(!w)return void(0,v.warn)("Dependent image isn't ready yet");const n=w.width,h=w.height,d=[];for(let L=0,k=T.length;L<k;L+=2)d.push({transform:[l,0,0,E,T[L],T[L+1]],x:0,y:0,w:n,h});this.paintInlineImageXObjectGroup(w,d)}paintInlineImageXObject(g){if(!this.contentVisible)return;const l=g.width,E=g.height,T=this.ctx;let w;if(this.save(),T.scale(1/l,-1/E),"function"==typeof HTMLElement&&g instanceof HTMLElement||!g.data)w=g;else{const L=this.cachedCanvases.getCanvas("inlineImage",l,E);u(L.context,g,this.current.transferMaps),w=L.canvas}const n=this._scaleImage(w,(0,a.getCurrentTransformInverse)(T));T.imageSmoothingEnabled=N((0,a.getCurrentTransform)(T),g.interpolate);const[h,d]=P(T,n.img,0,0,n.paintWidth,n.paintHeight,0,-E,l,E);if(this.imageLayer){const[L,k]=v.Util.applyTransform([0,-E],(0,a.getCurrentTransform)(this.ctx));this.imageLayer.appendImage({imgData:g,left:L,top:k,width:h,height:d})}this.compose(),this.restore()}paintInlineImageXObjectGroup(g,l){if(!this.contentVisible)return;const E=this.ctx,T=g.width,w=g.height,n=this.cachedCanvases.getCanvas("inlineImage",T,w);u(n.context,g,this.current.transferMaps);for(const d of l){if(E.save(),E.transform(...d.transform),E.scale(1,-1),P(E,n.canvas,d.x,d.y,d.w,d.h,0,-1,1,1),this.imageLayer){const[L,k]=v.Util.applyTransform([d.x,d.y],(0,a.getCurrentTransform)(this.ctx));this.imageLayer.appendImage({imgData:g,left:L,top:k,width:T,height:w})}E.restore()}this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(g){}markPointProps(g,l){}beginMarkedContent(g){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(g,l){this.markedContentStack.push("OC"===g?{visible:this.optionalContentConfig.isVisible(l)}:{visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(g){const l=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(g);const E=this.ctx;this.pendingClip&&(l||(this.pendingClip===U?E.clip("evenodd"):E.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),E.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const g=(0,a.getCurrentTransform)(this.ctx);if(0===g[1]&&0===g[2])this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(g[0]),Math.abs(g[3]));else{const l=Math.abs(g[0]*g[3]-g[2]*g[1]),E=Math.hypot(g[0],g[2]),T=Math.hypot(g[1],g[3]);this._cachedGetSinglePixelWidth=Math.max(E,T)/l}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(!this._cachedScaleForStroking){const{lineWidth:g}=this.current,l=(0,a.getCurrentTransform)(this.ctx);let E,T;if(0===l[1]&&0===l[2]){const w=Math.abs(l[0]),n=Math.abs(l[3]);if(0===g)E=1/w,T=1/n;else{const h=w*g,d=n*g;E=h<1?1/h:1,T=d<1?1/d:1}}else{const w=Math.abs(l[0]*l[3]-l[2]*l[1]),n=Math.hypot(l[0],l[1]),h=Math.hypot(l[2],l[3]);if(0===g)E=h/w,T=n/w;else{const d=g*w;E=h>d?h/d:1,T=n>d?n/d:1}}this._cachedScaleForStroking=[E,T]}return this._cachedScaleForStroking}rescaleAndStroke(g){const{ctx:l}=this,{lineWidth:E}=this.current,[T,w]=this.getScaleForStroking();if(l.lineWidth=E||1,1===T&&1===w)return void l.stroke();let n,h,d;g&&(n=(0,a.getCurrentTransform)(l),h=l.getLineDash().slice(),d=l.lineDashOffset),l.scale(T,w);const L=Math.max(T,w);l.setLineDash(l.getLineDash().map(k=>k/L)),l.lineDashOffset/=L,l.stroke(),g&&(l.setTransform(...n),l.setLineDash(h),l.lineDashOffset=d)}isContentVisible(){for(let g=this.markedContentStack.length-1;g>=0;g--)if(!this.markedContentStack[g].visible)return!1;return!0}}function le(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}r.CanvasGraphics=ee;for(const V in v.OPS)void 0!==ee.prototype[V]&&(ee.prototype[v.OPS[V]]=ee.prototype[V])},(Z,r,x)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.TilingPattern=r.PathType=void 0,r.getShadingPattern=function t(P){switch(P[0]){case"RadialAxial":return new C(P);case"Mesh":return new W(P);case"Dummy":return new y}throw new Error(`Unknown IR type: ${P[0]}`)};var a=x(1),v=x(8),F=x(3);const O={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function Q(P,p){if(!p||F.isNodeJS)return;const A=p[2]-p[0],u=p[3]-p[1],i=new Path2D;i.rect(p[0],p[1],A,u),P.clip(i)}r.PathType=O;class M{constructor(){this.constructor===M&&(0,a.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,a.unreachable)("Abstract method `getPattern` called.")}}class C extends M{constructor(p){super(),this._type=p[1],this._bbox=p[2],this._colorStops=p[3],this._p0=p[4],this._p1=p[5],this._r0=p[6],this._r1=p[7],this.matrix=null}_createGradient(p){let A;"axial"===this._type?A=p.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):"radial"===this._type&&(A=p.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const u of this._colorStops)A.addColorStop(u[0],u[1]);return A}getPattern(p,A,u,i){let e;if(i===O.STROKE||i===O.FILL){const o=A.current.getClippedPathBoundingBox(i,(0,v.getCurrentTransform)(p))||[0,0,0,0],m=Math.ceil(o[2]-o[0])||1,S=Math.ceil(o[3]-o[1])||1,f=A.cachedCanvases.getCanvas("pattern",m,S,!0),c=f.context;c.clearRect(0,0,c.canvas.width,c.canvas.height),c.beginPath(),c.rect(0,0,c.canvas.width,c.canvas.height),c.translate(-o[0],-o[1]),u=a.Util.transform(u,[1,0,0,1,o[0],o[1]]),c.transform(...A.baseTransform),this.matrix&&c.transform(...this.matrix),Q(c,this._bbox),c.fillStyle=this._createGradient(c),c.fill(),e=p.createPattern(f.canvas,"no-repeat");const b=new DOMMatrix(u);try{e.setTransform(b)}catch(N){(0,a.warn)(`RadialAxialShadingPattern.getPattern: "${N?.message}".`)}}else Q(p,this._bbox),e=this._createGradient(p);return e}}function G(P,p,A,u,i,e,o,m){const S=p.coords,f=p.colors,c=P.data,b=4*P.width;let N;S[A+1]>S[u+1]&&(N=A,A=u,u=N,N=e,e=o,o=N),S[u+1]>S[i+1]&&(N=u,u=i,i=N,N=o,o=m,m=N),S[A+1]>S[u+1]&&(N=A,A=u,u=N,N=e,e=o,o=N);const R=(S[A]+p.offsetX)*p.scaleX,H=(S[A+1]+p.offsetY)*p.scaleY,B=(S[u]+p.offsetX)*p.scaleX,U=(S[u+1]+p.offsetY)*p.scaleY,j=(S[i]+p.offsetX)*p.scaleX,ee=(S[i+1]+p.offsetY)*p.scaleY;if(H>=ee)return;const le=f[e],V=f[e+1],g=f[e+2],l=f[o],E=f[o+1],T=f[o+2],w=f[m],n=f[m+1],h=f[m+2],d=Math.round(H),L=Math.round(ee);let k,X,Y,he,ie,ue,ve,fe;for(let me=d;me<=L;me++){if(me<U){let ce;ce=me<H?0:(H-me)/(H-U),k=R-(R-B)*ce,X=le-(le-l)*ce,Y=V-(V-E)*ce,he=g-(g-T)*ce}else{let ce;ce=me>ee?1:U===ee?0:(U-me)/(U-ee),k=B-(B-j)*ce,X=l-(l-w)*ce,Y=E-(E-n)*ce,he=T-(T-h)*ce}let we;we=me<H?0:me>ee?1:(H-me)/(H-ee),ie=R-(R-j)*we,ue=le-(le-w)*we,ve=V-(V-n)*we,fe=g-(g-h)*we;const Ae=Math.round(Math.min(k,ie)),re=Math.round(Math.max(k,ie));let K=b*me+4*Ae;for(let ce=Ae;ce<=re;ce++)we=(k-ce)/(k-ie),we<0?we=0:we>1&&(we=1),c[K++]=X-(X-ue)*we|0,c[K++]=Y-(Y-ve)*we|0,c[K++]=he-(he-fe)*we|0,c[K++]=255}}function q(P,p,A){const u=p.coords,i=p.colors;let e,o;switch(p.type){case"lattice":const m=p.verticesPerRow,S=Math.floor(u.length/m)-1,f=m-1;for(e=0;e<S;e++){let c=e*m;for(let b=0;b<f;b++,c++)G(P,A,u[c],u[c+1],u[c+m],i[c],i[c+1],i[c+m]),G(P,A,u[c+m+1],u[c+1],u[c+m],i[c+m+1],i[c+1],i[c+m])}break;case"triangles":for(e=0,o=u.length;e<o;e+=3)G(P,A,u[e],u[e+1],u[e+2],i[e],i[e+1],i[e+2]);break;default:throw new Error("illegal figure")}}class W extends M{constructor(p){super(),this._coords=p[2],this._colors=p[3],this._figures=p[4],this._bounds=p[5],this._bbox=p[7],this._background=p[8],this.matrix=null}_createMeshCanvas(p,A,u){const m=Math.floor(this._bounds[0]),S=Math.floor(this._bounds[1]),f=Math.ceil(this._bounds[2])-m,c=Math.ceil(this._bounds[3])-S,b=Math.min(Math.ceil(Math.abs(f*p[0]*1.1)),3e3),N=Math.min(Math.ceil(Math.abs(c*p[1]*1.1)),3e3),R=f/b,H=c/N,B={coords:this._coords,colors:this._colors,offsetX:-m,offsetY:-S,scaleX:1/R,scaleY:1/H},ee=u.getCanvas("mesh",b+4,N+4,!1),le=ee.context,V=le.createImageData(b,N);if(A){const l=V.data;for(let E=0,T=l.length;E<T;E+=4)l[E]=A[0],l[E+1]=A[1],l[E+2]=A[2],l[E+3]=255}for(const l of this._figures)q(V,l,B);return le.putImageData(V,2,2),{canvas:ee.canvas,offsetX:m-2*R,offsetY:S-2*H,scaleX:R,scaleY:H}}getPattern(p,A,u,i){let e;if(Q(p,this._bbox),i===O.SHADING)e=a.Util.singularValueDecompose2dScale((0,v.getCurrentTransform)(p));else if(e=a.Util.singularValueDecompose2dScale(A.baseTransform),this.matrix){const m=a.Util.singularValueDecompose2dScale(this.matrix);e=[e[0]*m[0],e[1]*m[1]]}const o=this._createMeshCanvas(e,i===O.SHADING?null:this._background,A.cachedCanvases);return i!==O.SHADING&&(p.setTransform(...A.baseTransform),this.matrix&&p.transform(...this.matrix)),p.translate(o.offsetX,o.offsetY),p.scale(o.scaleX,o.scaleY),p.createPattern(o.canvas,"no-repeat")}}class y extends M{getPattern(){return"hotpink"}}class _{static get MAX_PATTERN_SIZE(){return(0,a.shadow)(this,"MAX_PATTERN_SIZE",3e3)}constructor(p,A,u,i,e){this.operatorList=p[2],this.matrix=p[3]||[1,0,0,1,0,0],this.bbox=p[4],this.xstep=p[5],this.ystep=p[6],this.paintType=p[7],this.tilingType=p[8],this.color=A,this.ctx=u,this.canvasGraphicsFactory=i,this.baseTransform=e}createPatternCanvas(p){const A=this.operatorList,u=this.bbox,i=this.xstep,e=this.ystep,o=this.paintType,S=this.color,f=this.canvasGraphicsFactory;(0,a.info)("TilingType: "+this.tilingType);const c=u[0],b=u[1],N=u[2],R=u[3],H=a.Util.singularValueDecompose2dScale(this.matrix),B=a.Util.singularValueDecompose2dScale(this.baseTransform),U=[H[0]*B[0],H[1]*B[1]],j=this.getSizeAndScale(i,this.ctx.canvas.width,U[0]),ee=this.getSizeAndScale(e,this.ctx.canvas.height,U[1]),le=p.cachedCanvases.getCanvas("pattern",j.size,ee.size,!0),V=le.context,g=f.createCanvasGraphics(V);g.groupLevel=p.groupLevel,this.setFillAndStrokeStyleToContext(g,o,S);let l=c,E=b,T=N,w=R;return c<0&&(l=0,T+=Math.abs(c)),b<0&&(E=0,w+=Math.abs(b)),V.translate(-j.scale*l,-ee.scale*E),g.transform(j.scale,0,0,ee.scale,0,0),V.save(),this.clipBbox(g,l,E,T,w),g.baseTransform=(0,v.getCurrentTransform)(g.ctx),g.executeOperatorList(A),g.endDrawing(),{canvas:le.canvas,scaleX:j.scale,scaleY:ee.scale,offsetX:l,offsetY:E}}getSizeAndScale(p,A,u){p=Math.abs(p);const i=Math.max(_.MAX_PATTERN_SIZE,A);let e=Math.ceil(p*u);return e>=i?e=i:u=e/p,{scale:u,size:e}}clipBbox(p,A,u,i,e){p.ctx.rect(A,u,i-A,e-u),p.current.updateRectMinMax((0,v.getCurrentTransform)(p.ctx),[A,u,i,e]),p.clip(),p.endPath()}setFillAndStrokeStyleToContext(p,A,u){const i=p.ctx,e=p.current;switch(A){case 1:const o=this.ctx;i.fillStyle=o.fillStyle,i.strokeStyle=o.strokeStyle,e.fillColor=o.fillStyle,e.strokeColor=o.strokeStyle;break;case 2:const m=a.Util.makeHexColor(u[0],u[1],u[2]);i.fillStyle=m,i.strokeStyle=m,e.fillColor=m,e.strokeColor=m;break;default:throw new a.FormatError(`Unsupported paint type: ${A}`)}}getPattern(p,A,u,i){let e=u;i!==O.SHADING&&(e=a.Util.transform(e,A.baseTransform),this.matrix&&(e=a.Util.transform(e,this.matrix)));const o=this.createPatternCanvas(A);let m=new DOMMatrix(e);m=m.translate(o.offsetX,o.offsetY),m=m.scale(1/o.scaleX,1/o.scaleY);const S=p.createPattern(o.canvas,"repeat");try{S.setTransform(m)}catch(f){(0,a.warn)(`TilingPattern.getPattern: "${f?.message}".`)}return S}}r.TilingPattern=_},(Z,r,x)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.applyMaskImageData=function v({src:F,srcPos:O=0,dest:Q,destPos:M=0,width:C,height:G,inverseDecode:q=!1}){const W=a.FeatureTest.isLittleEndian?4278190080:255,[y,t]=q?[0,W]:[W,0],s=C>>3,_=7&C,P=F.length;Q=new Uint32Array(Q.buffer);for(let p=0;p<G;p++){for(const u=O+s;O<u;O++){const i=O<P?F[O]:255;Q[M++]=128&i?t:y,Q[M++]=64&i?t:y,Q[M++]=32&i?t:y,Q[M++]=16&i?t:y,Q[M++]=8&i?t:y,Q[M++]=4&i?t:y,Q[M++]=2&i?t:y,Q[M++]=1&i?t:y}if(0===_)continue;const A=O<P?F[O++]:255;for(let u=0;u<_;u++)Q[M++]=A&1<<7-u?t:y}return{srcPos:O,destPos:M}};var a=x(1)},(Z,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.GlobalWorkerOptions=void 0;const x=Object.create(null);r.GlobalWorkerOptions=x,x.workerPort=void 0===x.workerPort?null:x.workerPort,x.workerSrc=void 0===x.workerSrc?"":x.workerSrc},(Z,r,x)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.MessageHandler=void 0;var a=x(1);function O(M){switch(M instanceof Error||"object"==typeof M&&null!==M||(0,a.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),M.name){case"AbortException":return new a.AbortException(M.message);case"MissingPDFException":return new a.MissingPDFException(M.message);case"PasswordException":return new a.PasswordException(M.message,M.code);case"UnexpectedResponseException":return new a.UnexpectedResponseException(M.message,M.status);case"UnknownErrorException":return new a.UnknownErrorException(M.message,M.details);default:return new a.UnknownErrorException(M.message,M.toString())}}r.MessageHandler=class Q{constructor(C,G,q){this.sourceName=C,this.targetName=G,this.comObj=q,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=W=>{const y=W.data;if(y.targetName!==this.sourceName)return;if(y.stream)return void this._processStreamMessage(y);if(y.callback){const s=y.callbackId,_=this.callbackCapabilities[s];if(!_)throw new Error(`Cannot resolve callback ${s}`);if(delete this.callbackCapabilities[s],1===y.callback)_.resolve(y.data);else{if(2!==y.callback)throw new Error("Unexpected callback case");_.reject(O(y.reason))}return}const t=this.actionHandler[y.action];if(!t)throw new Error(`Unknown action from worker: ${y.action}`);if(y.callbackId){const s=this.sourceName,_=y.sourceName;new Promise(function(P){P(t(y.data))}).then(function(P){q.postMessage({sourceName:s,targetName:_,callback:1,callbackId:y.callbackId,data:P})},function(P){q.postMessage({sourceName:s,targetName:_,callback:2,callbackId:y.callbackId,reason:O(P)})})}else y.streamId?this._createStreamSink(y):t(y.data)},q.addEventListener("message",this._onComObjOnMessage)}on(C,G){const q=this.actionHandler;if(q[C])throw new Error(`There is already an actionName called "${C}"`);q[C]=G}send(C,G,q){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:C,data:G},q)}sendWithPromise(C,G,q){const W=this.callbackId++,y=(0,a.createPromiseCapability)();this.callbackCapabilities[W]=y;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:C,callbackId:W,data:G},q)}catch(t){y.reject(t)}return y.promise}sendWithStream(C,G,q,W){const y=this.streamId++,t=this.sourceName,s=this.targetName,_=this.comObj;return new ReadableStream({start:P=>{const p=(0,a.createPromiseCapability)();return this.streamControllers[y]={controller:P,startCall:p,pullCall:null,cancelCall:null,isClosed:!1},_.postMessage({sourceName:t,targetName:s,action:C,streamId:y,data:G,desiredSize:P.desiredSize},W),p.promise},pull:P=>{const p=(0,a.createPromiseCapability)();return this.streamControllers[y].pullCall=p,_.postMessage({sourceName:t,targetName:s,stream:6,streamId:y,desiredSize:P.desiredSize}),p.promise},cancel:P=>{(0,a.assert)(P instanceof Error,"cancel must have a valid reason");const p=(0,a.createPromiseCapability)();return this.streamControllers[y].cancelCall=p,this.streamControllers[y].isClosed=!0,_.postMessage({sourceName:t,targetName:s,stream:1,streamId:y,reason:O(P)}),p.promise}},q)}_createStreamSink(C){const G=C.streamId,q=this.sourceName,W=C.sourceName,y=this.comObj,t=this,s=this.actionHandler[C.action],_={enqueue(P,p=1,A){if(this.isCancelled)return;const u=this.desiredSize;this.desiredSize-=p,u>0&&this.desiredSize<=0&&(this.sinkCapability=(0,a.createPromiseCapability)(),this.ready=this.sinkCapability.promise),y.postMessage({sourceName:q,targetName:W,stream:4,streamId:G,chunk:P},A)},close(){this.isCancelled||(this.isCancelled=!0,y.postMessage({sourceName:q,targetName:W,stream:3,streamId:G}),delete t.streamSinks[G])},error(P){(0,a.assert)(P instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,y.postMessage({sourceName:q,targetName:W,stream:5,streamId:G,reason:O(P)}))},sinkCapability:(0,a.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:C.desiredSize,ready:null};_.sinkCapability.resolve(),_.ready=_.sinkCapability.promise,this.streamSinks[G]=_,new Promise(function(P){P(s(C.data,_))}).then(function(){y.postMessage({sourceName:q,targetName:W,stream:8,streamId:G,success:!0})},function(P){y.postMessage({sourceName:q,targetName:W,stream:8,streamId:G,reason:O(P)})})}_processStreamMessage(C){const G=C.streamId,q=this.sourceName,W=C.sourceName,y=this.comObj,t=this.streamControllers[G],s=this.streamSinks[G];switch(C.stream){case 8:C.success?t.startCall.resolve():t.startCall.reject(O(C.reason));break;case 7:C.success?t.pullCall.resolve():t.pullCall.reject(O(C.reason));break;case 6:if(!s){y.postMessage({sourceName:q,targetName:W,stream:7,streamId:G,success:!0});break}s.desiredSize<=0&&C.desiredSize>0&&s.sinkCapability.resolve(),s.desiredSize=C.desiredSize,new Promise(function(_){_(s.onPull&&s.onPull())}).then(function(){y.postMessage({sourceName:q,targetName:W,stream:7,streamId:G,success:!0})},function(_){y.postMessage({sourceName:q,targetName:W,stream:7,streamId:G,reason:O(_)})});break;case 4:if((0,a.assert)(t,"enqueue should have stream controller"),t.isClosed)break;t.controller.enqueue(C.chunk);break;case 3:if((0,a.assert)(t,"close should have stream controller"),t.isClosed)break;t.isClosed=!0,t.controller.close(),this._deleteStreamController(t,G);break;case 5:(0,a.assert)(t,"error should have stream controller"),t.controller.error(O(C.reason)),this._deleteStreamController(t,G);break;case 2:C.success?t.cancelCall.resolve():t.cancelCall.reject(O(C.reason)),this._deleteStreamController(t,G);break;case 1:if(!s)break;new Promise(function(_){_(s.onCancel&&s.onCancel(O(C.reason)))}).then(function(){y.postMessage({sourceName:q,targetName:W,stream:2,streamId:G,success:!0})},function(_){y.postMessage({sourceName:q,targetName:W,stream:2,streamId:G,reason:O(_)})}),s.sinkCapability.reject(O(C.reason)),s.isCancelled=!0,delete this.streamSinks[G];break;default:throw new Error("Unexpected stream case")}}_deleteStreamController(C,G){var q=this;return _asyncToGenerator(function*(){yield Promise.allSettled([C.startCall&&C.startCall.promise,C.pullCall&&C.pullCall.promise,C.cancelCall&&C.cancelCall.promise]),delete q.streamControllers[G]})()}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}},(Z,r,x)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.Metadata=void 0;var a=x(1),v=new WeakMap,F=new WeakMap;r.Metadata=class O{constructor({parsedData:M,rawData:C}){_classPrivateFieldInitSpec(this,v,{writable:!0,value:void 0}),_classPrivateFieldInitSpec(this,F,{writable:!0,value:void 0}),_classPrivateFieldSet(this,v,M),_classPrivateFieldSet(this,F,C)}getRaw(){return _classPrivateFieldGet(this,F)}get(M){return _classPrivateFieldGet(this,v).get(M)??null}getAll(){return(0,a.objectFromMap)(_classPrivateFieldGet(this,v))}has(M){return _classPrivateFieldGet(this,v).has(M)}}},(Z,r,x)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.OptionalContentConfig=void 0;var a=x(1);const v=Symbol("INTERNAL");var F=new WeakMap;class O{constructor(s,_){_classPrivateFieldInitSpec(this,F,{writable:!0,value:!0}),this.name=s,this.intent=_}get visible(){return _classPrivateFieldGet(this,F)}_setVisible(s,_){s!==v&&(0,a.unreachable)("Internal method `_setVisible` called."),_classPrivateFieldSet(this,F,_)}}var Q=new WeakMap,M=new WeakMap,C=new WeakMap,G=new WeakMap,q=new WeakSet;function y(t){const s=t.length;if(s<2)return!0;const _=t[0];for(let P=1;P<s;P++){const p=t[P];let A;if(Array.isArray(p))A=_classPrivateMethodGet(this,q,y).call(this,p);else{if(!_classPrivateFieldGet(this,M).has(p))return(0,a.warn)(`Optional content group not found: ${p}`),!0;A=_classPrivateFieldGet(this,M).get(p).visible}switch(_){case"And":if(!A)return!1;break;case"Or":if(A)return!0;break;case"Not":return!A;default:return!0}}return"And"===_}r.OptionalContentConfig=class W{constructor(s){if(_classPrivateMethodInitSpec(this,q),_classPrivateFieldInitSpec(this,Q,{writable:!0,value:!0}),_classPrivateFieldInitSpec(this,M,{writable:!0,value:new Map}),_classPrivateFieldInitSpec(this,C,{writable:!0,value:null}),_classPrivateFieldInitSpec(this,G,{writable:!0,value:null}),this.name=null,this.creator=null,null!==s){this.name=s.name,this.creator=s.creator,_classPrivateFieldSet(this,G,s.order);for(const _ of s.groups)_classPrivateFieldGet(this,M).set(_.id,new O(_.name,_.intent));if("OFF"===s.baseState)for(const _ of _classPrivateFieldGet(this,M).values())_._setVisible(v,!1);for(const _ of s.on)_classPrivateFieldGet(this,M).get(_)._setVisible(v,!0);for(const _ of s.off)_classPrivateFieldGet(this,M).get(_)._setVisible(v,!1);_classPrivateFieldSet(this,C,new Map);for(const[_,P]of _classPrivateFieldGet(this,M))_classPrivateFieldGet(this,C).set(_,P.visible)}}isVisible(s){if(0===_classPrivateFieldGet(this,M).size)return!0;if(!s)return(0,a.warn)("Optional content group not defined."),!0;if("OCG"===s.type)return _classPrivateFieldGet(this,M).has(s.id)?_classPrivateFieldGet(this,M).get(s.id).visible:((0,a.warn)(`Optional content group not found: ${s.id}`),!0);if("OCMD"===s.type){if(s.expression)return _classPrivateMethodGet(this,q,y).call(this,s.expression);if(!s.policy||"AnyOn"===s.policy){for(const _ of s.ids){if(!_classPrivateFieldGet(this,M).has(_))return(0,a.warn)(`Optional content group not found: ${_}`),!0;if(_classPrivateFieldGet(this,M).get(_).visible)return!0}return!1}if("AllOn"===s.policy){for(const _ of s.ids){if(!_classPrivateFieldGet(this,M).has(_))return(0,a.warn)(`Optional content group not found: ${_}`),!0;if(!_classPrivateFieldGet(this,M).get(_).visible)return!1}return!0}if("AnyOff"===s.policy){for(const _ of s.ids){if(!_classPrivateFieldGet(this,M).has(_))return(0,a.warn)(`Optional content group not found: ${_}`),!0;if(!_classPrivateFieldGet(this,M).get(_).visible)return!0}return!1}if("AllOff"===s.policy){for(const _ of s.ids){if(!_classPrivateFieldGet(this,M).has(_))return(0,a.warn)(`Optional content group not found: ${_}`),!0;if(_classPrivateFieldGet(this,M).get(_).visible)return!1}return!0}return(0,a.warn)(`Unknown optional content policy ${s.policy}.`),!0}return(0,a.warn)(`Unknown group type ${s.type}.`),!0}setVisibility(s,_=!0){_classPrivateFieldGet(this,M).has(s)?(_classPrivateFieldGet(this,M).get(s)._setVisible(v,!!_),_classPrivateFieldSet(this,Q,null)):(0,a.warn)(`Optional content group not found: ${s}`)}get hasInitialVisibility(){if(null!==_classPrivateFieldGet(this,Q))return _classPrivateFieldGet(this,Q);for(const[s,_]of _classPrivateFieldGet(this,M)){const P=_classPrivateFieldGet(this,C).get(s);if(_.visible!==P)return _classPrivateFieldSet(this,Q,!1)}return _classPrivateFieldSet(this,Q,!0)}getOrder(){return _classPrivateFieldGet(this,M).size?_classPrivateFieldGet(this,G)?_classPrivateFieldGet(this,G).slice():[..._classPrivateFieldGet(this,M).keys()]:null}getGroups(){return _classPrivateFieldGet(this,M).size>0?(0,a.objectFromMap)(_classPrivateFieldGet(this,M)):null}getGroup(s){return _classPrivateFieldGet(this,M).get(s)||null}}},(Z,r,x)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.PDFDataTransportStream=void 0;var a=x(1),v=x(8);r.PDFDataTransportStream=class F{constructor(C,G){(0,a.assert)(G,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=C.progressiveDone||!1,this._contentDispositionFilename=C.contentDispositionFilename||null;const q=C.initialData;if(q?.length>0){const W=new Uint8Array(q).buffer;this._queuedChunks.push(W)}this._pdfDataRangeTransport=G,this._isStreamingSupported=!C.disableStream,this._isRangeSupported=!C.disableRange,this._contentLength=C.length,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((W,y)=>{this._onReceiveData({begin:W,chunk:y})}),this._pdfDataRangeTransport.addProgressListener((W,y)=>{this._onProgress({loaded:W,total:y})}),this._pdfDataRangeTransport.addProgressiveReadListener(W=>{this._onReceiveData({chunk:W})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData(C){const G=new Uint8Array(C.chunk).buffer;if(void 0===C.begin)this._fullRequestReader?this._fullRequestReader._enqueue(G):this._queuedChunks.push(G);else{const q=this._rangeReaders.some(function(W){return W._begin===C.begin&&(W._enqueue(G),!0)});(0,a.assert)(q,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(C){if(void 0===C.total){const G=this._rangeReaders[0];G?.onProgress&&G.onProgress({loaded:C.loaded})}else{const G=this._fullRequestReader;G?.onProgress&&G.onProgress({loaded:C.loaded,total:C.total})}}_onProgressiveDone(){this._fullRequestReader&&this._fullRequestReader.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(C){const G=this._rangeReaders.indexOf(C);G>=0&&this._rangeReaders.splice(G,1)}getFullReader(){(0,a.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const C=this._queuedChunks;return this._queuedChunks=null,new O(this,C,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(C,G){if(G<=this._progressiveDataLength)return null;const q=new Q(this,C,G);return this._pdfDataRangeTransport.requestDataRange(C,G),this._rangeReaders.push(q),q}cancelAllRequests(C){this._fullRequestReader&&this._fullRequestReader.cancel(C);for(const G of this._rangeReaders.slice(0))G.cancel(C);this._pdfDataRangeTransport.abort()}};class O{constructor(C,G,q=!1,W=null){this._stream=C,this._done=q||!1,this._filename=(0,v.isPdfFile)(W)?W:null,this._queuedChunks=G||[],this._loaded=0;for(const y of this._queuedChunks)this._loaded+=y.byteLength;this._requests=[],this._headersReady=Promise.resolve(),C._fullRequestReader=this,this.onProgress=null}_enqueue(C){this._done||(this._requests.length>0?this._requests.shift().resolve({value:C,done:!1}):this._queuedChunks.push(C),this._loaded+=C.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}read(){var C=this;return _asyncToGenerator(function*(){if(C._queuedChunks.length>0)return{value:C._queuedChunks.shift(),done:!1};if(C._done)return{value:void 0,done:!0};const G=(0,a.createPromiseCapability)();return C._requests.push(G),G.promise})()}cancel(C){this._done=!0;for(const G of this._requests)G.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class Q{constructor(C,G,q){this._stream=C,this._begin=G,this._end=q,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(C){if(!this._done){if(0===this._requests.length)this._queuedChunk=C;else{this._requests.shift().resolve({value:C,done:!1});for(const q of this._requests)q.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}read(){var C=this;return _asyncToGenerator(function*(){if(C._queuedChunk){const q=C._queuedChunk;return C._queuedChunk=null,{value:q,done:!1}}if(C._done)return{value:void 0,done:!0};const G=(0,a.createPromiseCapability)();return C._requests.push(G),G.promise})()}cancel(C){this._done=!0;for(const G of this._requests)G.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(Z,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.XfaText=void 0;class x{static textContent(v){const F=[],O={items:F,styles:Object.create(null)};return function Q(M){if(!M)return;let C=null;const G=M.name;if("#text"===G)C=M.value;else{if(!x.shouldBuildText(G))return;M?.attributes?.textContent?C=M.attributes.textContent:M.value&&(C=M.value)}if(null!==C&&F.push({str:C}),M.children)for(const q of M.children)Q(q)}(v),O}static shouldBuildText(v){return!("textarea"===v||"input"===v||"option"===v||"select"===v)}}r.XfaText=x},(Z,r,x)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.NodeStandardFontDataFactory=r.NodeCanvasFactory=r.NodeCMapReaderFactory=void 0;var a=x(9);const v=function(M){return new Promise((C,G)=>{__webpack_require__(172).readFile(M,(W,y)=>{!W&&y?C(new Uint8Array(y)):G(new Error(W))})})};r.NodeCanvasFactory=class F extends a.BaseCanvasFactory{_createCanvas(C,G){return __webpack_require__(3414).createCanvas(C,G)}},r.NodeCMapReaderFactory=class O extends a.BaseCMapReaderFactory{_fetchData(C,G){return v(C).then(q=>({cMapData:q,compressionType:G}))}},r.NodeStandardFontDataFactory=class Q extends a.BaseStandardFontDataFactory{_fetchData(C){return v(C)}}},(Z,r,x)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.AnnotationEditorLayer=void 0;var a=x(7),v=x(1),F=x(23),O=x(24);r.AnnotationEditorLayer=(()=>{var M=new WeakMap,C=new WeakMap,G=new WeakMap,q=new WeakMap,W=new WeakMap,y=new WeakMap,t=new WeakMap,s=new WeakMap,_=new WeakSet,P=new WeakSet,p=new WeakSet,A=new WeakSet;class u{constructor(f){_classPrivateMethodInitSpec(this,A),_classPrivateMethodInitSpec(this,p),_classPrivateMethodInitSpec(this,P),_classPrivateMethodInitSpec(this,_),_classPrivateFieldInitSpec(this,M,{writable:!0,value:void 0}),_classPrivateFieldInitSpec(this,C,{writable:!0,value:!1}),_classPrivateFieldInitSpec(this,G,{writable:!0,value:this.pointerup.bind(this)}),_classPrivateFieldInitSpec(this,q,{writable:!0,value:this.pointerdown.bind(this)}),_classPrivateFieldInitSpec(this,W,{writable:!0,value:new Map}),_classPrivateFieldInitSpec(this,y,{writable:!0,value:!1}),_classPrivateFieldInitSpec(this,t,{writable:!0,value:!1}),_classPrivateFieldInitSpec(this,s,{writable:!0,value:void 0}),u._initialized||(u._initialized=!0,F.FreeTextEditor.initialize(f.l10n),O.InkEditor.initialize(f.l10n),f.uiManager.registerEditorTypes([F.FreeTextEditor,O.InkEditor])),_classPrivateFieldSet(this,s,f.uiManager),this.annotationStorage=f.annotationStorage,this.pageIndex=f.pageIndex,this.div=f.div,_classPrivateFieldSet(this,M,f.accessibilityManager),_classPrivateFieldGet(this,s).addLayer(this)}updateToolbar(f){_classPrivateFieldGet(this,s).updateToolbar(f)}updateMode(f=_classPrivateFieldGet(this,s).getMode()){_classPrivateMethodGet(this,A,m).call(this),f===v.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),_classPrivateFieldGet(this,s).unselectAll()}addInkEditorIfNeeded(f){if(f||_classPrivateFieldGet(this,s).getMode()===v.AnnotationEditorType.INK){if(!f)for(const b of _classPrivateFieldGet(this,W).values())if(b.isEmpty())return void b.setInBackground();_classPrivateMethodGet(this,p,o).call(this,{offsetX:0,offsetY:0}).setInBackground()}}setEditingState(f){_classPrivateFieldGet(this,s).setEditingState(f)}addCommands(f){_classPrivateFieldGet(this,s).addCommands(f)}enable(){this.div.style.pointerEvents="auto";for(const f of _classPrivateFieldGet(this,W).values())f.enableEditing()}disable(){this.div.style.pointerEvents="none";for(const f of _classPrivateFieldGet(this,W).values())f.disableEditing()}setActiveEditor(f){_classPrivateFieldGet(this,s).getActive()!==f&&_classPrivateFieldGet(this,s).setActiveEditor(f)}enableClick(){this.div.addEventListener("pointerdown",_classPrivateFieldGet(this,q)),this.div.addEventListener("pointerup",_classPrivateFieldGet(this,G))}disableClick(){this.div.removeEventListener("pointerdown",_classPrivateFieldGet(this,q)),this.div.removeEventListener("pointerup",_classPrivateFieldGet(this,G))}attach(f){_classPrivateFieldGet(this,W).set(f.id,f)}detach(f){_classPrivateFieldGet(this,W).delete(f.id),_classPrivateFieldGet(this,M)?.removePointerInTextLayer(f.contentDiv)}remove(f){_classPrivateFieldGet(this,s).removeEditor(f),this.detach(f),this.annotationStorage.remove(f.id),f.div.style.display="none",setTimeout(()=>{f.div.style.display="",f.div.remove(),f.isAttachedToDOM=!1,document.activeElement===document.body&&_classPrivateFieldGet(this,s).focusMainContainer()},0),_classPrivateFieldGet(this,t)||this.addInkEditorIfNeeded(!1)}add(f){if(_classPrivateMethodGet(this,_,i).call(this,f),_classPrivateFieldGet(this,s).addEditor(f),this.attach(f),!f.isAttachedToDOM){const c=f.render();this.div.append(c),f.isAttachedToDOM=!0}this.moveEditorInDOM(f),f.onceAdded(),this.addToAnnotationStorage(f)}moveEditorInDOM(f){_classPrivateFieldGet(this,M)?.moveElementInDOM(this.div,f.div,f.contentDiv,!0)}addToAnnotationStorage(f){!f.isEmpty()&&!this.annotationStorage.has(f.id)&&this.annotationStorage.setValue(f.id,f)}addOrRebuild(f){f.needsToBeRebuilt()?f.rebuild():this.add(f)}addANewEditor(f){this.addCommands({cmd:()=>{this.addOrRebuild(f)},undo:()=>{f.remove()},mustExec:!0})}addUndoableEditor(f){this.addCommands({cmd:()=>{this.addOrRebuild(f)},undo:()=>{f.remove()},mustExec:!1})}getNextId(){return _classPrivateFieldGet(this,s).getId()}deserialize(f){switch(f.annotationType){case v.AnnotationEditorType.FREETEXT:return F.FreeTextEditor.deserialize(f,this);case v.AnnotationEditorType.INK:return O.InkEditor.deserialize(f,this)}return null}setSelected(f){_classPrivateFieldGet(this,s).setSelected(f)}toggleSelected(f){_classPrivateFieldGet(this,s).toggleSelected(f)}isSelected(f){return _classPrivateFieldGet(this,s).isSelected(f)}unselect(f){_classPrivateFieldGet(this,s).unselect(f)}pointerup(f){if(!(0!==f.button||f.ctrlKey&&a.KeyboardManager.platform.isMac)&&f.target===this.div&&_classPrivateFieldGet(this,y)){if(_classPrivateFieldSet(this,y,!1),!_classPrivateFieldGet(this,C))return void _classPrivateFieldSet(this,C,!0);_classPrivateMethodGet(this,p,o).call(this,f)}}pointerdown(f){if(0!==f.button||f.ctrlKey&&a.KeyboardManager.platform.isMac||f.target!==this.div)return;_classPrivateFieldSet(this,y,!0);const b=_classPrivateFieldGet(this,s).getActive();_classPrivateFieldSet(this,C,!b||b.isEmpty())}drop(f){const c=f.dataTransfer.getData("text/plain"),b=_classPrivateFieldGet(this,s).getEditor(c);if(!b)return;f.preventDefault(),f.dataTransfer.dropEffect="move",_classPrivateMethodGet(this,_,i).call(this,b);const N=this.div.getBoundingClientRect();b.translate(f.clientX-N.x-b.startX,f.clientY-N.y-b.startY),this.moveEditorInDOM(b),b.div.focus()}dragover(f){f.preventDefault()}destroy(){_classPrivateFieldGet(this,s).getActive()?.parent===this&&_classPrivateFieldGet(this,s).setActiveEditor(null);for(const f of _classPrivateFieldGet(this,W).values())_classPrivateFieldGet(this,M)?.removePointerInTextLayer(f.contentDiv),f.isAttachedToDOM=!1,f.div.remove(),f.parent=null;this.div=null,_classPrivateFieldGet(this,W).clear(),_classPrivateFieldGet(this,s).removeLayer(this)}render(f){this.viewport=f.viewport,(0,a.bindEvents)(this,this.div,["dragover","drop"]),this.setDimensions();for(const c of _classPrivateFieldGet(this,s).getEditors(this.pageIndex))this.add(c);this.updateMode()}update(f){this.viewport=f.viewport,this.setDimensions(),this.updateMode()}get scaleFactor(){return this.viewport.scale}get pageDimensions(){const[f,c,b,N]=this.viewport.viewBox;return[b-f,N-c]}get viewportBaseDimensions(){const{width:f,height:c,rotation:b}=this.viewport;return b%180==0?[f,c]:[c,f]}setDimensions(){const{width:f,height:c,rotation:b}=this.viewport,N=b%180!=0,R=Math.floor(f)+"px",H=Math.floor(c)+"px";this.div.style.width=N?H:R,this.div.style.height=N?R:H,this.div.setAttribute("data-main-rotation",b)}}function i(S){S.parent!==this&&(this.attach(S),S.pageIndex=this.pageIndex,S.parent?.detach(S),S.parent=this,S.div&&S.isAttachedToDOM&&(S.div.remove(),this.div.append(S.div)))}function e(S){switch(_classPrivateFieldGet(this,s).getMode()){case v.AnnotationEditorType.FREETEXT:return new F.FreeTextEditor(S);case v.AnnotationEditorType.INK:return new O.InkEditor(S)}return null}function o(S){const f=this.getNextId(),c=_classPrivateMethodGet(this,P,e).call(this,{parent:this,id:f,x:S.offsetX,y:S.offsetY});return c&&this.add(c),c}function m(){_classPrivateFieldSet(this,t,!0);for(const S of _classPrivateFieldGet(this,W).values())S.isEmpty()&&S.remove();_classPrivateFieldSet(this,t,!1)}return _defineProperty(u,"_initialized",!1),u})()},(Z,r,x)=>{var a;Object.defineProperty(r,"__esModule",{value:!0}),r.FreeTextEditor=void 0;var v=x(1),F=x(7),O=x(6),Q=new WeakMap,M=new WeakMap,C=new WeakMap,G=new WeakMap,q=new WeakMap,W=new WeakMap,y=new WeakMap,t=new WeakSet,s=new WeakSet,_=new WeakSet,P=new WeakSet;class p extends O.AnnotationEditor{constructor(m){super({...m,name:"freeTextEditor"}),_classPrivateMethodInitSpec(this,P),_classPrivateMethodInitSpec(this,_),_classPrivateMethodInitSpec(this,s),_classPrivateMethodInitSpec(this,t),_classPrivateFieldInitSpec(this,Q,{writable:!0,value:this.editorDivBlur.bind(this)}),_classPrivateFieldInitSpec(this,M,{writable:!0,value:this.editorDivFocus.bind(this)}),_classPrivateFieldInitSpec(this,C,{writable:!0,value:this.editorDivKeydown.bind(this)}),_classPrivateFieldInitSpec(this,G,{writable:!0,value:void 0}),_classPrivateFieldInitSpec(this,q,{writable:!0,value:""}),_classPrivateFieldInitSpec(this,W,{writable:!0,value:!1}),_classPrivateFieldInitSpec(this,y,{writable:!0,value:void 0}),_classPrivateFieldSet(this,G,m.color||p._defaultColor||O.AnnotationEditor._defaultLineColor),_classPrivateFieldSet(this,y,m.fontSize||p._defaultFontSize)}static initialize(m){this._l10nPromise=new Map(["free_text_default_content","editor_free_text_aria_label"].map(f=>[f,m.get(f)]));const S=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(S.getPropertyValue("--freetext-padding"))}static updateDefaultParams(m,S){switch(m){case v.AnnotationEditorParamsType.FREETEXT_SIZE:p._defaultFontSize=S;break;case v.AnnotationEditorParamsType.FREETEXT_COLOR:p._defaultColor=S}}updateParams(m,S){switch(m){case v.AnnotationEditorParamsType.FREETEXT_SIZE:_classPrivateMethodGet(this,t,A).call(this,S);break;case v.AnnotationEditorParamsType.FREETEXT_COLOR:_classPrivateMethodGet(this,s,u).call(this,S)}}static get defaultPropertiesToUpdate(){return[[v.AnnotationEditorParamsType.FREETEXT_SIZE,p._defaultFontSize],[v.AnnotationEditorParamsType.FREETEXT_COLOR,p._defaultColor||O.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[v.AnnotationEditorParamsType.FREETEXT_SIZE,_classPrivateFieldGet(this,y)],[v.AnnotationEditorParamsType.FREETEXT_COLOR,_classPrivateFieldGet(this,G)]]}getInitialTranslation(){return[-p._internalPadding*this.parent.scaleFactor,-(p._internalPadding+_classPrivateFieldGet(this,y))*this.parent.scaleFactor]}rebuild(){super.rebuild(),null!==this.div&&(this.isAttachedToDOM||this.parent.add(this))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(v.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.enableEditing(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this.div.draggable=!1,this.editorDiv.addEventListener("keydown",_classPrivateFieldGet(this,C)),this.editorDiv.addEventListener("focus",_classPrivateFieldGet(this,M)),this.editorDiv.addEventListener("blur",_classPrivateFieldGet(this,Q)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.disableEditing(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.draggable=!0,this.editorDiv.removeEventListener("keydown",_classPrivateFieldGet(this,C)),this.editorDiv.removeEventListener("focus",_classPrivateFieldGet(this,M)),this.editorDiv.removeEventListener("blur",_classPrivateFieldGet(this,Q)),this.div.focus(),this.isEditing=!1)}focusin(m){super.focusin(m),m.target!==this.editorDiv&&this.editorDiv.focus()}onceAdded(){this.width||(this.enableEditMode(),this.editorDiv.focus())}isEmpty(){return!this.editorDiv||""===this.editorDiv.innerText.trim()}remove(){this.isEditing=!1,this.parent.setEditingState(!0),super.remove()}commit(){super.commit(),_classPrivateFieldGet(this,W)||(_classPrivateFieldSet(this,W,!0),this.parent.addUndoableEditor(this)),this.disableEditMode(),_classPrivateFieldSet(this,q,_classPrivateMethodGet(this,_,i).call(this).trimEnd()),_classPrivateMethodGet(this,P,e).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}dblclick(m){this.enableEditMode(),this.editorDiv.focus()}keydown(m){m.target===this.div&&"Enter"===m.key&&(this.enableEditMode(),this.editorDiv.focus())}editorDivKeydown(m){p._keyboardManager.exec(this,m)}editorDivFocus(m){this.isEditing=!0}editorDivBlur(m){this.isEditing=!1}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let m,S;this.width&&(m=this.x,S=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",`${this.id}-editor`),this.enableEditing(),p._l10nPromise.get("editor_free_text_aria_label").then(c=>this.editorDiv?.setAttribute("aria-label",c)),p._l10nPromise.get("free_text_default_content").then(c=>this.editorDiv?.setAttribute("default-content",c)),this.editorDiv.contentEditable=!0;const{style:f}=this.editorDiv;if(f.fontSize=`calc(${_classPrivateFieldGet(this,y)}px * var(--scale-factor))`,f.color=_classPrivateFieldGet(this,G),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,F.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[c,b]=this.parent.viewportBaseDimensions;this.setAt(m*c,S*b,this.width*c,this.height*b);for(const N of _classPrivateFieldGet(this,q).split("\n")){const R=document.createElement("div");R.append(N?document.createTextNode(N):document.createElement("br")),this.editorDiv.append(R)}this.div.draggable=!0,this.editorDiv.contentEditable=!1}else this.div.draggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(m,S){const f=super.deserialize(m,S);return _classPrivateFieldSet(f,y,m.fontSize),_classPrivateFieldSet(f,G,v.Util.makeHexColor(...m.color)),_classPrivateFieldSet(f,q,m.value),f}serialize(){if(this.isEmpty())return null;const m=p._internalPadding*this.parent.scaleFactor,S=this.getRect(m,m),f=O.AnnotationEditor._colorManager.convert(getComputedStyle(this.editorDiv).color);return{annotationType:v.AnnotationEditorType.FREETEXT,color:f,fontSize:_classPrivateFieldGet(this,y),value:_classPrivateFieldGet(this,q),pageIndex:this.parent.pageIndex,rect:S,rotation:this.rotation}}}function A(o){const m=f=>{this.editorDiv.style.fontSize=`calc(${f}px * var(--scale-factor))`,this.translate(0,-(f-_classPrivateFieldGet(this,y))*this.parent.scaleFactor),_classPrivateFieldSet(this,y,f),_classPrivateMethodGet(this,P,e).call(this)},S=_classPrivateFieldGet(this,y);this.parent.addCommands({cmd:()=>{m(o)},undo:()=>{m(S)},mustExec:!0,type:v.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}function u(o){const m=_classPrivateFieldGet(this,G);this.parent.addCommands({cmd:()=>{_classPrivateFieldSet(this,G,o),this.editorDiv.style.color=o},undo:()=>{_classPrivateFieldSet(this,G,m),this.editorDiv.style.color=m},mustExec:!0,type:v.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}function i(){const o=this.editorDiv.getElementsByTagName("div");if(0===o.length)return this.editorDiv.innerText;const m=[];for(let S=0,f=o.length;S<f;S++){const b=o[S].firstChild;m.push("#text"===b?.nodeName?b.data:"")}return m.join("\n")}function e(){const[o,m]=this.parent.viewportBaseDimensions,S=this.div.getBoundingClientRect();this.width=S.width/o,this.height=S.height/m}a=p,_defineProperty(p,"_freeTextDefaultContent",""),_defineProperty(p,"_l10nPromise",void 0),_defineProperty(p,"_internalPadding",0),_defineProperty(p,"_defaultColor",null),_defineProperty(p,"_defaultFontSize",10),_defineProperty(p,"_keyboardManager",new F.KeyboardManager([[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],a.prototype.commitOrRemove]])),_defineProperty(p,"_type","freetext"),r.FreeTextEditor=p},(Z,r,x)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.InkEditor=void 0,Object.defineProperty(r,"fitCurve",{enumerable:!0,get:function(){return F.fitCurve}});var a=x(1),v=x(6),F=x(25),O=x(7);const Q=16;r.InkEditor=(()=>{var C,G=new WeakMap,q=new WeakMap,W=new WeakMap,y=new WeakMap,t=new WeakMap,s=new WeakMap,_=new WeakMap,P=new WeakMap,p=new WeakMap,A=new WeakMap,u=new WeakMap,i=new WeakMap,e=new WeakMap,o=new WeakMap,m=new WeakSet,S=new WeakSet,f=new WeakSet,c=new WeakSet,b=new WeakSet,N=new WeakSet,R=new WeakSet,H=new WeakSet,B=new WeakSet,U=new WeakSet,j=new WeakSet,ee=new WeakSet,le=new WeakSet,V=new WeakSet,g=new WeakSet,l=new WeakSet,E=new WeakSet,T=new WeakSet,w=new WeakSet,n=new WeakSet,h=new WeakSet,d=new WeakSet;class L extends v.AnnotationEditor{constructor(se){super({...se,name:"inkEditor"}),_classPrivateMethodInitSpec(this,d),_classPrivateMethodInitSpec(this,h),_classPrivateMethodInitSpec(this,n),_classPrivateMethodInitSpec(this,w),_classPrivateMethodInitSpec(this,T),_classPrivateMethodInitSpec(this,E),_classPrivateMethodInitSpec(this,l),_classPrivateMethodInitSpec(this,g),_classPrivateMethodInitSpec(this,V),_classPrivateMethodInitSpec(this,le),_classPrivateMethodInitSpec(this,ee),_classPrivateMethodInitSpec(this,j),_classPrivateMethodInitSpec(this,U),_classPrivateMethodInitSpec(this,B),_classPrivateMethodInitSpec(this,H),_classPrivateMethodInitSpec(this,R),_classPrivateMethodInitSpec(this,N),_classPrivateMethodInitSpec(this,b),_classPrivateMethodInitSpec(this,c),_classPrivateMethodInitSpec(this,f),_classPrivateMethodInitSpec(this,S),_classPrivateMethodInitSpec(this,m),_classPrivateFieldInitSpec(this,G,{writable:!0,value:0}),_classPrivateFieldInitSpec(this,q,{writable:!0,value:0}),_classPrivateFieldInitSpec(this,W,{writable:!0,value:0}),_classPrivateFieldInitSpec(this,y,{writable:!0,value:this.canvasPointermove.bind(this)}),_classPrivateFieldInitSpec(this,t,{writable:!0,value:this.canvasPointerleave.bind(this)}),_classPrivateFieldInitSpec(this,s,{writable:!0,value:this.canvasPointerup.bind(this)}),_classPrivateFieldInitSpec(this,_,{writable:!0,value:this.canvasPointerdown.bind(this)}),_classPrivateFieldInitSpec(this,P,{writable:!0,value:!1}),_classPrivateFieldInitSpec(this,p,{writable:!0,value:!1}),_classPrivateFieldInitSpec(this,A,{writable:!0,value:null}),_classPrivateFieldInitSpec(this,u,{writable:!0,value:null}),_classPrivateFieldInitSpec(this,i,{writable:!0,value:0}),_classPrivateFieldInitSpec(this,e,{writable:!0,value:0}),_classPrivateFieldInitSpec(this,o,{writable:!0,value:null}),this.color=se.color||null,this.thickness=se.thickness||null,this.opacity=se.opacity||null,this.paths=[],this.bezierPath2D=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0}static initialize(se){this._l10nPromise=new Map(["editor_ink_canvas_aria_label","editor_ink_aria_label"].map(pe=>[pe,se.get(pe)]))}static updateDefaultParams(se,pe){switch(se){case a.AnnotationEditorParamsType.INK_THICKNESS:L._defaultThickness=pe;break;case a.AnnotationEditorParamsType.INK_COLOR:L._defaultColor=pe;break;case a.AnnotationEditorParamsType.INK_OPACITY:L._defaultOpacity=pe/100}}updateParams(se,pe){switch(se){case a.AnnotationEditorParamsType.INK_THICKNESS:_classPrivateMethodGet(this,m,k).call(this,pe);break;case a.AnnotationEditorParamsType.INK_COLOR:_classPrivateMethodGet(this,S,X).call(this,pe);break;case a.AnnotationEditorParamsType.INK_OPACITY:_classPrivateMethodGet(this,f,Y).call(this,pe)}}static get defaultPropertiesToUpdate(){return[[a.AnnotationEditorParamsType.INK_THICKNESS,L._defaultThickness],[a.AnnotationEditorParamsType.INK_COLOR,L._defaultColor||v.AnnotationEditor._defaultLineColor],[a.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*L._defaultOpacity)]]}get propertiesToUpdate(){return[[a.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||L._defaultThickness],[a.AnnotationEditorParamsType.INK_COLOR,this.color||L._defaultColor||v.AnnotationEditor._defaultLineColor],[a.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??L._defaultOpacity))]]}rebuild(){super.rebuild(),null!==this.div&&(this.canvas||(_classPrivateMethodGet(this,j,Ae).call(this),_classPrivateMethodGet(this,ee,re).call(this)),this.isAttachedToDOM||(this.parent.add(this),_classPrivateMethodGet(this,le,K).call(this)),_classPrivateMethodGet(this,h,D).call(this))}remove(){null!==this.canvas&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,_classPrivateFieldGet(this,u).disconnect(),_classPrivateFieldSet(this,u,null),super.remove())}enableEditMode(){_classPrivateFieldGet(this,P)||null===this.canvas||(super.enableEditMode(),this.div.draggable=!1,this.canvas.addEventListener("pointerdown",_classPrivateFieldGet(this,_)),this.canvas.addEventListener("pointerup",_classPrivateFieldGet(this,s)))}disableEditMode(){!this.isInEditMode()||null===this.canvas||(super.disableEditMode(),this.div.draggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",_classPrivateFieldGet(this,_)),this.canvas.removeEventListener("pointerup",_classPrivateFieldGet(this,s)))}onceAdded(){this.div.draggable=!this.isEmpty()}isEmpty(){return 0===this.paths.length||1===this.paths.length&&0===this.paths[0].length}commit(){_classPrivateFieldGet(this,P)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),_classPrivateFieldSet(this,P,!0),this.div.classList.add("disabled"),_classPrivateMethodGet(this,h,D).call(this,!0),this.parent.addInkEditorIfNeeded(!0),this.parent.moveEditorInDOM(this),this.div.focus())}focusin(se){super.focusin(se),this.enableEditMode()}canvasPointerdown(se){0!==se.button||!this.isInEditMode()||_classPrivateFieldGet(this,P)||(this.setInForeground(),"mouse"!==se.type&&this.div.focus(),se.stopPropagation(),this.canvas.addEventListener("pointerleave",_classPrivateFieldGet(this,t)),this.canvas.addEventListener("pointermove",_classPrivateFieldGet(this,y)),_classPrivateMethodGet(this,N,ue).call(this,se.offsetX,se.offsetY))}canvasPointermove(se){se.stopPropagation(),_classPrivateMethodGet(this,R,ve).call(this,se.offsetX,se.offsetY)}canvasPointerup(se){0===se.button&&this.isInEditMode()&&0!==this.currentPath.length&&(se.stopPropagation(),_classPrivateMethodGet(this,U,we).call(this,se),this.setInBackground())}canvasPointerleave(se){_classPrivateMethodGet(this,U,we).call(this,se),this.setInBackground()}render(){if(this.div)return this.div;let se,pe;this.width&&(se=this.x,pe=this.y),super.render(),L._l10nPromise.get("editor_ink_aria_label").then(Pe=>this.div?.setAttribute("aria-label",Pe));const[be,te,$,J]=_classPrivateMethodGet(this,c,he).call(this);if(this.setAt(be,te,0,0),this.setDims($,J),_classPrivateMethodGet(this,j,Ae).call(this),this.width){const[Pe,Me]=this.parent.viewportBaseDimensions;this.setAt(se*Pe,pe*Me,this.width*Pe,this.height*Me),_classPrivateFieldSet(this,p,!0),_classPrivateMethodGet(this,le,K).call(this),this.setDims(this.width*Pe,this.height*Me),_classPrivateMethodGet(this,B,me).call(this),_classPrivateMethodGet(this,d,ne).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return _classPrivateMethodGet(this,ee,re).call(this),this.div}setDimensions(se,pe){const be=Math.round(se),te=Math.round(pe);if(_classPrivateFieldGet(this,i)===be&&_classPrivateFieldGet(this,e)===te)return;_classPrivateFieldSet(this,i,be),_classPrivateFieldSet(this,e,te),this.canvas.style.visibility="hidden",_classPrivateFieldGet(this,G)&&Math.abs(_classPrivateFieldGet(this,G)-se/pe)>.01&&(pe=Math.ceil(se/_classPrivateFieldGet(this,G)),this.setDims(se,pe));const[$,J]=this.parent.viewportBaseDimensions;this.width=se/$,this.height=pe/J,_classPrivateFieldGet(this,P)&&_classPrivateMethodGet(this,V,ce).call(this,se,pe),_classPrivateMethodGet(this,le,K).call(this),_classPrivateMethodGet(this,B,me).call(this),this.canvas.style.visibility="visible"}static deserialize(se,pe){const be=super.deserialize(se,pe);be.thickness=se.thickness,be.color=a.Util.makeHexColor(...se.color),be.opacity=se.opacity;const[te,$]=pe.pageDimensions,J=be.width*te,Pe=be.height*$,Me=pe.scaleFactor,ge=se.thickness/2;_classPrivateFieldSet(be,G,J/Pe),_classPrivateFieldSet(be,P,!0),_classPrivateFieldSet(be,i,Math.round(J)),_classPrivateFieldSet(be,e,Math.round(Pe));for(const{bezier:Ee}of se.paths){const Ce=[];be.paths.push(Ce);let Te=Me*(Ee[0]-ge),ke=Me*(Pe-Ee[1]-ge);for(let Le=2,Oe=Ee.length;Le<Oe;Le+=6){const Be=Me*(Ee[Le+4]-ge),Ne=Me*(Pe-Ee[Le+5]-ge);Ce.push([[Te,ke],[Me*(Ee[Le]-ge),Me*(Pe-Ee[Le+1]-ge)],[Me*(Ee[Le+2]-ge),Me*(Pe-Ee[Le+3]-ge)],[Be,Ne]]),Te=Be,ke=Ne}const Re=_classStaticPrivateMethodGet(this,L,z).call(this,Ce);be.bezierPath2D.push(Re)}const _e=_classPrivateMethodGet(be,w,ye).call(be);return _classPrivateFieldSet(be,W,Math.max(Q,_e[2]-_e[0])),_classPrivateFieldSet(be,q,Math.max(Q,_e[3]-_e[1])),_classPrivateMethodGet(be,V,ce).call(be,J,Pe),be}serialize(){if(this.isEmpty())return null;const se=this.getRect(0,0),pe=this.rotation%180==0?se[3]-se[1]:se[2]-se[0],be=v.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:a.AnnotationEditorType.INK,color:be,thickness:this.thickness,opacity:this.opacity,paths:_classPrivateMethodGet(this,l,I).call(this,this.scaleFactor/this.parent.scaleFactor,this.translationX,this.translationY,pe),pageIndex:this.parent.pageIndex,rect:se,rotation:this.rotation}}}function k(oe){const se=this.thickness;this.parent.addCommands({cmd:()=>{this.thickness=oe,_classPrivateMethodGet(this,h,D).call(this)},undo:()=>{this.thickness=se,_classPrivateMethodGet(this,h,D).call(this)},mustExec:!0,type:a.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})}function X(oe){const se=this.color;this.parent.addCommands({cmd:()=>{this.color=oe,_classPrivateMethodGet(this,B,me).call(this)},undo:()=>{this.color=se,_classPrivateMethodGet(this,B,me).call(this)},mustExec:!0,type:a.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})}function Y(oe){oe/=100;const se=this.opacity;this.parent.addCommands({cmd:()=>{this.opacity=oe,_classPrivateMethodGet(this,B,me).call(this)},undo:()=>{this.opacity=se,_classPrivateMethodGet(this,B,me).call(this)},mustExec:!0,type:a.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})}function he(){const{width:oe,height:se,rotation:pe}=this.parent.viewport;switch(pe){case 90:return[0,oe,oe,se];case 180:return[oe,se,oe,se];case 270:return[se,0,oe,se];default:return[0,0,oe,se]}}function ie(){this.ctx.lineWidth=this.thickness*this.parent.scaleFactor/this.scaleFactor,this.ctx.lineCap="round",this.ctx.lineJoin="round",this.ctx.miterLimit=10,this.ctx.strokeStyle=`${this.color}${(0,O.opacityToHex)(this.opacity)}`}function ue(oe,se){this.isEditing=!0,_classPrivateFieldGet(this,p)||(_classPrivateFieldSet(this,p,!0),_classPrivateMethodGet(this,le,K).call(this),this.thickness||=C._defaultThickness,this.color||=C._defaultColor||v.AnnotationEditor._defaultLineColor,this.opacity??=C._defaultOpacity),this.currentPath.push([oe,se]),_classPrivateFieldSet(this,A,null),_classPrivateMethodGet(this,b,ie).call(this),this.ctx.beginPath(),this.ctx.moveTo(oe,se),_classPrivateFieldSet(this,o,()=>{_classPrivateFieldGet(this,o)&&(_classPrivateFieldGet(this,A)&&(this.isEmpty()?(this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)):_classPrivateMethodGet(this,B,me).call(this),this.ctx.lineTo(..._classPrivateFieldGet(this,A)),_classPrivateFieldSet(this,A,null),this.ctx.stroke()),window.requestAnimationFrame(_classPrivateFieldGet(this,o)))}),window.requestAnimationFrame(_classPrivateFieldGet(this,o))}function ve(oe,se){const[pe,be]=this.currentPath.at(-1);oe===pe&&se===be||(this.currentPath.push([oe,se]),_classPrivateFieldSet(this,A,[oe,se]))}function fe(oe,se){this.ctx.closePath(),_classPrivateFieldSet(this,o,null),oe=Math.min(Math.max(oe,0),this.canvas.width),se=Math.min(Math.max(se,0),this.canvas.height);const[pe,be]=this.currentPath.at(-1);let te;if((oe!==pe||se!==be)&&this.currentPath.push([oe,se]),1!==this.currentPath.length)te=(0,F.fitCurve)(this.currentPath,30,null);else{const Me=[oe,se];te=[[Me,Me.slice(),Me.slice(),Me]]}const $=_classStaticPrivateMethodGet(C,C,z).call(C,te);this.currentPath.length=0,this.parent.addCommands({cmd:()=>{this.paths.push(te),this.bezierPath2D.push($),this.rebuild()},undo:()=>{this.paths.pop(),this.bezierPath2D.pop(),0===this.paths.length?this.remove():(this.canvas||(_classPrivateMethodGet(this,j,Ae).call(this),_classPrivateMethodGet(this,ee,re).call(this)),_classPrivateMethodGet(this,h,D).call(this))},mustExec:!0})}function me(){if(this.isEmpty())return void _classPrivateMethodGet(this,g,de).call(this);_classPrivateMethodGet(this,b,ie).call(this);const{canvas:oe,ctx:se}=this;se.setTransform(1,0,0,1,0,0),se.clearRect(0,0,oe.width,oe.height),_classPrivateMethodGet(this,g,de).call(this);for(const pe of this.bezierPath2D)se.stroke(pe)}function we(oe){_classPrivateMethodGet(this,H,fe).call(this,oe.offsetX,oe.offsetY),this.canvas.removeEventListener("pointerleave",_classPrivateFieldGet(this,t)),this.canvas.removeEventListener("pointermove",_classPrivateFieldGet(this,y)),this.parent.addToAnnotationStorage(this)}function Ae(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",C._l10nPromise.get("editor_ink_canvas_aria_label").then(oe=>this.canvas?.setAttribute("aria-label",oe)),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")}function re(){_classPrivateFieldSet(this,u,new ResizeObserver(oe=>{const se=oe[0].contentRect;se.width&&se.height&&this.setDimensions(se.width,se.height)})),_classPrivateFieldGet(this,u).observe(this.div)}function K(){if(!_classPrivateFieldGet(this,p))return;const[oe,se]=this.parent.viewportBaseDimensions;this.canvas.width=Math.ceil(this.width*oe),this.canvas.height=Math.ceil(this.height*se),_classPrivateMethodGet(this,g,de).call(this)}function ce(oe,se){const pe=_classPrivateMethodGet(this,n,xe).call(this),be=(oe-pe)/_classPrivateFieldGet(this,W),te=(se-pe)/_classPrivateFieldGet(this,q);this.scaleFactor=Math.min(be,te)}function de(){const oe=_classPrivateMethodGet(this,n,xe).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+oe,this.translationY*this.scaleFactor+oe)}function z(oe){const se=new Path2D;for(let pe=0,be=oe.length;pe<be;pe++){const[te,$,J,Pe]=oe[pe];0===pe&&se.moveTo(...te),se.bezierCurveTo($[0],$[1],J[0],J[1],Pe[0],Pe[1])}return se}function I(oe,se,pe,be){const $=[],J=this.thickness/2;let Pe,Me;for(const ge of this.paths){Pe=[],Me=[];for(let _e=0,Ee=ge.length;_e<Ee;_e++){const[Ce,Te,ke,Re]=ge[_e],Le=oe*(Ce[0]+se)+J,Oe=be-oe*(Ce[1]+pe)-J,Fe=oe*(Te[0]+se)+J,Ie=be-oe*(Te[1]+pe)-J,Ge=oe*(ke[0]+se)+J,We=be-oe*(ke[1]+pe)-J,Be=oe*(Re[0]+se)+J,Ne=be-oe*(Re[1]+pe)-J;0===_e&&(Pe.push(Le,Oe),Me.push(Le,Oe)),Pe.push(Fe,Ie,Ge,We,Be,Ne),_classPrivateMethodGet(this,E,ae).call(this,Le,Oe,Fe,Ie,Ge,We,Be,Ne,4,Me)}$.push({bezier:Pe,points:Me})}return $}function ae(oe,se,pe,be,te,$,J,Pe,Me,ge){if(_classPrivateMethodGet(this,T,Se).call(this,oe,se,pe,be,te,$,J,Pe))ge.push(J,Pe);else{for(let _e=1;_e<Me-1;_e++){const Ee=_e/Me,Ce=1-Ee;let Te=Ee*oe+Ce*pe,ke=Ee*se+Ce*be,Re=Ee*pe+Ce*te,Le=Ee*be+Ce*$;Te=Ee*Te+Ce*Re,ke=Ee*ke+Ce*Le,Re=Ee*Re+Ce*(Ee*te+Ce*J),Le=Ee*Le+Ce*(Ee*$+Ce*Pe),Te=Ee*Te+Ce*Re,ke=Ee*ke+Ce*Le,ge.push(Te,ke)}ge.push(J,Pe)}}function Se(oe,se,pe,be,te,$,J,Pe){const _e=(3*be-2*se-Pe)**2,Ce=(3*$-se-2*Pe)**2;return Math.max((3*pe-2*oe-J)**2,(3*te-oe-2*J)**2)+Math.max(_e,Ce)<=10}function ye(){let oe=1/0,se=-1/0,pe=1/0,be=-1/0;for(const te of this.paths)for(const[$,J,Pe,Me]of te){const ge=a.Util.bezierBoundingBox(...$,...J,...Pe,...Me);oe=Math.min(oe,ge[0]),pe=Math.min(pe,ge[1]),se=Math.max(se,ge[2]),be=Math.max(be,ge[3])}return[oe,pe,se,be]}function xe(){return _classPrivateFieldGet(this,P)?Math.ceil(this.thickness*this.parent.scaleFactor):0}function D(oe=!1){if(this.isEmpty())return;if(!_classPrivateFieldGet(this,P))return void _classPrivateMethodGet(this,B,me).call(this);const se=_classPrivateMethodGet(this,w,ye).call(this),pe=_classPrivateMethodGet(this,n,xe).call(this);_classPrivateFieldSet(this,W,Math.max(Q,se[2]-se[0])),_classPrivateFieldSet(this,q,Math.max(Q,se[3]-se[1]));const be=Math.ceil(pe+_classPrivateFieldGet(this,W)*this.scaleFactor),te=Math.ceil(pe+_classPrivateFieldGet(this,q)*this.scaleFactor),[$,J]=this.parent.viewportBaseDimensions;this.width=be/$,this.height=te/J,_classPrivateFieldSet(this,G,be/te),_classPrivateMethodGet(this,d,ne).call(this);const Pe=this.translationX,Me=this.translationY;this.translationX=-se[0],this.translationY=-se[1],_classPrivateMethodGet(this,le,K).call(this),_classPrivateMethodGet(this,B,me).call(this),_classPrivateFieldSet(this,i,be),_classPrivateFieldSet(this,e,te),this.setDims(be,te);const ge=oe?pe/this.scaleFactor/2:0;this.translate(Pe-this.translationX-ge,Me-this.translationY-ge)}function ne(){const{style:oe}=this.div;_classPrivateFieldGet(this,G)>=1?(oe.minHeight="16px",oe.minWidth=`${Math.round(_classPrivateFieldGet(this,G)*Q)}px`):(oe.minWidth="16px",oe.minHeight=`${Math.round(Q/_classPrivateFieldGet(this,G))}px`)}return C=L,_defineProperty(L,"_defaultColor",null),_defineProperty(L,"_defaultOpacity",1),_defineProperty(L,"_defaultThickness",1),_defineProperty(L,"_l10nPromise",void 0),_defineProperty(L,"_type","ink"),L})()},(Z,r,x)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.fitCurve=void 0;const a=x(26);r.fitCurve=a},Z=>{function x(t,s,_,P,p){var u,i,e,o,m,S,f,c,b,N,R,H,B;if(2===t.length)return H=W.vectorLen(W.subtract(t[0],t[1]))/3,[u=[t[0],W.addArrays(t[0],W.mulItems(s,H)),W.addArrays(t[1],W.mulItems(_,H)),t[1]]];if(i=function Q(t){var _,P,p,s=[];return t.forEach((A,u)=>{_=u?P+W.vectorLen(W.subtract(A,p)):0,s.push(_),P=_,p=A}),s=s.map(A=>A/P)}(t),[u,o,S]=a(t,i,i,s,_,p),0===o||o<P)return[u];if(o<P*P)for(e=i,m=o,f=S,B=0;B<20;B++){if(e=F(u,t,e),[u,o,S]=a(t,i,e,s,_,p),o<P)return[u];if(S===f){let U=o/m;if(U>.9999&&U<1.0001)break}m=o,f=S}return R=[],(c=W.subtract(t[S-1],t[S+1])).every(U=>0===U)&&(c=W.subtract(t[S-1],t[S]),[c[0],c[1]]=[-c[1],c[0]]),b=W.normalize(c),N=W.mulItems(b,-1),(R=R.concat(x(t.slice(0,S+1),s,b,P,p))).concat(x(t.slice(S),N,_,P,p))}function a(t,s,_,P,p,A){var u,i,e;return u=function v(t,s,_,P){var p,A,u,i,e,o,f,c,b,N,R,H,B,U,j,ee=t[0],le=t[t.length-1];for(p=[ee,null,null,le],A=W.zeros_Xx2x2(s.length),R=0,H=s.length;R<H;R++)(u=A[R])[0]=W.mulItems(_,3*(U=s[R])*((j=1-U)*j)),u[1]=W.mulItems(P,3*j*(U*U));for(i=[[0,0],[0,0]],e=[0,0],R=0,H=t.length;R<H;R++)U=s[R],i[0][0]+=W.dot((u=A[R])[0],u[0]),i[0][1]+=W.dot(u[0],u[1]),i[1][0]+=W.dot(u[0],u[1]),i[1][1]+=W.dot(u[1],u[1]),B=W.subtract(t[R],y.q([ee,ee,le,le],U)),e[0]+=W.dot(u[0],B),e[1]+=W.dot(u[1],B);return f=0==(o=i[0][0]*i[1][1]-i[1][0]*i[0][1])?0:(e[0]*i[1][1]-e[1]*i[0][1])/o,c=0===o?0:(i[0][0]*e[1]-i[1][0]*e[0])/o,f<(b=1e-6*(N=W.vectorLen(W.subtract(ee,le))))||c<b?(p[1]=W.addArrays(ee,W.mulItems(_,N/3)),p[2]=W.addArrays(le,W.mulItems(P,N/3))):(p[1]=W.addArrays(ee,W.mulItems(_,f)),p[2]=W.addArrays(le,W.mulItems(P,c))),p}(t,_,P,p),[i,e]=function M(t,s,_){var P,p,A,u,i,e,o,m;p=0,A=Math.floor(t.length/2);const S=C(s,10);for(i=0,e=t.length;i<e;i++)o=t[i],m=G(0,_[i],S,10),(P=(u=W.subtract(y.q(s,m),o))[0]*u[0]+u[1]*u[1])>p&&(p=P,A=i);return[p,A]}(t,u,s),A&&A({bez:u,points:t,params:s,maxErr:i,maxPoint:e}),[u,i,e]}function F(t,s,_){return _.map((P,p)=>function O(t,s,_){var P=W.subtract(y.q(t,_),s),p=y.qprime(t,_),A=W.mulMatrix(P,p),u=W.sum(W.squareItems(p))+2*W.mulMatrix(P,y.qprimeprime(t,_));return 0===u?_:_-A/u}(t,s[p],P))}var C=function(t,s){for(var _,P=[0],p=t[0],A=0,u=1;u<=s;u++)_=y.q(t,u/s),A+=W.vectorLen(W.subtract(_,p)),P.push(A),p=_;return P.map(i=>i/A)};function G(t,s,_,P){if(s<0)return 0;if(s>1)return 1;for(var A,i,e,o=1;o<=P;o++)if(s<=_[o]){e=(s-(A=_[o-1]))/(_[o]-A)*(o/P-(i=(o-1)/P))+i;break}return e}function q(t,s){return W.normalize(W.subtract(t,s))}class W{static zeros_Xx2x2(s){for(var _=[];s--;)_.push([0,0]);return _}static mulItems(s,_){return s.map(P=>P*_)}static mulMatrix(s,_){return s.reduce((P,p,A)=>P+p*_[A],0)}static subtract(s,_){return s.map((P,p)=>P-_[p])}static addArrays(s,_){return s.map((P,p)=>P+_[p])}static addItems(s,_){return s.map(P=>P+_)}static sum(s){return s.reduce((_,P)=>_+P)}static dot(s,_){return W.mulMatrix(s,_)}static vectorLen(s){return Math.hypot(...s)}static divItems(s,_){return s.map(P=>P/_)}static squareItems(s){return s.map(_=>_*_)}static normalize(s){return this.divItems(s,this.vectorLen(s))}}class y{static q(s,_){var P=1-_,p=W.mulItems(s[0],P*P*P),A=W.mulItems(s[1],3*P*P*_),u=W.mulItems(s[2],3*P*_*_),i=W.mulItems(s[3],_*_*_);return W.addArrays(W.addArrays(p,A),W.addArrays(u,i))}static qprime(s,_){var P=1-_,p=W.mulItems(W.subtract(s[1],s[0]),3*P*P),A=W.mulItems(W.subtract(s[2],s[1]),6*P*_),u=W.mulItems(W.subtract(s[3],s[2]),3*_*_);return W.addArrays(W.addArrays(p,A),u)}static qprimeprime(s,_){return W.addArrays(W.mulItems(W.addArrays(W.subtract(s[2],W.mulItems(s[1],2)),s[0]),6*(1-_)),W.mulItems(W.addArrays(W.subtract(s[3],W.mulItems(s[2],2)),s[1]),6*_))}}Z.exports=function r(t,s,_){if(!Array.isArray(t))throw new TypeError("First argument should be an array");if(t.forEach(u=>{if(!Array.isArray(u)||u.some(i=>"number"!=typeof i)||u.length!==t[0].length)throw Error("Each point should be an array of numbers. Each point should have the same amount of numbers.")}),(t=t.filter((u,i)=>0===i||!u.every((e,o)=>e===t[i-1][o]))).length<2)return[];const P=t.length,p=q(t[1],t[0]),A=q(t[P-2],t[P-1]);return x(t,p,A,s,_)},Z.exports.fitCubic=x,Z.exports.createTangent=q},(Z,r,x)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.AnnotationLayer=void 0;var a=x(1),v=x(8),F=x(5),O=x(28),Q=x(29);const M=1e3,G=new WeakSet;function q(w){return{width:w[2]-w[0],height:w[3]-w[1]}}class W{static create(n){switch(n.data.annotationType){case a.AnnotationType.LINK:return new t(n);case a.AnnotationType.TEXT:return new s(n);case a.AnnotationType.WIDGET:switch(n.data.fieldType){case"Tx":return new P(n);case"Btn":return n.data.radioButton?new A(n):n.data.checkBox?new p(n):new u(n);case"Ch":return new i(n)}return new _(n);case a.AnnotationType.POPUP:return new e(n);case a.AnnotationType.FREETEXT:return new m(n);case a.AnnotationType.LINE:return new S(n);case a.AnnotationType.SQUARE:return new f(n);case a.AnnotationType.CIRCLE:return new c(n);case a.AnnotationType.POLYLINE:return new b(n);case a.AnnotationType.CARET:return new R(n);case a.AnnotationType.INK:return new H(n);case a.AnnotationType.POLYGON:return new N(n);case a.AnnotationType.HIGHLIGHT:return new B(n);case a.AnnotationType.UNDERLINE:return new U(n);case a.AnnotationType.SQUIGGLY:return new j(n);case a.AnnotationType.STRIKEOUT:return new ee(n);case a.AnnotationType.STAMP:return new le(n);case a.AnnotationType.FILEATTACHMENT:return new V(n);default:return new y(n)}}}class y{constructor(n,{isRenderable:h=!1,ignoreBorder:d=!1,createQuadrilaterals:L=!1}={}){this.isRenderable=h,this.data=n.data,this.layer=n.layer,this.page=n.page,this.viewport=n.viewport,this.linkService=n.linkService,this.downloadManager=n.downloadManager,this.imageResourcesPath=n.imageResourcesPath,this.renderForms=n.renderForms,this.svgFactory=n.svgFactory,this.annotationStorage=n.annotationStorage,this.enableScripting=n.enableScripting,this.hasJSActions=n.hasJSActions,this._fieldObjects=n.fieldObjects,this._mouseState=n.mouseState,h&&(this.container=this._createContainer(d)),L&&(this.quadrilaterals=this._createQuadrilaterals(d))}_createContainer(n=!1){const h=this.data,d=this.page,L=this.viewport,k=document.createElement("section"),{width:X,height:Y}=q(h.rect),[he,ie,ue,ve]=L.viewBox,fe=ue-he,me=ve-ie;k.setAttribute("data-annotation-id",h.id);const we=a.Util.normalizeRect([h.rect[0],d.view[3]-h.rect[1]+d.view[1],h.rect[2],d.view[3]-h.rect[3]+d.view[1]]);if(!n&&h.borderStyle.width>0){k.style.borderWidth=`${h.borderStyle.width}px`;const re=h.borderStyle.horizontalCornerRadius,K=h.borderStyle.verticalCornerRadius;switch(re>0||K>0?k.style.borderRadius=`calc(${re}px * var(--scale-factor)) / calc(${K}px * var(--scale-factor))`:this instanceof A&&(k.style.borderRadius=`calc(${X}px * var(--scale-factor)) / calc(${Y}px * var(--scale-factor))`),h.borderStyle.style){case a.AnnotationBorderStyleType.SOLID:k.style.borderStyle="solid";break;case a.AnnotationBorderStyleType.DASHED:k.style.borderStyle="dashed";break;case a.AnnotationBorderStyleType.BEVELED:(0,a.warn)("Unimplemented border style: beveled");break;case a.AnnotationBorderStyleType.INSET:(0,a.warn)("Unimplemented border style: inset");break;case a.AnnotationBorderStyleType.UNDERLINE:k.style.borderBottomStyle="solid"}const ce=h.borderColor||null;ce?k.style.borderColor=a.Util.makeHexColor(0|ce[0],0|ce[1],0|ce[2]):k.style.borderWidth=0}k.style.left=100*(we[0]-he)/fe+"%",k.style.top=100*(we[1]-ie)/me+"%";const{rotation:Ae}=h;return h.hasOwnCanvas||0===Ae?(k.style.width=100*X/fe+"%",k.style.height=100*Y/me+"%"):this.setRotation(Ae,k),k}setRotation(n,h=this.container){const[d,L,k,X]=this.viewport.viewBox,Y=k-d,he=X-L,{width:ie,height:ue}=q(this.data.rect);let ve,fe;n%180==0?(ve=100*ie/Y,fe=100*ue/he):(ve=100*ue/Y,fe=100*ie/he),h.style.width=`${ve}%`,h.style.height=`${fe}%`,h.setAttribute("data-main-rotation",(360-n)%360)}get _commonActions(){const n=(h,d,L)=>{const k=L.detail[h];L.target.style[d]=O.ColorConverters[`${k[0]}_HTML`](k.slice(1))};return(0,a.shadow)(this,"_commonActions",{display:h=>{const d=h.detail.display%2==1;this.container.style.visibility=d?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:d,print:0===h.detail.display||3===h.detail.display})},print:h=>{this.annotationStorage.setValue(this.data.id,{print:h.detail.print})},hidden:h=>{this.container.style.visibility=h.detail.hidden?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:h.detail.hidden})},focus:h=>{setTimeout(()=>h.target.focus({preventScroll:!1}),0)},userName:h=>{h.target.title=h.detail.userName},readonly:h=>{h.detail.readonly?h.target.setAttribute("readonly",""):h.target.removeAttribute("readonly")},required:h=>{this._setRequired(h.target,h.detail.required)},bgColor:h=>{n("bgColor","backgroundColor",h)},fillColor:h=>{n("fillColor","backgroundColor",h)},fgColor:h=>{n("fgColor","color",h)},textColor:h=>{n("textColor","color",h)},borderColor:h=>{n("borderColor","borderColor",h)},strokeColor:h=>{n("strokeColor","borderColor",h)},rotation:h=>{const d=h.detail.rotation;this.setRotation(d),this.annotationStorage.setValue(this.data.id,{rotation:d})}})}_dispatchEventFromSandbox(n,h){const d=this._commonActions;for(const L of Object.keys(h.detail)){const k=n[L]||d[L];k&&k(h)}}_setDefaultPropertiesFromJS(n){if(!this.enableScripting)return;const h=this.annotationStorage.getRawValue(this.data.id);if(!h)return;const d=this._commonActions;for(const[L,k]of Object.entries(h)){const X=d[L];X&&(X({detail:{[L]:k},target:n}),delete h[L])}}_createQuadrilaterals(n=!1){if(!this.data.quadPoints)return null;const h=[],d=this.data.rect;for(const L of this.data.quadPoints)this.data.rect=[L[2].x,L[2].y,L[1].x,L[1].y],h.push(this._createContainer(n));return this.data.rect=d,h}_createPopup(n,h){let d=this.container;this.quadrilaterals&&(n=n||this.quadrilaterals,d=this.quadrilaterals[0]),n||((n=document.createElement("div")).className="popupTriggerArea",d.append(n));const k=new o({container:d,trigger:n,color:h.color,titleObj:h.titleObj,modificationDate:h.modificationDate,contentsObj:h.contentsObj,richText:h.richText,hideWrapper:!0}).render();k.style.left="100%",d.append(k)}_renderQuadrilaterals(n){for(const h of this.quadrilaterals)h.className=n;return this.quadrilaterals}render(){(0,a.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(n,h=null){const d=[];if(this._fieldObjects){const L=this._fieldObjects[n];if(L)for(const{page:k,id:X,exportValues:Y}of L){if(-1===k||X===h)continue;const he="string"==typeof Y?Y:null,ie=document.querySelector(`[data-element-id="${X}"]`);!ie||G.has(ie)?d.push({id:X,exportValue:he,domElement:ie}):(0,a.warn)(`_getElementsByName - element not allowed: ${X}`)}return d}for(const L of document.getElementsByName(n)){const{id:k,exportValue:X}=L;k!==h&&G.has(L)&&d.push({id:k,exportValue:X,domElement:L})}return d}static get platform(){const n=typeof navigator<"u"?navigator.platform:"";return(0,a.shadow)(this,"platform",{isWin:n.includes("Win"),isMac:n.includes("Mac")})}}class t extends y{constructor(n,h=null){super(n,{isRenderable:!0,ignoreBorder:!!h?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=n.data.isTooltipOnly}render(){const{data:n,linkService:h}=this,d=document.createElement("a");d.setAttribute("data-element-id",n.id);let L=!1;return n.url?(h.addLinkAttributes(d,n.url,n.newWindow),L=!0):n.action?(this._bindNamedAction(d,n.action),L=!0):n.dest?(this._bindLink(d,n.dest),L=!0):(n.actions&&(n.actions.Action||n.actions["Mouse Up"]||n.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(d,n),L=!0),n.resetForm?(this._bindResetFormAction(d,n.resetForm),L=!0):this.isTooltipOnly&&!L&&(this._bindLink(d,""),L=!0)),this.quadrilaterals?this._renderQuadrilaterals("linkAnnotation").map((k,X)=>{const Y=0===X?d:d.cloneNode();return k.append(Y),k}):(this.container.className="linkAnnotation",L&&this.container.append(d),this.container)}_bindLink(n,h){n.href=this.linkService.getDestinationHash(h),n.onclick=()=>(h&&this.linkService.goToDestination(h),!1),(h||""===h)&&(n.className="internalLink")}_bindNamedAction(n,h){n.href=this.linkService.getAnchorUrl(""),n.onclick=()=>(this.linkService.executeNamedAction(h),!1),n.className="internalLink"}_bindJSAction(n,h){n.href=this.linkService.getAnchorUrl("");const d=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const L of Object.keys(h.actions)){const k=d.get(L);k&&(n[k]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:h.id,name:L}}),!1))}n.onclick||(n.onclick=()=>!1),n.className="internalLink"}_bindResetFormAction(n,h){const d=n.onclick;if(d||(n.href=this.linkService.getAnchorUrl("")),n.className="internalLink",!this._fieldObjects)return(0,a.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),void(d||(n.onclick=()=>!1));n.onclick=()=>{d&&d();const{fields:L,refs:k,include:X}=h,Y=[];if(0!==L.length||0!==k.length){const ue=new Set(k);for(const ve of L){const fe=this._fieldObjects[ve]||[];for(const{id:me}of fe)ue.add(me)}for(const ve of Object.values(this._fieldObjects))for(const fe of ve)ue.has(fe.id)===X&&Y.push(fe)}else for(const ue of Object.values(this._fieldObjects))Y.push(...ue);const he=this.annotationStorage,ie=[];for(const ue of Y){const{id:ve}=ue;switch(ie.push(ve),ue.type){case"text":case"combobox":case"listbox":he.setValue(ve,{value:ue.defaultValue||""});break;case"checkbox":case"radiobutton":he.setValue(ve,{value:ue.defaultValue===ue.exportValues});break;default:continue}const fe=document.querySelector(`[data-element-id="${ve}"]`);fe&&(G.has(fe)?fe.dispatchEvent(new Event("resetform")):(0,a.warn)(`_bindResetFormAction - element not allowed: ${ve}`))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:ie,name:"ResetForm"}}),!1}}}class s extends y{constructor(n){super(n,{isRenderable:!!(n.data.hasPopup||n.data.titleObj?.str||n.data.contentsObj?.str||n.data.richText?.str)})}render(){this.container.className="textAnnotation";const n=document.createElement("img");return n.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",n.alt="[{{type}} Annotation]",n.dataset.l10nId="text_annotation_type",n.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(n,this.data),this.container.append(n),this.container}}class _ extends y{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}_getKeyModifier(n){const{isWin:h,isMac:d}=y.platform;return h&&n.ctrlKey||d&&n.metaKey}_setEventListener(n,h,d,L){h.includes("mouse")?n.addEventListener(h,k=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:d,value:L(k),shift:k.shiftKey,modifier:this._getKeyModifier(k)}})}):n.addEventListener(h,k=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:d,value:L(k)}})})}_setEventListeners(n,h,d){for(const[L,k]of h)("Action"===k||this.data.actions?.[k])&&this._setEventListener(n,L,k,d)}_setBackgroundColor(n){const h=this.data.backgroundColor||null;n.style.backgroundColor=null===h?"transparent":a.Util.makeHexColor(h[0],h[1],h[2])}_setTextStyle(n){const{fontColor:d}=this.data.defaultAppearanceData,L=this.data.defaultAppearanceData.fontSize||9,k=n.style;let X;if(this.data.multiLine){const Y=Math.abs(this.data.rect[3]-this.data.rect[1]),he=Math.round(Y/(a.LINE_FACTOR*L))||1;X=Math.min(L,Math.round(Y/he/a.LINE_FACTOR))}else{const Y=Math.abs(this.data.rect[3]-this.data.rect[1]);X=Math.min(L,Math.round(Y/a.LINE_FACTOR))}k.fontSize=`calc(${X}px * var(--scale-factor))`,k.color=a.Util.makeHexColor(d[0],d[1],d[2]),null!==this.data.textAlignment&&(k.textAlign=["left","center","right"][this.data.textAlignment])}_setRequired(n,h){h?n.setAttribute("required",!0):n.removeAttribute("required"),n.setAttribute("aria-required",h)}}class P extends _{constructor(n){super(n,{isRenderable:n.renderForms||!n.data.hasAppearance&&!!n.data.fieldValue})}setPropertyOnSiblings(n,h,d,L){const k=this.annotationStorage;for(const X of this._getElementsByName(n.name,n.id))X.domElement&&(X.domElement[h]=d),k.setValue(X.id,{[L]:d})}render(){const n=this.annotationStorage,h=this.data.id;this.container.className="textWidgetAnnotation";let d=null;if(this.renderForms){const L=n.getValue(h,{value:this.data.fieldValue});let k=L.formattedValue||L.value||"";const X=n.getValue(h,{charLimit:this.data.maxLen}).charLimit;X&&k.length>X&&(k=k.slice(0,X));const Y={userValue:k,formattedValue:null,valueOnFocus:""};this.data.multiLine?(d=document.createElement("textarea"),d.textContent=k,this.data.doNotScroll&&(d.style.overflowY="hidden")):(d=document.createElement("input"),d.type="text",d.setAttribute("value",k),this.data.doNotScroll&&(d.style.overflowX="hidden")),G.add(d),d.setAttribute("data-element-id",h),d.disabled=this.data.readOnly,d.name=this.data.fieldName,d.tabIndex=M,this._setRequired(d,this.data.required),X&&(d.maxLength=X),d.addEventListener("input",ie=>{n.setValue(h,{value:ie.target.value}),this.setPropertyOnSiblings(d,"value",ie.target.value,"value")}),d.addEventListener("resetform",ie=>{d.value=Y.userValue=this.data.defaultFieldValue??"",Y.formattedValue=null});let he=ie=>{const{formattedValue:ue}=Y;null!=ue&&(ie.target.value=ue),ie.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){d.addEventListener("focus",ue=>{Y.userValue&&(ue.target.value=Y.userValue),Y.valueOnFocus=ue.target.value}),d.addEventListener("updatefromsandbox",ue=>{this._dispatchEventFromSandbox({value(fe){Y.userValue=fe.detail.value??"",n.setValue(h,{value:Y.userValue.toString()}),fe.target.value=Y.userValue},formattedValue(fe){const{formattedValue:me}=fe.detail;Y.formattedValue=me,null!=me&&fe.target!==document.activeElement&&(fe.target.value=me),n.setValue(h,{formattedValue:me})},selRange(fe){fe.target.setSelectionRange(...fe.detail.selRange)},charLimit:fe=>{const{charLimit:me}=fe.detail,{target:we}=fe;if(0===me)return void we.removeAttribute("maxLength");we.setAttribute("maxLength",me);let Ae=Y.userValue;!Ae||Ae.length<=me||(Ae=Ae.slice(0,me),we.value=Y.userValue=Ae,n.setValue(h,{value:Ae}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:h,name:"Keystroke",value:Ae,willCommit:!0,commitKey:1,selStart:we.selectionStart,selEnd:we.selectionEnd}}))}},ue)}),d.addEventListener("keydown",ue=>{let ve=-1;if("Escape"===ue.key?ve=0:"Enter"===ue.key?ve=2:"Tab"===ue.key&&(ve=3),-1===ve)return;const{value:fe}=ue.target;Y.valueOnFocus!==fe&&(Y.userValue=fe,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:h,name:"Keystroke",value:fe,willCommit:!0,commitKey:ve,selStart:ue.target.selectionStart,selEnd:ue.target.selectionEnd}}))});const ie=he;he=null,d.addEventListener("blur",ue=>{const{value:ve}=ue.target;Y.userValue=ve,this._mouseState.isDown&&Y.valueOnFocus!==ve&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:h,name:"Keystroke",value:ve,willCommit:!0,commitKey:1,selStart:ue.target.selectionStart,selEnd:ue.target.selectionEnd}}),ie(ue)}),this.data.actions?.Keystroke&&d.addEventListener("beforeinput",ue=>{const{data:ve,target:fe}=ue,{value:me,selectionStart:we,selectionEnd:Ae}=fe;let re=we,K=Ae;switch(ue.inputType){case"deleteWordBackward":{const ce=me.substring(0,we).match(/\w*[^\w]*$/);ce&&(re-=ce[0].length);break}case"deleteWordForward":{const ce=me.substring(we).match(/^[^\w]*\w*/);ce&&(K+=ce[0].length);break}case"deleteContentBackward":we===Ae&&(re-=1);break;case"deleteContentForward":we===Ae&&(K+=1)}ue.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:h,name:"Keystroke",value:me,change:ve||"",willCommit:!1,selStart:re,selEnd:K}})}),this._setEventListeners(d,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],ue=>ue.target.value)}if(he&&d.addEventListener("blur",he),this.data.comb){const ue=(this.data.rect[2]-this.data.rect[0])/X;d.classList.add("comb"),d.style.letterSpacing=`calc(${ue}px * var(--scale-factor) - 1ch)`}}else d=document.createElement("div"),d.textContent=this.data.fieldValue,d.style.verticalAlign="middle",d.style.display="table-cell";return this._setTextStyle(d),this._setBackgroundColor(d),this._setDefaultPropertiesFromJS(d),this.container.append(d),this.container}}class p extends _{constructor(n){super(n,{isRenderable:n.renderForms})}render(){const n=this.annotationStorage,h=this.data,d=h.id;let L=n.getValue(d,{value:h.exportValue===h.fieldValue}).value;"string"==typeof L&&(L="Off"!==L,n.setValue(d,{value:L})),this.container.className="buttonWidgetAnnotation checkBox";const k=document.createElement("input");return G.add(k),k.setAttribute("data-element-id",d),k.disabled=h.readOnly,this._setRequired(k,this.data.required),k.type="checkbox",k.name=h.fieldName,L&&k.setAttribute("checked",!0),k.setAttribute("exportValue",h.exportValue),k.tabIndex=M,k.addEventListener("change",X=>{const{name:Y,checked:he}=X.target;for(const ie of this._getElementsByName(Y,d)){const ue=he&&ie.exportValue===h.exportValue;ie.domElement&&(ie.domElement.checked=ue),n.setValue(ie.id,{value:ue})}n.setValue(d,{value:he})}),k.addEventListener("resetform",X=>{X.target.checked=(h.defaultFieldValue||"Off")===h.exportValue}),this.enableScripting&&this.hasJSActions&&(k.addEventListener("updatefromsandbox",X=>{this._dispatchEventFromSandbox({value(he){he.target.checked="Off"!==he.detail.value,n.setValue(d,{value:he.target.checked})}},X)}),this._setEventListeners(k,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],X=>X.target.checked)),this._setBackgroundColor(k),this._setDefaultPropertiesFromJS(k),this.container.append(k),this.container}}class A extends _{constructor(n){super(n,{isRenderable:n.renderForms})}render(){this.container.className="buttonWidgetAnnotation radioButton";const n=this.annotationStorage,h=this.data,d=h.id;let L=n.getValue(d,{value:h.fieldValue===h.buttonValue}).value;"string"==typeof L&&(L=L!==h.buttonValue,n.setValue(d,{value:L}));const k=document.createElement("input");if(G.add(k),k.setAttribute("data-element-id",d),k.disabled=h.readOnly,this._setRequired(k,this.data.required),k.type="radio",k.name=h.fieldName,L&&k.setAttribute("checked",!0),k.tabIndex=M,k.addEventListener("change",X=>{const{name:Y,checked:he}=X.target;for(const ie of this._getElementsByName(Y,d))n.setValue(ie.id,{value:!1});n.setValue(d,{value:he})}),k.addEventListener("resetform",X=>{const Y=h.defaultFieldValue;X.target.checked=null!=Y&&Y===h.buttonValue}),this.enableScripting&&this.hasJSActions){const X=h.buttonValue;k.addEventListener("updatefromsandbox",Y=>{this._dispatchEventFromSandbox({value:ie=>{const ue=X===ie.detail.value;for(const ve of this._getElementsByName(ie.target.name)){const fe=ue&&ve.id===d;ve.domElement&&(ve.domElement.checked=fe),n.setValue(ve.id,{value:fe})}}},Y)}),this._setEventListeners(k,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Y=>Y.target.checked)}return this._setBackgroundColor(k),this._setDefaultPropertiesFromJS(k),this.container.append(k),this.container}}class u extends t{constructor(n){super(n,{ignoreBorder:n.data.hasAppearance})}render(){const n=super.render();n.className="buttonWidgetAnnotation pushButton",this.data.alternativeText&&(n.title=this.data.alternativeText);const h=n.lastChild;return this.enableScripting&&this.hasJSActions&&h&&(this._setDefaultPropertiesFromJS(h),h.addEventListener("updatefromsandbox",d=>{this._dispatchEventFromSandbox({},d)})),n}}class i extends _{constructor(n){super(n,{isRenderable:n.renderForms})}render(){this.container.className="choiceWidgetAnnotation";const n=this.annotationStorage,h=this.data.id,d=n.getValue(h,{value:this.data.fieldValue}),L=document.createElement("select");G.add(L),L.setAttribute("data-element-id",h),L.disabled=this.data.readOnly,this._setRequired(L,this.data.required),L.name=this.data.fieldName,L.tabIndex=M;let k=this.data.combo&&this.data.options.length>0;this.data.combo||(L.size=this.data.options.length,this.data.multiSelect&&(L.multiple=!0)),L.addEventListener("resetform",ie=>{const ue=this.data.defaultFieldValue;for(const ve of L.options)ve.selected=ve.value===ue});for(const ie of this.data.options){const ue=document.createElement("option");ue.textContent=ie.displayValue,ue.value=ie.exportValue,d.value.includes(ie.exportValue)&&(ue.setAttribute("selected",!0),k=!1),L.append(ue)}let X=null;if(k){const ie=document.createElement("option");ie.value=" ",ie.setAttribute("hidden",!0),ie.setAttribute("selected",!0),L.prepend(ie),X=()=>{ie.remove(),L.removeEventListener("input",X),X=null},L.addEventListener("input",X)}const Y=(ie,ue)=>{const ve=ue?"value":"textContent",fe=ie.target.options;return ie.target.multiple?Array.prototype.filter.call(fe,me=>me.selected).map(me=>me[ve]):-1===fe.selectedIndex?null:fe[fe.selectedIndex][ve]},he=ie=>Array.prototype.map.call(ie.target.options,ve=>({displayValue:ve.textContent,exportValue:ve.value}));return this.enableScripting&&this.hasJSActions?(L.addEventListener("updatefromsandbox",ie=>{this._dispatchEventFromSandbox({value(ve){X?.();const fe=ve.detail.value,me=new Set(Array.isArray(fe)?fe:[fe]);for(const we of L.options)we.selected=me.has(we.value);n.setValue(h,{value:Y(ve,!0)})},multipleSelection(ve){L.multiple=!0},remove(ve){const fe=L.options,me=ve.detail.remove;fe[me].selected=!1,L.remove(me),fe.length>0&&-1===Array.prototype.findIndex.call(fe,Ae=>Ae.selected)&&(fe[0].selected=!0),n.setValue(h,{value:Y(ve,!0),items:he(ve)})},clear(ve){for(;0!==L.length;)L.remove(0);n.setValue(h,{value:null,items:[]})},insert(ve){const{index:fe,displayValue:me,exportValue:we}=ve.detail.insert,Ae=L.children[fe],re=document.createElement("option");re.textContent=me,re.value=we,Ae?Ae.before(re):L.append(re),n.setValue(h,{value:Y(ve,!0),items:he(ve)})},items(ve){const{items:fe}=ve.detail;for(;0!==L.length;)L.remove(0);for(const me of fe){const{displayValue:we,exportValue:Ae}=me,re=document.createElement("option");re.textContent=we,re.value=Ae,L.append(re)}L.options.length>0&&(L.options[0].selected=!0),n.setValue(h,{value:Y(ve,!0),items:he(ve)})},indices(ve){const fe=new Set(ve.detail.indices);for(const me of ve.target.options)me.selected=fe.has(me.index);n.setValue(h,{value:Y(ve,!0)})},editable(ve){ve.target.disabled=!ve.detail.editable}},ie)}),L.addEventListener("input",ie=>{const ue=Y(ie,!0),ve=Y(ie,!1);n.setValue(h,{value:ue}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:h,name:"Keystroke",value:ve,changeEx:ue,willCommit:!0,commitKey:1,keyDown:!1}})}),this._setEventListeners(L,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"]],ie=>ie.target.checked)):L.addEventListener("input",function(ie){n.setValue(h,{value:Y(ie,!0)})}),this.data.combo&&this._setTextStyle(L),this._setBackgroundColor(L),this._setDefaultPropertiesFromJS(L),this.container.append(L),this.container}}class e extends y{constructor(n){super(n,{isRenderable:!!(n.data.titleObj?.str||n.data.contentsObj?.str||n.data.richText?.str)})}render(){if(this.container.className="popupAnnotation",["Line","Square","Circle","PolyLine","Polygon","Ink"].includes(this.data.parentType))return this.container;const d=this.layer.querySelectorAll(`[data-annotation-id="${this.data.parentId}"]`);if(0===d.length)return this.container;const L=new o({container:this.container,trigger:Array.from(d),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText}),k=this.page,X=a.Util.normalizeRect([this.data.parentRect[0],k.view[3]-this.data.parentRect[1]+k.view[1],this.data.parentRect[2],k.view[3]-this.data.parentRect[3]+k.view[1]]),Y=X[0]+this.data.parentRect[2]-this.data.parentRect[0],he=X[1],[ie,ue,ve,fe]=this.viewport.viewBox,we=fe-ue;return this.container.style.left=100*(Y-ie)/(ve-ie)+"%",this.container.style.top=100*(he-ue)/we+"%",this.container.append(L.render()),this.container}}class o{constructor(n){this.container=n.container,this.trigger=n.trigger,this.color=n.color,this.titleObj=n.titleObj,this.modificationDate=n.modificationDate,this.contentsObj=n.contentsObj,this.richText=n.richText,this.hideWrapper=n.hideWrapper||!1,this.pinned=!1}render(){const h=document.createElement("div");h.className="popupWrapper",this.hideElement=this.hideWrapper?h:this.container,this.hideElement.hidden=!0;const d=document.createElement("div");d.className="popup";const L=this.color;L&&(d.style.backgroundColor=a.Util.makeHexColor(0|.7*(255-L[0])+L[0],0|.7*(255-L[1])+L[1],0|.7*(255-L[2])+L[2]));const k=document.createElement("h1");k.dir=this.titleObj.dir,k.textContent=this.titleObj.str,d.append(k);const X=v.PDFDateString.toDateObject(this.modificationDate);if(X){const Y=document.createElement("span");Y.className="popupDate",Y.textContent="{{date}}, {{time}}",Y.dataset.l10nId="annotation_date_string",Y.dataset.l10nArgs=JSON.stringify({date:X.toLocaleDateString(),time:X.toLocaleTimeString()}),d.append(Y)}if(!this.richText?.str||this.contentsObj?.str&&this.contentsObj.str!==this.richText.str){const Y=this._formatContents(this.contentsObj);d.append(Y)}else Q.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:d}),d.lastChild.className="richText popupContent";Array.isArray(this.trigger)||(this.trigger=[this.trigger]);for(const Y of this.trigger)Y.addEventListener("click",this._toggle.bind(this)),Y.addEventListener("mouseover",this._show.bind(this,!1)),Y.addEventListener("mouseout",this._hide.bind(this,!1));return d.addEventListener("click",this._hide.bind(this,!0)),h.append(d),h}_formatContents({str:n,dir:h}){const d=document.createElement("p");d.className="popupContent",d.dir=h;const L=n.split(/(?:\r\n?|\n)/);for(let k=0,X=L.length;k<X;++k)d.append(document.createTextNode(L[k])),k<X-1&&d.append(document.createElement("br"));return d}_toggle(){this.pinned?this._hide(!0):this._show(!0)}_show(n=!1){n&&(this.pinned=!0),this.hideElement.hidden&&(this.hideElement.hidden=!1,this.container.style.zIndex=parseInt(this.container.style.zIndex)+1e3)}_hide(n=!0){n&&(this.pinned=!1),!this.hideElement.hidden&&!this.pinned&&(this.hideElement.hidden=!0,this.container.style.zIndex=parseInt(this.container.style.zIndex)-1e3)}}class m extends y{constructor(n){super(n,{isRenderable:!!(n.data.hasPopup||n.data.titleObj?.str||n.data.contentsObj?.str||n.data.richText?.str),ignoreBorder:!0}),this.textContent=n.data.textContent}render(){if(this.container.className="freeTextAnnotation",this.textContent){const n=document.createElement("div");n.className="annotationTextContent",n.setAttribute("role","comment");for(const h of this.textContent){const d=document.createElement("span");d.textContent=h,n.append(d)}this.container.append(n)}return this.data.hasPopup||this._createPopup(null,this.data),this.container}}class S extends y{constructor(n){super(n,{isRenderable:!!(n.data.hasPopup||n.data.titleObj?.str||n.data.contentsObj?.str||n.data.richText?.str),ignoreBorder:!0})}render(){this.container.className="lineAnnotation";const n=this.data,{width:h,height:d}=q(n.rect),L=this.svgFactory.create(h,d,!0),k=this.svgFactory.createElement("svg:line");return k.setAttribute("x1",n.rect[2]-n.lineCoordinates[0]),k.setAttribute("y1",n.rect[3]-n.lineCoordinates[1]),k.setAttribute("x2",n.rect[2]-n.lineCoordinates[2]),k.setAttribute("y2",n.rect[3]-n.lineCoordinates[3]),k.setAttribute("stroke-width",n.borderStyle.width||1),k.setAttribute("stroke","transparent"),k.setAttribute("fill","transparent"),L.append(k),this.container.append(L),this._createPopup(k,n),this.container}}class f extends y{constructor(n){super(n,{isRenderable:!!(n.data.hasPopup||n.data.titleObj?.str||n.data.contentsObj?.str||n.data.richText?.str),ignoreBorder:!0})}render(){this.container.className="squareAnnotation";const n=this.data,{width:h,height:d}=q(n.rect),L=this.svgFactory.create(h,d,!0),k=n.borderStyle.width,X=this.svgFactory.createElement("svg:rect");return X.setAttribute("x",k/2),X.setAttribute("y",k/2),X.setAttribute("width",h-k),X.setAttribute("height",d-k),X.setAttribute("stroke-width",k||1),X.setAttribute("stroke","transparent"),X.setAttribute("fill","transparent"),L.append(X),this.container.append(L),this._createPopup(X,n),this.container}}class c extends y{constructor(n){super(n,{isRenderable:!!(n.data.hasPopup||n.data.titleObj?.str||n.data.contentsObj?.str||n.data.richText?.str),ignoreBorder:!0})}render(){this.container.className="circleAnnotation";const n=this.data,{width:h,height:d}=q(n.rect),L=this.svgFactory.create(h,d,!0),k=n.borderStyle.width,X=this.svgFactory.createElement("svg:ellipse");return X.setAttribute("cx",h/2),X.setAttribute("cy",d/2),X.setAttribute("rx",h/2-k/2),X.setAttribute("ry",d/2-k/2),X.setAttribute("stroke-width",k||1),X.setAttribute("stroke","transparent"),X.setAttribute("fill","transparent"),L.append(X),this.container.append(L),this._createPopup(X,n),this.container}}class b extends y{constructor(n){super(n,{isRenderable:!!(n.data.hasPopup||n.data.titleObj?.str||n.data.contentsObj?.str||n.data.richText?.str),ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const n=this.data,{width:h,height:d}=q(n.rect),L=this.svgFactory.create(h,d,!0);let k=[];for(const Y of n.vertices)k.push(Y.x-n.rect[0]+","+(n.rect[3]-Y.y));k=k.join(" ");const X=this.svgFactory.createElement(this.svgElementName);return X.setAttribute("points",k),X.setAttribute("stroke-width",n.borderStyle.width||1),X.setAttribute("stroke","transparent"),X.setAttribute("fill","transparent"),L.append(X),this.container.append(L),this._createPopup(X,n),this.container}}class N extends b{constructor(n){super(n),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class R extends y{constructor(n){super(n,{isRenderable:!!(n.data.hasPopup||n.data.titleObj?.str||n.data.contentsObj?.str||n.data.richText?.str),ignoreBorder:!0})}render(){return this.container.className="caretAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class H extends y{constructor(n){super(n,{isRenderable:!!(n.data.hasPopup||n.data.titleObj?.str||n.data.contentsObj?.str||n.data.richText?.str),ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const n=this.data,{width:h,height:d}=q(n.rect),L=this.svgFactory.create(h,d,!0);for(const k of n.inkLists){let X=[];for(const he of k)X.push(`${he.x-n.rect[0]},${n.rect[3]-he.y}`);X=X.join(" ");const Y=this.svgFactory.createElement(this.svgElementName);Y.setAttribute("points",X),Y.setAttribute("stroke-width",n.borderStyle.width||1),Y.setAttribute("stroke","transparent"),Y.setAttribute("fill","transparent"),this._createPopup(Y,n),L.append(Y)}return this.container.append(L),this.container}}class B extends y{constructor(n){super(n,{isRenderable:!!(n.data.hasPopup||n.data.titleObj?.str||n.data.contentsObj?.str||n.data.richText?.str),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("highlightAnnotation"):(this.container.className="highlightAnnotation",this.container)}}class U extends y{constructor(n){super(n,{isRenderable:!!(n.data.hasPopup||n.data.titleObj?.str||n.data.contentsObj?.str||n.data.richText?.str),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("underlineAnnotation"):(this.container.className="underlineAnnotation",this.container)}}class j extends y{constructor(n){super(n,{isRenderable:!!(n.data.hasPopup||n.data.titleObj?.str||n.data.contentsObj?.str||n.data.richText?.str),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.className="squigglyAnnotation",this.container)}}class ee extends y{constructor(n){super(n,{isRenderable:!!(n.data.hasPopup||n.data.titleObj?.str||n.data.contentsObj?.str||n.data.richText?.str),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.className="strikeoutAnnotation",this.container)}}class le extends y{constructor(n){super(n,{isRenderable:!!(n.data.hasPopup||n.data.titleObj?.str||n.data.contentsObj?.str||n.data.richText?.str),ignoreBorder:!0})}render(){return this.container.className="stampAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class V extends y{constructor(n){super(n,{isRenderable:!0});const{filename:h,content:d}=this.data.file;this.filename=(0,v.getFilenameFromUrl)(h),this.content=d,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,filename:h,content:d})}render(){this.container.className="fileAttachmentAnnotation";const n=document.createElement("div");return n.className="popupTriggerArea",n.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&(this.data.titleObj?.str||this.data.contentsObj?.str||this.data.richText)&&this._createPopup(n,this.data),this.container.append(n),this.container}_download(){this.downloadManager?.openOrDownloadData(this.container,this.content,this.filename)}}class g{static render(n){const{annotations:h,div:d,viewport:L,accessibilityManager:k}=n;_classStaticPrivateMethodGet(this,g,E).call(this,d,L);let X=0;for(const Y of h){if(Y.annotationType!==a.AnnotationType.POPUP){const{width:ie,height:ue}=q(Y.rect);if(ie<=0||ue<=0)continue}const he=W.create({data:Y,layer:d,page:n.page,viewport:L,linkService:n.linkService,downloadManager:n.downloadManager,imageResourcesPath:n.imageResourcesPath||"",renderForms:!1!==n.renderForms,svgFactory:new v.DOMSVGFactory,annotationStorage:n.annotationStorage||new F.AnnotationStorage,enableScripting:n.enableScripting,hasJSActions:n.hasJSActions,fieldObjects:n.fieldObjects,mouseState:n.mouseState||{isDown:!1}});if(he.isRenderable){const ie=he.render();if(Y.hidden&&(ie.style.visibility="hidden"),Array.isArray(ie))for(const ue of ie)ue.style.zIndex=X++,_classStaticPrivateMethodGet(g,g,l).call(g,ue,Y.id,d,k);else ie.style.zIndex=X++,he instanceof e?d.prepend(ie):_classStaticPrivateMethodGet(g,g,l).call(g,ie,Y.id,d,k)}}_classStaticPrivateMethodGet(this,g,T).call(this,d,n.annotationCanvasMap)}static update(n){const{annotationCanvasMap:h,div:d,viewport:L}=n;_classStaticPrivateMethodGet(this,g,E).call(this,d,L),_classStaticPrivateMethodGet(this,g,T).call(this,d,h),d.hidden=!1}}function l(w,n,h,d){const L=w.firstChild||w;L.id=`${v.AnnotationPrefix}${n}`,h.append(w),d?.moveElementInDOM(h,w,L,!1)}function E(w,{width:n,height:h,rotation:d}){const{style:L}=w,k=d%180!=0,X=Math.floor(n)+"px",Y=Math.floor(h)+"px";L.width=k?Y:X,L.height=k?X:Y,w.setAttribute("data-main-rotation",d)}function T(w,n){if(n){for(const[h,d]of n){const L=w.querySelector(`[data-annotation-id="${h}"]`);if(!L)continue;const{firstChild:k}=L;k?"CANVAS"===k.nodeName?k.replaceWith(d):k.before(d):L.append(d)}n.clear()}}r.AnnotationLayer=g},(Z,r)=>{function x(v){return Math.floor(255*Math.max(0,Math.min(1,v))).toString(16).padStart(2,"0")}Object.defineProperty(r,"__esModule",{value:!0}),r.ColorConverters=void 0,r.ColorConverters=class a{static CMYK_G([F,O,Q,M]){return["G",1-Math.min(1,.3*F+.59*Q+.11*O+M)]}static G_CMYK([F]){return["CMYK",0,0,0,1-F]}static G_RGB([F]){return["RGB",F,F,F]}static G_HTML([F]){const O=x(F);return`#${O}${O}${O}`}static RGB_G([F,O,Q]){return["G",.3*F+.59*O+.11*Q]}static RGB_HTML([F,O,Q]){return`#${x(F)}${x(O)}${x(Q)}`}static T_HTML(){return"#00000000"}static CMYK_RGB([F,O,Q,M]){return["RGB",1-Math.min(1,F+M),1-Math.min(1,Q+M),1-Math.min(1,O+M)]}static CMYK_HTML(F){const O=this.CMYK_RGB(F).slice(1);return this.RGB_HTML(O)}static RGB_CMYK([F,O,Q]){const M=1-F,C=1-O,G=1-Q;return["CMYK",M,C,G,Math.min(M,C,G)]}}},(Z,r,x)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.XfaLayer=void 0;var a=x(20);r.XfaLayer=class v{static setupStorage(O,Q,M,C,G){const q=C.getValue(Q,{value:null});switch(M.name){case"textarea":if(null!==q.value&&(O.textContent=q.value),"print"===G)break;O.addEventListener("input",W=>{C.setValue(Q,{value:W.target.value})});break;case"input":if("radio"===M.attributes.type||"checkbox"===M.attributes.type){if(q.value===M.attributes.xfaOn?O.setAttribute("checked",!0):q.value===M.attributes.xfaOff&&O.removeAttribute("checked"),"print"===G)break;O.addEventListener("change",W=>{C.setValue(Q,{value:W.target.getAttribute(W.target.checked?"xfaOn":"xfaOff")})})}else{if(null!==q.value&&O.setAttribute("value",q.value),"print"===G)break;O.addEventListener("input",W=>{C.setValue(Q,{value:W.target.value})})}break;case"select":if(null!==q.value)for(const W of M.children)W.attributes.value===q.value&&(W.attributes.selected=!0);O.addEventListener("input",W=>{const y=W.target.options;C.setValue(Q,{value:-1===y.selectedIndex?"":y[y.selectedIndex].value})})}}static setAttributes({html:O,element:Q,storage:M=null,intent:C,linkService:G}){const{attributes:q}=Q,W=O instanceof HTMLAnchorElement;"radio"===q.type&&(q.name=`${q.name}-${C}`);for(const[y,t]of Object.entries(q))if(null!=t)switch(y){case"class":t.length&&O.setAttribute(y,t.join(" "));break;case"dataId":break;case"id":O.setAttribute("data-element-id",t);break;case"style":Object.assign(O.style,t);break;case"textContent":O.textContent=t;break;default:(!W||"href"!==y&&"newWindow"!==y)&&O.setAttribute(y,t)}W&&G.addLinkAttributes(O,q.href,q.newWindow),M&&q.dataId&&this.setupStorage(O,q.dataId,Q,M)}static render(O){const Q=O.annotationStorage,M=O.linkService,C=O.xfaHtml,G=O.intent||"display",q=document.createElement(C.name);C.attributes&&this.setAttributes({html:q,element:C,intent:G,linkService:M});const W=[[C,-1,q]],y=O.div;if(y.append(q),O.viewport){const s=`matrix(${O.viewport.transform.join(",")})`;y.style.transform=s}"richText"!==G&&y.setAttribute("class","xfaLayer xfaFont");const t=[];for(;W.length>0;){const[s,_,P]=W.at(-1);if(_+1===s.children.length){W.pop();continue}const p=s.children[++W.at(-1)[1]];if(null===p)continue;const{name:A}=p;if("#text"===A){const i=document.createTextNode(p.value);t.push(i),P.append(i);continue}let u;if(u=p?.attributes?.xmlns?document.createElementNS(p.attributes.xmlns,A):document.createElement(A),P.append(u),p.attributes&&this.setAttributes({html:u,element:p,storage:Q,intent:G,linkService:M}),p.children&&p.children.length>0)W.push([p,-1,u]);else if(p.value){const i=document.createTextNode(p.value);a.XfaText.shouldBuildText(A)&&t.push(i),u.append(i)}}for(const s of y.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))s.setAttribute("readOnly",!0);return{textDivs:t}}static update(O){const Q=`matrix(${O.viewport.transform.join(",")})`;O.div.style.transform=Q,O.div.hidden=!1}}},(Z,r,x)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.TextLayerRenderTask=void 0,r.renderTextLayer=function p(A){const u=new P({textContent:A.textContent,textContentStream:A.textContentStream,container:A.container,viewport:A.viewport,textDivs:A.textDivs,textContentItemsStr:A.textContentItemsStr,enhanceTextSelection:A.enhanceTextSelection});return u._render(A.timeout),u};var a=x(1),v=x(8);const O=30,M=new Map,C=/^\s+$/g;function q(A,u,i,e){const o=document.createElement("span"),m=A._enhanceTextSelection?{angle:0,canvasWidth:0,hasText:""!==u.str,hasEOL:u.hasEOL,originalTransform:null,paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0,scale:1,fontSize:0}:{angle:0,canvasWidth:0,hasText:""!==u.str,hasEOL:u.hasEOL,fontSize:0};A._textDivs.push(o);const S=a.Util.transform(A._viewport.transform,u.transform);let f=Math.atan2(S[1],S[0]);const c=i[u.fontName];c.vertical&&(f+=Math.PI/2);const b=Math.hypot(S[2],S[3]),N=b*function G(A,u){const i=M.get(A);if(i)return i;u.save(),u.font=`30px ${A}`;const e=u.measureText("");let o=e.fontBoundingBoxAscent,m=Math.abs(e.fontBoundingBoxDescent);if(o){u.restore();const f=o/(o+m);return M.set(A,f),f}u.strokeStyle="red",u.clearRect(0,0,O,O),u.strokeText("g",0,0);let S=u.getImageData(0,0,O,O).data;m=0;for(let f=S.length-1-3;f>=0;f-=4)if(S[f]>0){m=Math.ceil(f/4/O);break}u.clearRect(0,0,O,O),u.strokeText("A",0,O),S=u.getImageData(0,0,O,O).data,o=0;for(let f=0,c=S.length;f<c;f+=4)if(S[f]>0){o=O-Math.floor(f/4/O);break}if(u.restore(),o){const f=o/(o+m);return M.set(A,f),f}return M.set(A,.8),.8}(c.fontFamily,e);let R,H;0===f?(R=S[4],H=S[5]-N):(R=S[4]+N*Math.sin(f),H=S[5]-N*Math.cos(f)),o.style.left=`${R}px`,o.style.top=`${H}px`,o.style.fontSize=`${b}px`,o.style.fontFamily=c.fontFamily,m.fontSize=b,o.setAttribute("role","presentation"),o.textContent=u.str,o.dir=u.dir,A._fontInspectorEnabled&&(o.dataset.fontName=u.fontName),0!==f&&(m.angle=f*(180/Math.PI));let B=!1;if(u.str.length>1||A._enhanceTextSelection&&C.test(u.str))B=!0;else if(" "!==u.str&&u.transform[0]!==u.transform[3]){const U=Math.abs(u.transform[0]),j=Math.abs(u.transform[3]);U!==j&&Math.max(U,j)/Math.min(U,j)>1.5&&(B=!0)}if(B&&(m.canvasWidth=c.vertical?u.height*A._viewport.scale:u.width*A._viewport.scale),A._textDivProperties.set(o,m),A._textContentStream&&A._layoutText(o),A._enhanceTextSelection&&m.hasText){let U=1,j=0;0!==f&&(U=Math.cos(f),j=Math.sin(f));const ee=(c.vertical?u.height:u.width)*A._viewport.scale,le=b;let V,g;0!==f?(V=[U,j,-j,U,R,H],g=a.Util.getAxialAlignedBoundingBox([0,0,ee,le],V)):g=[R,H,R+ee,H+le],A._bounds.push({left:g[0],top:g[1],right:g[2],bottom:g[3],div:o,size:[ee,le],m:V})}}function W(A){if(A._canceled)return;const u=A._textDivs,i=A._capability,e=u.length;if(e>1e5)return A._renderingDone=!0,void i.resolve();if(!A._textContentStream)for(let o=0;o<e;o++)A._layoutText(u[o]);A._renderingDone=!0,i.resolve()}function y(A,u,i){let e=0;for(let o=0;o<i;o++){const m=A[u++];m>0&&(e=e?Math.min(m,e):m)}return e}function _(A,u){u.sort(function(o,m){return o.x1-m.x1||o.index-m.index});const e=[{start:-1/0,end:1/0,boundary:{x1:-1/0,y1:-1/0,x2:0,y2:1/0,index:-1,x1New:0,x2New:0}}];for(const o of u){let m=0;for(;m<e.length&&e[m].end<=o.y1;)m++;let S=e.length-1;for(;S>=0&&e[S].start>=o.y2;)S--;let f,c,b,N,R=-1/0;for(b=m;b<=S;b++){let U;f=e[b],c=f.boundary,U=c.x2>o.x1?c.index>o.index?c.x1New:o.x1:void 0===c.x2New?(c.x2+o.x1)/2:c.x2New,U>R&&(R=U)}for(o.x1New=R,b=m;b<=S;b++)f=e[b],c=f.boundary,void 0===c.x2New?c.x2>o.x1?c.index>o.index&&(c.x2New=c.x2):c.x2New=R:c.x2New>R&&(c.x2New=Math.max(R,c.x2));const H=[];let B=null;for(b=m;b<=S;b++){f=e[b],c=f.boundary;const U=c.x2>o.x2?c:o;B===U?H.at(-1).end=f.end:(H.push({start:f.start,end:f.end,boundary:U}),B=U)}for(e[m].start<o.y1&&(H[0].start=o.y1,H.unshift({start:e[m].start,end:o.y1,boundary:e[m].boundary})),o.y2<e[S].end&&(H.at(-1).end=o.y2,H.push({start:o.y2,end:e[S].end,boundary:e[S].boundary})),b=m;b<=S;b++){if(f=e[b],c=f.boundary,void 0!==c.x2New)continue;let U=!1;for(N=m-1;!U&&N>=0&&e[N].start>=c.y1;N--)U=e[N].boundary===c;for(N=S+1;!U&&N<e.length&&e[N].end<=c.y2;N++)U=e[N].boundary===c;for(N=0;!U&&N<H.length;N++)U=H[N].boundary===c;U||(c.x2New=R)}Array.prototype.splice.apply(e,[m,S-m+1,...H])}for(const o of e){const m=o.boundary;void 0===m.x2New&&(m.x2New=Math.max(A,m.x2))}}class P{constructor({textContent:u,textContentStream:i,container:e,viewport:o,textDivs:m,textContentItemsStr:S,enhanceTextSelection:f}){f&&(0,v.deprecated)("The `enhanceTextSelection` functionality will be removed in the future."),this._textContent=u,this._textContentStream=i,this._container=e,this._document=e.ownerDocument,this._viewport=o,this._textDivs=m||[],this._textContentItemsStr=S||[],this._enhanceTextSelection=!!f,this._fontInspectorEnabled=!!globalThis.FontInspector?.enabled,this._reader=null,this._layoutTextLastFontSize=null,this._layoutTextLastFontFamily=null,this._layoutTextCtx=null,this._textDivProperties=new WeakMap,this._renderingDone=!1,this._canceled=!1,this._capability=(0,a.createPromiseCapability)(),this._renderTimer=null,this._bounds=[],this._devicePixelRatio=globalThis.devicePixelRatio||1,this._capability.promise.finally(()=>{this._enhanceTextSelection||(this._textDivProperties=null),this._layoutTextCtx&&(this._layoutTextCtx.canvas.width=0,this._layoutTextCtx.canvas.height=0,this._layoutTextCtx=null)}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new a.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),null!==this._renderTimer&&(clearTimeout(this._renderTimer),this._renderTimer=null),this._capability.reject(new Error("TextLayer task cancelled."))}_processItems(u,i){for(let e=0,o=u.length;e<o;e++)if(void 0!==u[e].str)this._textContentItemsStr.push(u[e].str),q(this,u[e],i,this._layoutTextCtx);else if("beginMarkedContentProps"===u[e].type||"beginMarkedContent"===u[e].type){const m=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),null!==u[e].id&&this._container.setAttribute("id",`${u[e].id}`),m.append(this._container)}else"endMarkedContent"===u[e].type&&(this._container=this._container.parentNode)}_layoutText(u){const i=this._textDivProperties.get(u);let e="";if(0!==i.canvasWidth&&i.hasText){const{fontFamily:o}=u.style,{fontSize:m}=i;(m!==this._layoutTextLastFontSize||o!==this._layoutTextLastFontFamily)&&(this._layoutTextCtx.font=`${m*this._devicePixelRatio}px ${o}`,this._layoutTextLastFontSize=m,this._layoutTextLastFontFamily=o);const{width:S}=this._layoutTextCtx.measureText(u.textContent);if(S>0){const f=this._devicePixelRatio*i.canvasWidth/S;this._enhanceTextSelection&&(i.scale=f),e=`scaleX(${f})`}}if(0!==i.angle&&(e=`rotate(${i.angle}deg) ${e}`),e.length>0&&(this._enhanceTextSelection&&(i.originalTransform=e),u.style.transform=e),i.hasText&&this._container.append(u),i.hasEOL){const o=document.createElement("br");o.setAttribute("role","presentation"),this._container.append(o)}}_render(u=0){const i=(0,a.createPromiseCapability)();let e=Object.create(null);const o=this._document.createElement("canvas");if(o.height=o.width=O,this._layoutTextCtx=o.getContext("2d",{alpha:!1}),this._textContent)this._processItems(this._textContent.items,this._textContent.styles),i.resolve();else{if(!this._textContentStream)throw new Error('Neither "textContent" nor "textContentStream" parameters specified.');{const m=()=>{this._reader.read().then(({value:S,done:f})=>{f?i.resolve():(Object.assign(e,S.styles),this._processItems(S.items,e),m())},i.reject)};this._reader=this._textContentStream.getReader(),m()}}i.promise.then(()=>{e=null,u?this._renderTimer=setTimeout(()=>{W(this),this._renderTimer=null},u):W(this)},this._capability.reject)}expandTextDivs(u=!1){if(!this._enhanceTextSelection||!this._renderingDone)return;null!==this._bounds&&(function t(A){const u=A._bounds,i=A._viewport,e=function s(A,u,i){const e=i.map(function(m,S){return{x1:m.left,y1:m.top,x2:m.right,y2:m.bottom,index:S,x1New:void 0,x2New:void 0}});_(A,e);const o=new Array(i.length);for(const m of e)o[m.index]={left:m.x1New,top:0,right:m.x2New,bottom:0};i.map(function(m,S){const f=o[S],c=e[S];c.x1=m.top,c.y1=A-f.right,c.x2=m.bottom,c.y2=A-f.left,c.index=S,c.x1New=void 0,c.x2New=void 0}),_(u,e);for(const m of e){const S=m.index;o[S].top=m.x1New,o[S].bottom=m.x2New}return o}(i.width,i.height,u);for(let o=0;o<e.length;o++){const m=u[o].div,S=A._textDivProperties.get(m);if(0===S.angle){S.paddingLeft=u[o].left-e[o].left,S.paddingTop=u[o].top-e[o].top,S.paddingRight=e[o].right-u[o].right,S.paddingBottom=e[o].bottom-u[o].bottom,A._textDivProperties.set(m,S);continue}const f=e[o],c=u[o],b=c.m,N=b[0],R=b[1],H=[[0,0],[0,c.size[1]],[c.size[0],0],c.size],B=new Float64Array(64);for(let j=0,ee=H.length;j<ee;j++){const le=a.Util.applyTransform(H[j],b);B[j+0]=N&&(f.left-le[0])/N,B[j+4]=R&&(f.top-le[1])/R,B[j+8]=N&&(f.right-le[0])/N,B[j+12]=R&&(f.bottom-le[1])/R,B[j+16]=R&&(f.left-le[0])/-R,B[j+20]=N&&(f.top-le[1])/N,B[j+24]=R&&(f.right-le[0])/-R,B[j+28]=N&&(f.bottom-le[1])/N,B[j+32]=N&&(f.left-le[0])/-N,B[j+36]=R&&(f.top-le[1])/-R,B[j+40]=N&&(f.right-le[0])/-N,B[j+44]=R&&(f.bottom-le[1])/-R,B[j+48]=R&&(f.left-le[0])/R,B[j+52]=N&&(f.top-le[1])/-N,B[j+56]=R&&(f.right-le[0])/R,B[j+60]=N&&(f.bottom-le[1])/-N}const U=1+Math.min(Math.abs(N),Math.abs(R));S.paddingLeft=y(B,32,16)/U,S.paddingTop=y(B,48,16)/U,S.paddingRight=y(B,0,16)/U,S.paddingBottom=y(B,16,16)/U,A._textDivProperties.set(m,S)}}(this),this._bounds=null);const i=[],e=[];for(let o=0,m=this._textDivs.length;o<m;o++){const S=this._textDivs[o],f=this._textDivProperties.get(S);f.hasText&&(u?(i.length=0,e.length=0,f.originalTransform&&i.push(f.originalTransform),f.paddingTop>0?(e.push(`${f.paddingTop}px`),i.push(`translateY(${-f.paddingTop}px)`)):e.push(0),e.push(f.paddingRight>0?f.paddingRight/f.scale+"px":0),e.push(f.paddingBottom>0?`${f.paddingBottom}px`:0),f.paddingLeft>0?(e.push(f.paddingLeft/f.scale+"px"),i.push(`translateX(${-f.paddingLeft/f.scale}px)`)):e.push(0),S.style.padding=e.join(" "),i.length&&(S.style.transform=i.join(" "))):(S.style.padding=null,S.style.transform=f.originalTransform))}}}r.TextLayerRenderTask=P},(Z,r,x)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.SVGGraphics=void 0;var a=x(8),v=x(1),F=x(3);let O=class{constructor(){(0,v.unreachable)("Not implemented: SVGGraphics")}};r.SVGGraphics=O;{let s=function(i){let e=[];const o=[];for(const m of i)"save"!==m.fn?"restore"===m.fn?e=o.pop():e.push(m):(e.push({fnId:92,fn:"group",items:[]}),o.push(e),e=e.at(-1).items);return e},_=function(i){if(Number.isInteger(i))return i.toString();const e=i.toFixed(10);let o=e.length-1;if("0"!==e[o])return e;do{o--}while("0"===e[o]);return e.substring(0,"."===e[o]?o:o+1)},P=function(i){if(0===i[4]&&0===i[5]){if(0===i[1]&&0===i[2])return 1===i[0]&&1===i[3]?"":`scale(${_(i[0])} ${_(i[3])})`;if(i[0]===i[3]&&i[1]===-i[2]){const e=180*Math.acos(i[0])/Math.PI;return`rotate(${_(e)})`}}else if(1===i[0]&&0===i[1]&&0===i[2]&&1===i[3])return`translate(${_(i[4])} ${_(i[5])})`;return`matrix(${_(i[0])} ${_(i[1])} ${_(i[2])} ${_(i[3])} ${_(i[4])} ${_(i[5])})`};const Q={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},M="http://www.w3.org/XML/1998/namespace",C="http://www.w3.org/1999/xlink",G=["butt","round","square"],q=["miter","round","bevel"],W=function(i,e="",o=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!o)return URL.createObjectURL(new Blob([i],{type:e}));const m="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let S=`data:${e};base64,`;for(let f=0,c=i.length;f<c;f+=3){const b=255&i[f],N=255&i[f+1],R=255&i[f+2];S+=m[b>>2]+m[(3&b)<<4|N>>4]+m[f+1<c?(15&N)<<2|R>>6:64]+m[f+2<c?63&R:64]}return S},y=function(){const i=new Uint8Array([137,80,78,71,13,10,26,10]),o=new Int32Array(256);for(let R=0;R<256;R++){let H=R;for(let B=0;B<8;B++)H=1&H?3988292384^H>>1&2147483647:H>>1&2147483647;o[R]=H}function S(R,H,B,U){let j=U;const ee=H.length;B[j]=ee>>24&255,B[j+1]=ee>>16&255,B[j+2]=ee>>8&255,B[j+3]=255&ee,j+=4,B[j]=255&R.charCodeAt(0),B[j+1]=255&R.charCodeAt(1),B[j+2]=255&R.charCodeAt(2),B[j+3]=255&R.charCodeAt(3),j+=4,B.set(H,j),j+=H.length;const le=function m(R,H,B){let U=-1;for(let j=H;j<B;j++)U=U>>>8^o[255&(U^R[j])];return-1^U}(B,U+4,j);B[j]=le>>24&255,B[j+1]=le>>16&255,B[j+2]=le>>8&255,B[j+3]=255&le}function b(R){let H=R.length;const B=65535,U=Math.ceil(H/B),j=new Uint8Array(2+H+5*U+4);let ee=0;j[ee++]=120,j[ee++]=156;let le=0;for(;H>B;)j[ee++]=0,j[ee++]=255,j[ee++]=255,j[ee++]=0,j[ee++]=0,j.set(R.subarray(le,le+B),ee),ee+=B,le+=B,H-=B;j[ee++]=1,j[ee++]=255&H,j[ee++]=H>>8&255,j[ee++]=255&~H,j[ee++]=(65535&~H)>>8&255,j.set(R.subarray(le),ee),ee+=R.length-le;const V=function f(R,H,B){let U=1,j=0;for(let ee=H;ee<B;++ee)U=(U+(255&R[ee]))%65521,j=(j+U)%65521;return j<<16|U}(R,0,R.length);return j[ee++]=V>>24&255,j[ee++]=V>>16&255,j[ee++]=V>>8&255,j[ee++]=255&V,j}return function(H,B,U){return function N(R,H,B,U){const j=R.width,ee=R.height;let le,V,g;const l=R.data;switch(H){case v.ImageKind.GRAYSCALE_1BPP:V=0,le=1,g=j+7>>3;break;case v.ImageKind.RGB_24BPP:V=2,le=8,g=3*j;break;case v.ImageKind.RGBA_32BPP:V=6,le=8,g=4*j;break;default:throw new Error("invalid format")}const E=new Uint8Array((1+g)*ee);let T=0,w=0;for(let X=0;X<ee;++X)E[T++]=0,E.set(l.subarray(w,w+g),T),w+=g,T+=g;if(H===v.ImageKind.GRAYSCALE_1BPP&&U){T=0;for(let X=0;X<ee;X++){T++;for(let Y=0;Y<g;Y++)E[T++]^=255}}const n=new Uint8Array([j>>24&255,j>>16&255,j>>8&255,255&j,ee>>24&255,ee>>16&255,ee>>8&255,255&ee,le,V,0,0,0]),h=function c(R){if(!F.isNodeJS)return b(R);try{let H;H=parseInt(process.versions.node)>=8?R:Buffer.from(R);const B=__webpack_require__(2258).deflateSync(H,{level:9});return B instanceof Uint8Array?B:new Uint8Array(B)}catch(H){(0,v.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+H)}return b(R)}(E),L=new Uint8Array(i.length+36+n.length+h.length);let k=0;return L.set(i,k),k+=i.length,S("IHDR",n,L,k),k+=12+n.length,S("IDATA",h,L,k),k+=12+h.length,S("IEND",new Uint8Array(0),L,k),W(L,"image/png",B)}(H,void 0===H.kind?v.ImageKind.GRAYSCALE_1BPP:H.kind,B,U)}}();class t{constructor(){this.fontSizeScale=1,this.fontWeight=Q.fontWeight,this.fontSize=0,this.textMatrix=v.IDENTITY_MATRIX,this.fontMatrix=v.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=v.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=Q.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(e,o){this.x=e,this.y=o}}let p=0,A=0,u=0;r.SVGGraphics=O=class{constructor(i,e,o=!1){(0,a.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new a.DOMSVGFactory,this.current=new t,this.transformMatrix=v.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=i,this.objs=e,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!o,this._operatorIdMapping=[];for(const m in v.OPS)this._operatorIdMapping[v.OPS[m]]=m}save(){this.transformStack.push(this.transformMatrix);const i=this.current;this.extraStack.push(i),this.current=i.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(i){this.save(),this.executeOpTree(i),this.restore()}loadDependencies(i){const e=i.fnArray,o=i.argsArray;for(let m=0,S=e.length;m<S;m++)if(e[m]===v.OPS.dependency)for(const f of o[m]){const c=f.startsWith("g_")?this.commonObjs:this.objs,b=new Promise(N=>{c.get(f,N)});this.current.dependencies.push(b)}return Promise.all(this.current.dependencies)}transform(i,e,o,m,S,f){this.transformMatrix=v.Util.transform(this.transformMatrix,[i,e,o,m,S,f]),this.tgrp=null}getSVG(i,e){this.viewport=e;const o=this._initialize(e);return this.loadDependencies(i).then(()=>(this.transformMatrix=v.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(i)),o))}convertOpList(i){const e=this._operatorIdMapping,o=i.argsArray,m=i.fnArray,S=[];for(let f=0,c=m.length;f<c;f++){const b=m[f];S.push({fnId:b,fn:e[b],args:o[f]})}return s(S)}executeOpTree(i){for(const e of i){const o=e.fn,S=e.args;switch(0|e.fnId){case v.OPS.beginText:this.beginText();break;case v.OPS.dependency:break;case v.OPS.setLeading:this.setLeading(S);break;case v.OPS.setLeadingMoveText:this.setLeadingMoveText(S[0],S[1]);break;case v.OPS.setFont:this.setFont(S);break;case v.OPS.showText:case v.OPS.showSpacedText:this.showText(S[0]);break;case v.OPS.endText:this.endText();break;case v.OPS.moveText:this.moveText(S[0],S[1]);break;case v.OPS.setCharSpacing:this.setCharSpacing(S[0]);break;case v.OPS.setWordSpacing:this.setWordSpacing(S[0]);break;case v.OPS.setHScale:this.setHScale(S[0]);break;case v.OPS.setTextMatrix:this.setTextMatrix(S[0],S[1],S[2],S[3],S[4],S[5]);break;case v.OPS.setTextRise:this.setTextRise(S[0]);break;case v.OPS.setTextRenderingMode:this.setTextRenderingMode(S[0]);break;case v.OPS.setLineWidth:this.setLineWidth(S[0]);break;case v.OPS.setLineJoin:this.setLineJoin(S[0]);break;case v.OPS.setLineCap:this.setLineCap(S[0]);break;case v.OPS.setMiterLimit:this.setMiterLimit(S[0]);break;case v.OPS.setFillRGBColor:this.setFillRGBColor(S[0],S[1],S[2]);break;case v.OPS.setStrokeRGBColor:this.setStrokeRGBColor(S[0],S[1],S[2]);break;case v.OPS.setStrokeColorN:this.setStrokeColorN(S);break;case v.OPS.setFillColorN:this.setFillColorN(S);break;case v.OPS.shadingFill:this.shadingFill(S[0]);break;case v.OPS.setDash:this.setDash(S[0],S[1]);break;case v.OPS.setRenderingIntent:this.setRenderingIntent(S[0]);break;case v.OPS.setFlatness:this.setFlatness(S[0]);break;case v.OPS.setGState:this.setGState(S[0]);break;case v.OPS.fill:this.fill();break;case v.OPS.eoFill:this.eoFill();break;case v.OPS.stroke:this.stroke();break;case v.OPS.fillStroke:this.fillStroke();break;case v.OPS.eoFillStroke:this.eoFillStroke();break;case v.OPS.clip:this.clip("nonzero");break;case v.OPS.eoClip:this.clip("evenodd");break;case v.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case v.OPS.paintImageXObject:this.paintImageXObject(S[0]);break;case v.OPS.paintInlineImageXObject:this.paintInlineImageXObject(S[0]);break;case v.OPS.paintImageMaskXObject:this.paintImageMaskXObject(S[0]);break;case v.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(S[0],S[1]);break;case v.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case v.OPS.closePath:this.closePath();break;case v.OPS.closeStroke:this.closeStroke();break;case v.OPS.closeFillStroke:this.closeFillStroke();break;case v.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case v.OPS.nextLine:this.nextLine();break;case v.OPS.transform:this.transform(S[0],S[1],S[2],S[3],S[4],S[5]);break;case v.OPS.constructPath:this.constructPath(S[0],S[1]);break;case v.OPS.endPath:this.endPath();break;case 92:this.group(e.items);break;default:(0,v.warn)(`Unimplemented operator ${o}`)}}}setWordSpacing(i){this.current.wordSpacing=i}setCharSpacing(i){this.current.charSpacing=i}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(i,e,o,m,S,f){const c=this.current;c.textMatrix=c.lineMatrix=[i,e,o,m,S,f],c.textMatrixScale=Math.hypot(i,e),c.x=c.lineX=0,c.y=c.lineY=0,c.xcoords=[],c.ycoords=[],c.tspan=this.svgFactory.createElement("svg:tspan"),c.tspan.setAttributeNS(null,"font-family",c.fontFamily),c.tspan.setAttributeNS(null,"font-size",`${_(c.fontSize)}px`),c.tspan.setAttributeNS(null,"y",_(-c.y)),c.txtElement=this.svgFactory.createElement("svg:text"),c.txtElement.append(c.tspan)}beginText(){const i=this.current;i.x=i.lineX=0,i.y=i.lineY=0,i.textMatrix=v.IDENTITY_MATRIX,i.lineMatrix=v.IDENTITY_MATRIX,i.textMatrixScale=1,i.tspan=this.svgFactory.createElement("svg:tspan"),i.txtElement=this.svgFactory.createElement("svg:text"),i.txtgrp=this.svgFactory.createElement("svg:g"),i.xcoords=[],i.ycoords=[]}moveText(i,e){const o=this.current;o.x=o.lineX+=i,o.y=o.lineY+=e,o.xcoords=[],o.ycoords=[],o.tspan=this.svgFactory.createElement("svg:tspan"),o.tspan.setAttributeNS(null,"font-family",o.fontFamily),o.tspan.setAttributeNS(null,"font-size",`${_(o.fontSize)}px`),o.tspan.setAttributeNS(null,"y",_(-o.y))}showText(i){const e=this.current,o=e.font,m=e.fontSize;if(0===m)return;const S=e.fontSizeScale,f=e.charSpacing,c=e.wordSpacing,b=e.fontDirection,N=e.textHScale*b,R=o.vertical,H=R?1:-1,B=o.defaultVMetrics,U=m*e.fontMatrix[0];let j=0;for(const V of i){if(null===V){j+=b*c;continue}if("number"==typeof V){j+=H*V*m/1e3;continue}const g=(V.isSpace?c:0)+f,l=V.fontChar;let E,T,n,w=V.width;if(R){let h;const d=V.vmetric||B;h=V.vmetric?d[1]:.5*w,h=-h*U,w=d?-d[0]:w,E=h/S,T=(j+d[2]*U)/S}else E=j/S,T=0;(V.isInFont||o.missingFile)&&(e.xcoords.push(e.x+E),R&&e.ycoords.push(-e.y+T),e.tspan.textContent+=l),n=R?w*U-g*b:w*U+g*b,j+=n}e.tspan.setAttributeNS(null,"x",e.xcoords.map(_).join(" ")),e.tspan.setAttributeNS(null,"y",R?e.ycoords.map(_).join(" "):_(-e.y)),R?e.y-=j:e.x+=j*N,e.tspan.setAttributeNS(null,"font-family",e.fontFamily),e.tspan.setAttributeNS(null,"font-size",`${_(e.fontSize)}px`),e.fontStyle!==Q.fontStyle&&e.tspan.setAttributeNS(null,"font-style",e.fontStyle),e.fontWeight!==Q.fontWeight&&e.tspan.setAttributeNS(null,"font-weight",e.fontWeight);const ee=e.textRenderingMode&v.TextRenderingMode.FILL_STROKE_MASK;ee===v.TextRenderingMode.FILL||ee===v.TextRenderingMode.FILL_STROKE?(e.fillColor!==Q.fillColor&&e.tspan.setAttributeNS(null,"fill",e.fillColor),e.fillAlpha<1&&e.tspan.setAttributeNS(null,"fill-opacity",e.fillAlpha)):e.tspan.setAttributeNS(null,"fill",e.textRenderingMode===v.TextRenderingMode.ADD_TO_PATH?"transparent":"none"),(ee===v.TextRenderingMode.STROKE||ee===v.TextRenderingMode.FILL_STROKE)&&this._setStrokeAttributes(e.tspan,1/(e.textMatrixScale||1));let le=e.textMatrix;0!==e.textRise&&(le=le.slice(),le[5]+=e.textRise),e.txtElement.setAttributeNS(null,"transform",`${P(le)} scale(${_(N)}, -1)`),e.txtElement.setAttributeNS(M,"xml:space","preserve"),e.txtElement.append(e.tspan),e.txtgrp.append(e.txtElement),this._ensureTransformGroup().append(e.txtElement)}setLeadingMoveText(i,e){this.setLeading(-e),this.moveText(i,e)}addFontStyle(i){if(!i.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const e=W(i.data,i.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${i.loadedName}"; src: url(${e}); }\n`}setFont(i){const e=this.current,o=this.commonObjs.get(i[0]);let m=i[1];e.font=o,this.embedFonts&&!o.missingFile&&!this.embeddedFonts[o.loadedName]&&(this.addFontStyle(o),this.embeddedFonts[o.loadedName]=o),e.fontMatrix=o.fontMatrix||v.FONT_IDENTITY_MATRIX;let S="normal";o.black?S="900":o.bold&&(S="bold");const f=o.italic?"italic":"normal";m<0?(m=-m,e.fontDirection=-1):e.fontDirection=1,e.fontSize=m,e.fontFamily=o.loadedName,e.fontWeight=S,e.fontStyle=f,e.tspan=this.svgFactory.createElement("svg:tspan"),e.tspan.setAttributeNS(null,"y",_(-e.y)),e.xcoords=[],e.ycoords=[]}endText(){const i=this.current;i.textRenderingMode&v.TextRenderingMode.ADD_TO_PATH_FLAG&&i.txtElement?.hasChildNodes()&&(i.element=i.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(i){i>0&&(this.current.lineWidth=i)}setLineCap(i){this.current.lineCap=G[i]}setLineJoin(i){this.current.lineJoin=q[i]}setMiterLimit(i){this.current.miterLimit=i}setStrokeAlpha(i){this.current.strokeAlpha=i}setStrokeRGBColor(i,e,o){this.current.strokeColor=v.Util.makeHexColor(i,e,o)}setFillAlpha(i){this.current.fillAlpha=i}setFillRGBColor(i,e,o){this.current.fillColor=v.Util.makeHexColor(i,e,o),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(i){this.current.strokeColor=this._makeColorN_Pattern(i)}setFillColorN(i){this.current.fillColor=this._makeColorN_Pattern(i)}shadingFill(i){const e=this.viewport.width,o=this.viewport.height,m=v.Util.inverseTransform(this.transformMatrix),S=v.Util.applyTransform([0,0],m),f=v.Util.applyTransform([0,o],m),c=v.Util.applyTransform([e,0],m),b=v.Util.applyTransform([e,o],m),N=Math.min(S[0],f[0],c[0],b[0]),R=Math.min(S[1],f[1],c[1],b[1]),H=Math.max(S[0],f[0],c[0],b[0]),B=Math.max(S[1],f[1],c[1],b[1]),U=this.svgFactory.createElement("svg:rect");U.setAttributeNS(null,"x",N),U.setAttributeNS(null,"y",R),U.setAttributeNS(null,"width",H-N),U.setAttributeNS(null,"height",B-R),U.setAttributeNS(null,"fill",this._makeShadingPattern(i)),this.current.fillAlpha<1&&U.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(U)}_makeColorN_Pattern(i){return"TilingPattern"===i[0]?this._makeTilingPattern(i):this._makeShadingPattern(i)}_makeTilingPattern(i){const e=i[1],o=i[2],m=i[3]||v.IDENTITY_MATRIX,[S,f,c,b]=i[4],N=i[5],R=i[6],H=i[7],B="shading"+u++,[U,j,ee,le]=v.Util.normalizeRect([...v.Util.applyTransform([S,f],m),...v.Util.applyTransform([c,b],m)]),[V,g]=v.Util.singularValueDecompose2dScale(m),l=N*V,E=R*g,T=this.svgFactory.createElement("svg:pattern");T.setAttributeNS(null,"id",B),T.setAttributeNS(null,"patternUnits","userSpaceOnUse"),T.setAttributeNS(null,"width",l),T.setAttributeNS(null,"height",E),T.setAttributeNS(null,"x",`${U}`),T.setAttributeNS(null,"y",`${j}`);const w=this.svg,n=this.transformMatrix,h=this.current.fillColor,d=this.current.strokeColor,L=this.svgFactory.create(ee-U,le-j);if(this.svg=L,this.transformMatrix=m,2===H){const k=v.Util.makeHexColor(...e);this.current.fillColor=k,this.current.strokeColor=k}return this.executeOpTree(this.convertOpList(o)),this.svg=w,this.transformMatrix=n,this.current.fillColor=h,this.current.strokeColor=d,T.append(L.childNodes[0]),this.defs.append(T),`url(#${B})`}_makeShadingPattern(i){switch("string"==typeof i&&(i=this.objs.get(i)),i[0]){case"RadialAxial":const e="shading"+u++,o=i[3];let m;switch(i[1]){case"axial":const S=i[4],f=i[5];m=this.svgFactory.createElement("svg:linearGradient"),m.setAttributeNS(null,"id",e),m.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),m.setAttributeNS(null,"x1",S[0]),m.setAttributeNS(null,"y1",S[1]),m.setAttributeNS(null,"x2",f[0]),m.setAttributeNS(null,"y2",f[1]);break;case"radial":const c=i[4],b=i[5],N=i[6],R=i[7];m=this.svgFactory.createElement("svg:radialGradient"),m.setAttributeNS(null,"id",e),m.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),m.setAttributeNS(null,"cx",b[0]),m.setAttributeNS(null,"cy",b[1]),m.setAttributeNS(null,"r",R),m.setAttributeNS(null,"fx",c[0]),m.setAttributeNS(null,"fy",c[1]),m.setAttributeNS(null,"fr",N);break;default:throw new Error(`Unknown RadialAxial type: ${i[1]}`)}for(const S of o){const f=this.svgFactory.createElement("svg:stop");f.setAttributeNS(null,"offset",S[0]),f.setAttributeNS(null,"stop-color",S[1]),m.append(f)}return this.defs.append(m),`url(#${e})`;case"Mesh":return(0,v.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${i[0]}`)}}setDash(i,e){this.current.dashArray=i,this.current.dashPhase=e}constructPath(i,e){const o=this.current;let m=o.x,S=o.y,f=[],c=0;for(const b of i)switch(0|b){case v.OPS.rectangle:m=e[c++],S=e[c++];const H=m+e[c++],B=S+e[c++];f.push("M",_(m),_(S),"L",_(H),_(S),"L",_(H),_(B),"L",_(m),_(B),"Z");break;case v.OPS.moveTo:m=e[c++],S=e[c++],f.push("M",_(m),_(S));break;case v.OPS.lineTo:m=e[c++],S=e[c++],f.push("L",_(m),_(S));break;case v.OPS.curveTo:m=e[c+4],S=e[c+5],f.push("C",_(e[c]),_(e[c+1]),_(e[c+2]),_(e[c+3]),_(m),_(S)),c+=6;break;case v.OPS.curveTo2:f.push("C",_(m),_(S),_(e[c]),_(e[c+1]),_(e[c+2]),_(e[c+3])),m=e[c+2],S=e[c+3],c+=4;break;case v.OPS.curveTo3:m=e[c+2],S=e[c+3],f.push("C",_(e[c]),_(e[c+1]),_(m),_(S),_(m),_(S)),c+=4;break;case v.OPS.closePath:f.push("Z")}f=f.join(" "),o.path&&i.length>0&&i[0]!==v.OPS.rectangle&&i[0]!==v.OPS.moveTo?f=o.path.getAttributeNS(null,"d")+f:(o.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(o.path)),o.path.setAttributeNS(null,"d",f),o.path.setAttributeNS(null,"fill","none"),o.element=o.path,o.setCurrentPoint(m,S)}endPath(){const i=this.current;if(i.path=null,!this.pendingClip)return;if(!i.element)return void(this.pendingClip=null);const e="clippath"+p++,o=this.svgFactory.createElement("svg:clipPath");o.setAttributeNS(null,"id",e),o.setAttributeNS(null,"transform",P(this.transformMatrix));const m=i.element.cloneNode(!0);if(m.setAttributeNS(null,"clip-rule","evenodd"===this.pendingClip?"evenodd":"nonzero"),this.pendingClip=null,o.append(m),this.defs.append(o),i.activeClipUrl){i.clipGroup=null;for(const S of this.extraStack)S.clipGroup=null;o.setAttributeNS(null,"clip-path",i.activeClipUrl)}i.activeClipUrl=`url(#${e})`,this.tgrp=null}clip(i){this.pendingClip=i}closePath(){const i=this.current;if(i.path){const e=`${i.path.getAttributeNS(null,"d")}Z`;i.path.setAttributeNS(null,"d",e)}}setLeading(i){this.current.leading=-i}setTextRise(i){this.current.textRise=i}setTextRenderingMode(i){this.current.textRenderingMode=i}setHScale(i){this.current.textHScale=i/100}setRenderingIntent(i){}setFlatness(i){}setGState(i){for(const[e,o]of i)switch(e){case"LW":this.setLineWidth(o);break;case"LC":this.setLineCap(o);break;case"LJ":this.setLineJoin(o);break;case"ML":this.setMiterLimit(o);break;case"D":this.setDash(o[0],o[1]);break;case"RI":this.setRenderingIntent(o);break;case"FL":this.setFlatness(o);break;case"Font":this.setFont(o);break;case"CA":this.setStrokeAlpha(o);break;case"ca":this.setFillAlpha(o);break;default:(0,v.warn)(`Unimplemented graphic state operator ${e}`)}}fill(){const i=this.current;i.element&&(i.element.setAttributeNS(null,"fill",i.fillColor),i.element.setAttributeNS(null,"fill-opacity",i.fillAlpha),this.endPath())}stroke(){const i=this.current;i.element&&(this._setStrokeAttributes(i.element),i.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(i,e=1){const o=this.current;let m=o.dashArray;1!==e&&m.length>0&&(m=m.map(function(S){return e*S})),i.setAttributeNS(null,"stroke",o.strokeColor),i.setAttributeNS(null,"stroke-opacity",o.strokeAlpha),i.setAttributeNS(null,"stroke-miterlimit",_(o.miterLimit)),i.setAttributeNS(null,"stroke-linecap",o.lineCap),i.setAttributeNS(null,"stroke-linejoin",o.lineJoin),i.setAttributeNS(null,"stroke-width",_(e*o.lineWidth)+"px"),i.setAttributeNS(null,"stroke-dasharray",m.map(_).join(" ")),i.setAttributeNS(null,"stroke-dashoffset",_(e*o.dashPhase)+"px")}eoFill(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const i=this.svgFactory.createElement("svg:rect");i.setAttributeNS(null,"x","0"),i.setAttributeNS(null,"y","0"),i.setAttributeNS(null,"width","1px"),i.setAttributeNS(null,"height","1px"),i.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(i)}paintImageXObject(i){const e=i.startsWith("g_")?this.commonObjs.get(i):this.objs.get(i);e?this.paintInlineImageXObject(e):(0,v.warn)(`Dependent image with object ID ${i} is not ready yet`)}paintInlineImageXObject(i,e){const o=i.width,m=i.height,S=y(i,this.forceDataSchema,!!e),f=this.svgFactory.createElement("svg:rect");f.setAttributeNS(null,"x","0"),f.setAttributeNS(null,"y","0"),f.setAttributeNS(null,"width",_(o)),f.setAttributeNS(null,"height",_(m)),this.current.element=f,this.clip("nonzero");const c=this.svgFactory.createElement("svg:image");c.setAttributeNS(C,"xlink:href",S),c.setAttributeNS(null,"x","0"),c.setAttributeNS(null,"y",_(-m)),c.setAttributeNS(null,"width",_(o)+"px"),c.setAttributeNS(null,"height",_(m)+"px"),c.setAttributeNS(null,"transform",`scale(${_(1/o)} ${_(-1/m)})`),e?e.append(c):this._ensureTransformGroup().append(c)}paintImageMaskXObject(i){const e=this.current,o=i.width,m=i.height,S=e.fillColor;e.maskId="mask"+A++;const f=this.svgFactory.createElement("svg:mask");f.setAttributeNS(null,"id",e.maskId);const c=this.svgFactory.createElement("svg:rect");c.setAttributeNS(null,"x","0"),c.setAttributeNS(null,"y","0"),c.setAttributeNS(null,"width",_(o)),c.setAttributeNS(null,"height",_(m)),c.setAttributeNS(null,"fill",S),c.setAttributeNS(null,"mask",`url(#${e.maskId})`),this.defs.append(f),this._ensureTransformGroup().append(c),this.paintInlineImageXObject(i,f)}paintFormXObjectBegin(i,e){if(Array.isArray(i)&&6===i.length&&this.transform(i[0],i[1],i[2],i[3],i[4],i[5]),e){const o=e[2]-e[0],m=e[3]-e[1],S=this.svgFactory.createElement("svg:rect");S.setAttributeNS(null,"x",e[0]),S.setAttributeNS(null,"y",e[1]),S.setAttributeNS(null,"width",_(o)),S.setAttributeNS(null,"height",_(m)),this.current.element=S,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(i){const e=this.svgFactory.create(i.width,i.height),o=this.svgFactory.createElement("svg:defs");e.append(o),this.defs=o;const m=this.svgFactory.createElement("svg:g");return m.setAttributeNS(null,"transform",P(i.transform)),e.append(m),this.svg=m,e}_ensureClipGroup(){if(!this.current.clipGroup){const i=this.svgFactory.createElement("svg:g");i.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(i),this.current.clipGroup=i}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",P(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}}},(Z,r,x)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.PDFNodeStream=void 0;var a=x(1),v=x(33);const F=__webpack_require__(172),O=__webpack_require__(2001),Q=__webpack_require__(3779),M=__webpack_require__(6558),C=/^file:\/\/\/[a-zA-Z]:\//;r.PDFNodeStream=class q{constructor(u){this.source=u,this.url=function G(A){const u=M.parse(A);return"file:"===u.protocol||u.host?u:/^[a-z]:[/\\]/i.test(A)?M.parse(`file:///${A}`):(u.host||(u.protocol="file:"),u)}(u.url),this.isHttp="http:"===this.url.protocol||"https:"===this.url.protocol,this.isFsUrl="file:"===this.url.protocol,this.httpHeaders=this.isHttp&&u.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,a.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new P(this):new s(this),this._fullRequestReader}getRangeReader(u,i){if(i<=this._progressiveDataLength)return null;const e=this.isFsUrl?new p(this,u,i):new _(this,u,i);return this._rangeRequestReaders.push(e),e}cancelAllRequests(u){this._fullRequestReader&&this._fullRequestReader.cancel(u);for(const i of this._rangeRequestReaders.slice(0))i.cancel(u)}};class W{constructor(u){this._url=u.url,this._done=!1,this._storedError=null,this.onProgress=null;const i=u.source;this._contentLength=i.length,this._loaded=0,this._filename=null,this._disableRange=i.disableRange||!1,this._rangeChunkSize=i.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!i.disableStream,this._isRangeSupported=!i.disableRange,this._readableStream=null,this._readCapability=(0,a.createPromiseCapability)(),this._headersCapability=(0,a.createPromiseCapability)()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}read(){var u=this;return _asyncToGenerator(function*(){if(yield u._readCapability.promise,u._done)return{value:void 0,done:!0};if(u._storedError)throw u._storedError;const i=u._readableStream.read();return null===i?(u._readCapability=(0,a.createPromiseCapability)(),u.read()):(u._loaded+=i.length,u.onProgress&&u.onProgress({loaded:u._loaded,total:u._contentLength}),{value:new Uint8Array(i).buffer,done:!1})})()}cancel(u){this._readableStream?this._readableStream.destroy(u):this._error(u)}_error(u){this._storedError=u,this._readCapability.resolve()}_setReadableStream(u){this._readableStream=u,u.on("readable",()=>{this._readCapability.resolve()}),u.on("end",()=>{u.destroy(),this._done=!0,this._readCapability.resolve()}),u.on("error",i=>{this._error(i)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new a.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class y{constructor(u){this._url=u.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=(0,a.createPromiseCapability)(),this._isStreamingSupported=!u.source.disableStream}get isStreamingSupported(){return this._isStreamingSupported}read(){var u=this;return _asyncToGenerator(function*(){if(yield u._readCapability.promise,u._done)return{value:void 0,done:!0};if(u._storedError)throw u._storedError;const i=u._readableStream.read();return null===i?(u._readCapability=(0,a.createPromiseCapability)(),u.read()):(u._loaded+=i.length,u.onProgress&&u.onProgress({loaded:u._loaded}),{value:new Uint8Array(i).buffer,done:!1})})()}cancel(u){this._readableStream?this._readableStream.destroy(u):this._error(u)}_error(u){this._storedError=u,this._readCapability.resolve()}_setReadableStream(u){this._readableStream=u,u.on("readable",()=>{this._readCapability.resolve()}),u.on("end",()=>{u.destroy(),this._done=!0,this._readCapability.resolve()}),u.on("error",i=>{this._error(i)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function t(A,u){return{protocol:A.protocol,auth:A.auth,host:A.hostname,port:A.port,path:A.path,method:"GET",headers:u}}class s extends W{constructor(u){super(u);const i=e=>{if(404===e.statusCode){const f=new a.MissingPDFException(`Missing PDF "${this._url}".`);return this._storedError=f,void this._headersCapability.reject(f)}this._headersCapability.resolve(),this._setReadableStream(e);const o=f=>this._readableStream.headers[f.toLowerCase()],{allowRangeRequests:m,suggestedLength:S}=(0,v.validateRangeRequestCapabilities)({getResponseHeader:o,isHttp:u.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=m,this._contentLength=S||this._contentLength,this._filename=(0,v.extractFilenameFromHeader)(o)};this._request=null,this._request="http:"===this._url.protocol?O.request(t(this._url,u.httpHeaders),i):Q.request(t(this._url,u.httpHeaders),i),this._request.on("error",e=>{this._storedError=e,this._headersCapability.reject(e)}),this._request.end()}}class _ extends y{constructor(u,i,e){super(u),this._httpHeaders={};for(const m in u.httpHeaders){const S=u.httpHeaders[m];typeof S>"u"||(this._httpHeaders[m]=S)}this._httpHeaders.Range=`bytes=${i}-${e-1}`;const o=m=>{if(404!==m.statusCode)this._setReadableStream(m);else{const S=new a.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=S}};this._request=null,this._request="http:"===this._url.protocol?O.request(t(this._url,this._httpHeaders),o):Q.request(t(this._url,this._httpHeaders),o),this._request.on("error",m=>{this._storedError=m}),this._request.end()}}class P extends W{constructor(u){super(u);let i=decodeURIComponent(this._url.path);C.test(this._url.href)&&(i=i.replace(/^\//,"")),F.lstat(i,(e,o)=>{if(e)return"ENOENT"===e.code&&(e=new a.MissingPDFException(`Missing PDF "${i}".`)),this._storedError=e,void this._headersCapability.reject(e);this._contentLength=o.size,this._setReadableStream(F.createReadStream(i)),this._headersCapability.resolve()})}}class p extends y{constructor(u,i,e){super(u);let o=decodeURIComponent(this._url.path);C.test(this._url.href)&&(o=o.replace(/^\//,"")),this._setReadableStream(F.createReadStream(o,{start:i,end:e-1}))}}},(Z,r,x)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.createResponseStatusError=function M(G,q){return 404===G||0===G&&q.startsWith("file:")?new a.MissingPDFException('Missing PDF "'+q+'".'):new a.UnexpectedResponseException(`Unexpected server response (${G}) while retrieving PDF "${q}".`,G)},r.extractFilenameFromHeader=function Q(G){const q=G("Content-Disposition");if(q){let W=(0,v.getFilenameFromContentDispositionHeader)(q);if(W.includes("%"))try{W=decodeURIComponent(W)}catch{}if((0,F.isPdfFile)(W))return W}return null},r.validateRangeRequestCapabilities=function O({getResponseHeader:G,isHttp:q,rangeChunkSize:W,disableRange:y}){const t={allowRangeRequests:!1,suggestedLength:void 0},s=parseInt(G("Content-Length"),10);return!Number.isInteger(s)||(t.suggestedLength=s,s<=2*W)||y||!q||"bytes"!==G("Accept-Ranges")||"identity"!==(G("Content-Encoding")||"identity")||(t.allowRangeRequests=!0),t},r.validateResponseStatus=function C(G){return 200===G||206===G};var a=x(1),v=x(34),F=x(8)},(Z,r,x)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.getFilenameFromContentDispositionHeader=function v(F){let O=!0,Q=M("filename\\*","i").exec(F);if(Q){Q=Q[1];let s=W(Q);return s=unescape(s),s=y(s),s=t(s),G(s)}if(Q=function q(s){const _=[];let P;const p=M("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;null!==(P=p.exec(s));){let[,u,i,e]=P;if(u=parseInt(u,10),u in _){if(0===u)break}else _[u]=[i,e]}const A=[];for(let u=0;u<_.length&&u in _;++u){let[i,e]=_[u];e=W(e),i&&(e=unescape(e),0===u&&(e=y(e))),A.push(e)}return A.join("")}(F),Q)return G(t(Q));if(Q=M("filename","i").exec(F),Q){Q=Q[1];let s=W(Q);return s=t(s),G(s)}function M(s,_){return new RegExp("(?:^|;)\\s*"+s+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',_)}function C(s,_){if(s){if(!/^[\x00-\xFF]+$/.test(_))return _;try{const P=new TextDecoder(s,{fatal:!0}),p=(0,a.stringToBytes)(_);_=P.decode(p),O=!1}catch{}}return _}function G(s){return O&&/[\x80-\xff]/.test(s)&&(s=C("utf-8",s),O&&(s=C("iso-8859-1",s))),s}function W(s){if(s.startsWith('"')){const _=s.slice(1).split('\\"');for(let P=0;P<_.length;++P){const p=_[P].indexOf('"');-1!==p&&(_[P]=_[P].slice(0,p),_.length=P+1),_[P]=_[P].replace(/\\(.)/g,"$1")}s=_.join('"')}return s}function y(s){const _=s.indexOf("'");return-1===_?s:C(s.slice(0,_),s.slice(_+1).replace(/^[^']*'/,""))}function t(s){return!s.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(s)?s:s.replace(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(_,P,p,A){if("q"===p||"Q"===p)return C(P,A=(A=A.replace(/_/g," ")).replace(/=([0-9a-fA-F]{2})/g,function(u,i){return String.fromCharCode(parseInt(i,16))}));try{A=atob(A)}catch{}return C(P,A)})}return""};var a=x(1)},(Z,r,x)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.PDFNetworkStream=void 0;var a=x(1),v=x(33);class M{constructor(y,t={}){this.url=y,this.isHttp=/^https?:/i.test(y),this.httpHeaders=this.isHttp&&t.httpHeaders||Object.create(null),this.withCredentials=t.withCredentials||!1,this.getXhr=t.getXhr||function(){return new XMLHttpRequest},this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(y,t,s){const _={begin:y,end:t};for(const P in s)_[P]=s[P];return this.request(_)}requestFull(y){return this.request(y)}request(y){const t=this.getXhr(),s=this.currXhrId++,_=this.pendingRequests[s]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const P in this.httpHeaders){const p=this.httpHeaders[P];typeof p>"u"||t.setRequestHeader(P,p)}return this.isHttp&&"begin"in y&&"end"in y?(t.setRequestHeader("Range",`bytes=${y.begin}-${y.end-1}`),_.expectedStatus=206):_.expectedStatus=200,t.responseType="arraybuffer",y.onError&&(t.onerror=function(P){y.onError(t.status)}),t.onreadystatechange=this.onStateChange.bind(this,s),t.onprogress=this.onProgress.bind(this,s),_.onHeadersReceived=y.onHeadersReceived,_.onDone=y.onDone,_.onError=y.onError,_.onProgress=y.onProgress,t.send(null),s}onProgress(y,t){const s=this.pendingRequests[y];s&&s.onProgress?.(t)}onStateChange(y,t){const s=this.pendingRequests[y];if(!s)return;const _=s.xhr;if(_.readyState>=2&&s.onHeadersReceived&&(s.onHeadersReceived(),delete s.onHeadersReceived),4!==_.readyState||!(y in this.pendingRequests))return;if(delete this.pendingRequests[y],0===_.status&&this.isHttp)return void s.onError?.(_.status);const P=_.status||200;if((200!==P||206!==s.expectedStatus)&&P!==s.expectedStatus)return void s.onError?.(_.status);const A=function Q(W){const y=W.response;return"string"!=typeof y?y:(0,a.stringToBytes)(y).buffer}(_);if(206===P){const u=_.getResponseHeader("Content-Range"),i=/bytes (\d+)-(\d+)\/(\d+)/.exec(u);s.onDone({begin:parseInt(i[1],10),chunk:A})}else A?s.onDone({begin:0,chunk:A}):s.onError?.(_.status)}getRequestXhr(y){return this.pendingRequests[y].xhr}isPendingRequest(y){return y in this.pendingRequests}abortRequest(y){const t=this.pendingRequests[y].xhr;delete this.pendingRequests[y],t.abort()}}r.PDFNetworkStream=class C{constructor(y){this._source=y,this._manager=new M(y.url,{httpHeaders:y.httpHeaders,withCredentials:y.withCredentials}),this._rangeChunkSize=y.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(y){const t=this._rangeRequestReaders.indexOf(y);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return(0,a.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new G(this._manager,this._source),this._fullRequestReader}getRangeReader(y,t){const s=new q(this._manager,y,t);return s.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(s),s}cancelAllRequests(y){this._fullRequestReader?.cancel(y);for(const t of this._rangeRequestReaders.slice(0))t.cancel(y)}};class G{constructor(y,t){this._manager=y;const s={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url,this._fullRequestId=y.requestFull(s),this._headersReceivedCapability=(0,a.createPromiseCapability)(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const y=this._fullRequestId,t=this._manager.getRequestXhr(y),s=p=>t.getResponseHeader(p),{allowRangeRequests:_,suggestedLength:P}=(0,v.validateRangeRequestCapabilities)({getResponseHeader:s,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});_&&(this._isRangeSupported=!0),this._contentLength=P||this._contentLength,this._filename=(0,v.extractFilenameFromHeader)(s),this._isRangeSupported&&this._manager.abortRequest(y),this._headersReceivedCapability.resolve()}_onDone(y){if(y&&(this._requests.length>0?this._requests.shift().resolve({value:y.chunk,done:!1}):this._cachedChunks.push(y.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(y){this._storedError=(0,v.createResponseStatusError)(y,this._url),this._headersReceivedCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(y){this.onProgress?.({loaded:y.loaded,total:y.lengthComputable?y.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}read(){var y=this;return _asyncToGenerator(function*(){if(y._storedError)throw y._storedError;if(y._cachedChunks.length>0)return{value:y._cachedChunks.shift(),done:!1};if(y._done)return{value:void 0,done:!0};const t=(0,a.createPromiseCapability)();return y._requests.push(t),t.promise})()}cancel(y){this._done=!0,this._headersReceivedCapability.reject(y);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class q{constructor(y,t,s){this._manager=y;const _={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=y.url,this._requestId=y.requestRange(t,s,_),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){this.onClosed?.(this)}_onDone(y){const t=y.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(y){this._storedError=(0,v.createResponseStatusError)(y,this._url);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(y){this.isStreamingSupported||this.onProgress?.({loaded:y.loaded})}get isStreamingSupported(){return!1}read(){var y=this;return _asyncToGenerator(function*(){if(y._storedError)throw y._storedError;if(null!==y._queuedChunk){const s=y._queuedChunk;return y._queuedChunk=null,{value:s,done:!1}}if(y._done)return{value:void 0,done:!0};const t=(0,a.createPromiseCapability)();return y._requests.push(t),t.promise})()}cancel(y){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(Z,r,x)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.PDFFetchStream=void 0;var a=x(1),v=x(33);function F(G,q,W){return{method:"GET",headers:G,signal:W.signal,mode:"cors",credentials:q?"include":"same-origin",redirect:"follow"}}function O(G){const q=new Headers;for(const W in G){const y=G[W];typeof y>"u"||q.append(W,y)}return q}r.PDFFetchStream=class Q{constructor(q){this.source=q,this.isHttp=/^https?:/i.test(q.url),this.httpHeaders=this.isHttp&&q.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,a.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new M(this),this._fullRequestReader}getRangeReader(q,W){if(W<=this._progressiveDataLength)return null;const y=new C(this,q,W);return this._rangeRequestReaders.push(y),y}cancelAllRequests(q){this._fullRequestReader&&this._fullRequestReader.cancel(q);for(const W of this._rangeRequestReaders.slice(0))W.cancel(q)}};class M{constructor(q){this._stream=q,this._reader=null,this._loaded=0,this._filename=null;const W=q.source;this._withCredentials=W.withCredentials||!1,this._contentLength=W.length,this._headersCapability=(0,a.createPromiseCapability)(),this._disableRange=W.disableRange||!1,this._rangeChunkSize=W.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!W.disableStream,this._isRangeSupported=!W.disableRange,this._headers=O(this._stream.httpHeaders);const y=W.url;fetch(y,F(this._headers,this._withCredentials,this._abortController)).then(t=>{if(!(0,v.validateResponseStatus)(t.status))throw(0,v.createResponseStatusError)(t.status,y);this._reader=t.body.getReader(),this._headersCapability.resolve();const s=p=>t.headers.get(p),{allowRangeRequests:_,suggestedLength:P}=(0,v.validateRangeRequestCapabilities)({getResponseHeader:s,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=_,this._contentLength=P||this._contentLength,this._filename=(0,v.extractFilenameFromHeader)(s),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new a.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}read(){var q=this;return _asyncToGenerator(function*(){yield q._headersCapability.promise;const{value:W,done:y}=yield q._reader.read();return y?{value:W,done:y}:(q._loaded+=W.byteLength,q.onProgress&&q.onProgress({loaded:q._loaded,total:q._contentLength}),{value:new Uint8Array(W).buffer,done:!1})})()}cancel(q){this._reader&&this._reader.cancel(q),this._abortController.abort()}}class C{constructor(q,W,y){this._stream=q,this._reader=null,this._loaded=0;const t=q.source;this._withCredentials=t.withCredentials||!1,this._readCapability=(0,a.createPromiseCapability)(),this._isStreamingSupported=!t.disableStream,this._abortController=new AbortController,this._headers=O(this._stream.httpHeaders),this._headers.append("Range",`bytes=${W}-${y-1}`);const s=t.url;fetch(s,F(this._headers,this._withCredentials,this._abortController)).then(_=>{if(!(0,v.validateResponseStatus)(_.status))throw(0,v.createResponseStatusError)(_.status,s);this._readCapability.resolve(),this._reader=_.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}read(){var q=this;return _asyncToGenerator(function*(){yield q._readCapability.promise;const{value:W,done:y}=yield q._reader.read();return y?{value:W,done:y}:(q._loaded+=W.byteLength,q.onProgress&&q.onProgress({loaded:q._loaded}),{value:new Uint8Array(W).buffer,done:!1})})()}cancel(q){this._reader&&this._reader.cancel(q),this._abortController.abort()}}}],__webpack_module_cache__={};function __w_pdfjs_require__(Z){var r=__webpack_module_cache__[Z];if(void 0!==r)return r.exports;var x=__webpack_module_cache__[Z]={exports:{}};return __webpack_modules__[Z](x,x.exports,__w_pdfjs_require__),x.exports}var __nested_webpack_exports__={};return(()=>{var Z=__nested_webpack_exports__;Object.defineProperty(Z,"__esModule",{value:!0}),Object.defineProperty(Z,"AnnotationEditorLayer",{enumerable:!0,get:function(){return v.AnnotationEditorLayer}}),Object.defineProperty(Z,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return r.AnnotationEditorParamsType}}),Object.defineProperty(Z,"AnnotationEditorType",{enumerable:!0,get:function(){return r.AnnotationEditorType}}),Object.defineProperty(Z,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return F.AnnotationEditorUIManager}}),Object.defineProperty(Z,"AnnotationLayer",{enumerable:!0,get:function(){return O.AnnotationLayer}}),Object.defineProperty(Z,"AnnotationMode",{enumerable:!0,get:function(){return r.AnnotationMode}}),Object.defineProperty(Z,"CMapCompressionType",{enumerable:!0,get:function(){return r.CMapCompressionType}}),Object.defineProperty(Z,"GlobalWorkerOptions",{enumerable:!0,get:function(){return Q.GlobalWorkerOptions}}),Object.defineProperty(Z,"InvalidPDFException",{enumerable:!0,get:function(){return r.InvalidPDFException}}),Object.defineProperty(Z,"LoopbackPort",{enumerable:!0,get:function(){return x.LoopbackPort}}),Object.defineProperty(Z,"MissingPDFException",{enumerable:!0,get:function(){return r.MissingPDFException}}),Object.defineProperty(Z,"OPS",{enumerable:!0,get:function(){return r.OPS}}),Object.defineProperty(Z,"PDFDataRangeTransport",{enumerable:!0,get:function(){return x.PDFDataRangeTransport}}),Object.defineProperty(Z,"PDFDateString",{enumerable:!0,get:function(){return a.PDFDateString}}),Object.defineProperty(Z,"PDFWorker",{enumerable:!0,get:function(){return x.PDFWorker}}),Object.defineProperty(Z,"PasswordResponses",{enumerable:!0,get:function(){return r.PasswordResponses}}),Object.defineProperty(Z,"PermissionFlag",{enumerable:!0,get:function(){return r.PermissionFlag}}),Object.defineProperty(Z,"PixelsPerInch",{enumerable:!0,get:function(){return a.PixelsPerInch}}),Object.defineProperty(Z,"RenderingCancelledException",{enumerable:!0,get:function(){return a.RenderingCancelledException}}),Object.defineProperty(Z,"SVGGraphics",{enumerable:!0,get:function(){return G.SVGGraphics}}),Object.defineProperty(Z,"UNSUPPORTED_FEATURES",{enumerable:!0,get:function(){return r.UNSUPPORTED_FEATURES}}),Object.defineProperty(Z,"UnexpectedResponseException",{enumerable:!0,get:function(){return r.UnexpectedResponseException}}),Object.defineProperty(Z,"Util",{enumerable:!0,get:function(){return r.Util}}),Object.defineProperty(Z,"VerbosityLevel",{enumerable:!0,get:function(){return r.VerbosityLevel}}),Object.defineProperty(Z,"XfaLayer",{enumerable:!0,get:function(){return q.XfaLayer}}),Object.defineProperty(Z,"build",{enumerable:!0,get:function(){return x.build}}),Object.defineProperty(Z,"createPromiseCapability",{enumerable:!0,get:function(){return r.createPromiseCapability}}),Object.defineProperty(Z,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return r.createValidAbsoluteUrl}}),Object.defineProperty(Z,"getDocument",{enumerable:!0,get:function(){return x.getDocument}}),Object.defineProperty(Z,"getFilenameFromUrl",{enumerable:!0,get:function(){return a.getFilenameFromUrl}}),Object.defineProperty(Z,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return a.getPdfFilenameFromUrl}}),Object.defineProperty(Z,"getXfaPageViewport",{enumerable:!0,get:function(){return a.getXfaPageViewport}}),Object.defineProperty(Z,"isPdfFile",{enumerable:!0,get:function(){return a.isPdfFile}}),Object.defineProperty(Z,"loadScript",{enumerable:!0,get:function(){return a.loadScript}}),Object.defineProperty(Z,"renderTextLayer",{enumerable:!0,get:function(){return C.renderTextLayer}}),Object.defineProperty(Z,"shadow",{enumerable:!0,get:function(){return r.shadow}}),Object.defineProperty(Z,"version",{enumerable:!0,get:function(){return x.version}});var r=__w_pdfjs_require__(1),x=__w_pdfjs_require__(4),a=__w_pdfjs_require__(8),v=__w_pdfjs_require__(22),F=__w_pdfjs_require__(7),O=__w_pdfjs_require__(27),Q=__w_pdfjs_require__(15),M=__w_pdfjs_require__(3),C=__w_pdfjs_require__(30),G=__w_pdfjs_require__(31),q=__w_pdfjs_require__(29);if(M.isNodeJS){const{PDFNodeStream:t}=__w_pdfjs_require__(32);(0,x.setPDFNetworkStreamFactory)(s=>new t(s))}else{const{PDFNetworkStream:t}=__w_pdfjs_require__(35),{PDFFetchStream:s}=__w_pdfjs_require__(36);(0,x.setPDFNetworkStreamFactory)(_=>(0,a.isValidFetchUrl)(_.url)?new s(_):new t(_))}})(),__nested_webpack_exports__})(),module.exports=x()},1016:(Z,r,x)=>{var a=x(1860).default,v=x(5764).default,F=x(4467).default,O=x(7156).default,Q=x(9159).default,M=x(468).default,C=x(5661).default;globalThis,Z.exports=(()=>{"use strict";var G=[,(t,s,_)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DefaultXfaLayerFactory=s.DefaultTextLayerFactory=s.DefaultStructTreeLayerFactory=s.DefaultAnnotationLayerFactory=s.DefaultAnnotationEditorLayerFactory=void 0;var P=_(2),p=_(5),A=_(4),u=_(6),i=_(8),e=_(9),o=_(10);s.DefaultAnnotationLayerFactory=class m{createAnnotationLayerBuilder({pageDiv:R,pdfPage:H,annotationStorage:B=null,imageResourcesPath:U="",renderForms:j=!0,l10n:ee=A.NullL10n,enableScripting:le=!1,hasJSActionsPromise:V=null,mouseState:g=null,fieldObjectsPromise:l=null,annotationCanvasMap:E=null,accessibilityManager:T=null}){return new p.AnnotationLayerBuilder({pageDiv:R,pdfPage:H,imageResourcesPath:U,renderForms:j,linkService:new u.SimpleLinkService,l10n:ee,annotationStorage:B,enableScripting:le,hasJSActionsPromise:V,fieldObjectsPromise:l,mouseState:g,annotationCanvasMap:E,accessibilityManager:T})}},s.DefaultAnnotationEditorLayerFactory=class S{createAnnotationEditorLayerBuilder({uiManager:R=null,pageDiv:H,pdfPage:B,accessibilityManager:U=null,l10n:j,annotationStorage:ee=null}){return new P.AnnotationEditorLayerBuilder({uiManager:R,pageDiv:H,pdfPage:B,accessibilityManager:U,l10n:j,annotationStorage:ee})}},s.DefaultStructTreeLayerFactory=class f{createStructTreeLayerBuilder({pdfPage:R}){return new i.StructTreeLayerBuilder({pdfPage:R})}},s.DefaultTextLayerFactory=class c{createTextLayerBuilder({textLayerDiv:R,pageIndex:H,viewport:B,enhanceTextSelection:U=!1,eventBus:j,highlighter:ee,accessibilityManager:le=null}){return new e.TextLayerBuilder({textLayerDiv:R,pageIndex:H,viewport:B,enhanceTextSelection:U,eventBus:j,highlighter:ee,accessibilityManager:le})}},s.DefaultXfaLayerFactory=class b{createXfaLayerBuilder({pageDiv:R,pdfPage:H,annotationStorage:B=null}){return new o.XfaLayerBuilder({pageDiv:R,pdfPage:H,annotationStorage:B,linkService:new u.SimpleLinkService})}}},(t,s,_)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.AnnotationEditorLayerBuilder=void 0;var P=_(3),p=_(4),A=new WeakMap;s.AnnotationEditorLayerBuilder=class u{constructor(e){Q(this,A,{writable:!0,value:void 0}),this.pageDiv=e.pageDiv,this.pdfPage=e.pdfPage,this.annotationStorage=e.annotationStorage||null,this.accessibilityManager=e.accessibilityManager,this.l10n=e.l10n||p.NullL10n,this.annotationEditorLayer=null,this.div=null,this._cancelled=!1,C(this,A,e.uiManager)}render(e,o="display"){var m=this;return O(function*(){if("display"!==o||m._cancelled)return;const S=e.clone({dontFlip:!0});if(m.div)return m.annotationEditorLayer.update({viewport:S}),void m.show();m.div=document.createElement("div"),m.div.className="annotationEditorLayer",m.div.tabIndex=0,m.pageDiv.append(m.div),m.annotationEditorLayer=new P.AnnotationEditorLayer({uiManager:M(m,A),div:m.div,annotationStorage:m.annotationStorage,accessibilityManager:m.accessibilityManager,pageIndex:m.pdfPage._pageIndex,l10n:m.l10n,viewport:S}),m.annotationEditorLayer.render({viewport:S,div:m.div,annotations:null,intent:o})})()}cancel(){this._cancelled=!0,this.destroy()}hide(){this.div&&(this.div.hidden=!0)}show(){this.div&&(this.div.hidden=!1)}destroy(){this.div&&(this.pageDiv=null,this.annotationEditorLayer.destroy(),this.div.remove())}}},t=>{let s;s=typeof window<"u"&&window["pdfjs-dist/build/pdf"]?window["pdfjs-dist/build/pdf"]:x(9627),t.exports=s},(t,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.NullL10n=void 0,s.fixupLangCode=function A(e){return p[e?.toLowerCase()]||e},s.getL10nFallback=P;const _={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} \xd7 {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} \xd7 {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",print_progress_percent:"{{progress}}%","toggle_sidebar.title":"Toggle Sidebar","toggle_sidebar_notification2.title":"Toggle Sidebar (document contains outline/attachments/layers)",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",error_version_info:"PDF.js v{{version}} (build: {{build}})",error_message:"Message: {{message}}",error_stack:"Stack: {{stack}}",error_file:"File: {{file}}",error_line:"Line: {{line}}",rendering_error:"An error occurred while rendering the page.",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading:"Loading\u2026",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text_default_content:"Enter text\u2026",editor_free_text_aria_label:"FreeText Editor",editor_ink_aria_label:"Ink Editor",editor_ink_canvas_aria_label:"User-created image"};function P(e,o){switch(e){case"find_match_count":e=`find_match_count[${1===o.total?"one":"other"}]`;break;case"find_match_count_limit":e=`find_match_count_limit[${1===o.limit?"one":"other"}]`}return _[e]||""}const p={en:"en-US",es:"es-ES",fy:"fy-NL",ga:"ga-IE",gu:"gu-IN",hi:"hi-IN",hy:"hy-AM",nb:"nb-NO",ne:"ne-NP",nn:"nn-NO",pa:"pa-IN",pt:"pt-PT",sv:"sv-SE",zh:"zh-CN"};s.NullL10n={getLanguage:()=>O(function*(){return"en-us"})(),getDirection:()=>O(function*(){return"ltr"})(),get:(e,o=null,m=P(e,o))=>O(function*(){return function u(e,o){return o?e.replace(/\{\{\s*(\w+)\s*\}\}/g,(m,S)=>S in o?o[S]:"{{"+S+"}}"):e}(m,o)})(),translate:e=>O(function*(){})()}},(t,s,_)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.AnnotationLayerBuilder=void 0;var P=_(3),p=_(4);s.AnnotationLayerBuilder=class A{constructor({pageDiv:i,pdfPage:e,linkService:o,downloadManager:m,annotationStorage:S=null,imageResourcesPath:f="",renderForms:c=!0,l10n:b=p.NullL10n,enableScripting:N=!1,hasJSActionsPromise:R=null,fieldObjectsPromise:H=null,mouseState:B=null,annotationCanvasMap:U=null,accessibilityManager:j=null}){this.pageDiv=i,this.pdfPage=e,this.linkService=o,this.downloadManager=m,this.imageResourcesPath=f,this.renderForms=c,this.l10n=b,this.annotationStorage=S,this.enableScripting=N,this._hasJSActionsPromise=R,this._fieldObjectsPromise=H,this._mouseState=B,this._annotationCanvasMap=U,this._accessibilityManager=j,this.div=null,this._cancelled=!1}render(i,e="display"){var o=this;return O(function*(){const[m,S=!1,f=null]=yield Promise.all([o.pdfPage.getAnnotations({intent:e}),o._hasJSActionsPromise,o._fieldObjectsPromise]);if(o._cancelled||0===m.length)return;const c={viewport:i.clone({dontFlip:!0}),div:o.div,annotations:m,page:o.pdfPage,imageResourcesPath:o.imageResourcesPath,renderForms:o.renderForms,linkService:o.linkService,downloadManager:o.downloadManager,annotationStorage:o.annotationStorage,enableScripting:o.enableScripting,hasJSActions:S,fieldObjects:f,mouseState:o._mouseState,annotationCanvasMap:o._annotationCanvasMap,accessibilityManager:o._accessibilityManager};o.div?P.AnnotationLayer.update(c):(o.div=document.createElement("div"),o.div.className="annotationLayer",o.pageDiv.append(o.div),c.div=o.div,P.AnnotationLayer.render(c),o.l10n.translate(o.div))})()}cancel(){this._cancelled=!0}hide(){this.div&&(this.div.hidden=!0)}}},(t,s,_)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.SimpleLinkService=s.PDFLinkService=s.LinkTarget=void 0;var P=_(7);const A={NONE:0,SELF:1,BLANK:2,PARENT:3,TOP:4};function u(c,{url:b,target:N,rel:R,enabled:H=!0}={}){if(!b||"string"!=typeof b)throw new Error('A valid "url" parameter must provided.');const B=(0,P.removeNullCharacters)(b);H?c.href=c.title=B:(c.href="",c.title=`Disabled: ${B}`,c.onclick=()=>!1);let U="";switch(N){case A.NONE:break;case A.SELF:U="_self";break;case A.BLANK:U="_blank";break;case A.PARENT:U="_parent";break;case A.TOP:U="_top"}c.target=U,c.rel="string"==typeof R?R:"noopener noreferrer nofollow"}s.LinkTarget=A;var i=new WeakMap,e=new WeakSet;class o{constructor({eventBus:b,externalLinkTarget:N=null,externalLinkRel:R=null,ignoreDestinationZoom:H=!1}={}){a(this,e),Q(this,i,{writable:!0,value:new Map}),this.eventBus=b,this.externalLinkTarget=N,this.externalLinkRel=R,this.externalLinkEnabled=!0,this._ignoreDestinationZoom=H,this.baseUrl=null,this.pdfDocument=null,this.pdfViewer=null,this.pdfHistory=null}setDocument(b,N=null){this.baseUrl=N,this.pdfDocument=b,M(this,i).clear()}setViewer(b){this.pdfViewer=b}setHistory(b){this.pdfHistory=b}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return this.pdfViewer.currentPageNumber}set page(b){this.pdfViewer.currentPageNumber=b}get rotation(){return this.pdfViewer.pagesRotation}set rotation(b){this.pdfViewer.pagesRotation=b}goToDestination(b){var N=this;return O(function*(){if(!N.pdfDocument)return;let R,H;"string"==typeof b?(R=b,H=yield N.pdfDocument.getDestination(b)):(R=null,H=yield b),Array.isArray(H)?F(N,e,m).call(N,b,R,H):console.error(`PDFLinkService.goToDestination: "${H}" is not a valid destination array, for dest="${b}".`)})()}goToPage(b){if(!this.pdfDocument)return;const N="string"==typeof b&&this.pdfViewer.pageLabelToPageNumber(b)||0|b;Number.isInteger(N)&&N>0&&N<=this.pagesCount?(this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.pushPage(N)),this.pdfViewer.scrollPageIntoView({pageNumber:N})):console.error(`PDFLinkService.goToPage: "${b}" is not a valid page.`)}addLinkAttributes(b,N,R=!1){u(b,{url:N,target:R?A.BLANK:this.externalLinkTarget,rel:this.externalLinkRel,enabled:this.externalLinkEnabled})}getDestinationHash(b){if("string"==typeof b){if(b.length>0)return this.getAnchorUrl("#"+escape(b))}else if(Array.isArray(b)){const N=JSON.stringify(b);if(N.length>0)return this.getAnchorUrl("#"+escape(N))}return this.getAnchorUrl("")}getAnchorUrl(b){return(this.baseUrl||"")+b}setHash(b){if(!this.pdfDocument)return;let N,R;if(b.includes("=")){const H=(0,P.parseQueryString)(b);if(H.has("search")&&this.eventBus.dispatch("findfromurlhash",{source:this,query:H.get("search").replace(/"/g,""),phraseSearch:"true"===H.get("phrase")}),H.has("page")&&(N=0|H.get("page")||1),H.has("zoom")){const B=H.get("zoom").split(","),U=B[0],j=parseFloat(U);U.includes("Fit")?"Fit"===U||"FitB"===U?R=[null,{name:U}]:"FitH"===U||"FitBH"===U||"FitV"===U||"FitBV"===U?R=[null,{name:U},B.length>1?0|B[1]:null]:"FitR"===U?5!==B.length?console.error('PDFLinkService.setHash: Not enough parameters for "FitR".'):R=[null,{name:U},0|B[1],0|B[2],0|B[3],0|B[4]]:console.error(`PDFLinkService.setHash: "${U}" is not a valid zoom value.`):R=[null,{name:"XYZ"},B.length>1?0|B[1]:null,B.length>2?0|B[2]:null,j?j/100:U]}R?this.pdfViewer.scrollPageIntoView({pageNumber:N||this.page,destArray:R,allowNegativeOffset:!0}):N&&(this.page=N),H.has("pagemode")&&this.eventBus.dispatch("pagemode",{source:this,mode:H.get("pagemode")}),H.has("nameddest")&&this.goToDestination(H.get("nameddest"))}else{R=unescape(b);try{R=JSON.parse(R),Array.isArray(R)||(R=R.toString())}catch{}if("string"==typeof R||v(o,o,S).call(o,R))return void this.goToDestination(R);console.error(`PDFLinkService.setHash: "${unescape(b)}" is not a valid destination.`)}}executeNamedAction(b){switch(b){case"GoBack":this.pdfHistory?.back();break;case"GoForward":this.pdfHistory?.forward();break;case"NextPage":this.pdfViewer.nextPage();break;case"PrevPage":this.pdfViewer.previousPage();break;case"LastPage":this.page=this.pagesCount;break;case"FirstPage":this.page=1}this.eventBus.dispatch("namedaction",{source:this,action:b})}cachePageRef(b,N){if(!N)return;const R=0===N.gen?`${N.num}R`:`${N.num}R${N.gen}`;M(this,i).set(R,b)}_cachedPageNumber(b){if(!b)return null;const N=0===b.gen?`${b.num}R`:`${b.num}R${b.gen}`;return M(this,i).get(N)||null}isPageVisible(b){return this.pdfViewer.isPageVisible(b)}isPageCached(b){return this.pdfViewer.isPageCached(b)}}function m(c,b=null,N){const R=N[0];let H;if("object"==typeof R&&null!==R){if(H=this._cachedPageNumber(R),!H)return void this.pdfDocument.getPageIndex(R).then(B=>{this.cachePageRef(B+1,R),F(this,e,m).call(this,c,b,N)}).catch(()=>{console.error(`PDFLinkService.#goToDestinationHelper: "${R}" is not a valid page reference, for dest="${c}".`)})}else{if(!Number.isInteger(R))return void console.error(`PDFLinkService.#goToDestinationHelper: "${R}" is not a valid destination reference, for dest="${c}".`);H=R+1}!H||H<1||H>this.pagesCount?console.error(`PDFLinkService.#goToDestinationHelper: "${H}" is not a valid page number, for dest="${c}".`):(this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.push({namedDest:b,explicitDest:N,pageNumber:H})),this.pdfViewer.scrollPageIntoView({pageNumber:H,destArray:N,ignoreDestinationZoom:this._ignoreDestinationZoom}))}function S(c){if(!Array.isArray(c))return!1;const b=c.length;if(b<2)return!1;const N=c[0];if(!("object"==typeof N&&Number.isInteger(N.num)&&Number.isInteger(N.gen)||Number.isInteger(N)&&N>=0))return!1;const R=c[1];if("object"!=typeof R||"string"!=typeof R.name)return!1;let H=!0;switch(R.name){case"XYZ":if(5!==b)return!1;break;case"Fit":case"FitB":return 2===b;case"FitH":case"FitBH":case"FitV":case"FitBV":if(3!==b)return!1;break;case"FitR":if(6!==b)return!1;H=!1;break;default:return!1}for(let B=2;B<b;B++){const U=c[B];if(!("number"==typeof U||H&&null===U))return!1}return!0}s.PDFLinkService=o,s.SimpleLinkService=class f{constructor(){this.externalLinkEnabled=!0}get pagesCount(){return 0}get page(){return 0}set page(b){}get rotation(){return 0}set rotation(b){}goToDestination(b){return O(function*(){})()}goToPage(b){}addLinkAttributes(b,N,R=!1){u(b,{url:N,enabled:this.externalLinkEnabled})}getDestinationHash(b){return"#"}getAnchorUrl(b){return"#"}setHash(b){}executeNamedAction(b){}cachePageRef(b,N){}isPageVisible(b){return!0}isPageCached(b){return!0}}},(t,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.animationStarted=s.VERTICAL_PADDING=s.UNKNOWN_SCALE=s.TextLayerMode=s.SpreadMode=s.SidebarView=s.ScrollMode=s.SCROLLBAR_PADDING=s.RenderingStates=s.RendererType=s.ProgressBar=s.PresentationModeState=s.OutputScale=s.MIN_SCALE=s.MAX_SCALE=s.MAX_AUTO_SCALE=s.DEFAULT_SCALE_VALUE=s.DEFAULT_SCALE_DELTA=s.DEFAULT_SCALE=s.AutoPrintRegExp=void 0,s.apiPageLayoutToViewerModes=function de(I){let ae=R.VERTICAL,Se=H.NONE;switch(I){case"SinglePage":ae=R.PAGE;break;case"OneColumn":break;case"TwoPageLeft":ae=R.PAGE;case"TwoColumnLeft":Se=H.ODD;break;case"TwoPageRight":ae=R.PAGE;case"TwoColumnRight":Se=H.EVEN}return{scrollMode:ae,spreadMode:Se}},s.apiPageModeToSidebarView=function z(I){switch(I){case"UseNone":return c.NONE;case"UseThumbs":return c.THUMBS;case"UseOutlines":return c.OUTLINE;case"UseAttachments":return c.ATTACHMENTS;case"UseOC":return c.LAYERS}return c.NONE},s.approximateFraction=function T(I){if(Math.floor(I)===I)return[I,1];const ae=1/I;if(ae>8)return[1,8];if(Math.floor(ae)===ae)return[1,ae];const ye=I>1?ae:I;let se,xe=0,D=1,ne=1,oe=1;for(;;){const pe=xe+ne,be=D+oe;if(be>8)break;ye<=pe/be?(ne=pe,oe=be):(xe=pe,D=be)}return se=ye-xe/D<ne/oe-ye?ye===I?[xe,D]:[D,xe]:ye===I?[ne,oe]:[oe,ne],se},s.backtrackBeforeAllVisibleElements=h,s.binarySearchFirstItem=E,s.docStyle=void 0,s.getActiveOrFocusedElement=function ce(){let I=document,ae=I.activeElement||I.querySelector(":focus");for(;ae?.shadowRoot;)I=ae.shadowRoot,ae=I.activeElement||I.querySelector(":focus");return ae},s.getPageSizeInches=function n({view:I,userUnit:ae,rotate:Se}){const[ye,xe,D,ne]=I,oe=Se%180!=0,se=(D-ye)/72*ae,pe=(ne-xe)/72*ae;return{width:oe?pe:se,height:oe?se:pe}},s.getVisibleElements=function d({scrollEl:I,views:ae,sortByVisibility:Se=!1,horizontal:ye=!1,rtl:xe=!1}){const D=I.scrollTop,ne=D+I.clientHeight,oe=I.scrollLeft,se=oe+I.clientWidth,te=[],$=new Set,J=ae.length;let Pe=E(ae,ye?function be(Ee){const Ce=Ee.div,Te=Ce.offsetLeft+Ce.clientLeft;return xe?Te<se:Te+Ce.clientWidth>oe}:function pe(Ee){const Ce=Ee.div;return Ce.offsetTop+Ce.clientTop+Ce.clientHeight>D});Pe>0&&Pe<J&&!ye&&(Pe=h(Pe,ae,D));let Me=ye?se:-1;for(let Ee=Pe;Ee<J;Ee++){const Ce=ae[Ee],Te=Ce.div,ke=Te.offsetLeft+Te.clientLeft,Re=Te.offsetTop+Te.clientTop,Le=Te.clientWidth,Oe=Te.clientHeight,Fe=ke+Le,Ie=Re+Oe;if(-1===Me)Ie>=ne&&(Me=Ie);else if((ye?ke:Re)>Me)break;if(Ie<=D||Re>=ne||Fe<=oe||ke>=se)continue;const Ge=Math.max(0,D-Re)+Math.max(0,Ie-ne),Ne=(Le-(Math.max(0,oe-ke)+Math.max(0,Fe-se)))/Le;te.push({id:Ce.id,x:ke,y:Re,view:Ce,percent:(Oe-Ge)/Oe*Ne*100|0,widthPercent:100*Ne|0}),$.add(Ce.id)}const ge=te[0],_e=te.at(-1);return Se&&te.sort(function(Ee,Ce){const Te=Ee.percent-Ce.percent;return Math.abs(Te)>.001?-Te:Ee.id-Ce.id}),{first:ge,last:_e,views:te,ids:$}},s.isPortraitOrientation=function ue(I){return I.width<=I.height},s.isValidRotation=function Y(I){return Number.isInteger(I)&&I%90==0},s.isValidScrollMode=function he(I){return Number.isInteger(I)&&Object.values(R).includes(I)&&I!==R.UNKNOWN},s.isValidSpreadMode=function ie(I){return Number.isInteger(I)&&Object.values(H).includes(I)&&I!==H.UNKNOWN},s.noContextMenuHandler=function L(I){I.preventDefault()},s.normalizeWheelEventDelta=function X(I){let ae=k(I);return 0===I.deltaMode?ae/=900:1===I.deltaMode&&(ae/=30),ae},s.normalizeWheelEventDirection=k,s.parseQueryString=function le(I){const ae=new Map;for(const[Se,ye]of new URLSearchParams(I))ae.set(Se.toLowerCase(),ye);return ae},s.removeNullCharacters=function l(I,ae=!1){return"string"!=typeof I?(console.error("The argument must be a string."),I):(ae&&(I=I.replace(g," ")),I.replace(V,""))},s.roundToDivide=function w(I,ae){const Se=I%ae;return 0===Se?I:Math.round(I-Se+ae)},s.scrollIntoView=function j(I,ae,Se=!1){let ye=I.offsetParent;if(!ye)return void console.error("offsetParent is not set -- cannot scroll");let xe=I.offsetTop+I.clientTop,D=I.offsetLeft+I.clientLeft;for(;ye.clientHeight===ye.scrollHeight&&ye.clientWidth===ye.scrollWidth||Se&&(ye.classList.contains("markedContent")||"hidden"===getComputedStyle(ye).overflow);)if(xe+=ye.offsetTop,D+=ye.offsetLeft,ye=ye.offsetParent,!ye)return;ae&&(void 0!==ae.top&&(xe+=ae.top),void 0!==ae.left&&(D+=ae.left,ye.scrollLeft=D)),ye.scrollTop=xe},s.watchScroll=function ee(I,ae){const Se=function(D){xe||(xe=window.requestAnimationFrame(function(){xe=null;const oe=I.scrollLeft,se=ye.lastX;oe!==se&&(ye.right=oe>se),ye.lastX=oe;const pe=I.scrollTop,be=ye.lastY;pe!==be&&(ye.down=pe>be),ye.lastY=pe,ae(ye)}))},ye={right:!0,down:!0,lastX:I.scrollLeft,lastY:I.scrollTop,_eventHandler:Se};let xe=null;return I.addEventListener("scroll",Se,!0),ye},s.DEFAULT_SCALE_VALUE="auto",s.DEFAULT_SCALE=1,s.DEFAULT_SCALE_DELTA=1.1,s.MIN_SCALE=.1,s.MAX_SCALE=10,s.UNKNOWN_SCALE=0,s.MAX_AUTO_SCALE=1.25,s.SCROLLBAR_PADDING=40,s.VERTICAL_PADDING=5,s.RenderingStates={INITIAL:0,RUNNING:1,PAUSED:2,FINISHED:3},s.PresentationModeState={UNKNOWN:0,NORMAL:1,CHANGING:2,FULLSCREEN:3};const c={UNKNOWN:-1,NONE:0,THUMBS:1,OUTLINE:2,ATTACHMENTS:3,LAYERS:4};s.SidebarView=c,s.RendererType={CANVAS:"canvas",SVG:"svg"},s.TextLayerMode={DISABLE:0,ENABLE:1,ENABLE_ENHANCE:2};const R={UNKNOWN:-1,VERTICAL:0,HORIZONTAL:1,WRAPPED:2,PAGE:3};s.ScrollMode=R;const H={UNKNOWN:-1,NONE:0,ODD:1,EVEN:2};s.SpreadMode=H,s.AutoPrintRegExp=/\bprint\s*\(/,s.OutputScale=class U{constructor(){const ae=window.devicePixelRatio||1;this.sx=ae,this.sy=ae}get scaled(){return 1!==this.sx||1!==this.sy}};const V=/\x00/g,g=/[\x01-\x1F]/g;function E(I,ae,Se=0){let ye=Se,xe=I.length-1;if(xe<0||!ae(I[xe]))return I.length;if(ae(I[ye]))return ye;for(;ye<xe;){const D=ye+xe>>1;ae(I[D])?xe=D:ye=D+1}return ye}function h(I,ae,Se){if(I<2)return I;let ye=ae[I].div,xe=ye.offsetTop+ye.clientTop;xe>=Se&&(ye=ae[I-1].div,xe=ye.offsetTop+ye.clientTop);for(let D=I-2;D>=0&&(ye=ae[D].div,!(ye.offsetTop+ye.clientTop+ye.clientHeight<=xe));--D)I=D;return I}function k(I){let ae=Math.hypot(I.deltaX,I.deltaY);const Se=Math.atan2(I.deltaY,I.deltaX);return-.25*Math.PI<Se&&Se<.75*Math.PI&&(ae=-ae),ae}const ve=new Promise(function(I){window.requestAnimationFrame(I)});s.animationStarted=ve;const fe=document.documentElement.style;s.docStyle=fe;var we=new WeakMap,Ae=new WeakMap,re=new WeakMap;s.ProgressBar=class K{constructor(ae){if(Q(this,we,{writable:!0,value:null}),Q(this,Ae,{writable:!0,value:0}),Q(this,re,{writable:!0,value:!0}),arguments.length>1)throw new Error("ProgressBar no longer accepts any additional options, please use CSS rules to modify its appearance instead.");const Se=document.getElementById(ae);C(this,we,Se.classList)}get percent(){return M(this,Ae)}set percent(ae){C(this,Ae,function me(I,ae,Se){return Math.min(Math.max(I,ae),Se)}(ae,0,100)),isNaN(ae)?M(this,we).add("indeterminate"):(M(this,we).remove("indeterminate"),fe.setProperty("--progressBar-percent",`${M(this,Ae)}%`))}setWidth(ae){if(!ae)return;const ye=ae.parentNode.offsetWidth-ae.offsetWidth;ye>0&&fe.setProperty("--progressBar-end-offset",`${ye}px`)}hide(){M(this,re)&&(C(this,re,!1),M(this,we).add("hidden"))}show(){M(this,re)||(C(this,re,!0),M(this,we).remove("hidden"))}}},(t,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.StructTreeLayerBuilder=void 0;const _={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},P=/^H(\d+)$/;s.StructTreeLayerBuilder=class p{constructor({pdfPage:u}){this.pdfPage=u}render(u){return this._walk(u)}_setAttributes(u,i){void 0!==u.alt&&i.setAttribute("aria-label",u.alt),void 0!==u.id&&i.setAttribute("aria-owns",u.id),void 0!==u.lang&&i.setAttribute("lang",u.lang)}_walk(u){if(!u)return null;const i=document.createElement("span");if("role"in u){const{role:e}=u,o=e.match(P);o?(i.setAttribute("role","heading"),i.setAttribute("aria-level",o[1])):_[e]&&i.setAttribute("role",_[e])}if(this._setAttributes(u,i),u.children)if(1===u.children.length&&"id"in u.children[0])this._setAttributes(u.children[0],i);else for(const e of u.children)i.append(this._walk(e));return i}}},(t,s,_)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.TextLayerBuilder=void 0;var P=_(3);s.TextLayerBuilder=class A{constructor({textLayerDiv:i,eventBus:e,pageIndex:o,viewport:m,highlighter:S=null,enhanceTextSelection:f=!1,accessibilityManager:c=null}){this.textLayerDiv=i,this.eventBus=e,this.textContent=null,this.textContentItemsStr=[],this.textContentStream=null,this.renderingDone=!1,this.pageNumber=o+1,this.viewport=m,this.textDivs=[],this.textLayerRenderTask=null,this.highlighter=S,this.enhanceTextSelection=f,this.accessibilityManager=c,this._bindMouse()}_finishRendering(){if(this.renderingDone=!0,!this.enhanceTextSelection){const i=document.createElement("div");i.className="endOfContent",this.textLayerDiv.append(i)}this.eventBus.dispatch("textlayerrendered",{source:this,pageNumber:this.pageNumber,numTextDivs:this.textDivs.length})}render(i=0){if(!this.textContent&&!this.textContentStream||this.renderingDone)return;this.cancel(),this.textDivs.length=0,this.highlighter?.setTextMapping(this.textDivs,this.textContentItemsStr),this.accessibilityManager?.setTextMapping(this.textDivs);const e=document.createDocumentFragment();this.textLayerRenderTask=(0,P.renderTextLayer)({textContent:this.textContent,textContentStream:this.textContentStream,container:e,viewport:this.viewport,textDivs:this.textDivs,textContentItemsStr:this.textContentItemsStr,timeout:i,enhanceTextSelection:this.enhanceTextSelection}),this.textLayerRenderTask.promise.then(()=>{this.textLayerDiv.append(e),this._finishRendering(),this.highlighter?.enable(),this.accessibilityManager?.enable()},function(o){})}cancel(){this.textLayerRenderTask&&(this.textLayerRenderTask.cancel(),this.textLayerRenderTask=null),this.highlighter?.disable(),this.accessibilityManager?.disable()}setTextContentStream(i){this.cancel(),this.textContentStream=i}setTextContent(i){this.cancel(),this.textContent=i}_bindMouse(){const i=this.textLayerDiv;let e=null;i.addEventListener("mousedown",o=>{if(this.enhanceTextSelection&&this.textLayerRenderTask)return this.textLayerRenderTask.expandTextDivs(!0),void(e&&(clearTimeout(e),e=null));const m=i.querySelector(".endOfContent");if(!m)return;let S=o.target!==i;if(S=S&&"none"!==window.getComputedStyle(m).getPropertyValue("-moz-user-select"),S){const f=i.getBoundingClientRect(),c=Math.max(0,(o.pageY-f.top)/f.height);m.style.top=(100*c).toFixed(2)+"%"}m.classList.add("active")}),i.addEventListener("mouseup",()=>{if(this.enhanceTextSelection&&this.textLayerRenderTask)return void(e=setTimeout(()=>{this.textLayerRenderTask&&this.textLayerRenderTask.expandTextDivs(!1),e=null},300));const o=i.querySelector(".endOfContent");o&&(o.style.top="",o.classList.remove("active"))})}}},(t,s,_)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.XfaLayerBuilder=void 0;var P=_(3);s.XfaLayerBuilder=class p{constructor({pageDiv:u,pdfPage:i,annotationStorage:e=null,linkService:o,xfaHtml:m=null}){this.pageDiv=u,this.pdfPage=i,this.annotationStorage=e,this.linkService=o,this.xfaHtml=m,this.div=null,this._cancelled=!1}render(u,i="display"){if("print"===i){const e={viewport:u.clone({dontFlip:!0}),div:this.div,xfaHtml:this.xfaHtml,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:i},o=document.createElement("div");this.pageDiv.append(o),e.div=o;const m=P.XfaLayer.render(e);return Promise.resolve(m)}return this.pdfPage.getXfa().then(e=>{if(this._cancelled||!e)return{textDivs:[]};const o={viewport:u.clone({dontFlip:!0}),div:this.div,xfaHtml:e,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:i};return this.div?P.XfaLayer.update(o):(this.div=document.createElement("div"),this.pageDiv.append(this.div),o.div=this.div,P.XfaLayer.render(o))}).catch(e=>{console.error(e)})}cancel(){this._cancelled=!0}hide(){this.div&&(this.div.hidden=!0)}}},(t,s,_)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PDFViewer=s.PDFSinglePageViewer=void 0;var P=_(7),p=_(12);s.PDFViewer=class A extends p.BaseViewer{},s.PDFSinglePageViewer=class u extends p.BaseViewer{_resetView(){super._resetView(),this._scrollMode=P.ScrollMode.PAGE,this._spreadMode=P.SpreadMode.NONE}set scrollMode(e){}_updateScrollMode(){}set spreadMode(e){}_updateSpreadMode(){}}},(t,s,_)=>{let P;Object.defineProperty(s,"__esModule",{value:!0}),s.PagesCountLimit=s.PDFPageViewBuffer=s.BaseViewer=void 0;var p=_(3),A=_(7),u=_(2),i=_(5),e=_(4),o=_(13),m=_(16),S=_(6),f=_(8),c=_(17),b=_(9),N=_(10);const H="enablePermissions",B={FORCE_SCROLL_MODE_PAGE:15e3,FORCE_LAZY_PAGE_INIT:7500,PAUSE_EAGER_PAGE_INIT:250};function U(xe){return Object.values(p.AnnotationEditorType).includes(xe)&&xe!==p.AnnotationEditorType.DISABLE}s.PagesCountLimit=B;var j=new WeakMap,ee=new WeakMap,le=new WeakSet;P=Symbol.iterator;class V{constructor(D){a(this,le),Q(this,j,{writable:!0,value:new Set}),Q(this,ee,{writable:!0,value:0}),C(this,ee,D)}push(D){const ne=M(this,j);ne.has(D)&&ne.delete(D),ne.add(D),ne.size>M(this,ee)&&F(this,le,g).call(this)}resize(D,ne=null){C(this,ee,D);const oe=M(this,j);if(ne){const se=oe.size;let pe=1;for(const be of oe)if(ne.has(be.id)&&(oe.delete(be),oe.add(be)),++pe>se)break}for(;oe.size>M(this,ee);)F(this,le,g).call(this)}has(D){return M(this,j).has(D)}[P](){return M(this,j).keys()}}function g(){const xe=M(this,j).keys().next().value;xe?.destroy(),M(this,j).delete(xe)}s.PDFPageViewBuffer=V;var l=new WeakMap,E=new WeakMap,T=new WeakMap,w=new WeakMap,n=new WeakMap,h=new WeakMap,d=new WeakMap,L=new WeakMap,k=new WeakSet,X=new WeakSet,Y=new WeakSet,he=new WeakSet,ie=new WeakSet,ue=new WeakSet,ve=new WeakSet,fe=new WeakSet,me=new WeakSet;class we{constructor(D){if(a(this,me),a(this,fe),a(this,ve),a(this,ue),a(this,ie),a(this,he),a(this,Y),a(this,X),a(this,k),Q(this,l,{writable:!0,value:null}),Q(this,E,{writable:!0,value:p.AnnotationEditorType.DISABLE}),Q(this,T,{writable:!0,value:null}),Q(this,w,{writable:!0,value:p.AnnotationMode.ENABLE_FORMS}),Q(this,n,{writable:!0,value:!1}),Q(this,h,{writable:!0,value:0}),Q(this,d,{writable:!0,value:null}),Q(this,L,{writable:!0,value:null}),this.constructor===we)throw new Error("Cannot initialize BaseViewer.");const ne="2.16.105";if(p.version!==ne)throw new Error(`The API version "${p.version}" does not match the Viewer version "${ne}".`);if(this.container=D.container,this.viewer=D.viewer||D.container.firstElementChild,"DIV"!==this.container?.tagName.toUpperCase()||"DIV"!==this.viewer?.tagName.toUpperCase())throw new Error("Invalid `container` and/or `viewer` option.");if(this.container.offsetParent&&"absolute"!==getComputedStyle(this.container).position)throw new Error("The `container` must be absolutely positioned.");this.eventBus=D.eventBus,this.linkService=D.linkService||new S.SimpleLinkService,this.downloadManager=D.downloadManager||null,this.findController=D.findController||null,this._scriptingManager=D.scriptingManager||null,this.removePageBorders=D.removePageBorders||!1,this.textLayerMode=D.textLayerMode??A.TextLayerMode.ENABLE,C(this,w,D.annotationMode??p.AnnotationMode.ENABLE_FORMS),C(this,E,D.annotationEditorMode??p.AnnotationEditorType.DISABLE),this.imageResourcesPath=D.imageResourcesPath||"",this.enablePrintAutoRotate=D.enablePrintAutoRotate||!1,this.renderer=D.renderer||A.RendererType.CANVAS,this.useOnlyCssZoom=D.useOnlyCssZoom||!1,this.maxCanvasPixels=D.maxCanvasPixels,this.l10n=D.l10n||e.NullL10n,C(this,n,D.enablePermissions||!1),this.pageColors=D.pageColors||null,this.pageColors&&!(CSS.supports("color",this.pageColors.background)&&CSS.supports("color",this.pageColors.foreground))&&((this.pageColors.background||this.pageColors.foreground)&&console.warn("BaseViewer: Ignoring `pageColors`-option, since the browser doesn't support the values used."),this.pageColors=null),this.defaultRenderingQueue=!D.renderingQueue,this.defaultRenderingQueue?(this.renderingQueue=new m.PDFRenderingQueue,this.renderingQueue.setViewer(this)):this.renderingQueue=D.renderingQueue,this.scroll=(0,A.watchScroll)(this.container,this._scrollUpdate.bind(this)),this.presentationModeState=A.PresentationModeState.UNKNOWN,this._onBeforeDraw=this._onAfterDraw=null,this._resetView(),this.removePageBorders&&this.viewer.classList.add("removePageBorders"),this.updateContainerHeightCss()}get pagesCount(){return this._pages.length}getPageView(D){return this._pages[D]}get pageViewsReady(){return!!this._pagesCapability.settled&&this._pages.every(function(D){return D?.pdfPage})}get renderForms(){return M(this,w)===p.AnnotationMode.ENABLE_FORMS}get enableScripting(){return!!this._scriptingManager}get currentPageNumber(){return this._currentPageNumber}set currentPageNumber(D){if(!Number.isInteger(D))throw new Error("Invalid page number.");this.pdfDocument&&(this._setCurrentPageNumber(D,!0)||console.error(`currentPageNumber: "${D}" is not a valid page.`))}_setCurrentPageNumber(D,ne=!1){if(this._currentPageNumber===D)return ne&&F(this,ue,z).call(this),!0;if(!(0<D&&D<=this.pagesCount))return!1;const oe=this._currentPageNumber;return this._currentPageNumber=D,this.eventBus.dispatch("pagechanging",{source:this,pageNumber:D,pageLabel:this._pageLabels?.[D-1]??null,previous:oe}),ne&&F(this,ue,z).call(this),!0}get currentPageLabel(){return this._pageLabels?.[this._currentPageNumber-1]??null}set currentPageLabel(D){if(!this.pdfDocument)return;let ne=0|D;if(this._pageLabels){const oe=this._pageLabels.indexOf(D);oe>=0&&(ne=oe+1)}this._setCurrentPageNumber(ne,!0)||console.error(`currentPageLabel: "${D}" is not a valid page.`)}get currentScale(){return this._currentScale!==A.UNKNOWN_SCALE?this._currentScale:A.DEFAULT_SCALE}set currentScale(D){if(isNaN(D))throw new Error("Invalid numeric scale.");this.pdfDocument&&this._setScale(D,!1)}get currentScaleValue(){return this._currentScaleValue}set currentScaleValue(D){this.pdfDocument&&this._setScale(D,!1)}get pagesRotation(){return this._pagesRotation}set pagesRotation(D){if(!(0,A.isValidRotation)(D))throw new Error("Invalid pages rotation angle.");if(!this.pdfDocument||((D%=360)<0&&(D+=360),this._pagesRotation===D))return;this._pagesRotation=D;const ne=this._currentPageNumber,oe={rotation:D};for(const se of this._pages)se.update(oe);this._currentScaleValue&&this._setScale(this._currentScaleValue,!0),this.eventBus.dispatch("rotationchanging",{source:this,pagesRotation:D,pageNumber:ne}),this.defaultRenderingQueue&&this.update()}get firstPagePromise(){return this.pdfDocument?this._firstPageCapability.promise:null}get onePageRendered(){return this.pdfDocument?this._onePageRenderedCapability.promise:null}get pagesPromise(){return this.pdfDocument?this._pagesCapability.promise:null}setDocument(D){var ne=this;if(this.pdfDocument&&(this.eventBus.dispatch("pagesdestroy",{source:this}),this._cancelRendering(),this._resetView(),this.findController&&this.findController.setDocument(null),this._scriptingManager&&this._scriptingManager.setDocument(null),M(this,T)&&(M(this,T).destroy(),C(this,T,null))),this.pdfDocument=D,!D)return;const oe=D.isPureXfa,se=D.numPages,pe=D.getPage(1),be=D.getOptionalContentConfig(),te=M(this,n)?D.getPermissions():Promise.resolve();if(se>B.FORCE_SCROLL_MODE_PAGE){console.warn("Forcing PAGE-scrolling for performance reasons, given the length of the document.");const $=this._scrollMode=A.ScrollMode.PAGE;this.eventBus.dispatch("scrollmodechanged",{source:this,mode:$})}this._pagesCapability.promise.then(()=>{this.eventBus.dispatch("pagesloaded",{source:this,pagesCount:se})},()=>{}),this._onBeforeDraw=$=>{const J=this._pages[$.pageNumber-1];J&&M(this,l).push(J)},this.eventBus._on("pagerender",this._onBeforeDraw),this._onAfterDraw=$=>{$.cssTransform||this._onePageRenderedCapability.settled||(this._onePageRenderedCapability.resolve({timestamp:$.timestamp}),this.eventBus._off("pagerendered",this._onAfterDraw),this._onAfterDraw=null,M(this,L)&&(document.removeEventListener("visibilitychange",M(this,L)),C(this,L,null)))},this.eventBus._on("pagerendered",this._onAfterDraw),Promise.all([pe,te]).then(([$,J])=>{if(D!==this.pdfDocument)return;this._firstPageCapability.resolve($),this._optionalContentConfigPromise=be;const{annotationEditorMode:Pe,annotationMode:Me,textLayerMode:ge}=F(this,k,Ae).call(this,J);if(Pe!==p.AnnotationEditorType.DISABLE){const Fe=Pe;oe?console.warn("Warning: XFA-editing is not implemented."):U(Fe)?(C(this,T,new p.AnnotationEditorUIManager(this.container,this.eventBus)),Fe!==p.AnnotationEditorType.NONE&&M(this,T).updateMode(Fe)):console.error(`Invalid AnnotationEditor mode: ${Fe}`)}const _e=this._scrollMode===A.ScrollMode.PAGE?null:this.viewer,Ee=this.currentScale,Ce=$.getViewport({scale:Ee*p.PixelsPerInch.PDF_TO_CSS_UNITS}),Te=ge===A.TextLayerMode.DISABLE||oe?null:this,ke=Me!==p.AnnotationMode.DISABLE?this:null,Re=oe?this:null,Le=M(this,T)?this:null;for(let Fe=1;Fe<=se;++Fe){const Ie=new o.PDFPageView({container:_e,eventBus:this.eventBus,id:Fe,scale:Ee,defaultViewport:Ce.clone(),optionalContentConfigPromise:be,renderingQueue:this.renderingQueue,textLayerFactory:Te,textLayerMode:ge,annotationLayerFactory:ke,annotationMode:Me,xfaLayerFactory:Re,annotationEditorLayerFactory:Le,textHighlighterFactory:this,structTreeLayerFactory:this,imageResourcesPath:this.imageResourcesPath,renderer:this.renderer,useOnlyCssZoom:this.useOnlyCssZoom,maxCanvasPixels:this.maxCanvasPixels,pageColors:this.pageColors,l10n:this.l10n});this._pages.push(Ie)}const Oe=this._pages[0];Oe&&(Oe.setPdfPage($),this.linkService.cachePageRef(1,$.ref)),this._scrollMode===A.ScrollMode.PAGE?F(this,Y,K).call(this):this._spreadMode!==A.SpreadMode.NONE&&this._updateSpreadMode(),F(this,X,re).call(this).then(O(function*(){if(ne.findController&&ne.findController.setDocument(D),ne._scriptingManager&&ne._scriptingManager.setDocument(D),M(ne,T)&&ne.eventBus.dispatch("annotationeditormodechanged",{source:ne,mode:M(ne,E)}),D.loadingParams.disableAutoFetch||se>B.FORCE_LAZY_PAGE_INIT)return void ne._pagesCapability.resolve();let Fe=se-1;if(Fe<=0)ne._pagesCapability.resolve();else for(let Ie=2;Ie<=se;++Ie){const Ge=D.getPage(Ie).then(We=>{const Be=ne._pages[Ie-1];Be.pdfPage||Be.setPdfPage(We),ne.linkService.cachePageRef(Ie,We.ref),0==--Fe&&ne._pagesCapability.resolve()},We=>{console.error(`Unable to get page ${Ie} to initialize viewer`,We),0==--Fe&&ne._pagesCapability.resolve()});Ie%B.PAUSE_EAGER_PAGE_INIT==0&&(yield Ge)}})),this.eventBus.dispatch("pagesinit",{source:this}),D.getMetadata().then(({info:Fe})=>{D===this.pdfDocument&&Fe.Language&&(this.viewer.lang=Fe.Language)}),this.defaultRenderingQueue&&this.update()}).catch($=>{console.error("Unable to initialize viewer",$),this._pagesCapability.reject($)})}setPageLabels(D){if(this.pdfDocument){D?Array.isArray(D)&&this.pdfDocument.numPages===D.length?this._pageLabels=D:(this._pageLabels=null,console.error("setPageLabels: Invalid page labels.")):this._pageLabels=null;for(let ne=0,oe=this._pages.length;ne<oe;ne++)this._pages[ne].setPageLabel(this._pageLabels?.[ne]??null)}}_resetView(){this._pages=[],this._currentPageNumber=1,this._currentScale=A.UNKNOWN_SCALE,this._currentScaleValue=null,this._pageLabels=null,C(this,l,new V(10)),this._location=null,this._pagesRotation=0,this._optionalContentConfigPromise=null,this._firstPageCapability=(0,p.createPromiseCapability)(),this._onePageRenderedCapability=(0,p.createPromiseCapability)(),this._pagesCapability=(0,p.createPromiseCapability)(),this._scrollMode=A.ScrollMode.VERTICAL,this._previousScrollMode=A.ScrollMode.UNKNOWN,this._spreadMode=A.SpreadMode.NONE,C(this,d,{previousPageNumber:1,scrollDown:!0,pages:[]}),this._onBeforeDraw&&(this.eventBus._off("pagerender",this._onBeforeDraw),this._onBeforeDraw=null),this._onAfterDraw&&(this.eventBus._off("pagerendered",this._onAfterDraw),this._onAfterDraw=null),M(this,L)&&(document.removeEventListener("visibilitychange",M(this,L)),C(this,L,null)),this.viewer.textContent="",this._updateScrollMode(),this.viewer.removeAttribute("lang"),this.viewer.classList.remove(H)}_scrollUpdate(){0!==this.pagesCount&&this.update()}_setScaleUpdatePages(D,ne,oe=!1,se=!1){if(this._currentScaleValue=ne.toString(),F(this,ie,de).call(this,D))return void(se&&this.eventBus.dispatch("scalechanging",{source:this,scale:D,presetValue:ne}));A.docStyle.setProperty("--scale-factor",D*p.PixelsPerInch.PDF_TO_CSS_UNITS);const pe={scale:D};for(const be of this._pages)be.update(pe);if(this._currentScale=D,!oe){let te,be=this._currentPageNumber;this._location&&!(this.isInPresentationMode||this.isChangingPresentationMode)&&(be=this._location.pageNumber,te=[null,{name:"XYZ"},this._location.left,this._location.top,null]),this.scrollPageIntoView({pageNumber:be,destArray:te,allowNegativeOffset:!0})}this.eventBus.dispatch("scalechanging",{source:this,scale:D,presetValue:se?ne:void 0}),this.defaultRenderingQueue&&this.update(),this.updateContainerHeightCss()}get _pageWidthScaleFactor(){return this._spreadMode!==A.SpreadMode.NONE&&this._scrollMode!==A.ScrollMode.HORIZONTAL?2:1}_setScale(D,ne=!1){let oe=parseFloat(D);if(oe>0)this._setScaleUpdatePages(oe,D,ne,!1);else{const se=this._pages[this._currentPageNumber-1];if(!se)return;let pe=A.SCROLLBAR_PADDING,be=A.VERTICAL_PADDING;this.isInPresentationMode?pe=be=4:this.removePageBorders?pe=be=0:this._scrollMode===A.ScrollMode.HORIZONTAL&&([pe,be]=[be,pe]);const te=(this.container.clientWidth-pe)/se.width*se.scale/this._pageWidthScaleFactor,$=(this.container.clientHeight-be)/se.height*se.scale;switch(D){case"page-actual":oe=1;break;case"page-width":oe=te;break;case"page-height":oe=$;break;case"page-fit":oe=Math.min(te,$);break;case"auto":const J=(0,A.isPortraitOrientation)(se)?te:Math.min($,te);oe=Math.min(A.MAX_AUTO_SCALE,J);break;default:return void console.error(`_setScale: "${D}" is an unknown zoom value.`)}this._setScaleUpdatePages(oe,D,ne,!0)}}pageLabelToPageNumber(D){if(!this._pageLabels)return null;const ne=this._pageLabels.indexOf(D);return ne<0?null:ne+1}scrollPageIntoView({pageNumber:D,destArray:ne=null,allowNegativeOffset:oe=!1,ignoreDestinationZoom:se=!1}){if(!this.pdfDocument)return;const pe=Number.isInteger(D)&&this._pages[D-1];if(!pe)return void console.error(`scrollPageIntoView: "${D}" is not a valid pageNumber parameter.`);if(this.isInPresentationMode||!ne)return void this._setCurrentPageNumber(D,!0);let Pe,Me,be=0,te=0,$=0,J=0;const ge=pe.rotation%180!=0,_e=(ge?pe.height:pe.width)/pe.scale/p.PixelsPerInch.PDF_TO_CSS_UNITS,Ee=(ge?pe.width:pe.height)/pe.scale/p.PixelsPerInch.PDF_TO_CSS_UNITS;let Ce=0;switch(ne[1].name){case"XYZ":be=ne[2],te=ne[3],Ce=ne[4],be=null!==be?be:0,te=null!==te?te:Ee;break;case"Fit":case"FitB":Ce="page-fit";break;case"FitH":case"FitBH":te=ne[2],Ce="page-width",null===te&&this._location?(be=this._location.left,te=this._location.top):("number"!=typeof te||te<0)&&(te=Ee);break;case"FitV":case"FitBV":be=ne[2],$=_e,J=Ee,Ce="page-height";break;case"FitR":be=ne[2],te=ne[3],$=ne[4]-be,J=ne[5]-te,Pe=(this.container.clientWidth-(this.removePageBorders?0:A.SCROLLBAR_PADDING))/$/p.PixelsPerInch.PDF_TO_CSS_UNITS,Me=(this.container.clientHeight-(this.removePageBorders?0:A.VERTICAL_PADDING))/J/p.PixelsPerInch.PDF_TO_CSS_UNITS,Ce=Math.min(Math.abs(Pe),Math.abs(Me));break;default:return void console.error(`scrollPageIntoView: "${ne[1].name}" is not a valid destination type.`)}if(se||(Ce&&Ce!==this._currentScale?this.currentScaleValue=Ce:this._currentScale===A.UNKNOWN_SCALE&&(this.currentScaleValue=A.DEFAULT_SCALE_VALUE)),"page-fit"===Ce&&!ne[4])return void F(this,he,ce).call(this,pe);const Te=[pe.viewport.convertToViewportPoint(be,te),pe.viewport.convertToViewportPoint(be+$,te+J)];let ke=Math.min(Te[0][0],Te[1][0]),Re=Math.min(Te[0][1],Te[1][1]);oe||(ke=Math.max(ke,0),Re=Math.max(Re,0)),F(this,he,ce).call(this,pe,{left:ke,top:Re})}_updateLocation(D){const ne=this._currentScale,oe=this._currentScaleValue,se=parseFloat(oe)===ne?Math.round(1e4*ne)/100:oe,pe=D.id,te=this.container,$=this._pages[pe-1].getPagePoint(te.scrollLeft-D.x,te.scrollTop-D.y),J=Math.round($[0]),Pe=Math.round($[1]);let Me=`#page=${pe}`;this.isInPresentationMode||(Me+=`&zoom=${se},${J},${Pe}`),this._location={pageNumber:pe,scale:se,top:Pe,left:J,rotation:this._pagesRotation,pdfOpenParams:Me}}update(){const D=this._getVisiblePages(),ne=D.views,oe=ne.length;if(0===oe)return;const se=Math.max(10,2*oe+1);M(this,l).resize(se,D.ids),this.renderingQueue.renderHighestPriority(D);const pe=this._spreadMode===A.SpreadMode.NONE&&(this._scrollMode===A.ScrollMode.PAGE||this._scrollMode===A.ScrollMode.VERTICAL),be=this._currentPageNumber;let te=!1;for(const $ of ne){if($.percent<100)break;if($.id===be&&pe){te=!0;break}}this._setCurrentPageNumber(te?be:ne[0].id),this._updateLocation(D.first),this.eventBus.dispatch("updateviewarea",{source:this,location:this._location})}containsElement(D){return this.container.contains(D)}focus(){this.container.focus()}get _isContainerRtl(){return"rtl"===getComputedStyle(this.container).direction}get isInPresentationMode(){return this.presentationModeState===A.PresentationModeState.FULLSCREEN}get isChangingPresentationMode(){return this.presentationModeState===A.PresentationModeState.CHANGING}get isHorizontalScrollbarEnabled(){return!this.isInPresentationMode&&this.container.scrollWidth>this.container.clientWidth}get isVerticalScrollbarEnabled(){return!this.isInPresentationMode&&this.container.scrollHeight>this.container.clientHeight}_getVisiblePages(){const D=this._scrollMode===A.ScrollMode.PAGE?M(this,d).pages:this._pages,ne=this._scrollMode===A.ScrollMode.HORIZONTAL;return(0,A.getVisibleElements)({scrollEl:this.container,views:D,sortByVisibility:!0,horizontal:ne,rtl:ne&&this._isContainerRtl})}isPageVisible(D){return!!this.pdfDocument&&(Number.isInteger(D)&&D>0&&D<=this.pagesCount?this._getVisiblePages().ids.has(D):(console.error(`isPageVisible: "${D}" is not a valid page.`),!1))}isPageCached(D){if(!this.pdfDocument)return!1;if(!(Number.isInteger(D)&&D>0&&D<=this.pagesCount))return console.error(`isPageCached: "${D}" is not a valid page.`),!1;const ne=this._pages[D-1];return M(this,l).has(ne)}cleanup(){for(const D of this._pages)D.renderingState!==A.RenderingStates.FINISHED&&D.reset()}_cancelRendering(){for(const D of this._pages)D.cancelRendering()}forceRendering(D){const ne=D||this._getVisiblePages(),oe=F(this,fe,Se).call(this,ne),pe=this.renderingQueue.getHighestPriority(ne,this._pages,oe,this._spreadMode!==A.SpreadMode.NONE&&this._scrollMode!==A.ScrollMode.HORIZONTAL);return F(this,me,ye).call(this,ne.ids),!!pe&&(F(this,ve,I).call(this,pe).then(()=>{this.renderingQueue.renderView(pe)}),!0)}createTextLayerBuilder({textLayerDiv:D,pageIndex:ne,viewport:oe,enhanceTextSelection:se=!1,eventBus:pe,highlighter:be,accessibilityManager:te=null}){return new b.TextLayerBuilder({textLayerDiv:D,eventBus:pe,pageIndex:ne,viewport:oe,enhanceTextSelection:!this.isInPresentationMode&&se,highlighter:be,accessibilityManager:te})}createTextHighlighter({pageIndex:D,eventBus:ne}){return new c.TextHighlighter({eventBus:ne,pageIndex:D,findController:this.isInPresentationMode?null:this.findController})}createAnnotationLayerBuilder({pageDiv:D,pdfPage:ne,annotationStorage:oe=this.pdfDocument?.annotationStorage,imageResourcesPath:se="",renderForms:pe=!0,l10n:be=e.NullL10n,enableScripting:te=this.enableScripting,hasJSActionsPromise:$=this.pdfDocument?.hasJSActions(),mouseState:J=this._scriptingManager?.mouseState,fieldObjectsPromise:Pe=this.pdfDocument?.getFieldObjects(),annotationCanvasMap:Me=null,accessibilityManager:ge=null}){return new i.AnnotationLayerBuilder({pageDiv:D,pdfPage:ne,annotationStorage:oe,imageResourcesPath:se,renderForms:pe,linkService:this.linkService,downloadManager:this.downloadManager,l10n:be,enableScripting:te,hasJSActionsPromise:$,mouseState:J,fieldObjectsPromise:Pe,annotationCanvasMap:Me,accessibilityManager:ge})}createAnnotationEditorLayerBuilder({uiManager:D=M(this,T),pageDiv:ne,pdfPage:oe,accessibilityManager:se=null,l10n:pe,annotationStorage:be=this.pdfDocument?.annotationStorage}){return new u.AnnotationEditorLayerBuilder({uiManager:D,pageDiv:ne,pdfPage:oe,annotationStorage:be,accessibilityManager:se,l10n:pe})}createXfaLayerBuilder({pageDiv:D,pdfPage:ne,annotationStorage:oe=this.pdfDocument?.annotationStorage}){return new N.XfaLayerBuilder({pageDiv:D,pdfPage:ne,annotationStorage:oe,linkService:this.linkService})}createStructTreeLayerBuilder({pdfPage:D}){return new f.StructTreeLayerBuilder({pdfPage:D})}get hasEqualPageSizes(){const D=this._pages[0];for(let ne=1,oe=this._pages.length;ne<oe;++ne){const se=this._pages[ne];if(se.width!==D.width||se.height!==D.height)return!1}return!0}getPagesOverview(){return this._pages.map(D=>{const ne=D.pdfPage.getViewport({scale:1});return!this.enablePrintAutoRotate||(0,A.isPortraitOrientation)(ne)?{width:ne.width,height:ne.height,rotation:ne.rotation}:{width:ne.height,height:ne.width,rotation:(ne.rotation-90)%360}})}get optionalContentConfigPromise(){return this.pdfDocument?this._optionalContentConfigPromise?this._optionalContentConfigPromise:(console.error("optionalContentConfigPromise: Not initialized yet."),this.pdfDocument.getOptionalContentConfig()):Promise.resolve(null)}set optionalContentConfigPromise(D){if(!(D instanceof Promise))throw new Error(`Invalid optionalContentConfigPromise: ${D}`);if(!this.pdfDocument||!this._optionalContentConfigPromise)return;this._optionalContentConfigPromise=D;const ne={optionalContentConfigPromise:D};for(const oe of this._pages)oe.update(ne);this.update(),this.eventBus.dispatch("optionalcontentconfigchanged",{source:this,promise:D})}get scrollMode(){return this._scrollMode}set scrollMode(D){if(this._scrollMode!==D){if(!(0,A.isValidScrollMode)(D))throw new Error(`Invalid scroll mode: ${D}`);this.pagesCount>B.FORCE_SCROLL_MODE_PAGE||(this._previousScrollMode=this._scrollMode,this._scrollMode=D,this.eventBus.dispatch("scrollmodechanged",{source:this,mode:D}),this._updateScrollMode(this._currentPageNumber))}}_updateScrollMode(D=null){const ne=this._scrollMode,oe=this.viewer;oe.classList.toggle("scrollHorizontal",ne===A.ScrollMode.HORIZONTAL),oe.classList.toggle("scrollWrapped",ne===A.ScrollMode.WRAPPED),this.pdfDocument&&D&&(ne===A.ScrollMode.PAGE?F(this,Y,K).call(this):this._previousScrollMode===A.ScrollMode.PAGE&&this._updateSpreadMode(),this._currentScaleValue&&isNaN(this._currentScaleValue)&&this._setScale(this._currentScaleValue,!0),this._setCurrentPageNumber(D,!0),this.update())}get spreadMode(){return this._spreadMode}set spreadMode(D){if(this._spreadMode!==D){if(!(0,A.isValidSpreadMode)(D))throw new Error(`Invalid spread mode: ${D}`);this._spreadMode=D,this.eventBus.dispatch("spreadmodechanged",{source:this,mode:D}),this._updateSpreadMode(this._currentPageNumber)}}_updateSpreadMode(D=null){if(!this.pdfDocument)return;const ne=this.viewer,oe=this._pages;if(this._scrollMode===A.ScrollMode.PAGE)F(this,Y,K).call(this);else if(ne.textContent="",this._spreadMode===A.SpreadMode.NONE)for(const se of this._pages)ne.append(se.div);else{const se=this._spreadMode-1;let pe=null;for(let be=0,te=oe.length;be<te;++be)null===pe?(pe=document.createElement("div"),pe.className="spread",ne.append(pe)):be%2===se&&(pe=pe.cloneNode(!1),ne.append(pe)),pe.append(oe[be].div)}D&&(this._currentScaleValue&&isNaN(this._currentScaleValue)&&this._setScale(this._currentScaleValue,!0),this._setCurrentPageNumber(D,!0),this.update())}_getPageAdvance(D,ne=!1){switch(this._scrollMode){case A.ScrollMode.WRAPPED:{const{views:oe}=this._getVisiblePages(),se=new Map;for(const{id:pe,y:be,percent:te,widthPercent:$}of oe){if(0===te||$<100)continue;let J=se.get(be);J||se.set(be,J||=[]),J.push(pe)}for(const pe of se.values()){const be=pe.indexOf(D);if(-1===be)continue;const te=pe.length;if(1===te)break;if(ne)for(let $=be-1,J=0;$>=J;$--){const Me=pe[$+1]-1;if(pe[$]<Me)return D-Me}else for(let $=be+1,J=te;$<J;$++){const Me=pe[$-1]+1;if(pe[$]>Me)return Me-D}if(ne){const $=pe[0];if($<D)return D-$+1}else{const $=pe[te-1];if($>D)return $-D+1}break}break}case A.ScrollMode.HORIZONTAL:break;case A.ScrollMode.PAGE:case A.ScrollMode.VERTICAL:{if(this._spreadMode===A.SpreadMode.NONE)break;const oe=this._spreadMode-1;if(ne&&D%2!==oe)break;if(!ne&&D%2===oe)break;const{views:se}=this._getVisiblePages(),pe=ne?D-1:D+1;for(const{id:be,percent:te,widthPercent:$}of se)if(be===pe){if(te>0&&100===$)return 2;break}break}}return 1}nextPage(){const D=this._currentPageNumber,ne=this.pagesCount;if(D>=ne)return!1;const oe=this._getPageAdvance(D,!1)||1;return this.currentPageNumber=Math.min(D+oe,ne),!0}previousPage(){const D=this._currentPageNumber;if(D<=1)return!1;const ne=this._getPageAdvance(D,!0)||1;return this.currentPageNumber=Math.max(D-ne,1),!0}increaseScale(D=1){let ne=this._currentScale;do{ne=(ne*A.DEFAULT_SCALE_DELTA).toFixed(2),ne=Math.ceil(10*ne)/10,ne=Math.min(A.MAX_SCALE,ne)}while(--D>0&&ne<A.MAX_SCALE);this.currentScaleValue=ne}decreaseScale(D=1){let ne=this._currentScale;do{ne=(ne/A.DEFAULT_SCALE_DELTA).toFixed(2),ne=Math.floor(10*ne)/10,ne=Math.max(A.MIN_SCALE,ne)}while(--D>0&&ne>A.MIN_SCALE);this.currentScaleValue=ne}updateContainerHeightCss(){const D=this.container.clientHeight;D!==M(this,h)&&(C(this,h,D),A.docStyle.setProperty("--viewer-container-height",`${D}px`))}get annotationEditorMode(){return M(this,T)?M(this,E):p.AnnotationEditorType.DISABLE}set annotationEditorMode(D){if(!M(this,T))throw new Error("The AnnotationEditor is not enabled.");if(M(this,E)!==D){if(!U(D))throw new Error(`Invalid AnnotationEditor mode: ${D}`);this.pdfDocument&&(C(this,E,D),this.eventBus.dispatch("annotationeditormodechanged",{source:this,mode:D}),M(this,T).updateMode(D))}}set annotationEditorParams({type:D,value:ne}){if(!M(this,T))throw new Error("The AnnotationEditor is not enabled.");M(this,T).updateParams(D,ne)}refresh(){if(!this.pdfDocument)return;const D={};for(const ne of this._pages)ne.update(D);this.update()}}function Ae(xe){const D={annotationEditorMode:M(this,E),annotationMode:M(this,w),textLayerMode:this.textLayerMode};return xe&&(xe.includes(p.PermissionFlag.COPY)||this.viewer.classList.add(H),xe.includes(p.PermissionFlag.MODIFY_CONTENTS)||(D.annotationEditorMode=p.AnnotationEditorType.DISABLE),!xe.includes(p.PermissionFlag.MODIFY_ANNOTATIONS)&&!xe.includes(p.PermissionFlag.FILL_INTERACTIVE_FORMS)&&M(this,w)===p.AnnotationMode.ENABLE_FORMS&&(D.annotationMode=p.AnnotationMode.ENABLE)),D}function re(){if("hidden"===document.visibilityState||!this.container.offsetParent||0===this._getVisiblePages().views.length)return Promise.resolve();const xe=new Promise(D=>{C(this,L,()=>{"hidden"===document.visibilityState&&(D(),document.removeEventListener("visibilitychange",M(this,L)),C(this,L,null))}),document.addEventListener("visibilitychange",M(this,L))});return Promise.race([this._onePageRenderedCapability.promise,xe])}function K(){if(this._scrollMode!==A.ScrollMode.PAGE)throw new Error("#ensurePageViewVisible: Invalid scrollMode value.");const xe=this._currentPageNumber,D=M(this,d),ne=this.viewer;if(ne.textContent="",D.pages.length=0,this._spreadMode!==A.SpreadMode.NONE||this.isInPresentationMode){const oe=new Set,se=this._spreadMode-1;-1===se?oe.add(xe-1):xe%2!==se?(oe.add(xe-1),oe.add(xe)):(oe.add(xe-2),oe.add(xe-1));const pe=document.createElement("div");if(pe.className="spread",this.isInPresentationMode){const be=document.createElement("div");be.className="dummyPage",pe.append(be)}for(const be of oe){const te=this._pages[be];te&&(pe.append(te.div),D.pages.push(te))}ne.append(pe)}else{const oe=this._pages[xe-1];ne.append(oe.div),D.pages.push(oe)}D.scrollDown=xe>=D.previousPageNumber,D.previousPageNumber=xe}function ce(xe,D=null){const{div:ne,id:oe}=xe;if(this._scrollMode===A.ScrollMode.PAGE&&(this._setCurrentPageNumber(oe),F(this,Y,K).call(this),this.update()),!D&&!this.isInPresentationMode){const se=ne.offsetLeft+ne.clientLeft,pe=se+ne.clientWidth,{scrollLeft:be,clientWidth:te}=this.container;(this._scrollMode===A.ScrollMode.HORIZONTAL||se<be||pe>be+te)&&(D={left:0,top:0})}(0,A.scrollIntoView)(ne,D)}function de(xe){return xe===this._currentScale||Math.abs(xe-this._currentScale)<1e-15}function z(){const xe=this._pages[this._currentPageNumber-1];this.isInPresentationMode&&this._setScale(this._currentScaleValue,!0),F(this,he,ce).call(this,xe)}function I(xe){return ae.apply(this,arguments)}function ae(){return(ae=O(function*(xe){if(xe.pdfPage)return xe.pdfPage;try{const D=yield this.pdfDocument.getPage(xe.id);return xe.pdfPage||xe.setPdfPage(D),this.linkService._cachedPageNumber?.(D.ref)||this.linkService.cachePageRef(xe.id,D.ref),D}catch(D){return console.error("Unable to get page for page view",D),null}})).apply(this,arguments)}function Se(xe){if(1===xe.first?.id)return!0;if(xe.last?.id===this.pagesCount)return!1;switch(this._scrollMode){case A.ScrollMode.PAGE:return M(this,d).scrollDown;case A.ScrollMode.HORIZONTAL:return this.scroll.right}return this.scroll.down}function ye(xe){for(const D of xe)this._pages[D-1]?.toggleLoadingIconSpinner(!0);for(const D of M(this,l))xe.has(D.id)||D.toggleLoadingIconSpinner(!1)}s.BaseViewer=we},(t,s,_)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PDFPageView=void 0;var P=_(3),p=_(7),A=_(14),u=_(4),i=_(15);const e=A.compatibilityParams.maxCanvasPixels||16777216;var o=new WeakMap,m=new WeakMap;s.PDFPageView=class S{constructor(c){Q(this,o,{writable:!0,value:P.AnnotationMode.ENABLE_FORMS}),Q(this,m,{writable:!0,value:{initialOptionalContent:!0,regularAnnotations:!0}});const b=c.container,N=c.defaultViewport;this.id=c.id,this.renderingId="page"+this.id,this.pdfPage=null,this.pageLabel=null,this.rotation=0,this.scale=c.scale||p.DEFAULT_SCALE,this.viewport=N,this.pdfPageRotate=N.rotation,this._optionalContentConfigPromise=c.optionalContentConfigPromise||null,this.hasRestrictedScaling=!1,this.textLayerMode=c.textLayerMode??p.TextLayerMode.ENABLE,C(this,o,c.annotationMode??P.AnnotationMode.ENABLE_FORMS),this.imageResourcesPath=c.imageResourcesPath||"",this.useOnlyCssZoom=c.useOnlyCssZoom||!1,this.maxCanvasPixels=c.maxCanvasPixels||e,this.pageColors=c.pageColors||null,this.eventBus=c.eventBus,this.renderingQueue=c.renderingQueue,this.textLayerFactory=c.textLayerFactory,this.annotationLayerFactory=c.annotationLayerFactory,this.annotationEditorLayerFactory=c.annotationEditorLayerFactory,this.xfaLayerFactory=c.xfaLayerFactory,this.textHighlighter=c.textHighlighterFactory?.createTextHighlighter({pageIndex:this.id-1,eventBus:this.eventBus}),this.structTreeLayerFactory=c.structTreeLayerFactory,this.renderer=c.renderer||p.RendererType.CANVAS,this.l10n=c.l10n||u.NullL10n,this.paintTask=null,this.paintedViewportMap=new WeakMap,this.renderingState=p.RenderingStates.INITIAL,this.resume=null,this._renderError=null,this._isStandalone=!this.renderingQueue?.hasViewer(),this._annotationCanvasMap=null,this.annotationLayer=null,this.annotationEditorLayer=null,this.textLayer=null,this.zoomLayer=null,this.xfaLayer=null,this.structTreeLayer=null;const R=document.createElement("div");if(R.className="page",R.style.width=Math.floor(this.viewport.width)+"px",R.style.height=Math.floor(this.viewport.height)+"px",R.setAttribute("data-page-number",this.id),R.setAttribute("role","region"),this.l10n.get("page_landmark",{page:this.id}).then(H=>{R.setAttribute("aria-label",H)}),this.div=R,b?.append(R),this._isStandalone){const{optionalContentConfigPromise:H}=c;H&&H.then(B=>{H===this._optionalContentConfigPromise&&(M(this,m).initialOptionalContent=B.hasInitialVisibility)})}}setPdfPage(c){this.pdfPage=c,this.pdfPageRotate=c.rotate,this.viewport=c.getViewport({scale:this.scale*P.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:(this.rotation+this.pdfPageRotate)%360}),this.reset()}destroy(){this.reset(),this.pdfPage&&this.pdfPage.cleanup()}_renderAnnotationLayer(){var c=this;return O(function*(){let b=null;try{yield c.annotationLayer.render(c.viewport,"display")}catch(N){console.error(`_renderAnnotationLayer: "${N}".`),b=N}finally{c.eventBus.dispatch("annotationlayerrendered",{source:c,pageNumber:c.id,error:b})}})()}_renderAnnotationEditorLayer(){var c=this;return O(function*(){let b=null;try{yield c.annotationEditorLayer.render(c.viewport,"display")}catch(N){console.error(`_renderAnnotationEditorLayer: "${N}".`),b=N}finally{c.eventBus.dispatch("annotationeditorlayerrendered",{source:c,pageNumber:c.id,error:b})}})()}_renderXfaLayer(){var c=this;return O(function*(){let b=null;try{const N=yield c.xfaLayer.render(c.viewport,"display");c.textHighlighter&&c._buildXfaTextContentItems(N.textDivs)}catch(N){console.error(`_renderXfaLayer: "${N}".`),b=N}finally{c.eventBus.dispatch("xfalayerrendered",{source:c,pageNumber:c.id,error:b})}})()}_buildXfaTextContentItems(c){var b=this;return O(function*(){const N=yield b.pdfPage.getTextContent(),R=[];for(const H of N.items)R.push(H.str);b.textHighlighter.setTextMapping(c,R),b.textHighlighter.enable()})()}_resetZoomLayer(c=!1){if(!this.zoomLayer)return;const b=this.zoomLayer.firstChild;this.paintedViewportMap.delete(b),b.width=0,b.height=0,c&&this.zoomLayer.remove(),this.zoomLayer=null}reset({keepZoomLayer:c=!1,keepAnnotationLayer:b=!1,keepAnnotationEditorLayer:N=!1,keepXfaLayer:R=!1}={}){this.cancelRendering({keepAnnotationLayer:b,keepAnnotationEditorLayer:N,keepXfaLayer:R}),this.renderingState=p.RenderingStates.INITIAL;const H=this.div;H.style.width=Math.floor(this.viewport.width)+"px",H.style.height=Math.floor(this.viewport.height)+"px";const B=H.childNodes,U=c&&this.zoomLayer||null,j=b&&this.annotationLayer?.div||null,ee=N&&this.annotationEditorLayer?.div||null,le=R&&this.xfaLayer?.div||null;for(let V=B.length-1;V>=0;V--){const g=B[V];switch(g){case U:case j:case ee:case le:continue}g.remove()}H.removeAttribute("data-loaded"),j&&this.annotationLayer.hide(),ee?this.annotationEditorLayer.hide():this.annotationEditorLayer?.destroy(),le&&this.xfaLayer.hide(),U||(this.canvas&&(this.paintedViewportMap.delete(this.canvas),this.canvas.width=0,this.canvas.height=0,delete this.canvas),this._resetZoomLayer()),this.svg&&(this.paintedViewportMap.delete(this.svg),delete this.svg),this.loadingIconDiv=document.createElement("div"),this.loadingIconDiv.className="loadingIcon notVisible",this._isStandalone&&this.toggleLoadingIconSpinner(!0),this.loadingIconDiv.setAttribute("role","img"),this.l10n.get("loading").then(V=>{this.loadingIconDiv?.setAttribute("aria-label",V)}),H.append(this.loadingIconDiv)}update({scale:c=0,rotation:b=null,optionalContentConfigPromise:N=null}){if(this.scale=c||this.scale,"number"==typeof b&&(this.rotation=b),N instanceof Promise&&(this._optionalContentConfigPromise=N,N.then(B=>{N===this._optionalContentConfigPromise&&(M(this,m).initialOptionalContent=B.hasInitialVisibility)})),this.viewport=this.viewport.clone({scale:this.scale*P.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:(this.rotation+this.pdfPageRotate)%360}),this._isStandalone&&p.docStyle.setProperty("--scale-factor",this.viewport.scale),this.svg)return this.cssTransform({target:this.svg,redrawAnnotationLayer:!0,redrawAnnotationEditorLayer:!0,redrawXfaLayer:!0}),void this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0,timestamp:performance.now(),error:this._renderError});let H=!1;if(this.canvas&&this.maxCanvasPixels>0){const B=this.outputScale;(Math.floor(this.viewport.width)*B.sx|0)*(Math.floor(this.viewport.height)*B.sy|0)>this.maxCanvasPixels&&(H=!0)}if(this.canvas){if(this.useOnlyCssZoom||this.hasRestrictedScaling&&H)return this.cssTransform({target:this.canvas,redrawAnnotationLayer:!0,redrawAnnotationEditorLayer:!0,redrawXfaLayer:!0}),void this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0,timestamp:performance.now(),error:this._renderError});!this.zoomLayer&&!this.canvas.hidden&&(this.zoomLayer=this.canvas.parentNode,this.zoomLayer.style.position="absolute")}this.zoomLayer&&this.cssTransform({target:this.zoomLayer.firstChild}),this.reset({keepZoomLayer:!0,keepAnnotationLayer:!0,keepAnnotationEditorLayer:!0,keepXfaLayer:!0})}cancelRendering({keepAnnotationLayer:c=!1,keepAnnotationEditorLayer:b=!1,keepXfaLayer:N=!1}={}){this.paintTask&&(this.paintTask.cancel(),this.paintTask=null),this.resume=null,this.textLayer&&(this.textLayer.cancel(),this.textLayer=null),this.annotationLayer&&(!c||!this.annotationLayer.div)&&(this.annotationLayer.cancel(),this.annotationLayer=null,this._annotationCanvasMap=null),this.annotationEditorLayer&&(!b||!this.annotationEditorLayer.div)&&(this.annotationEditorLayer.cancel(),this.annotationEditorLayer=null),this.xfaLayer&&(!N||!this.xfaLayer.div)&&(this.xfaLayer.cancel(),this.xfaLayer=null,this.textHighlighter?.disable()),this._onTextLayerRendered&&(this.eventBus._off("textlayerrendered",this._onTextLayerRendered),this._onTextLayerRendered=null)}cssTransform({target:c,redrawAnnotationLayer:b=!1,redrawAnnotationEditorLayer:N=!1,redrawXfaLayer:R=!1}){const H=this.viewport.width,B=this.viewport.height,U=this.div;c.style.width=c.parentNode.style.width=U.style.width=Math.floor(H)+"px",c.style.height=c.parentNode.style.height=U.style.height=Math.floor(B)+"px";const j=this.viewport.rotation-this.paintedViewportMap.get(c).rotation,ee=Math.abs(j);let le=1,V=1;if((90===ee||270===ee)&&(le=B/H,V=H/B),c.style.transform=`rotate(${j}deg) scale(${le}, ${V})`,this.textLayer){const g=this.textLayer.viewport,E=Math.abs(this.viewport.rotation-g.rotation);let T=H/g.width;(90===E||270===E)&&(T=H/g.height);const w=this.textLayer.textLayerDiv;let n,h;switch(E){case 0:n=h=0;break;case 90:n=0,h="-"+w.style.height;break;case 180:n="-"+w.style.width,h="-"+w.style.height;break;case 270:n="-"+w.style.width,h=0;break;default:console.error("Bad rotation value.")}w.style.transform=`rotate(${E}deg) scale(${T}) translate(${n}, ${h})`,w.style.transformOrigin="0% 0%"}b&&this.annotationLayer&&this._renderAnnotationLayer(),N&&this.annotationEditorLayer&&this._renderAnnotationEditorLayer(),R&&this.xfaLayer&&this._renderXfaLayer()}get width(){return this.viewport.width}get height(){return this.viewport.height}getPagePoint(c,b){return this.viewport.convertToPdfPoint(c,b)}toggleLoadingIconSpinner(c=!1){this.loadingIconDiv?.classList.toggle("notVisible",!c)}draw(){var c=this;this.renderingState!==p.RenderingStates.INITIAL&&(console.error("Must be in new state before drawing"),this.reset());const{div:b,pdfPage:N}=this;if(!N)return this.renderingState=p.RenderingStates.FINISHED,this.loadingIconDiv&&(this.loadingIconDiv.remove(),delete this.loadingIconDiv),Promise.reject(new Error("pdfPage is not loaded"));this.renderingState=p.RenderingStates.RUNNING;const R=document.createElement("div");R.style.width=b.style.width,R.style.height=b.style.height,R.classList.add("canvasWrapper");const H=this.annotationLayer?.div||this.annotationEditorLayer?.div;H?H.before(R):b.append(R);let B=null;if(this.textLayerMode!==p.TextLayerMode.DISABLE&&this.textLayerFactory){this._accessibilityManager||=new i.TextAccessibilityManager;const V=document.createElement("div");V.className="textLayer",V.style.width=R.style.width,V.style.height=R.style.height,H?H.before(V):b.append(V),B=this.textLayerFactory.createTextLayerBuilder({textLayerDiv:V,pageIndex:this.id-1,viewport:this.viewport,enhanceTextSelection:this.textLayerMode===p.TextLayerMode.ENABLE_ENHANCE,eventBus:this.eventBus,highlighter:this.textHighlighter,accessibilityManager:this._accessibilityManager})}this.textLayer=B,M(this,o)!==P.AnnotationMode.DISABLE&&this.annotationLayerFactory&&(this._annotationCanvasMap||=new Map,this.annotationLayer||=this.annotationLayerFactory.createAnnotationLayerBuilder({pageDiv:b,pdfPage:N,imageResourcesPath:this.imageResourcesPath,renderForms:M(this,o)===P.AnnotationMode.ENABLE_FORMS,l10n:this.l10n,annotationCanvasMap:this._annotationCanvasMap,accessibilityManager:this._accessibilityManager})),this.xfaLayer?.div&&b.append(this.xfaLayer.div);let U=null;this.renderingQueue&&(U=V=>{if(!this.renderingQueue.isHighestPriority(this))return this.renderingState=p.RenderingStates.PAUSED,void(this.resume=()=>{this.renderingState=p.RenderingStates.RUNNING,V()});V()});const j=function(){var V=O(function*(g=null){if(ee===c.paintTask&&(c.paintTask=null),g instanceof P.RenderingCancelledException)c._renderError=null;else if(c._renderError=g,c.renderingState=p.RenderingStates.FINISHED,c.loadingIconDiv&&(c.loadingIconDiv.remove(),delete c.loadingIconDiv),c._resetZoomLayer(!0),M(c,m).regularAnnotations=!ee.separateAnnots,c.eventBus.dispatch("pagerendered",{source:c,pageNumber:c.id,cssTransform:!1,timestamp:performance.now(),error:c._renderError}),g)throw g});return function(){return V.apply(this,arguments)}}(),ee=this.renderer===p.RendererType.SVG?this.paintOnSvg(R):this.paintOnCanvas(R);ee.onRenderContinue=U,this.paintTask=ee;const le=ee.promise.then(()=>j(null).then(()=>{if(B){const V=N.streamTextContent({includeMarkedContent:!0});B.setTextContentStream(V),B.render()}this.annotationLayer&&this._renderAnnotationLayer().then(()=>{this.annotationEditorLayerFactory&&(this.annotationEditorLayer||=this.annotationEditorLayerFactory.createAnnotationEditorLayerBuilder({pageDiv:b,pdfPage:N,l10n:this.l10n,accessibilityManager:this._accessibilityManager}),this._renderAnnotationEditorLayer())})}),function(V){return j(V)});return this.xfaLayerFactory&&(this.xfaLayer||=this.xfaLayerFactory.createXfaLayerBuilder({pageDiv:b,pdfPage:N}),this._renderXfaLayer()),this.structTreeLayerFactory&&this.textLayer&&this.canvas&&(this._onTextLayerRendered=V=>{V.pageNumber===this.id&&(this.eventBus._off("textlayerrendered",this._onTextLayerRendered),this._onTextLayerRendered=null,this.canvas&&this.pdfPage.getStructTree().then(g=>{if(!g||!this.canvas)return;const l=this.structTreeLayer.render(g);l.classList.add("structTree"),this.canvas.append(l)}))},this.eventBus._on("textlayerrendered",this._onTextLayerRendered),this.structTreeLayer=this.structTreeLayerFactory.createStructTreeLayerBuilder({pdfPage:N})),b.setAttribute("data-loaded",!0),this.eventBus.dispatch("pagerender",{source:this,pageNumber:this.id}),le}paintOnCanvas(c){const b=(0,P.createPromiseCapability)(),N={promise:b.promise,onRenderContinue(T){T()},cancel(){E.cancel()},get separateAnnots(){return E.separateAnnots}},R=this.viewport,H=document.createElement("canvas");H.setAttribute("role","presentation"),H.hidden=!0;let B=!0;const U=function(){B&&(H.hidden=!1,B=!1)};c.append(H),this.canvas=H;const j=H.getContext("2d",{alpha:!1}),ee=this.outputScale=new p.OutputScale;if(this.useOnlyCssZoom){const T=R.clone({scale:P.PixelsPerInch.PDF_TO_CSS_UNITS});ee.sx*=T.width/R.width,ee.sy*=T.height/R.height}if(this.maxCanvasPixels>0){const w=Math.sqrt(this.maxCanvasPixels/(R.width*R.height));ee.sx>w||ee.sy>w?(ee.sx=w,ee.sy=w,this.hasRestrictedScaling=!0):this.hasRestrictedScaling=!1}const le=(0,p.approximateFraction)(ee.sx),V=(0,p.approximateFraction)(ee.sy);H.width=(0,p.roundToDivide)(R.width*ee.sx,le[0]),H.height=(0,p.roundToDivide)(R.height*ee.sy,V[0]),H.style.width=(0,p.roundToDivide)(R.width,le[1])+"px",H.style.height=(0,p.roundToDivide)(R.height,V[1])+"px",this.paintedViewportMap.set(H,R);const l={canvasContext:j,transform:ee.scaled?[ee.sx,0,0,ee.sy,0,0]:null,viewport:this.viewport,annotationMode:M(this,o),optionalContentConfigPromise:this._optionalContentConfigPromise,annotationCanvasMap:this._annotationCanvasMap,pageColors:this.pageColors},E=this.pdfPage.render(l);return E.onContinue=function(T){U(),N.onRenderContinue?N.onRenderContinue(T):T()},E.promise.then(function(){U(),b.resolve()},function(T){U(),b.reject(T)}),N}paintOnSvg(c){let b=!1;const N=()=>{if(b)throw new P.RenderingCancelledException(`Rendering cancelled, page ${this.id}`,"svg")},R=this.pdfPage,H=this.viewport.clone({scale:P.PixelsPerInch.PDF_TO_CSS_UNITS});return{promise:R.getOperatorList({annotationMode:M(this,o)}).then(U=>(N(),new P.SVGGraphics(R.commonObjs,R.objs).getSVG(U,H).then(ee=>{N(),this.svg=ee,this.paintedViewportMap.set(ee,H),ee.style.width=c.style.width,ee.style.height=c.style.height,this.renderingState=p.RenderingStates.FINISHED,c.append(ee)}))),onRenderContinue(U){U()},cancel(){b=!0},get separateAnnots(){return!1}}}setPageLabel(c){this.pageLabel="string"==typeof c?c:null,null!==this.pageLabel?this.div.setAttribute("data-page-label",this.pageLabel):this.div.removeAttribute("data-page-label")}get thumbnailCanvas(){const{initialOptionalContent:c,regularAnnotations:b}=M(this,m);return c&&b?this.canvas:null}}},(t,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.compatibilityParams=s.OptionKind=s.AppOptions=void 0;const _=Object.create(null);s.compatibilityParams=_;{const i=navigator.userAgent||"",e=navigator.platform||"",o=navigator.maxTouchPoints||1,m=/Android/.test(i);(/\b(iPad|iPhone|iPod)(?=;)/.test(i)||"MacIntel"===e&&o>1||m)&&(_.maxCanvasPixels=5242880)}const P={VIEWER:2,API:4,WORKER:8,PREFERENCE:128};s.OptionKind=P;const p={annotationEditorMode:{value:-1,kind:P.VIEWER+P.PREFERENCE},annotationMode:{value:2,kind:P.VIEWER+P.PREFERENCE},cursorToolOnLoad:{value:0,kind:P.VIEWER+P.PREFERENCE},defaultZoomValue:{value:"",kind:P.VIEWER+P.PREFERENCE},disableHistory:{value:!1,kind:P.VIEWER},disablePageLabels:{value:!1,kind:P.VIEWER+P.PREFERENCE},enablePermissions:{value:!1,kind:P.VIEWER+P.PREFERENCE},enablePrintAutoRotate:{value:!0,kind:P.VIEWER+P.PREFERENCE},enableScripting:{value:!0,kind:P.VIEWER+P.PREFERENCE},externalLinkRel:{value:"noopener noreferrer nofollow",kind:P.VIEWER},externalLinkTarget:{value:0,kind:P.VIEWER+P.PREFERENCE},historyUpdateUrl:{value:!1,kind:P.VIEWER+P.PREFERENCE},ignoreDestinationZoom:{value:!1,kind:P.VIEWER+P.PREFERENCE},imageResourcesPath:{value:"./images/",kind:P.VIEWER},maxCanvasPixels:{value:16777216,kind:P.VIEWER},forcePageColors:{value:!1,kind:P.VIEWER+P.PREFERENCE},pageColorsBackground:{value:"Canvas",kind:P.VIEWER+P.PREFERENCE},pageColorsForeground:{value:"CanvasText",kind:P.VIEWER+P.PREFERENCE},pdfBugEnabled:{value:!1,kind:P.VIEWER+P.PREFERENCE},printResolution:{value:150,kind:P.VIEWER},sidebarViewOnLoad:{value:-1,kind:P.VIEWER+P.PREFERENCE},scrollModeOnLoad:{value:-1,kind:P.VIEWER+P.PREFERENCE},spreadModeOnLoad:{value:-1,kind:P.VIEWER+P.PREFERENCE},textLayerMode:{value:1,kind:P.VIEWER+P.PREFERENCE},useOnlyCssZoom:{value:!1,kind:P.VIEWER+P.PREFERENCE},viewerCssTheme:{value:0,kind:P.VIEWER+P.PREFERENCE},viewOnLoad:{value:0,kind:P.VIEWER+P.PREFERENCE},cMapPacked:{value:!0,kind:P.API},cMapUrl:{value:"../web/cmaps/",kind:P.API},disableAutoFetch:{value:!1,kind:P.API+P.PREFERENCE},disableFontFace:{value:!1,kind:P.API+P.PREFERENCE},disableRange:{value:!1,kind:P.API+P.PREFERENCE},disableStream:{value:!1,kind:P.API+P.PREFERENCE},docBaseUrl:{value:"",kind:P.API},enableXfa:{value:!0,kind:P.API+P.PREFERENCE},fontExtraProperties:{value:!1,kind:P.API},isEvalSupported:{value:!0,kind:P.API},maxImageSize:{value:-1,kind:P.API},pdfBug:{value:!1,kind:P.API},standardFontDataUrl:{value:"../web/standard_fonts/",kind:P.API},verbosity:{value:1,kind:P.API},workerPort:{value:null,kind:P.WORKER},workerSrc:{value:"../build/pdf.worker.js",kind:P.WORKER}};p.defaultUrl={value:"compressed.tracemonkey-pldi-09.pdf",kind:P.VIEWER},p.disablePreferences={value:!1,kind:P.VIEWER},p.locale={value:navigator.language||"en-US",kind:P.VIEWER},p.renderer={value:"canvas",kind:P.VIEWER+P.PREFERENCE},p.sandboxBundleSrc={value:"../build/pdf.sandbox.js",kind:P.VIEWER};const A=Object.create(null);s.AppOptions=class u{constructor(){throw new Error("Cannot initialize AppOptions.")}static get(e){const o=A[e];if(void 0!==o)return o;const m=p[e];return void 0!==m?_[e]??m.value:void 0}static getAll(e=null){const o=Object.create(null);for(const m in p){const S=p[m];if(e){if(!(e&S.kind))continue;if(e===P.PREFERENCE){const c=S.value,b=typeof c;if("boolean"===b||"string"===b||"number"===b&&Number.isInteger(c)){o[m]=c;continue}throw new Error(`Invalid type for preference: ${m}`)}}const f=A[m];o[m]=void 0!==f?f:_[m]??S.value}return o}static set(e,o){A[e]=o}static setAll(e){for(const o in e)A[o]=e[o]}static remove(e){delete A[e]}static _hasUserOptions(){return Object.keys(A).length>0}}},(t,s,_)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.TextAccessibilityManager=void 0;var P=_(7),p=new WeakMap,A=new WeakMap,u=new WeakMap,i=new WeakMap,e=new WeakSet;class o{constructor(){a(this,e),Q(this,p,{writable:!0,value:!1}),Q(this,A,{writable:!0,value:null}),Q(this,u,{writable:!0,value:new Map}),Q(this,i,{writable:!0,value:new Map})}setTextMapping(c){C(this,A,c)}enable(){if(M(this,p))throw new Error("TextAccessibilityManager is already enabled.");if(!M(this,A))throw new Error("Text divs and strings have not been set.");if(C(this,p,!0),C(this,A,M(this,A).slice()),M(this,A).sort(v(o,o,m)),M(this,u).size>0){const c=M(this,A);for(const[b,N]of M(this,u))document.getElementById(b)?F(this,e,S).call(this,b,c[N]):M(this,u).delete(b)}for(const[c,b]of M(this,i))this.addPointerInTextLayer(c,b);M(this,i).clear()}disable(){M(this,p)&&(M(this,i).clear(),C(this,A,null),C(this,p,!1))}removePointerInTextLayer(c){if(!M(this,p))return void M(this,i).delete(c);const b=M(this,A);if(!b||0===b.length)return;const{id:N}=c,R=M(this,u).get(N);if(void 0===R)return;const H=b[R];M(this,u).delete(N);let B=H.getAttribute("aria-owns");B?.includes(N)&&(B=B.split(" ").filter(U=>U!==N).join(" "),B?H.setAttribute("aria-owns",B):(H.removeAttribute("aria-owns"),H.setAttribute("role","presentation")))}addPointerInTextLayer(c,b){const{id:N}=c;if(!N)return;if(!M(this,p))return void M(this,i).set(c,b);b&&this.removePointerInTextLayer(c);const R=M(this,A);if(!R||0===R.length)return;const H=(0,P.binarySearchFirstItem)(R,U=>v(o,o,m).call(o,c,U)<0),B=Math.max(0,H-1);F(this,e,S).call(this,N,R[B]),M(this,u).set(N,B)}moveElementInDOM(c,b,N,R){if(this.addPointerInTextLayer(N,R),!c.hasChildNodes())return void c.append(b);const H=Array.from(c.childNodes).filter(j=>j!==b);if(0===H.length)return;const B=N||b,U=(0,P.binarySearchFirstItem)(H,j=>v(o,o,m).call(o,B,j)<0);0===U?H[0].before(b):H[U-1].after(b)}}function m(f,c){const b=f.getBoundingClientRect(),N=c.getBoundingClientRect();if(0===b.width&&0===b.height)return 1;if(0===N.width&&0===N.height)return-1;const B=b.y+b.height/2,ee=N.y+N.height/2;return B<=N.y&&ee>=b.y+b.height?-1:ee<=b.y&&B>=N.y+N.height?1:b.x+b.width/2-(N.x+N.width/2)}function S(f,c){const b=c.getAttribute("aria-owns");b?.includes(f)||c.setAttribute("aria-owns",b?`${b} ${f}`:f),c.removeAttribute("role")}s.TextAccessibilityManager=o},(t,s,_)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PDFRenderingQueue=void 0;var P=_(3),p=_(7);s.PDFRenderingQueue=class u{constructor(){this.pdfViewer=null,this.pdfThumbnailViewer=null,this.onIdle=null,this.highestPriorityPage=null,this.idleTimeout=null,this.printing=!1,this.isThumbnailViewEnabled=!1}setViewer(e){this.pdfViewer=e}setThumbnailViewer(e){this.pdfThumbnailViewer=e}isHighestPriority(e){return this.highestPriorityPage===e.renderingId}hasViewer(){return!!this.pdfViewer}renderHighestPriority(e){this.idleTimeout&&(clearTimeout(this.idleTimeout),this.idleTimeout=null),!this.pdfViewer.forceRendering(e)&&(this.isThumbnailViewEnabled&&this.pdfThumbnailViewer?.forceRendering()||this.printing||this.onIdle&&(this.idleTimeout=setTimeout(this.onIdle.bind(this),3e4)))}getHighestPriority(e,o,m,S=!1){const f=e.views,c=f.length;if(0===c)return null;for(let B=0;B<c;B++){const U=f[B].view;if(!this.isViewFinished(U))return U}const b=e.first.id,N=e.last.id;if(N-b+1>c){const B=e.ids;for(let U=1,j=N-b;U<j;U++){const ee=m?b+U:N-U;if(B.has(ee))continue;const le=o[ee-1];if(!this.isViewFinished(le))return le}}let R=m?N:b-2,H=o[R];return H&&!this.isViewFinished(H)||S&&(R+=m?1:-1,H=o[R],H&&!this.isViewFinished(H))?H:null}isViewFinished(e){return e.renderingState===p.RenderingStates.FINISHED}renderView(e){switch(e.renderingState){case p.RenderingStates.FINISHED:return!1;case p.RenderingStates.PAUSED:this.highestPriorityPage=e.renderingId,e.resume();break;case p.RenderingStates.RUNNING:this.highestPriorityPage=e.renderingId;break;case p.RenderingStates.INITIAL:this.highestPriorityPage=e.renderingId,e.draw().finally(()=>{this.renderHighestPriority()}).catch(o=>{o instanceof P.RenderingCancelledException||console.error(`renderView: "${o}"`)})}return!0}}},(t,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.TextHighlighter=void 0,s.TextHighlighter=class _{constructor({findController:p,eventBus:A,pageIndex:u}){this.findController=p,this.matches=[],this.eventBus=A,this.pageIdx=u,this._onUpdateTextLayerMatches=null,this.textDivs=null,this.textContentItemsStr=null,this.enabled=!1}setTextMapping(p,A){this.textDivs=p,this.textContentItemsStr=A}enable(){if(!this.textDivs||!this.textContentItemsStr)throw new Error("Text divs and strings have not been set.");if(this.enabled)throw new Error("TextHighlighter is already enabled.");this.enabled=!0,this._onUpdateTextLayerMatches||(this._onUpdateTextLayerMatches=p=>{(p.pageIndex===this.pageIdx||-1===p.pageIndex)&&this._updateMatches()},this.eventBus._on("updatetextlayermatches",this._onUpdateTextLayerMatches)),this._updateMatches()}disable(){this.enabled&&(this.enabled=!1,this._onUpdateTextLayerMatches&&(this.eventBus._off("updatetextlayermatches",this._onUpdateTextLayerMatches),this._onUpdateTextLayerMatches=null))}_convertMatches(p,A){if(!p)return[];const{textContentItemsStr:u}=this;let i=0,e=0;const o=u.length-1,m=[];for(let S=0,f=p.length;S<f;S++){let c=p[S];for(;i!==o&&c>=e+u[i].length;)e+=u[i].length,i++;i===u.length&&console.error("Could not find a matching mapping");const b={begin:{divIdx:i,offset:c-e}};for(c+=A[S];i!==o&&c>e+u[i].length;)e+=u[i].length,i++;b.end={divIdx:i,offset:c-e},m.push(b)}return m}_renderMatches(p){if(0===p.length)return;const{findController:A,pageIdx:u}=this,{textContentItemsStr:i,textDivs:e}=this,o=u===A.selected.pageIdx,m=A.selected.matchIdx;let f=null;function b(B,U){const j=B.divIdx;return e[j].textContent="",N(j,0,B.offset,U)}function N(B,U,j,ee){let le=e[B];if(le.nodeType===Node.TEXT_NODE){const l=document.createElement("span");le.before(l),l.append(le),e[B]=l,le=l}const V=i[B].substring(U,j),g=document.createTextNode(V);if(ee){const l=document.createElement("span");return l.className=`${ee} appended`,l.append(g),le.append(l),ee.includes("selected")?l.offsetLeft:0}return le.append(g),0}let R=m,H=R+1;if(A.state.highlightAll)R=0,H=p.length;else if(!o)return;for(let B=R;B<H;B++){const U=p[B],j=U.begin,ee=U.end,le=o&&B===m,V=le?" selected":"";let g=0;if(f&&j.divIdx===f.divIdx?N(f.divIdx,f.offset,j.offset):(null!==f&&N(f.divIdx,f.offset,void 0),b(j)),j.divIdx===ee.divIdx)g=N(j.divIdx,j.offset,ee.offset,"highlight"+V);else{g=N(j.divIdx,j.offset,void 0,"highlight begin"+V);for(let l=j.divIdx+1,E=ee.divIdx;l<E;l++)e[l].className="highlight middle"+V;b(ee,"highlight end"+V)}f=ee,le&&A.scrollMatchIntoView({element:e[j.divIdx],selectedLeft:g,pageIndex:u,matchIndex:m})}f&&N(f.divIdx,f.offset,void 0)}_updateMatches(){if(!this.enabled)return;const{findController:p,matches:A,pageIdx:u}=this,{textContentItemsStr:i,textDivs:e}=this;let o=-1;for(let f=0,c=A.length;f<c;f++){const b=A[f];for(let R=Math.max(o,b.begin.divIdx),H=b.end.divIdx;R<=H;R++){const B=e[R];B.textContent=i[R],B.className=""}o=b.end.divIdx+1}p?.highlightMatches&&(this.matches=this._convertMatches(p.pageMatches[u]||null,p.pageMatchesLength[u]||null),this._renderMatches(this.matches))}}},(t,s,_)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DownloadManager=void 0;var P=_(3);function p(u,i){const e=document.createElement("a");if(!e.click)throw new Error('DownloadManager: "a.click()" is not supported.');e.href=u,e.target="_parent","download"in e&&(e.download=i),(document.body||document.documentElement).append(e),e.click(),e.remove()}s.DownloadManager=class A{constructor(){this._openBlobUrls=new WeakMap}downloadUrl(i,e){(0,P.createValidAbsoluteUrl)(i,"http://example.com")?p(i+"#pdfjs.action=download",e):console.error(`downloadUrl - not a valid URL: ${i}`)}downloadData(i,e,o){p(URL.createObjectURL(new Blob([i],{type:o})),e)}openOrDownloadData(i,e,o){const m=(0,P.isPdfFile)(o),S=m?"application/pdf":"";if(m){let c,f=this._openBlobUrls.get(i);f||(f=URL.createObjectURL(new Blob([e],{type:S})),this._openBlobUrls.set(i,f)),c="?file="+encodeURIComponent(f+"#"+o);try{return window.open(c),!0}catch(b){console.error(`openOrDownloadData: ${b}`),URL.revokeObjectURL(f),this._openBlobUrls.delete(i)}}return this.downloadData(e,o,S),!1}download(i,e,o){p(URL.createObjectURL(i),o)}}},(t,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.WaitOnType=s.EventBus=s.AutomationEventBus=void 0,s.waitOnEventOrTimeout=function P({target:u,name:i,delay:e=0}){return new Promise(function(o,m){if("object"!=typeof u||!i||"string"!=typeof i||!(Number.isInteger(e)&&e>=0))throw new Error("waitOnEventOrTimeout - invalid parameters.");function S(N){u instanceof p?u._off(i,f):u.removeEventListener(i,f),b&&clearTimeout(b),o(N)}const f=S.bind(null,_.EVENT);u instanceof p?u._on(i,f):u.addEventListener(i,f);const c=S.bind(null,_.TIMEOUT),b=setTimeout(c,e)})};const _={EVENT:"event",TIMEOUT:"timeout"};s.WaitOnType=_;class p{constructor(){this._listeners=Object.create(null)}on(i,e,o=null){this._on(i,e,{external:!0,once:o?.once})}off(i,e,o=null){this._off(i,e,{external:!0,once:o?.once})}dispatch(i,e){const o=this._listeners[i];if(!o||0===o.length)return;let m;for(const{listener:S,external:f,once:c}of o.slice(0))c&&this._off(i,S),f?(m||=[]).push(S):S(e);if(m){for(const S of m)S(e);m=null}}_on(i,e,o=null){(this._listeners[i]||=[]).push({listener:e,external:!0===o?.external,once:!0===o?.once})}_off(i,e,o=null){const m=this._listeners[i];if(m)for(let S=0,f=m.length;S<f;S++)if(m[S].listener===e)return void m.splice(S,1)}}s.EventBus=p,s.AutomationEventBus=class A extends p{dispatch(i,e){throw new Error("Not implemented: AutomationEventBus.dispatch")}}},(t,s,_)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.GenericL10n=void 0,_(21);var P=_(4);const p=document.webL10n;s.GenericL10n=class A{constructor(i){this._lang=i,this._ready=new Promise((e,o)=>{p.setLanguage((0,P.fixupLangCode)(i),()=>{e(p)})})}getLanguage(){var i=this;return O(function*(){return(yield i._ready).getLanguage()})()}getDirection(){var i=this;return O(function*(){return(yield i._ready).getDirection()})()}get(i,e=null,o=(0,P.getL10nFallback)(i,e)){var m=this;return O(function*(){return(yield m._ready).get(i,e,o)})()}translate(i){var e=this;return O(function*(){return(yield e._ready).translate(i)})()}}},()=>{document.webL10n=function(t,s,_){var P={},p="",A="textContent",u="",i={},e="loading",o=!0;function b(l,E,T){E=E||function(h){},T=T||function(){};var w=new XMLHttpRequest;w.open("GET",l,o),w.overrideMimeType&&w.overrideMimeType("text/plain; charset=utf-8"),w.onreadystatechange=function(){4==w.readyState&&(200==w.status||0===w.status?E(w.responseText):T())},w.onerror=T,w.ontimeout=T;try{w.send(null)}catch{T()}}function R(l,E){l&&(l=l.toLowerCase()),E=E||function(){},function H(){P={},p="",u=""}(),u=l;var T=function m(){return s.querySelectorAll('link[type="application/l10n"]')}(),w=T.length;if(0!==w){var L,k=0;L=function(){++k>=w&&(E(),e="complete")};for(var Y=0;Y<w;Y++)new X(T[Y]).load(l,L)}else{var n=function S(){var l=s.querySelector('script[type="application/l10n"]');return l?JSON.parse(l.innerHTML):null}();if(n&&n.locales&&n.default_locale){if(console.log("using the embedded JSON directory, early way out"),!(P=n.locales[l])){var h=n.default_locale.toLowerCase();for(var d in n.locales){if((d=d.toLowerCase())===l){P=n.locales[l];break}d===h&&(P=n.locales[h])}}E()}else console.log("no resource to load, early way out");e="complete"}function X(ie){var ue=ie.href;this.load=function(ve,fe){!function N(l,E,T,w){var n=l.replace(/[^\/]*$/,"")||"./";function h(L){return L.lastIndexOf("\\")<0?L:L.replace(/\\\\/g,"\\").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"\t").replace(/\\b/g,"\b").replace(/\\f/g,"\f").replace(/\\{/g,"{").replace(/\\}/g,"}").replace(/\\"/g,'"').replace(/\\'/g,"'")}b(l,function(L){p+=L,function d(L,k){var X={},Y=/^\s*|\s*$/,he=/^\s*#|^\s*$/,ie=/^\s*\[(.*)\]\s*$/,ue=/^\s*@import\s+url\((.*)\)\s*$/i,ve=/^([^=\s]*)\s*=\s*(.+)$/;function fe(we,Ae,re){var K=we.replace(Y,"").split(/[\r\n]+/),ce="*",de=E.split("-",1)[0],z=!1,I="";!function ae(){for(;;){if(!K.length)return void re();var Se=K.shift();if(!he.test(Se)){if(Ae){if(I=ie.exec(Se)){ce=I[1].toLowerCase(),z="*"!==ce&&ce!==E&&ce!==de;continue}if(z)continue;if(I=ue.exec(Se))return void me(n+I[1],ae)}var ye=Se.match(ve);ye&&3==ye.length&&(X[ye[1]]=h(ye[2]))}}}()}function me(we,Ae){b(we,function(re){fe(re,!1,Ae)},function(){console.warn(we+" not found."),Ae()})}fe(L,!0,function(){k(X)})}(L,function(k){for(var X in k){var Y,he,ie=X.lastIndexOf(".");ie>0?(Y=X.substring(0,ie),he=X.substring(ie+1)):(Y=X,he=A),P[Y]||(P[Y]={}),P[Y][he]=k[X]}T&&T()})},w)}(ue,ve,fe,function(){console.warn(ue+" not found."),console.warn('"'+ve+'" resource not found'),u="",fe()})}}}function U(l,E,T){var w=P[l];if(!w){if(console.warn("#"+l+" is undefined."),!T)return null;w=T}var n={};for(var h in w){var d=w[h];d=ee(d=j(d,E,l,h),E,l),n[h]=d}return n}function j(l,E,T,w){var h=/\{\[\s*([a-zA-Z]+)\(([a-zA-Z]+)\)\s*\]\}/.exec(l);if(!h||!h.length)return l;var k,d=h[1],L=h[2];return E&&L in E?k=E[L]:L in P&&(k=P[L]),d in i&&(l=(0,i[d])(l,k,T,w)),l}function ee(l,E,T){return l.replace(/\{\{\s*(.+?)\s*\}\}/g,function(n,h){return E&&h in E?E[h]:h in P?P[h]:(console.log("argument {{"+h+"}} for #"+T+" is undefined."),n)})}function le(l){var E=function c(l){if(!l)return{};var E=l.getAttribute("data-l10n-id"),T=l.getAttribute("data-l10n-args"),w={};if(T)try{w=JSON.parse(T)}catch{console.warn("could not parse arguments for #"+E)}return{id:E,args:w}}(l);if(E.id){var T=U(E.id,E.args);if(!T)return void console.warn("#"+E.id+" is undefined.");if(T[A]){if(0===function V(l){if(l.children)return l.children.length;if(typeof l.childElementCount<"u")return l.childElementCount;for(var E=0,T=0;T<l.childNodes.length;T++)E+=1===l.nodeType?1:0;return E}(l))l[A]=T[A];else{for(var w=l.childNodes,n=!1,h=0,d=w.length;h<d;h++)3===w[h].nodeType&&/\S/.test(w[h].nodeValue)&&(n?w[h].nodeValue="":(w[h].nodeValue=T[A],n=!0));if(!n){var L=s.createTextNode(T[A]);l.prepend(L)}}delete T[A]}for(var k in T)l[k]=T[k]}}return i.plural=function(l,E,T,w){var n=parseFloat(E);if(isNaN(n)||w!=A)return l;i._pluralRules||(i._pluralRules=function B(l){function T(d,L){return-1!==L.indexOf(d)}function w(d,L,k){return L<=d&&d<=k}var n={0:function(d){return"other"},1:function(d){return w(d%100,3,10)?"few":0===d?"zero":w(d%100,11,99)?"many":2==d?"two":1==d?"one":"other"},2:function(d){return 0!==d&&d%10==0?"many":2==d?"two":1==d?"one":"other"},3:function(d){return 1==d?"one":"other"},4:function(d){return w(d,0,1)?"one":"other"},5:function(d){return w(d,0,2)&&2!=d?"one":"other"},6:function(d){return 0===d?"zero":d%10==1&&d%100!=11?"one":"other"},7:function(d){return 2==d?"two":1==d?"one":"other"},8:function(d){return w(d,3,6)?"few":w(d,7,10)?"many":2==d?"two":1==d?"one":"other"},9:function(d){return 0===d||1!=d&&w(d%100,1,19)?"few":1==d?"one":"other"},10:function(d){return w(d%10,2,9)&&!w(d%100,11,19)?"few":d%10!=1||w(d%100,11,19)?"other":"one"},11:function(d){return w(d%10,2,4)&&!w(d%100,12,14)?"few":d%10==0||w(d%10,5,9)||w(d%100,11,14)?"many":d%10==1&&d%100!=11?"one":"other"},12:function(d){return w(d,2,4)?"few":1==d?"one":"other"},13:function(d){return w(d%10,2,4)&&!w(d%100,12,14)?"few":1!=d&&w(d%10,0,1)||w(d%10,5,9)||w(d%100,12,14)?"many":1==d?"one":"other"},14:function(d){return w(d%100,3,4)?"few":d%100==2?"two":d%100==1?"one":"other"},15:function(d){return 0===d||w(d%100,2,10)?"few":w(d%100,11,19)?"many":1==d?"one":"other"},16:function(d){return d%10==1&&11!=d?"one":"other"},17:function(d){return 3==d?"few":0===d?"zero":6==d?"many":2==d?"two":1==d?"one":"other"},18:function(d){return 0===d?"zero":w(d,0,2)&&0!==d&&2!=d?"one":"other"},19:function(d){return w(d,2,10)?"few":w(d,0,1)?"one":"other"},20:function(d){return!w(d%10,3,4)&&d%10!=9||w(d%100,10,19)||w(d%100,70,79)||w(d%100,90,99)?d%1e6==0&&0!==d?"many":d%10!=2||T(d%100,[12,72,92])?d%10!=1||T(d%100,[11,71,91])?"other":"one":"two":"few"},21:function(d){return 0===d?"zero":1==d?"one":"other"},22:function(d){return w(d,0,1)||w(d,11,99)?"one":"other"},23:function(d){return w(d%10,1,2)||d%20==0?"one":"other"},24:function(d){return w(d,3,10)||w(d,13,19)?"few":T(d,[2,12])?"two":T(d,[1,11])?"one":"other"}},h={af:3,ak:4,am:4,ar:1,asa:3,az:0,be:11,bem:3,bez:3,bg:3,bh:4,bm:0,bn:3,bo:0,br:20,brx:3,bs:11,ca:3,cgg:3,chr:3,cs:12,cy:17,da:3,de:3,dv:3,dz:0,ee:3,el:3,en:3,eo:3,es:3,et:3,eu:3,fa:0,ff:5,fi:3,fil:4,fo:3,fr:5,fur:3,fy:3,ga:8,gd:24,gl:3,gsw:3,gu:3,guw:4,gv:23,ha:3,haw:3,he:2,hi:4,hr:11,hu:0,id:0,ig:0,ii:0,is:3,it:3,iu:7,ja:0,jmc:3,jv:0,ka:0,kab:5,kaj:3,kcg:3,kde:0,kea:0,kk:3,kl:3,km:0,kn:0,ko:0,ksb:3,ksh:21,ku:3,kw:7,lag:18,lb:3,lg:3,ln:4,lo:0,lt:10,lv:6,mas:3,mg:4,mk:16,ml:3,mn:3,mo:9,mr:3,ms:0,mt:15,my:0,nah:3,naq:7,nb:3,nd:3,ne:3,nl:3,nn:3,no:3,nr:3,nso:4,ny:3,nyn:3,om:3,or:3,pa:3,pap:3,pl:13,ps:3,pt:3,rm:3,ro:9,rof:3,ru:11,rwk:3,sah:0,saq:3,se:7,seh:3,ses:0,sg:0,sh:11,shi:19,sk:12,sl:14,sma:7,smi:7,smj:7,smn:7,sms:7,sn:3,so:3,sq:3,sr:11,ss:3,ssy:3,st:3,sv:3,sw:3,syr:3,ta:3,te:3,teo:3,th:0,ti:4,tig:3,tk:3,tl:4,tn:3,to:0,tr:0,ts:3,tzm:22,uk:11,ur:3,ve:3,vi:0,vun:3,wa:4,wae:3,wo:0,xh:3,xog:3,yo:0,zh:0,zu:3}[l.replace(/-.*$/,"")];return h in n?n[h]:(console.warn("plural form unknown for ["+l+"]"),function(){return"other"})}(u));var h="["+i._pluralRules(n)+"]";return 0===n&&T+"[zero]"in P?l=P[T+"[zero]"][w]:1==n&&T+"[one]"in P?l=P[T+"[one]"][w]:2==n&&T+"[two]"in P?l=P[T+"[two]"][w]:T+h in P?l=P[T+h][w]:T+"[other]"in P&&(l=P[T+"[other]"][w]),l},{get:function(l,E,T){var h,w=l.lastIndexOf("."),n=A;w>0&&(n=l.substring(w+1),l=l.substring(0,w)),T&&((h={})[n]=T);var d=U(l,E,h);return d&&n in d?d[n]:"{{"+l+"}}"},getData:function(){return P},getText:function(){return p},getLanguage:function(){return u},setLanguage:function(l,E){R(l,function(){E&&E()})},getDirection:function(){var E=u.split("-",1)[0];return["ar","he","fa","ps","ur"].indexOf(E)>=0?"rtl":"ltr"},translate:function g(l){for(var E=function f(l){return l?l.querySelectorAll("*[data-l10n-id]"):[]}(l=l||s.documentElement),T=E.length,w=0;w<T;w++)le(E[w]);le(l)},getReadyState:function(){return e},ready:function(l){l&&("complete"==e||"interactive"==e?t.setTimeout(function(){l()}):s.addEventListener&&s.addEventListener("localized",function E(){s.removeEventListener("localized",E),l()}))}}}(window,document)},(t,s,_)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PDFFindController=s.FindState=void 0;var P=_(7),p=_(3),A=_(23);const u={FOUND:0,NOT_FOUND:1,WRAPPED:2,PENDING:3};s.FindState=u;const m={"\u2010":"-","\u2018":"'","\u2019":"'","\u201a":"'","\u201b":"'","\u201c":'"',"\u201d":'"',"\u201e":'"',"\u201f":'"',"\xbc":"1/4","\xbd":"1/2","\xbe":"3/4"},S=new Set([12441,12442,2381,2509,2637,2765,2893,3021,3149,3277,3387,3388,3405,3530,3642,3770,3972,4153,4154,5908,5940,6098,6752,6980,7082,7083,7154,7155,11647,43014,43052,43204,43347,43456,43766,44013,3158,3953,3954,3962,3963,3964,3965,3968,3956]),f=[...S.values()].map(ge=>String.fromCharCode(ge)).join(""),c=/\p{M}+/gu,b=/([.*+?^${}()|[\]\\])|(\p{P})|(\s+)|(\p{M})|(\p{L})/gu,N=/([^\p{M}])\p{M}*$/u,R=/^\p{M}*([^\p{M}])/u,H=/[\uAC00-\uD7AF\uFA6C\uFACF-\uFAD1\uFAD5-\uFAD7]+/g,B=new Map,U="[\\u1100-\\u1112\\ud7a4-\\ud7af\\ud84a\\ud84c\\ud850\\ud854\\ud857\\ud85f]";let j=null,ee=null;function le(ge){const _e=[];let Ee,Ce;for(;null!==(Ee=H.exec(ge));){let{index:Be}=Ee;for(const Ne of Ee[0]){let De=B.get(Ne);De||(De=Ne.normalize("NFD").length,B.set(Ne,De)),_e.push([De,Be++])}}if(0===_e.length&&j)Ce=j;else if(_e.length>0&&ee)Ce=ee;else{const Ne=`([${Object.keys(m).join("")}])|(\\p{M}+(?:-\\n)?)|(\\S-\\n)|(\\n)`;Ce=0===_e.length?j=new RegExp(Ne+"|(\\u0000)","gum"):ee=new RegExp(Ne+`|(${U})`,"gum")}const Te=[];for(;null!==(Ee=c.exec(ge));)Te.push([Ee[0].length,Ee.index]);let ke=ge.normalize("NFD");const Re=[[0,0]];let Le=0,Oe=0,Fe=0,Ie=0,Ge=0,We=!1;return ke=ke.replace(Ce,(Be,Ne,De,ze,qe,$e,Ve)=>{if(Ve-=Ie,Ne){const je=m[Be],Ue=je.length;for(let He=1;He<Ue;He++)Re.push([Ve-Fe+He,Fe-He]);return Fe-=Ue-1,je}if(De){const je=De.endsWith("\n"),Ue=je?De.length-2:De.length;We=!0;let He=Ue;Ve+Ge===Te[Le]?.[1]&&(He-=Te[Le][0],++Le);for(let Xe=1;Xe<=He;Xe++)Re.push([Ve-1-Fe+Xe,Fe-Xe]);return Fe-=He,Ie+=He,je?(Re.push([(Ve+=Ue-1)-Fe+1,1+Fe]),Fe+=1,Ie+=1,Ge+=1,De.slice(0,Ue)):De}if(ze)return Re.push([Ve-Fe+1,1+Fe]),Fe+=1,Ie+=1,Ge+=1,ze.charAt(0);if(qe)return Re.push([Ve-Fe+1,Fe-1]),Fe-=1,Ie+=1,Ge+=1," ";if(Ve+Ge===_e[Oe]?.[1]){const je=_e[Oe][0]-1;++Oe;for(let Ue=1;Ue<=je;Ue++)Re.push([Ve-(Fe-Ue),Fe-Ue]);Fe-=je,Ie+=je}return $e}),Re.push([ke.length,Fe]),[ke,Re,We]}function V(ge,_e,Ee){if(!ge)return[_e,Ee];const Ce=_e,Te=_e+Ee;let ke=(0,P.binarySearchFirstItem)(ge,Le=>Le[0]>=Ce);ge[ke][0]>Ce&&--ke;let Re=(0,P.binarySearchFirstItem)(ge,Le=>Le[0]>=Te,ke);return ge[Re][0]>Te&&--Re,[Ce+ge[ke][1],Ee+ge[Re][1]-ge[ke][1]]}var g=new WeakSet,l=new WeakSet,E=new WeakMap,T=new WeakSet,w=new WeakSet,n=new WeakSet,h=new WeakSet,d=new WeakSet,L=new WeakSet,k=new WeakSet,X=new WeakSet,Y=new WeakSet,he=new WeakSet,ie=new WeakSet,ue=new WeakSet,ve=new WeakSet,fe=new WeakSet,me=new WeakSet,we=new WeakSet,Ae=new WeakSet;function K(ge){if(!ge)return;const _e=this._pdfDocument,{type:Ee}=ge;(null===this._state||F(this,T,z).call(this,ge))&&(this._dirtyMatch=!0),this._state=ge,"highlightallchange"!==Ee&&F(this,Ae,Me).call(this,u.PENDING),this._firstPageCapability.promise.then(()=>{if(!this._pdfDocument||_e&&this._pdfDocument!==_e)return;F(this,L,xe).call(this);const Ce=!this._highlightMatches,Te=!!this._findTimeout;this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),Ee?this._dirtyMatch?F(this,Y,oe).call(this):"again"===Ee?(F(this,Y,oe).call(this),Ce&&this._state.highlightAll&&F(this,X,ne).call(this)):"highlightallchange"===Ee?(Te?F(this,Y,oe).call(this):this._highlightMatches=!0,F(this,X,ne).call(this)):F(this,Y,oe).call(this):this._findTimeout=setTimeout(()=>{F(this,Y,oe).call(this),this._findTimeout=null},250)})}function ce(){this._highlightMatches=!1,this._scrollMatches=!1,this._pdfDocument=null,this._pageMatches=[],this._pageMatchesLength=[],this._state=null,this._selected={pageIdx:-1,matchIdx:-1},this._offset={pageIdx:null,matchIdx:null,wrapped:!1},this._extractTextPromises=[],this._pageContents=[],this._pageDiffs=[],this._hasDiacritics=[],this._matchesCountTotal=0,this._pagesToSearch=null,this._pendingFindMatches=new Set,this._resumePageIdx=null,this._dirtyMatch=!1,clearTimeout(this._findTimeout),this._findTimeout=null,this._firstPageCapability=(0,p.createPromiseCapability)()}function de(){return this._state.query!==this._rawQuery&&(this._rawQuery=this._state.query,[this._normalizedQuery]=le(this._state.query)),this._normalizedQuery}function z(ge){if(ge.query!==this._state.query)return!0;switch(ge.type){case"again":const _e=this._selected.pageIdx+1,Ee=this._linkService;return _e>=1&&_e<=Ee.pagesCount&&_e!==Ee.page&&!Ee.isPageVisible(_e);case"highlightallchange":return!1}return!0}function I(ge,_e,Ee){let Ce=ge.slice(0,_e).match(N);if(Ce){const Te=ge.charCodeAt(_e),ke=Ce[1].charCodeAt(0);if((0,A.getCharacterType)(Te)===(0,A.getCharacterType)(ke))return!1}if(Ce=ge.slice(_e+Ee).match(R),Ce){const Te=ge.charCodeAt(_e+Ee-1),ke=Ce[1].charCodeAt(0);if((0,A.getCharacterType)(Te)===(0,A.getCharacterType)(ke))return!1}return!0}function ae(ge,_e,Ee,Ce){const Te=[],ke=[],Re=this._pageDiffs[Ee];let Le;for(;null!==(Le=ge.exec(Ce));){if(_e&&!F(this,w,I).call(this,Ce,Le.index,Le[0].length))continue;const[Oe,Fe]=V(Re,Le.index,Le[0].length);Fe&&(Te.push(Oe),ke.push(Fe))}this._pageMatches[Ee]=Te,this._pageMatchesLength[Ee]=ke}function Se(ge,_e){const{matchDiacritics:Ee}=this._state;let Ce=!1;return(ge=ge.replace(b,(ke,Re,Le,Oe,Fe,Ie)=>Re?`[ ]*\\${Re}[ ]*`:Le?`[ ]*${Le}[ ]*`:Oe?"[ ]+":Ee?Fe||Ie:Fe?S.has(Fe.charCodeAt(0))?Fe:"":_e?(Ce=!0,`${Ie}\\p{M}*`):Ie)).endsWith("[ ]*")&&(ge=ge.slice(0,ge.length-4)),Ee&&_e&&(Ce=!0,ge=`${ge}(?=[${f}]|[^\\p{M}]|$)`),[Ce,ge]}function ye(ge){let _e=M(this,E);if(0===_e.length)return;const{caseSensitive:Ee,entireWord:Ce,phraseSearch:Te}=this._state,ke=this._pageContents[ge],Re=this._hasDiacritics[ge];let Le=!1;if(Te)[Le,_e]=F(this,h,Se).call(this,_e,Re);else{const Ie=_e.match(/\S+/g);Ie&&(_e=Ie.sort().reverse().map(Ge=>{const[We,Be]=F(this,h,Se).call(this,Ge,Re);return Le||=We,`(${Be})`}).join("|"))}_e=new RegExp(_e,`g${Le?"u":""}${Ee?"":"i"}`),F(this,n,ae).call(this,_e,Ce,ge,ke),this._state.highlightAll&&F(this,k,D).call(this,ge),this._resumePageIdx===ge&&(this._resumePageIdx=null,F(this,ie,pe).call(this));const Fe=this._pageMatches[ge].length;Fe>0&&(this._matchesCountTotal+=Fe,F(this,we,Pe).call(this))}function xe(){if(this._extractTextPromises.length>0)return;let ge=Promise.resolve();for(let _e=0,Ee=this._linkService.pagesCount;_e<Ee;_e++){const Ce=(0,p.createPromiseCapability)();this._extractTextPromises[_e]=Ce.promise,ge=ge.then(()=>this._pdfDocument.getPage(_e+1).then(Te=>Te.getTextContent()).then(Te=>{const ke=[];for(const Re of Te.items)ke.push(Re.str),Re.hasEOL&&ke.push("\n");[this._pageContents[_e],this._pageDiffs[_e],this._hasDiacritics[_e]]=le(ke.join("")),Ce.resolve()},Te=>{console.error(`Unable to get text content for page ${_e+1}`,Te),this._pageContents[_e]="",this._pageDiffs[_e]=null,this._hasDiacritics[_e]=!1,Ce.resolve()}))}}function D(ge){this._scrollMatches&&this._selected.pageIdx===ge&&(this._linkService.page=ge+1),this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:ge})}function ne(){this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:-1})}function oe(){const ge=this._state.findPrevious,_e=this._linkService.page-1,Ee=this._linkService.pagesCount;if(this._highlightMatches=!0,this._dirtyMatch){this._dirtyMatch=!1,this._selected.pageIdx=this._selected.matchIdx=-1,this._offset.pageIdx=_e,this._offset.matchIdx=null,this._offset.wrapped=!1,this._resumePageIdx=null,this._pageMatches.length=0,this._pageMatchesLength.length=0,this._matchesCountTotal=0,F(this,X,ne).call(this);for(let Te=0;Te<Ee;Te++)this._pendingFindMatches.has(Te)||(this._pendingFindMatches.add(Te),this._extractTextPromises[Te].then(()=>{this._pendingFindMatches.delete(Te),F(this,d,ye).call(this,Te)}))}if(""===M(this,E))return void F(this,Ae,Me).call(this,u.FOUND);if(this._resumePageIdx)return;const Ce=this._offset;if(this._pagesToSearch=Ee,null!==Ce.matchIdx){if(!ge&&Ce.matchIdx+1<this._pageMatches[Ce.pageIdx].length||ge&&Ce.matchIdx>0)return Ce.matchIdx=ge?Ce.matchIdx-1:Ce.matchIdx+1,void F(this,ve,te).call(this,!0);F(this,ue,be).call(this,ge)}F(this,ie,pe).call(this)}function se(ge){const _e=this._offset,Ee=ge.length,Ce=this._state.findPrevious;return Ee?(_e.matchIdx=Ce?Ee-1:0,F(this,ve,te).call(this,!0),!0):(F(this,ue,be).call(this,Ce),!!(_e.wrapped&&(_e.matchIdx=null,this._pagesToSearch<0))&&(F(this,ve,te).call(this,!1),!0))}function pe(){null!==this._resumePageIdx&&console.error("There can only be one pending page.");let ge=null;do{const _e=this._offset.pageIdx;if(ge=this._pageMatches[_e],!ge){this._resumePageIdx=_e;break}}while(!F(this,he,se).call(this,ge))}function be(ge){const _e=this._offset,Ee=this._linkService.pagesCount;_e.pageIdx=ge?_e.pageIdx-1:_e.pageIdx+1,_e.matchIdx=null,this._pagesToSearch--,(_e.pageIdx>=Ee||_e.pageIdx<0)&&(_e.pageIdx=ge?Ee-1:0,_e.wrapped=!0)}function te(ge=!1){let _e=u.NOT_FOUND;const Ee=this._offset.wrapped;if(this._offset.wrapped=!1,ge){const Ce=this._selected.pageIdx;this._selected.pageIdx=this._offset.pageIdx,this._selected.matchIdx=this._offset.matchIdx,_e=Ee?u.WRAPPED:u.FOUND,-1!==Ce&&Ce!==this._selected.pageIdx&&F(this,k,D).call(this,Ce)}F(this,Ae,Me).call(this,_e,this._state.findPrevious),-1!==this._selected.pageIdx&&(this._scrollMatches=!0,F(this,k,D).call(this,this._selected.pageIdx))}function $(ge){const _e=this._pdfDocument;this._firstPageCapability.promise.then(()=>{!this._pdfDocument||_e&&this._pdfDocument!==_e||(this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),this._resumePageIdx&&(this._resumePageIdx=null,this._dirtyMatch=!0),F(this,Ae,Me).call(this,u.FOUND),this._highlightMatches=!1,F(this,X,ne).call(this))})}function J(){const{pageIdx:ge,matchIdx:_e}=this._selected;let Ee=0,Ce=this._matchesCountTotal;if(-1!==_e){for(let Te=0;Te<ge;Te++)Ee+=this._pageMatches[Te]?.length||0;Ee+=_e+1}return(Ee<1||Ee>Ce)&&(Ee=Ce=0),{current:Ee,total:Ce}}function Pe(){this._eventBus.dispatch("updatefindmatchescount",{source:this,matchesCount:F(this,me,J).call(this)})}function Me(ge,_e=!1){this._eventBus.dispatch("updatefindcontrolstate",{source:this,state:ge,previous:_e,matchesCount:F(this,me,J).call(this),rawQuery:this._state?.query??null})}s.PDFFindController=class re{constructor({linkService:_e,eventBus:Ee}){a(this,Ae),a(this,we),a(this,me),a(this,fe),a(this,ve),a(this,ue),a(this,ie),a(this,he),a(this,Y),a(this,X),a(this,k),a(this,L),a(this,d),a(this,h),a(this,n),a(this,w),a(this,T),Q(this,E,{get:de,set:void 0}),a(this,l),a(this,g),this._linkService=_e,this._eventBus=Ee,F(this,l,ce).call(this),Ee._on("find",F(this,g,K).bind(this)),Ee._on("findbarclose",F(this,fe,$).bind(this))}get highlightMatches(){return this._highlightMatches}get pageMatches(){return this._pageMatches}get pageMatchesLength(){return this._pageMatchesLength}get selected(){return this._selected}get state(){return this._state}setDocument(_e){this._pdfDocument&&F(this,l,ce).call(this),_e&&(this._pdfDocument=_e,this._firstPageCapability.resolve())}scrollMatchIntoView({element:_e=null,selectedLeft:Ee=0,pageIndex:Ce=-1,matchIndex:Te=-1}){this._scrollMatches&&_e&&-1!==Te&&Te===this._selected.matchIdx&&-1!==Ce&&Ce===this._selected.pageIdx&&(this._scrollMatches=!1,(0,P.scrollIntoView)(_e,{top:-50,left:Ee+-400},!0))}}},(t,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CharacterType=void 0,s.getCharacterType=function c(b){return function P(b){return b<11904}(b)?function p(b){return 0==(65408&b)}(b)?function i(b){return 32===b||9===b||13===b||10===b}(b)?_.SPACE:function A(b){return b>=97&&b<=122||b>=65&&b<=90}(b)||function u(b){return b>=48&&b<=57}(b)||95===b?_.ALPHA_LETTER:_.PUNCT:function f(b){return 3584==(65408&b)}(b)?_.THAI_LETTER:160===b?_.SPACE:_.ALPHA_LETTER:function e(b){return b>=13312&&b<=40959||b>=63744&&b<=64255}(b)?_.HAN_LETTER:function o(b){return b>=12448&&b<=12543}(b)?_.KATAKANA_LETTER:function m(b){return b>=12352&&b<=12447}(b)?_.HIRAGANA_LETTER:function S(b){return b>=65376&&b<=65439}(b)?_.HALFWIDTH_KATAKANA_LETTER:_.ALPHA_LETTER};const _={SPACE:0,ALPHA_LETTER:1,PUNCT:2,HAN_LETTER:3,KATAKANA_LETTER:4,HIRAGANA_LETTER:5,HALFWIDTH_KATAKANA_LETTER:6,THAI_LETTER:7};s.CharacterType=_},(t,s,_)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PDFHistory=void 0,s.isDestArraysEqual=S,s.isDestHashesEqual=m;var P=_(7),p=_(19);function e(){return document.location.hash}function m(f,c){return"string"==typeof f&&"string"==typeof c&&(f===c||(0,P.parseQueryString)(f).get("nameddest")===c)}function S(f,c){function b(N,R){if(typeof N!=typeof R||Array.isArray(N)||Array.isArray(R))return!1;if(null!==N&&"object"==typeof N&&null!==R){if(Object.keys(N).length!==Object.keys(R).length)return!1;for(const H in N)if(!b(N[H],R[H]))return!1;return!0}return N===R||Number.isNaN(N)&&Number.isNaN(R)}if(!Array.isArray(f)||!Array.isArray(c)||f.length!==c.length)return!1;for(let N=0,R=f.length;N<R;N++)if(!b(f[N],c[N]))return!1;return!0}s.PDFHistory=class o{constructor({linkService:c,eventBus:b}){this.linkService=c,this.eventBus=b,this._initialized=!1,this._fingerprint="",this.reset(),this._boundEvents=null,this.eventBus._on("pagesinit",()=>{this._isPagesLoaded=!1,this.eventBus._on("pagesloaded",N=>{this._isPagesLoaded=!!N.pagesCount},{once:!0})})}initialize({fingerprint:c,resetHistory:b=!1,updateUrl:N=!1}){if(!c||"string"!=typeof c)return void console.error('PDFHistory.initialize: The "fingerprint" must be a non-empty string.');this._initialized&&this.reset();const R=""!==this._fingerprint&&this._fingerprint!==c;this._fingerprint=c,this._updateUrl=!0===N,this._initialized=!0,this._bindEvents();const H=window.history.state;if(this._popStateInProgress=!1,this._blockHashChange=0,this._currentHash=e(),this._numPositionUpdates=0,this._uid=this._maxUid=0,this._destination=null,this._position=null,!this._isValidState(H,!0)||b){const{hash:U,page:j,rotation:ee}=this._parseCurrentHash(!0);return!U||R||b?void this._pushOrReplaceState(null,!0):void this._pushOrReplaceState({hash:U,page:j,rotation:ee},!0)}const B=H.destination;this._updateInternalState(B,H.uid,!0),void 0!==B.rotation&&(this._initialRotation=B.rotation),B.dest?(this._initialBookmark=JSON.stringify(B.dest),this._destination.page=null):B.hash?this._initialBookmark=B.hash:B.page&&(this._initialBookmark=`page=${B.page}`)}reset(){this._initialized&&(this._pageHide(),this._initialized=!1,this._unbindEvents()),this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._initialBookmark=null,this._initialRotation=null}push({namedDest:c=null,explicitDest:b,pageNumber:N}){if(!this._initialized)return;if(c&&"string"!=typeof c)return void console.error(`PDFHistory.push: "${c}" is not a valid namedDest parameter.`);if(!Array.isArray(b))return void console.error(`PDFHistory.push: "${b}" is not a valid explicitDest parameter.`);if(!this._isValidPage(N)&&(null!==N||this._destination))return void console.error(`PDFHistory.push: "${N}" is not a valid pageNumber parameter.`);const R=c||JSON.stringify(b);if(!R)return;let H=!1;if(this._destination&&(m(this._destination.hash,R)||S(this._destination.dest,b))){if(this._destination.page)return;H=!0}this._popStateInProgress&&!H||(this._pushOrReplaceState({dest:b,hash:R,page:N,rotation:this.linkService.rotation},H),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then(()=>{this._popStateInProgress=!1})))}pushPage(c){if(this._initialized){if(!this._isValidPage(c))return void console.error(`PDFHistory.pushPage: "${c}" is not a valid page number.`);this._destination?.page!==c&&(this._popStateInProgress||(this._pushOrReplaceState({dest:null,hash:`page=${c}`,page:c,rotation:this.linkService.rotation}),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then(()=>{this._popStateInProgress=!1}))))}}pushCurrentPosition(){!this._initialized||this._popStateInProgress||this._tryPushCurrentPosition()}back(){if(!this._initialized||this._popStateInProgress)return;const c=window.history.state;this._isValidState(c)&&c.uid>0&&window.history.back()}forward(){if(!this._initialized||this._popStateInProgress)return;const c=window.history.state;this._isValidState(c)&&c.uid<this._maxUid&&window.history.forward()}get popStateInProgress(){return this._initialized&&(this._popStateInProgress||this._blockHashChange>0)}get initialBookmark(){return this._initialized?this._initialBookmark:null}get initialRotation(){return this._initialized?this._initialRotation:null}_pushOrReplaceState(c,b=!1){const N=b||!this._destination,R={fingerprint:this._fingerprint,uid:N?this._uid:this._uid+1,destination:c};let H;if(this._updateInternalState(c,R.uid),this._updateUrl&&c?.hash){const B=document.location.href.split("#")[0];B.startsWith("file://")||(H=`${B}#${c.hash}`)}N?window.history.replaceState(R,"",H):window.history.pushState(R,"",H)}_tryPushCurrentPosition(c=!1){if(!this._position)return;let b=this._position;if(c&&(b=Object.assign(Object.create(null),this._position),b.temporary=!0),!this._destination)return void this._pushOrReplaceState(b);if(this._destination.temporary)return void this._pushOrReplaceState(b,!0);if(this._destination.hash===b.hash||!this._destination.page&&this._numPositionUpdates<=50)return;let N=!1;if(this._destination.page>=b.first&&this._destination.page<=b.page){if(void 0!==this._destination.dest||!this._destination.first)return;N=!0}this._pushOrReplaceState(b,N)}_isValidPage(c){return Number.isInteger(c)&&c>0&&c<=this.linkService.pagesCount}_isValidState(c,b=!1){if(!c)return!1;if(c.fingerprint!==this._fingerprint){if(!b)return!1;{if("string"!=typeof c.fingerprint||c.fingerprint.length!==this._fingerprint.length)return!1;const[N]=performance.getEntriesByType("navigation");if("reload"!==N?.type)return!1}}return!(!Number.isInteger(c.uid)||c.uid<0||null===c.destination||"object"!=typeof c.destination)}_updateInternalState(c,b,N=!1){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),N&&c?.temporary&&delete c.temporary,this._destination=c,this._uid=b,this._maxUid=Math.max(this._maxUid,b),this._numPositionUpdates=0}_parseCurrentHash(c=!1){const b=unescape(e()).substring(1),N=(0,P.parseQueryString)(b),R=N.get("nameddest")||"";let H=0|N.get("page");return(!this._isValidPage(H)||c&&R.length>0)&&(H=null),{hash:b,page:H,rotation:this.linkService.rotation}}_updateViewarea({location:c}){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._position={hash:c.pdfOpenParams.substring(1),page:this.linkService.page,first:c.pageNumber,rotation:c.rotation},!this._popStateInProgress&&(this._isPagesLoaded&&this._destination&&!this._destination.page&&this._numPositionUpdates++,this._updateViewareaTimeout=setTimeout(()=>{this._popStateInProgress||this._tryPushCurrentPosition(!0),this._updateViewareaTimeout=null},1e3))}_popState({state:c}){const b=e(),N=this._currentHash!==b;if(this._currentHash=b,!c){this._uid++;const{hash:H,page:B,rotation:U}=this._parseCurrentHash();return void this._pushOrReplaceState({hash:H,page:B,rotation:U},!0)}if(!this._isValidState(c))return;this._popStateInProgress=!0,N&&(this._blockHashChange++,(0,p.waitOnEventOrTimeout)({target:window,name:"hashchange",delay:1e3}).then(()=>{this._blockHashChange--}));const R=c.destination;this._updateInternalState(R,c.uid,!0),(0,P.isValidRotation)(R.rotation)&&(this.linkService.rotation=R.rotation),R.dest?this.linkService.goToDestination(R.dest):R.hash?this.linkService.setHash(R.hash):R.page&&(this.linkService.page=R.page),Promise.resolve().then(()=>{this._popStateInProgress=!1})}_pageHide(){(!this._destination||this._destination.temporary)&&this._tryPushCurrentPosition()}_bindEvents(){this._boundEvents||(this._boundEvents={updateViewarea:this._updateViewarea.bind(this),popState:this._popState.bind(this),pageHide:this._pageHide.bind(this)},this.eventBus._on("updateviewarea",this._boundEvents.updateViewarea),window.addEventListener("popstate",this._boundEvents.popState),window.addEventListener("pagehide",this._boundEvents.pageHide))}_unbindEvents(){this._boundEvents&&(this.eventBus._off("updateviewarea",this._boundEvents.updateViewarea),window.removeEventListener("popstate",this._boundEvents.popState),window.removeEventListener("pagehide",this._boundEvents.pageHide),this._boundEvents=null)}}},(t,s,_)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PDFScriptingManager=void 0;var P=_(7),p=_(3);s.PDFScriptingManager=class A{constructor({eventBus:i,sandboxBundleSrc:e=null,scriptingFactory:o=null,docPropertiesLookup:m=null}){this._pdfDocument=null,this._pdfViewer=null,this._closeCapability=null,this._destroyCapability=null,this._scripting=null,this._mouseState=Object.create(null),this._ready=!1,this._eventBus=i,this._sandboxBundleSrc=e,this._scriptingFactory=o,this._docPropertiesLookup=m,this._scriptingFactory||window.addEventListener("updatefromsandbox",S=>{this._eventBus.dispatch("updatefromsandbox",{source:window,detail:S.detail})})}setViewer(i){this._pdfViewer=i}setDocument(i){var e=this;return O(function*(){if(e._pdfDocument&&(yield e._destroyScripting()),e._pdfDocument=i,!i)return;const[o,m,S]=yield Promise.all([i.getFieldObjects(),i.getCalculationOrderIds(),i.getJSActions()]);if(o||S){if(i===e._pdfDocument){try{e._scripting=e._createScripting()}catch(f){return console.error(`PDFScriptingManager.setDocument: "${f?.message}".`),void(yield e._destroyScripting())}e._internalEvents.set("updatefromsandbox",f=>{f?.source===window&&e._updateFromSandbox(f.detail)}),e._internalEvents.set("dispatcheventinsandbox",f=>{e._scripting?.dispatchEventInSandbox(f.detail)}),e._internalEvents.set("pagechanging",({pageNumber:f,previous:c})=>{f!==c&&(e._dispatchPageClose(c),e._dispatchPageOpen(f))}),e._internalEvents.set("pagerendered",({pageNumber:f})=>{e._pageOpenPending.has(f)&&f===e._pdfViewer.currentPageNumber&&e._dispatchPageOpen(f)}),e._internalEvents.set("pagesdestroy",function(){var f=O(function*(c){yield e._dispatchPageClose(e._pdfViewer.currentPageNumber),yield e._scripting?.dispatchEventInSandbox({id:"doc",name:"WillClose"}),e._closeCapability?.resolve()});return function(c){return f.apply(this,arguments)}}()),e._domEvents.set("mousedown",f=>{e._mouseState.isDown=!0}),e._domEvents.set("mouseup",f=>{e._mouseState.isDown=!1});for(const[f,c]of e._internalEvents)e._eventBus._on(f,c);for(const[f,c]of e._domEvents)window.addEventListener(f,c,!0);try{const f=yield e._getDocProperties();if(i!==e._pdfDocument)return;yield e._scripting.createSandbox({objects:o,calculationOrder:m,appInfo:{platform:navigator.platform,language:navigator.language},docInfo:{...f,actions:S}}),e._eventBus.dispatch("sandboxcreated",{source:e})}catch(f){return console.error(`PDFScriptingManager.setDocument: "${f?.message}".`),void(yield e._destroyScripting())}yield e._scripting?.dispatchEventInSandbox({id:"doc",name:"Open"}),yield e._dispatchPageOpen(e._pdfViewer.currentPageNumber,!0),Promise.resolve().then(()=>{i===e._pdfDocument&&(e._ready=!0)})}}else yield e._destroyScripting()})()}dispatchWillSave(i){var e=this;return O(function*(){return e._scripting?.dispatchEventInSandbox({id:"doc",name:"WillSave"})})()}dispatchDidSave(i){var e=this;return O(function*(){return e._scripting?.dispatchEventInSandbox({id:"doc",name:"DidSave"})})()}dispatchWillPrint(i){var e=this;return O(function*(){return e._scripting?.dispatchEventInSandbox({id:"doc",name:"WillPrint"})})()}dispatchDidPrint(i){var e=this;return O(function*(){return e._scripting?.dispatchEventInSandbox({id:"doc",name:"DidPrint"})})()}get mouseState(){return this._mouseState}get destroyPromise(){return this._destroyCapability?.promise||null}get ready(){return this._ready}get _internalEvents(){return(0,p.shadow)(this,"_internalEvents",new Map)}get _domEvents(){return(0,p.shadow)(this,"_domEvents",new Map)}get _pageOpenPending(){return(0,p.shadow)(this,"_pageOpenPending",new Set)}get _visitedPages(){return(0,p.shadow)(this,"_visitedPages",new Map)}_updateFromSandbox(i){var e=this;return O(function*(){const o=e._pdfViewer.isInPresentationMode||e._pdfViewer.isChangingPresentationMode,{id:m,siblings:S,command:f,value:c}=i;if(!m){switch(f){case"clear":console.clear();break;case"error":console.error(c);break;case"layout":if(o)return;const N=(0,P.apiPageLayoutToViewerModes)(c);e._pdfViewer.spreadMode=N.spreadMode;break;case"page-num":e._pdfViewer.currentPageNumber=c+1;break;case"print":yield e._pdfViewer.pagesPromise,e._eventBus.dispatch("print",{source:e});break;case"println":console.log(c);break;case"zoom":if(o)return;e._pdfViewer.currentScaleValue=c;break;case"SaveAs":e._eventBus.dispatch("download",{source:e});break;case"FirstPage":e._pdfViewer.currentPageNumber=1;break;case"LastPage":e._pdfViewer.currentPageNumber=e._pdfViewer.pagesCount;break;case"NextPage":e._pdfViewer.nextPage();break;case"PrevPage":e._pdfViewer.previousPage();break;case"ZoomViewIn":if(o)return;e._pdfViewer.increaseScale();break;case"ZoomViewOut":if(o)return;e._pdfViewer.decreaseScale()}return}if(o&&i.focus)return;delete i.id,delete i.siblings;const b=S?[m,...S]:[m];for(const N of b){const R=document.querySelector(`[data-element-id="${N}"]`);R?R.dispatchEvent(new CustomEvent("updatefromsandbox",{detail:i})):e._pdfDocument?.annotationStorage.setValue(N,i)}})()}_dispatchPageOpen(i,e=!1){var o=this;return O(function*(){const m=o._pdfDocument,S=o._visitedPages;if(e&&(o._closeCapability=(0,p.createPromiseCapability)()),!o._closeCapability)return;const f=o._pdfViewer.getPageView(i-1);if(f?.renderingState!==P.RenderingStates.FINISHED)return void o._pageOpenPending.add(i);o._pageOpenPending.delete(i);const c=O(function*(){const b=yield S.has(i)?null:f.pdfPage?.getJSActions();m===o._pdfDocument&&(yield o._scripting?.dispatchEventInSandbox({id:"page",name:"PageOpen",pageNumber:i,actions:b}))})();S.set(i,c)})()}_dispatchPageClose(i){var e=this;return O(function*(){const o=e._pdfDocument,m=e._visitedPages;if(!e._closeCapability||e._pageOpenPending.has(i))return;const S=m.get(i);S&&(m.set(i,null),yield S,o===e._pdfDocument&&(yield e._scripting?.dispatchEventInSandbox({id:"page",name:"PageClose",pageNumber:i})))})()}_getDocProperties(){var i=this;return O(function*(){if(i._docPropertiesLookup)return i._docPropertiesLookup(i._pdfDocument);const{docPropertiesLookup:e}=_(26);return e(i._pdfDocument)})()}_createScripting(){if(this._destroyCapability=(0,p.createPromiseCapability)(),this._scripting)throw new Error("_createScripting: Scripting already exists.");if(this._scriptingFactory)return this._scriptingFactory.createScripting({sandboxBundleSrc:this._sandboxBundleSrc});const{GenericScripting:i}=_(26);return new i(this._sandboxBundleSrc)}_destroyScripting(){var i=this;return O(function*(){if(!i._scripting)return i._pdfDocument=null,void i._destroyCapability?.resolve();i._closeCapability&&(yield Promise.race([i._closeCapability.promise,new Promise(e=>{setTimeout(e,1e3)})]).catch(e=>{}),i._closeCapability=null),i._pdfDocument=null;try{yield i._scripting.destroySandbox()}catch{}for(const[e,o]of i._internalEvents)i._eventBus._off(e,o);i._internalEvents.clear();for(const[e,o]of i._domEvents)window.removeEventListener(e,o,!0);i._domEvents.clear(),i._pageOpenPending.clear(),i._visitedPages.clear(),i._scripting=null,delete i._mouseState.isDown,i._ready=!1,i._destroyCapability?.resolve()})()}}},(t,s,_)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.GenericScripting=void 0,s.docPropertiesLookup=function p(i){return A.apply(this,arguments)};var P=_(3);function A(){return(A=O(function*(i){const o="".split("#")[0];let{info:m,metadata:S,contentDispositionFilename:f,contentLength:c}=yield i.getMetadata();if(!c){const{length:b}=yield i.getDownloadInfo();c=b}return{...m,baseURL:o,filesize:c,filename:f||(0,P.getPdfFilenameFromUrl)(""),metadata:S?.getRaw(),authors:S?.get("dc:creator"),numPages:i.numPages,URL:""}})).apply(this,arguments)}s.GenericScripting=class u{constructor(e){this._ready=(0,P.loadScript)(e,!0).then(()=>window.pdfjsSandbox.QuickJSSandbox())}createSandbox(e){var o=this;return O(function*(){(yield o._ready).create(e)})()}dispatchEventInSandbox(e){var o=this;return O(function*(){const m=yield o._ready;setTimeout(()=>m.dispatchEvent(e),0)})()}destroySandbox(){var e=this;return O(function*(){(yield e._ready).nukeSandbox()})()}}}],q={};function W(t){var s=q[t];if(void 0!==s)return s.exports;var _=q[t]={exports:{}};return G[t](_,_.exports,W),_.exports}var y={};return(()=>{var t=y;Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"AnnotationLayerBuilder",{enumerable:!0,get:function(){return A.AnnotationLayerBuilder}}),Object.defineProperty(t,"DefaultAnnotationLayerFactory",{enumerable:!0,get:function(){return s.DefaultAnnotationLayerFactory}}),Object.defineProperty(t,"DefaultStructTreeLayerFactory",{enumerable:!0,get:function(){return s.DefaultStructTreeLayerFactory}}),Object.defineProperty(t,"DefaultTextLayerFactory",{enumerable:!0,get:function(){return s.DefaultTextLayerFactory}}),Object.defineProperty(t,"DefaultXfaLayerFactory",{enumerable:!0,get:function(){return s.DefaultXfaLayerFactory}}),Object.defineProperty(t,"DownloadManager",{enumerable:!0,get:function(){return u.DownloadManager}}),Object.defineProperty(t,"EventBus",{enumerable:!0,get:function(){return i.EventBus}}),Object.defineProperty(t,"GenericL10n",{enumerable:!0,get:function(){return e.GenericL10n}}),Object.defineProperty(t,"LinkTarget",{enumerable:!0,get:function(){return _.LinkTarget}}),Object.defineProperty(t,"NullL10n",{enumerable:!0,get:function(){return o.NullL10n}}),Object.defineProperty(t,"PDFFindController",{enumerable:!0,get:function(){return m.PDFFindController}}),Object.defineProperty(t,"PDFHistory",{enumerable:!0,get:function(){return S.PDFHistory}}),Object.defineProperty(t,"PDFLinkService",{enumerable:!0,get:function(){return _.PDFLinkService}}),Object.defineProperty(t,"PDFPageView",{enumerable:!0,get:function(){return f.PDFPageView}}),Object.defineProperty(t,"PDFScriptingManager",{enumerable:!0,get:function(){return c.PDFScriptingManager}}),Object.defineProperty(t,"PDFSinglePageViewer",{enumerable:!0,get:function(){return p.PDFSinglePageViewer}}),Object.defineProperty(t,"PDFViewer",{enumerable:!0,get:function(){return p.PDFViewer}}),Object.defineProperty(t,"ProgressBar",{enumerable:!0,get:function(){return P.ProgressBar}}),Object.defineProperty(t,"RenderingStates",{enumerable:!0,get:function(){return P.RenderingStates}}),Object.defineProperty(t,"ScrollMode",{enumerable:!0,get:function(){return P.ScrollMode}}),Object.defineProperty(t,"SimpleLinkService",{enumerable:!0,get:function(){return _.SimpleLinkService}}),Object.defineProperty(t,"SpreadMode",{enumerable:!0,get:function(){return P.SpreadMode}}),Object.defineProperty(t,"StructTreeLayerBuilder",{enumerable:!0,get:function(){return b.StructTreeLayerBuilder}}),Object.defineProperty(t,"TextLayerBuilder",{enumerable:!0,get:function(){return N.TextLayerBuilder}}),Object.defineProperty(t,"XfaLayerBuilder",{enumerable:!0,get:function(){return R.XfaLayerBuilder}}),Object.defineProperty(t,"parseQueryString",{enumerable:!0,get:function(){return P.parseQueryString}});var s=W(1),_=W(6),P=W(7),p=W(11),A=W(5),u=W(18),i=W(19),e=W(20),o=W(4),m=W(22),S=W(24),f=W(13),c=W(25),b=W(8),N=W(9),R=W(10)})(),y})()},3414:()=>{},172:()=>{},2001:()=>{},3779:()=>{},6558:()=>{},2258:()=>{},7156:Z=>{function r(a,v,F,O,Q,M,C){try{var G=a[M](C),q=G.value}catch(W){return void F(W)}G.done?v(q):Promise.resolve(q).then(O,Q)}Z.exports=function x(a){return function(){var v=this,F=arguments;return new Promise(function(O,Q){var M=a.apply(v,F);function C(q){r(M,O,Q,C,G,"next",q)}function G(q){r(M,O,Q,C,G,"throw",q)}C(void 0)})}},Z.exports.__esModule=!0,Z.exports.default=Z.exports},6521:Z=>{Z.exports=function r(x,a){if(a.has(x))throw new TypeError("Cannot initialize the same private elements twice on an object")},Z.exports.__esModule=!0,Z.exports.default=Z.exports},8912:Z=>{Z.exports=function r(x,a){return a.get?a.get.call(x):a.value},Z.exports.__esModule=!0,Z.exports.default=Z.exports},3448:Z=>{Z.exports=function r(x,a,v){if(a.set)a.set.call(x,v);else{if(!a.writable)throw new TypeError("attempted to set read only private field");a.value=v}},Z.exports.__esModule=!0,Z.exports.default=Z.exports},2625:Z=>{Z.exports=function r(x,a){if(x!==a)throw new TypeError("Private static access of wrong provenance")},Z.exports.__esModule=!0,Z.exports.default=Z.exports},2506:Z=>{Z.exports=function r(x,a){if(void 0===x)throw new TypeError("attempted to "+a+" private static field before its declaration")},Z.exports.__esModule=!0,Z.exports.default=Z.exports},4069:Z=>{Z.exports=function r(x,a,v){if(!a.has(x))throw new TypeError("attempted to "+v+" private field on non-instance");return a.get(x)},Z.exports.__esModule=!0,Z.exports.default=Z.exports},468:(Z,r,x)=>{var a=x(8912),v=x(4069);Z.exports=function F(O,Q){var M=v(O,Q,"get");return a(O,M)},Z.exports.__esModule=!0,Z.exports.default=Z.exports},9159:(Z,r,x)=>{var a=x(6521);Z.exports=function v(F,O,Q){a(F,O),O.set(F,Q)},Z.exports.__esModule=!0,Z.exports.default=Z.exports},5661:(Z,r,x)=>{var a=x(3448),v=x(4069);Z.exports=function F(O,Q,M){var C=v(O,Q,"set");return a(O,C,M),M},Z.exports.__esModule=!0,Z.exports.default=Z.exports},4467:Z=>{Z.exports=function r(x,a,v){if(!a.has(x))throw new TypeError("attempted to get private field on non-instance");return v},Z.exports.__esModule=!0,Z.exports.default=Z.exports},1860:(Z,r,x)=>{var a=x(6521);Z.exports=function v(F,O){a(F,O),O.add(F)},Z.exports.__esModule=!0,Z.exports.default=Z.exports},1280:(Z,r,x)=>{var a=x(8912),v=x(2625),F=x(2506);Z.exports=function O(Q,M,C){return v(Q,M),F(C,"get"),a(Q,C)},Z.exports.__esModule=!0,Z.exports.default=Z.exports},9382:(Z,r,x)=>{var a=x(3448),v=x(2625),F=x(2506);Z.exports=function O(Q,M,C,G){return v(Q,M),F(C,"set"),a(Q,C,G),G},Z.exports.__esModule=!0,Z.exports.default=Z.exports},5764:(Z,r,x)=>{var a=x(2625);Z.exports=function v(F,O,Q){return a(F,O),Q},Z.exports.__esModule=!0,Z.exports.default=Z.exports},8416:(Z,r,x)=>{var a=x(4062);Z.exports=function v(F,O,Q){return(O=a(O))in F?Object.defineProperty(F,O,{value:Q,enumerable:!0,configurable:!0,writable:!0}):F[O]=Q,F},Z.exports.__esModule=!0,Z.exports.default=Z.exports},5036:(Z,r,x)=>{var a=x(8698).default;Z.exports=function v(F,O){if("object"!==a(F)||null===F)return F;var Q=F[Symbol.toPrimitive];if(void 0!==Q){var M=Q.call(F,O||"default");if("object"!==a(M))return M;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===O?String:Number)(F)},Z.exports.__esModule=!0,Z.exports.default=Z.exports},4062:(Z,r,x)=>{var a=x(8698).default,v=x(5036);Z.exports=function F(O){var Q=v(O,"string");return"symbol"===a(Q)?Q:String(Q)},Z.exports.__esModule=!0,Z.exports.default=Z.exports},8698:Z=>{function r(x){return Z.exports=r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},Z.exports.__esModule=!0,Z.exports.default=Z.exports,r(x)}Z.exports=r,Z.exports.__esModule=!0,Z.exports.default=Z.exports}}]);