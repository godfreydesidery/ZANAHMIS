"use strict";(self.webpackChunkzana_hmis=self.webpackChunkzana_hmis||[]).push([[3161],{3161:(f,h,t)=>{t.r(h),t.d(h,{ProcedurePlanComponent:()=>M});var u=t(5861),_=t(6814),o=t(9862),P=t(95),m=t(8237),i=t(4716),g=t(553),a=t(6689),v=t(6466),y=t(585),T=t(379);function E(l,d){if(1&l){const p=a.EpF();a.TgZ(0,"div",9)(1,"button",10),a.NdJ("click",function(){const s=a.CHM(p).$implicit,r=a.oxw();return a.KtG(r.setInsurancePlanId(s.id,s.name))}),a._uU(2),a.qZA()()}if(2&l){const p=d.$implicit;a.xp6(2),a.Oqu(p.name)}}const c=g.N.apiUrl;let M=(()=>{var l;class d{constructor(e,n,s,r){this.auth=e,this.http=n,this.spinner=s,this.msgBox=r,this.id=null,this.price=0,this.insuranceProviderName="",this.insurancePlanName="",this.insuranceProviderNames=[],this.insurancePlanNames=[],this.procedureTypeName="",this.procedureTypeNames=[],this.procedureTypeInsurancePlans=[],this.insurancePlans=[],this.filterRecords=""}ngOnInit(){this.loadInsurancePlans()}loadInsuranceProviderNames(){var e=this;return(0,u.Z)(function*(){e.insuranceProviderNames=[];let n={headers:(new o.WM).set("Authorization","Bearer "+e.auth.user.access_token)};e.spinner.show(),yield e.http.get(c+"/insurance_providers/get_names",n).pipe((0,i.x)(()=>e.spinner.hide())).toPromise().then(s=>{s?.forEach(r=>{e.insuranceProviderNames.push(r)})}).catch(s=>{e.msgBox.showErrorMessage(s,"Could not load Insurance Providers")})})()}loadInsurancePlans(){var e=this;return(0,u.Z)(function*(){e.insurancePlans=[];let n={headers:(new o.WM).set("Authorization","Bearer "+e.auth.user.access_token)};e.spinner.show(),yield e.http.get(c+"/insurance_plans",n).pipe((0,i.x)(()=>e.spinner.hide())).toPromise().then(s=>{e.insurancePlans=s}).catch(s=>{e.msgBox.showErrorMessage(s,"")})})()}loadInsurancePlanNamesByProviders(e){var n=this;return(0,u.Z)(function*(){n.insurancePlanNames=[];let s={headers:(new o.WM).set("Authorization","Bearer "+n.auth.user.access_token)};n.spinner.show(),yield n.http.get(c+"/insurance_plans/get_names_by_insurance_provider?provider_name="+e,s).pipe((0,i.x)(()=>n.spinner.hide())).toPromise().then(r=>{r?.forEach(I=>{n.insurancePlanNames.push(I)})}).catch(r=>{n.msgBox.showErrorMessage(r,"Could not load Insurance Plans")})})()}loadProcedureTypeInsurancePlans(){var e=this;return(0,u.Z)(function*(){e.procedureTypeInsurancePlans=[];let n={headers:(new o.WM).set("Authorization","Bearer "+e.auth.user.access_token)};e.spinner.show(),yield e.http.get(c+"/procedure_type_insurance_plans",n).pipe((0,i.x)(()=>e.spinner.hide())).toPromise().then(s=>{s?.forEach(r=>{e.procedureTypeInsurancePlans.push(r)})}).catch(s=>{e.msgBox.showErrorMessage(s,"Could not load Procedure Type Plans")})})()}saveProcedureTypeInsurancePlan(){var e=this;return(0,u.Z)(function*(){let n={headers:(new o.WM).set("Authorization","Bearer "+e.auth.user.access_token)};var s={id:e.id,procedureType:{name:e.procedureTypeName},insurancePlan:{name:e.insurancePlanName},price:e.price};null==e.id||""==e.id?(e.spinner.show(),yield e.http.post(c+"/procedure_type_insurance_plans/save",s,n).pipe((0,i.x)(()=>e.spinner.hide())).toPromise().then(r=>{e.id=r?.id,e.msgBox.showSuccessMessage("Procedure Type Plan created successifully"),e.loadProcedureTypeInsurancePlans()}).catch(r=>{e.msgBox.showErrorMessage(r,"Could not create Procedure Type Plan")})):(e.spinner.show(),yield e.http.post(c+"/procedure_type_insurance_plans/save",s,n).pipe((0,i.x)(()=>e.spinner.hide())).toPromise().then(r=>{e.id=r?.id,e.msgBox.showSuccessMessage("Procedure Type Plan updated successifully"),e.loadProcedureTypeInsurancePlans()}).catch(r=>{e.msgBox.showErrorMessage(r,"Could not update Procedure Type Plan")})),e.clear()})()}clear(){this.id=null,this.procedureTypeName="",this.insuranceProviderName="",this.insurancePlanName="",this.price=0}getProcedureTypeInsurancePlan(e){var n=this;return(0,u.Z)(function*(){if(""==e)return;let s={headers:(new o.WM).set("Authorization","Bearer "+n.auth.user.access_token)};n.spinner.show(),yield n.http.get(c+"/procedure_type_insurance_plans/get?id="+e,s).pipe((0,i.x)(()=>n.spinner.hide())).toPromise().then(r=>{console.log(r),n.id=r?.id,n.procedureTypeName=r.procedureType.name,n.insuranceProviderName=r.insurancePlan.insuranceProvider.name,n.insurancePlanName=r.insurancePlan.name,n.price=r.price}).catch(r=>{console.log(r),n.msgBox.showErrorMessage(r,"Could not find Procedure Type Plan")})})()}deleteProcedureTypeInsurancePlan(e){var n=this;return(0,u.Z)(function*(){if(""==e||!window.confirm("Delete this plan? Plan ID: "+e))return;let s={headers:(new o.WM).set("Authorization","Bearer "+n.auth.user.access_token)};n.spinner.show(),yield n.http.post(c+"/procedure_type_insurance_plans/delete?id="+e,s).pipe((0,i.x)(()=>n.spinner.hide())).toPromise().then(r=>{console.log(r),n.loadProcedureTypeInsurancePlans()}).catch(r=>{console.log(r),n.msgBox.showErrorMessage(r,"Could not delete Procedure Type Plan")})})()}loadProcedureTypeNames(){var e=this;return(0,u.Z)(function*(){e.procedureTypeNames=[];let n={headers:(new o.WM).set("Authorization","Bearer "+e.auth.user.access_token)};e.spinner.show(),yield e.http.get(c+"/procedure_types/get_names",n).pipe((0,i.x)(()=>e.spinner.hide())).toPromise().then(s=>{s?.forEach(r=>{e.procedureTypeNames.push(r)})}).catch(s=>{e.msgBox.showErrorMessage(s,"Could not load Procedure Types")})})()}grant(e){var n=!1;return e.forEach(s=>{this.auth.checkPrivilege(s)&&(n=!0)}),n}setInsurancePlanId(e,n){localStorage.setItem("insurance_plan_id",e),localStorage.setItem("insurance_plan_name",n)}}return(l=d).\u0275fac=function(e){return new(e||l)(a.Y36(v.e),a.Y36(o.eN),a.Y36(y.t2),a.Y36(T.l))},l.\u0275cmp=a.Xpm({type:l,selectors:[["app-procedure-plan"]],standalone:!0,features:[a.jDz],decls:18,vars:1,consts:[[1,"content-header"],[1,"header-title"],[1,"content"],[1,"row"],[1,"col-sm-12"],[1,"panel","panel-bd","lobidrag"],[1,"panel-heading"],[1,"text-primary"],[1,"panel-body"],[1,"col-sm-2"],["routerLink","/procedure-type-price",1,"btn","btn-transparent","btn-primary","btn-outline","form-control",2,"border-radius","0px",3,"click"],["class","col-sm-2",4,"ngFor","ngForOf"]],template:function(e,n){1&e&&(a.TgZ(0,"section",0)(1,"div",1)(2,"h1"),a._uU(3,"Procedure Plan"),a.qZA()()(),a.TgZ(4,"section",2)(5,"div",3)(6,"div",4)(7,"div",5)(8,"div",6)(9,"h4",7),a._uU(10,"Select Package"),a.qZA()(),a.TgZ(11,"div",8)(12,"div",4)(13,"div",3)(14,"div",9)(15,"button",10),a.NdJ("click",function(){return n.setInsurancePlanId(0,"CASH")}),a._uU(16,"CASH"),a.qZA()(),a.YNc(17,E,3,1,"div",11),a.qZA()()()()()()()),2&e&&(a.xp6(17),a.Q6J("ngForOf",n.insurancePlans))},dependencies:[_.ez,_.sg,P.u5,P.UX,m.rH]}),d})()}}]);