"use strict";(self.webpackChunkzana_hmis=self.webpackChunkzana_hmis||[]).push([[8800],{8800:(f,_,t)=>{t.r(_),t.d(_,{WardPlanComponent:()=>W});var c=t(5861),m=t(6814),i=t(9862),P=t(95),g=t(8237),o=t(4716),v=t(553),r=t(6689),y=t(6466),E=t(1581),T=t(585),w=t(379);function M(d,u){if(1&d){const p=r.EpF();r.TgZ(0,"div",9)(1,"button",10),r.NdJ("click",function(){const a=r.CHM(p).$implicit,s=r.oxw();return r.KtG(s.setInsurancePlanId(a.id,a.name))}),r._uU(2),r.qZA()()}if(2&d){const p=u.$implicit;r.xp6(2),r.Oqu(p.name)}}const l=v.N.apiUrl;let W=(()=>{var d;class u{constructor(e,n,a,s,h){this.auth=e,this.http=n,this.modalService=a,this.spinner=s,this.msgBox=h,this.id=null,this.price=0,this.insuranceProviderName="",this.insurancePlanName="",this.insuranceProviderNames=[],this.insurancePlanNames=[],this.wardTypeName="",this.wardTypeNames=[],this.wardTypeInsurancePlans=[],this.insurancePlans=[],this.filterRecords=""}ngOnInit(){this.loadInsurancePlans()}loadInsuranceProviderNames(){var e=this;return(0,c.Z)(function*(){e.insuranceProviderNames=[];let n={headers:(new i.WM).set("Authorization","Bearer "+e.auth.user.access_token)};e.spinner.show(),yield e.http.get(l+"/insurance_providers/get_names",n).pipe((0,o.x)(()=>e.spinner.hide())).toPromise().then(a=>{a?.forEach(s=>{e.insuranceProviderNames.push(s)})}).catch(a=>{e.msgBox.showErrorMessage(a,"Could not load Providers")})})()}loadInsurancePlans(){var e=this;return(0,c.Z)(function*(){e.insurancePlans=[];let n={headers:(new i.WM).set("Authorization","Bearer "+e.auth.user.access_token)};e.spinner.show(),yield e.http.get(l+"/insurance_plans",n).pipe((0,o.x)(()=>e.spinner.hide())).toPromise().then(a=>{e.insurancePlans=a}).catch(a=>{e.msgBox.showErrorMessage(a,"")})})()}loadInsurancePlanNamesByProviders(e){var n=this;return(0,c.Z)(function*(){n.insurancePlanNames=[];let a={headers:(new i.WM).set("Authorization","Bearer "+n.auth.user.access_token)};n.spinner.show(),yield n.http.get(l+"/insurance_plans/get_names_by_insurance_provider?provider_name="+e,a).pipe((0,o.x)(()=>n.spinner.hide())).toPromise().then(s=>{s?.forEach(h=>{n.insurancePlanNames.push(h)})}).catch(s=>{n.msgBox.showErrorMessage(s,"Could not load Plans")})})()}loadWardTypeInsurancePlans(){var e=this;return(0,c.Z)(function*(){e.wardTypeInsurancePlans=[];let n={headers:(new i.WM).set("Authorization","Bearer "+e.auth.user.access_token)};e.spinner.show(),yield e.http.get(l+"/ward_type_insurance_plans",n).pipe((0,o.x)(()=>e.spinner.hide())).toPromise().then(a=>{a?.forEach(s=>{e.wardTypeInsurancePlans.push(s)})}).catch(a=>{e.msgBox.showErrorMessage(a,"Could not load Ward Type Plans")})})()}saveWardTypeInsurancePlan(){var e=this;return(0,c.Z)(function*(){let n={headers:(new i.WM).set("Authorization","Bearer "+e.auth.user.access_token)};var a={id:e.id,wardType:{name:e.wardTypeName},insurancePlan:{name:e.insurancePlanName},price:e.price};null==e.id||""==e.id?(e.spinner.show(),yield e.http.post(l+"/ward_type_insurance_plans/save",a,n).pipe((0,o.x)(()=>e.spinner.hide())).toPromise().then(s=>{e.id=s?.id,e.msgBox.showSuccessMessage("Ward Type Plan created successifully"),e.loadWardTypeInsurancePlans()}).catch(s=>{e.msgBox.showErrorMessage(s,"Could not create Ward Type Plan")})):(e.spinner.show(),yield e.http.post(l+"/ward_type_insurance_plans/save",a,n).pipe((0,o.x)(()=>e.spinner.hide())).toPromise().then(s=>{e.id=s?.id,e.msgBox.showSuccessMessage("WardType plan updated successifully"),e.loadWardTypeInsurancePlans()}).catch(s=>{e.msgBox.showErrorMessage(s,"Could not update ward Type plan")})),e.clear()})()}clear(){this.id=null,this.wardTypeName="",this.insuranceProviderName="",this.insurancePlanName="",this.price=0}getWardTypeInsurancePlan(e){var n=this;return(0,c.Z)(function*(){if(""==e)return;let a={headers:(new i.WM).set("Authorization","Bearer "+n.auth.user.access_token)};n.spinner.show(),yield n.http.get(l+"/ward_type_insurance_plans/get?id="+e,a).pipe((0,o.x)(()=>n.spinner.hide())).toPromise().then(s=>{console.log(s),n.id=s?.id,n.wardTypeName=s.wardType.name,n.insuranceProviderName=s.insurancePlan.insuranceProvider.name,n.insurancePlanName=s.insurancePlan.name,n.price=s.price}).catch(s=>{console.log(s),n.msgBox.showErrorMessage(s,"Could not findwardType plan")})})()}deleteWardTypeInsurancePlan(e){var n=this;return(0,c.Z)(function*(){if(""==e||!window.confirm("Delete this plan? Plan ID: "+e))return;let a={headers:(new i.WM).set("Authorization","Bearer "+n.auth.user.access_token)};n.spinner.show(),yield n.http.post(l+"/ward_type_insurance_plans/delete?id="+e,a).pipe((0,o.x)(()=>n.spinner.hide())).toPromise().then(s=>{console.log(s),n.loadWardTypeInsurancePlans()}).catch(s=>{console.log(s),n.msgBox.showErrorMessage(s,"Could not deletewardType plan")})})()}loadWardTypeNames(){var e=this;return(0,c.Z)(function*(){e.wardTypeNames=[];let n={headers:(new i.WM).set("Authorization","Bearer "+e.auth.user.access_token)};e.spinner.show(),yield e.http.get(l+"/ward_types/get_names",n).pipe((0,o.x)(()=>e.spinner.hide())).toPromise().then(a=>{a?.forEach(s=>{e.wardTypeNames.push(s)})}).catch(a=>{e.msgBox.showErrorMessage(a,"Could not load ward_types")})})()}grant(e){var n=!1;return e.forEach(a=>{this.auth.checkPrivilege(a)&&(n=!0)}),n}setInsurancePlanId(e,n){localStorage.setItem("insurance_plan_id",e),localStorage.setItem("insurance_plan_name",n)}}return(d=u).\u0275fac=function(e){return new(e||d)(r.Y36(y.e),r.Y36(i.eN),r.Y36(E.FF),r.Y36(T.t2),r.Y36(w.l))},d.\u0275cmp=r.Xpm({type:d,selectors:[["app-ward-plan"]],standalone:!0,features:[r.jDz],decls:18,vars:1,consts:[[1,"content-header"],[1,"header-title"],[1,"content"],[1,"row"],[1,"col-sm-12"],[1,"panel","panel-bd","lobidrag"],[1,"panel-heading"],[1,"text-primary"],[1,"panel-body"],[1,"col-sm-2"],["routerLink","/ward-type-price",1,"btn","btn-transparent","btn-primary","btn-outline","form-control",2,"border-radius","0px",3,"click"],["class","col-sm-2",4,"ngFor","ngForOf"]],template:function(e,n){1&e&&(r.TgZ(0,"section",0)(1,"div",1)(2,"h1"),r._uU(3,"Ward Plan"),r.qZA()()(),r.TgZ(4,"section",2)(5,"div",3)(6,"div",4)(7,"div",5)(8,"div",6)(9,"h4",7),r._uU(10,"Select Package"),r.qZA()(),r.TgZ(11,"div",8)(12,"div",4)(13,"div",3)(14,"div",9)(15,"button",10),r.NdJ("click",function(){return n.setInsurancePlanId(0,"CASH")}),r._uU(16,"CASH"),r.qZA()(),r.YNc(17,M,3,1,"div",11),r.qZA()()()()()()()),2&e&&(r.xp6(17),r.Q6J("ngForOf",n.insurancePlans))},dependencies:[m.ez,m.sg,P.u5,P.UX,g.rH]}),u})()}}]);