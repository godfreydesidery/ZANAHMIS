"use strict";(self.webpackChunkzana_hmis=self.webpackChunkzana_hmis||[]).push([[9520],{9520:(L,d,a)=>{a.r(d),a.d(d,{PharmacyOutsiderListComponent:()=>M});var c=a(5861),p=a(6814),h=a(9862),_=a(95),u=a(8237),m=a(4716),O=a(4185),E=a(553),t=a(6689),P=a(6466),Z=a(7140),v=a(585),y=a(379);function A(o,l){if(1&o){const s=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td")(10,"a",18),t.NdJ("click",function(){const r=t.CHM(s).$implicit,i=t.oxw();return t.KtG(i.attend(r.id))}),t._uU(11,"Attend"),t.qZA()()()}if(2&o){const s=l.$implicit;t.xp6(2),t.Oqu(s.firstName+" "+s.middleName+" "+s.lastName),t.xp6(2),t.Oqu(s.no),t.xp6(2),t.Oqu(s.paymentType),t.xp6(2),t.Oqu(s.gender)}}const g=E.N.apiUrl;let M=(()=>{var o;class l{constructor(e,n,r,i,T,U){this.auth=e,this.http=n,this.modalService=r,this.spinner=i,this.router=T,this.msgBox=U,this.patients=[],this.pharmacyName=localStorage.getItem("selected-pharmacy-name"),this.filterRecords=""}ngOnInit(){var e=this;return(0,c.Z)(function*(){yield e.loadPharmacist(),yield e.loadOutsiderList()})()}loadPharmacist(){var e=this;return(0,c.Z)(function*(){var n=localStorage.getItem("username");let r={headers:(new h.WM).set("Authorization","Bearer "+e.auth.user.access_token)};e.spinner.show(),yield e.http.get(g+"/pharmacists/load_pharmacist_by_username?username="+n,r).pipe((0,m.x)(()=>e.spinner.hide())).toPromise().then(i=>{e.pharmacistId=i}).catch(i=>{e.msgBox.showErrorMessage(i,"Could not load pharmacist")})})()}loadOutsiderList(){var e=this;return(0,c.Z)(function*(){let n={headers:(new h.WM).set("Authorization","Bearer "+e.auth.user.access_token)};e.spinner.show(),yield e.http.get(g+"/patients/get_pharmacy_outsider_list",n).pipe((0,m.x)(()=>e.spinner.hide())).toPromise().then(r=>{console.log(r),r?.forEach(i=>{e.patients.push(i)})}).catch(r=>{e.msgBox.showErrorMessage(r,""),console.log(r)})})()}attend(e){localStorage.setItem("pharmacy-patient-id",e),this.router.navigate(["patient-pharmacy"])}grant(e){var n=!1;return e.forEach(r=>{this.auth.checkPrivilege(r)&&(n=!0)}),n}}return(o=l).\u0275fac=function(e){return new(e||o)(t.Y36(P.e),t.Y36(h.eN),t.Y36(Z.FF),t.Y36(v.t2),t.Y36(u.F0),t.Y36(y.l))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-pharmacy-outsider-list"]],standalone:!0,features:[t.jDz],decls:42,vars:6,consts:[[1,"content-header"],[1,"header-title"],[1,"text-primary"],[1,"content"],[1,"row"],[1,"col-sm-12"],[1,"panel","panel-bd","lobidrag"],[1,"panel-heading"],["routerLink","/pharmacy-outpatient-list",1,"btn","btn-primary","btn-outline"],["routerLink","/pharmacy-inpatient-list",1,"btn","btn-primary","btn-outline"],["routerLink","/pharmacy-outsider-list",1,"btn","btn-primary"],[1,"panel-body"],[1,"col-sm-4"],["type","text","placeholder","Search...",1,"form-control","pull-right",2,"max-width","8cm",3,"ngModel","ngModelChange"],[1,"table-responsive"],[1,"table","table-bordered","table-hover"],[1,"success"],[4,"ngFor","ngForOf"],[1,"btn","btn-success",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"section",0)(1,"div",1)(2,"h1"),t._uU(3,"Pharmacy - Outsider List ("),t.TgZ(4,"span",2),t._uU(5),t.qZA(),t._uU(6,")"),t.qZA()()(),t.TgZ(7,"section",3)(8,"div",4)(9,"div",5)(10,"div",6)(11,"div",7)(12,"button",8),t._uU(13,"Outpatient List"),t.qZA(),t.TgZ(14,"button",9),t._uU(15,"Inpatient List"),t.qZA(),t.TgZ(16,"button",10),t._uU(17,"Outsider List"),t.qZA()(),t.TgZ(18,"div",11)(19,"div",4),t._UZ(20,"div",12)(21,"div",12),t.TgZ(22,"div",12)(23,"input",13),t.NdJ("ngModelChange",function(i){return n.filterRecords=i}),t.qZA()()(),t._UZ(24,"br"),t.TgZ(25,"div",14)(26,"table",15)(27,"thead",16)(28,"tr")(29,"th"),t._uU(30,"Name"),t.qZA(),t.TgZ(31,"th"),t._uU(32,"Patient's File No"),t.qZA(),t.TgZ(33,"th"),t._uU(34,"Payment Type"),t.qZA(),t.TgZ(35,"th"),t._uU(36,"Gender"),t.qZA(),t.TgZ(37,"th"),t._uU(38,"Action"),t.qZA()()(),t.TgZ(39,"tbody"),t.YNc(40,A,12,4,"tr",17),t.ALo(41,"searchFilter"),t.qZA()()()()()()()()),2&e&&(t.xp6(5),t.Oqu(n.pharmacyName),t.xp6(18),t.Q6J("ngModel",n.filterRecords),t.xp6(17),t.Q6J("ngForOf",t.xi3(41,3,n.patients,n.filterRecords)))},dependencies:[p.ez,p.sg,_.u5,_.Fj,_.JJ,_.On,_.UX,O.G,u.rH]}),l})()}}]);