"use strict";(self.webpackChunkzana_hmis=self.webpackChunkzana_hmis||[]).push([[3294],{3294:(U,h,i)=>{i.r(h),i.d(h,{LabTestTypeRangeComponent:()=>L});var _=i(5861),d=i(6814),p=i(9862),T=i(95),c=i(4716),u=i(4185),b=i(553),e=i(6689),y=i(6466),m=i(585),R=i(379);function f(s,r){if(1&s){const l=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td")(4,"a",16),e.NdJ("click",function(){const a=e.CHM(l).$implicit,o=e.oxw();return e.KtG(o.getLabTestType(a.id))}),e._UZ(5,"i",17),e._uU(6,"Select"),e.qZA()()()}if(2&s){const l=r.$implicit;e.xp6(2),e.Oqu(l.name)}}function Z(s,r){1&s&&(e.TgZ(0,"h4")(1,"small"),e._uU(2,"No Test Type selected"),e.qZA()())}function v(s,r){if(1&s){const l=e.EpF();e.TgZ(0,"table",11)(1,"tbody")(2,"tr")(3,"td"),e._uU(4,"Range"),e.qZA(),e.TgZ(5,"td"),e._uU(6,"Action"),e.qZA()(),e.TgZ(7,"tr")(8,"td")(9,"input",18),e.NdJ("ngModelChange",function(t){e.CHM(l);const a=e.oxw();return e.KtG(a.labTestTypeRangeName=t)}),e.qZA()(),e.TgZ(10,"td")(11,"button",19),e.NdJ("click",function(){e.CHM(l);const t=e.oxw();return e.KtG(t.saveLabTestTypeRange())}),e._uU(12,"Add"),e.qZA()()()()()}if(2&s){const l=e.oxw();e.xp6(9),e.Q6J("ngModel",l.labTestTypeRangeName)}}function M(s,r){1&s&&(e.TgZ(0,"h4")(1,"small"),e._uU(2,"No Ranges available"),e.qZA()())}function A(s,r){if(1&s&&(e.TgZ(0,"div")(1,"h4")(2,"small"),e._uU(3,"Available Ranges for this Test Type"),e.qZA()(),e.YNc(4,M,3,0,"h4",14),e.qZA()),2&s){const l=e.oxw();e.xp6(4),e.Q6J("ngIf",0===l.labTestTypeRanges.length)}}function x(s,r){if(1&s){const l=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td")(4,"a",20),e.NdJ("click",function(){const a=e.CHM(l).$implicit,o=e.oxw(2);return e.KtG(o.deleteRange(a.id))}),e._UZ(5,"i",21),e._uU(6,"Delete"),e.qZA()()()}if(2&s){const l=r.$implicit;e.xp6(2),e.Oqu(null==l?null:l.name)}}function C(s,r){if(1&s&&(e.TgZ(0,"table",11)(1,"tbody")(2,"tr")(3,"td"),e._uU(4,"Range"),e.qZA(),e.TgZ(5,"td"),e._uU(6,"[X]"),e.qZA()(),e.YNc(7,x,7,1,"tr",12),e.qZA()()),2&s){const l=e.oxw();e.xp6(7),e.Q6J("ngForOf",l.labTestTypeRanges)}}const g=b.N.apiUrl;let L=(()=>{var s;class r{constructor(n,t,a,o){this.auth=n,this.http=t,this.spinner=a,this.msgBox=o,this.name="",this.active=!0,this.labTestTypes=[],this.labTestTypeRanges=[],this.labTestTypeNames=[],this.labTestTypeName="",this.filterRecords="",this.labTestTypeRangeName="",this.labTestTypeId=null}ngOnInit(){this.loadLabTestTypes()}saveLabTestTypeRange(){var n=this;return(0,_.Z)(function*(){let t={headers:(new p.WM).set("Authorization","Bearer "+n.auth.user.access_token)};var a={name:n.labTestTypeRangeName,labTestType:{id:n.labTestTypeId},active:!0};n.spinner.show(),yield n.http.post(g+"/lab_test_type_ranges/save",a,t).pipe((0,c.x)(()=>n.spinner.hide())).toPromise().then(o=>{n.loadLabTestTypeRanges(n.labTestTypeId),n.msgBox.showSuccessMessage("Range created successifully")}).catch(o=>{n.msgBox.showErrorMessage(o,"")}),n.clear()})()}loadLabTestTypes(){var n=this;return(0,_.Z)(function*(){n.labTestTypes=[];let t={headers:(new p.WM).set("Authorization","Bearer "+n.auth.user.access_token)};n.spinner.show(),yield n.http.get(g+"/lab_test_types",t).pipe((0,c.x)(()=>n.spinner.hide())).toPromise().then(a=>{n.labTestTypes=a}).catch(a=>{n.msgBox.showErrorMessage(a,"Could not Lab Test Types")})})()}loadLabTestTypeRanges(n){var t=this;return(0,_.Z)(function*(){t.labTestTypeRanges=[];let a={headers:(new p.WM).set("Authorization","Bearer "+t.auth.user.access_token)};t.spinner.show(),yield t.http.get(g+"/lab_test_type_ranges?lab_test_type_id="+n,a).pipe((0,c.x)(()=>t.spinner.hide())).toPromise().then(o=>{o?.forEach(E=>{t.labTestTypeRanges.push(E)})}).catch(o=>{t.msgBox.showErrorMessage(o,"")})})()}clear(){this.labTestTypeRangeName=""}getLabTestType(n){var t=this;return(0,_.Z)(function*(){let a={headers:(new p.WM).set("Authorization","Bearer "+t.auth.user.access_token)};t.spinner.show(),yield t.http.get(g+"/lab_test_types/get?id="+n,a).pipe((0,c.x)(()=>t.spinner.hide())).toPromise().then(o=>{t.labTestTypeId=o?.id,t.labTestType=o,t.loadLabTestTypeRanges(t.labTestTypeId)}).catch(o=>{t.labTestTypeId=null,t.msgBox.showErrorMessage(o,"")})})()}deleteRange(n){var t=this;return(0,_.Z)(function*(){let a={headers:(new p.WM).set("Authorization","Bearer "+t.auth.user.access_token)};t.spinner.show(),yield t.http.get(g+"/lab_test_type_ranges/delete?id="+n,a).pipe((0,c.x)(()=>t.spinner.hide())).toPromise().then(o=>{t.msgBox.showSuccessMessage("Deleted"),t.loadLabTestTypeRanges(t.labTestTypeId)}).catch(o=>{t.msgBox.showErrorMessage(o,"")})})()}grant(n){var t=!1;return n.forEach(a=>{this.auth.checkPrivilege(a)&&(t=!0)}),t}}return(s=r).\u0275fac=function(n){return new(n||s)(e.Y36(y.e),e.Y36(p.eN),e.Y36(m.t2),e.Y36(R.l))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-lab-test-type-range"]],standalone:!0,features:[e.jDz],decls:38,vars:10,consts:[[1,"content-header"],[1,"header-title"],[1,"content"],[1,"row"],[1,"col-sm-12"],[1,"panel","panel-bd","lobidrag"],[1,"panel-heading"],[1,"panel-body"],[1,"col-sm-6",2,"height","100%","overflow","scroll"],[1,"col-sm-4"],["type","text","placeholder","Search...",1,"form-control","pull-right",2,"max-width","8cm",3,"ngModel","ngModelChange"],[1,"table","table-bordered","table-small"],[4,"ngFor","ngForOf"],[1,"col-sm-6"],[4,"ngIf"],["class","table table-bordered table-small",4,"ngIf"],[3,"click"],[1,"glyphicon","glyphicon-pencil"],["type","text",1,"form-control",3,"ngModel","ngModelChange"],[1,"btn","btn-primary",3,"click"],[1,"text-danger",3,"click"],[1,"glyphicon","glyphicon-trash"]],template:function(n,t){1&n&&(e.TgZ(0,"section",0)(1,"div",1)(2,"h1"),e._uU(3,"Lab Test Type Ranges"),e.qZA()()(),e.TgZ(4,"section",2)(5,"div",3)(6,"div",4)(7,"div",5)(8,"div",6)(9,"small"),e._uU(10,"Select Lab Test type to modify ranges"),e.qZA()(),e.TgZ(11,"div",7)(12,"div",8)(13,"div",3),e._UZ(14,"div",9)(15,"div",9),e.TgZ(16,"div",9)(17,"input",10),e.NdJ("ngModelChange",function(o){return t.filterRecords=o}),e.qZA()()(),e._UZ(18,"br"),e.TgZ(19,"table",11)(20,"thead")(21,"tr")(22,"td"),e._uU(23,"Lab Test Type"),e.qZA(),e.TgZ(24,"td"),e._uU(25,"Action"),e.qZA()()(),e.TgZ(26,"tbody"),e.YNc(27,f,7,1,"tr",12),e.ALo(28,"searchFilter"),e.qZA()()(),e.TgZ(29,"div",13)(30,"h4")(31,"small"),e._uU(32,"Selected Lab Test Type :"),e.qZA(),e._uU(33),e.qZA(),e.YNc(34,Z,3,0,"h4",14),e.YNc(35,v,13,1,"table",15),e.YNc(36,A,5,1,"div",14),e.YNc(37,C,8,1,"table",15),e.qZA()()()()()()),2&n&&(e.xp6(17),e.Q6J("ngModel",t.filterRecords),e.xp6(10),e.Q6J("ngForOf",e.xi3(28,7,t.labTestTypes,t.filterRecords)),e.xp6(6),e.hij(" ",null==t.labTestType?null:t.labTestType.name,""),e.xp6(1),e.Q6J("ngIf",null===t.labTestType),e.xp6(1),e.Q6J("ngIf",null!=t.labTestType),e.xp6(1),e.Q6J("ngIf",null!=t.labTestType),e.xp6(1),e.Q6J("ngIf",t.labTestTypeRanges.length>0))},dependencies:[d.ez,d.sg,d.O5,T.u5,T.Fj,T.JJ,T.On,T.UX,u.G]}),r})()}}]);