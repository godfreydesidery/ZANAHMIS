"use strict";(self.webpackChunkzana_hmis=self.webpackChunkzana_hmis||[]).push([[1302],{1302:(C,_,t)=>{t.r(_),t.d(_,{DischargePlanComponent:()=>P});var r=t(5861),h=t(6814),s=t(95),c=t(4512),m=t(9862),d=t(4716),v=t(553),n=t(6689),A=t(6466),Z=t(585),M=t(379);const g=v.N.apiUrl;let P=(()=>{var l;class u{constructor(i,e,a,o){this.auth=i,this.http=e,this.spinner=a,this.msgBox=o,this.id=null,this.history="",this.investigation="",this.management="",this.operationNote="",this.icuAdmissionNote="",this.generalRecommendation="",this.admissionId=null}ngOnInit(){var i=this;return(0,r.Z)(function*(){i.admissionId=localStorage.getItem("admission-id"),localStorage.removeItem("admission-id"),yield i.loadAdmission(i.admissionId),yield i.loadDischargePlan(i.admission.id)})()}loadAdmission(i){var e=this;return(0,r.Z)(function*(){let a={headers:(new m.WM).set("Authorization","Bearer "+e.auth.user.access_token)};e.spinner.show(),yield e.http.get(g+"/patients/load_admission?id="+i,a).pipe((0,d.x)(()=>e.spinner.hide())).toPromise().then(o=>{e.admission=o,console.log(o)}).catch(o=>{e.msgBox.showErrorMessage(o,"Could not load admission"),console.log(o)})})()}loadDischargePlan(i){var e=this;return(0,r.Z)(function*(){let a={headers:(new m.WM).set("Authorization","Bearer "+e.auth.user.access_token)};e.spinner.show(),yield e.http.get(g+"/patients/load_discharge_plan?admission_id="+i,a).pipe((0,d.x)(()=>e.spinner.hide())).toPromise().then(o=>{e.dischargePlan=o,e.id=o.id,e.history=o.history,e.investigation=o.investigation,e.management=o.management,e.operationNote=o.operationNote,e.icuAdmissionNote=o.icuAdmissionNote,e.generalRecommendation=o.generalRecommendation,console.log(o)}).catch(o=>{console.log(o)})})()}saveDischargePlan(){var i=this;return(0,r.Z)(function*(){let e={headers:(new m.WM).set("Authorization","Bearer "+i.auth.user.access_token)};if(""!==i.history&&""!==i.investigation&&""!==i.management){if(null===i.id&&!window.confirm("Confirm submitting discharge plan. Confirm?"))return i.id=null,i.history="",i.investigation="",i.management="",i.operationNote="",i.icuAdmissionNote="",void(i.generalRecommendation="");var a={history:i.history,investigation:i.investigation,management:i.management,operationNote:i.operationNote,icuAdmissionNote:i.icuAdmissionNote,generalRecommendation:i.generalRecommendation,admission:{id:i.admissionId}};i.spinner.show(),yield i.http.post(g+"/patients/save_discharge_plan",a,e).pipe((0,d.x)(()=>i.spinner.hide())).toPromise().then(o=>{i.dischargePlan=o,i.id=o.id,i.history=o.history,i.investigation=o.investigation,i.management=o.management,i.operationNote=o.operationNote,i.icuAdmissionNote=o.icuAdmissionNote,i.generalRecommendation=o.generalRecommendation,i.msgBox.showSuccessMessage("Saved successifully")}).catch(o=>{i.msgBox.showErrorMessage(o,"Could not save"),console.log(o)})}else i.msgBox.showErrorMessage3("The fields marked with * are required fields")})()}}return(l=u).\u0275fac=function(i){return new(i||l)(n.Y36(A.e),n.Y36(m.eN),n.Y36(Z.t2),n.Y36(M.l))},l.\u0275cmp=n.Xpm({type:l,selectors:[["app-discharge-plan"]],standalone:!0,features:[n.jDz],decls:59,vars:19,consts:[[1,"content-header"],[1,"header-title"],[1,"content"],[1,"row"],[1,"col-sm-12"],[1,"panel","panel-bd","lobidrag"],[1,"panel-heading"],[1,"btn-group"],[1,"panel-body"],["role","alert",1,"col-sm-12","alert","alert-primary"],[1,"text-primary"],[1,"form-control",3,"ngModel","ngModelChange"],[1,"btn","btn-primary","pull-right",3,"click"]],template:function(i,e){1&i&&(n.TgZ(0,"section",0)(1,"div",1)(2,"h1"),n._uU(3,"Discharge Plan"),n.qZA()()(),n.TgZ(4,"section",2)(5,"div",3)(6,"div",4)(7,"div",5)(8,"div",6),n._UZ(9,"div",7),n.qZA(),n.TgZ(10,"div",8)(11,"div",3)(12,"div",9)(13,"h3",10),n._uU(14,"Name: "),n.TgZ(15,"b"),n._uU(16),n.qZA(),n._uU(17,", File No: "),n.TgZ(18,"b"),n._uU(19),n.qZA(),n._uU(20,", "),n.TgZ(21,"b"),n._uU(22),n.ALo(23,"date"),n.ALo(24,"age"),n.qZA(),n._uU(25),n.qZA()(),n.TgZ(26,"div",4)(27,"div")(28,"h4"),n._uU(29,"Brief History and Patient's Examination*"),n.qZA()(),n.TgZ(30,"textarea",11),n.NdJ("ngModelChange",function(o){return e.history=o}),n.qZA(),n._UZ(31,"br"),n.TgZ(32,"div")(33,"h4"),n._uU(34,"Investigation Done*"),n.qZA()(),n.TgZ(35,"textarea",11),n.NdJ("ngModelChange",function(o){return e.investigation=o}),n.qZA(),n._UZ(36,"br"),n.TgZ(37,"div")(38,"h4"),n._uU(39,"Inpatient Management*"),n.qZA()(),n.TgZ(40,"textarea",11),n.NdJ("ngModelChange",function(o){return e.management=o}),n.qZA(),n._UZ(41,"br"),n.TgZ(42,"div")(43,"h4"),n._uU(44,"Operation Done Note(If not, leave it empty)"),n.qZA()(),n.TgZ(45,"textarea",11),n.NdJ("ngModelChange",function(o){return e.operationNote=o}),n.qZA(),n._UZ(46,"br"),n.TgZ(47,"div")(48,"h4"),n._uU(49,"ICU Admission Note(If not, leave it empty)"),n.qZA()(),n.TgZ(50,"textarea",11),n.NdJ("ngModelChange",function(o){return e.icuAdmissionNote=o}),n.qZA(),n._UZ(51,"br"),n.TgZ(52,"div")(53,"h4"),n._uU(54,"General Recommendation and condition at discharge"),n.qZA()(),n.TgZ(55,"textarea",11),n.NdJ("ngModelChange",function(o){return e.generalRecommendation=o}),n.qZA(),n._UZ(56,"br"),n.TgZ(57,"button",12),n.NdJ("click",function(){return e.saveDischargePlan()}),n._uU(58,"Save"),n.qZA()()()()()()()()),2&i&&(n.xp6(16),n.lnq("",null==e.admission||null==e.admission.patient?null:e.admission.patient.firstName," ",null==e.admission||null==e.admission.patient?null:e.admission.patient.middleName," ",null==e.admission||null==e.admission.patient?null:e.admission.patient.lastName,""),n.xp6(3),n.Oqu(null==e.admission||null==e.admission.patient?null:e.admission.patient.no),n.xp6(3),n.AsE("Date of Birth: ",n.lcZ(23,15,e.admission.patient.dateOfBirth)," Age: ",n.lcZ(24,17,e.admission.patient.dateOfBirth),""),n.xp6(3),n.lnq(", ",null==e.admission||null==e.admission.patient?null:e.admission.patient.gender,", ",e.admission.paymentType," ",null==e.admission||null==e.admission.insurancePlan?null:e.admission.insurancePlan.name,""),n.xp6(5),n.Q6J("ngModel",e.history),n.xp6(5),n.Q6J("ngModel",e.investigation),n.xp6(5),n.Q6J("ngModel",e.management),n.xp6(5),n.Q6J("ngModel",e.operationNote),n.xp6(5),n.Q6J("ngModel",e.icuAdmissionNote),n.xp6(5),n.Q6J("ngModel",e.generalRecommendation))},dependencies:[h.ez,h.uU,s.u5,s.Fj,s.JJ,s.On,s.UX,c.C]}),u})()}}]);