"use strict";(self.webpackChunkzana_hmis=self.webpackChunkzana_hmis||[]).push([[6350],{6350:(x,_,o)=>{o.r(_),o.d(_,{ConsultationPlanComponent:()=>f});var c=o(5861),p=o(6814),i=o(9862),m=o(95),P=o(8237),r=o(4716),g=o(553),a=o(6689),C=o(6466),v=o(585),E=o(379);function M(u,d){if(1&u){const h=a.EpF();a.TgZ(0,"div",9)(1,"button",10),a.NdJ("click",function(){const t=a.CHM(h).$implicit,s=a.oxw();return a.KtG(s.setInsurancePlanId(t.id,t.name))}),a._uU(2),a.qZA()()}if(2&u){const h=d.$implicit;a.xp6(2),a.Oqu(h.name)}}const l=g.N.apiUrl;let f=(()=>{var u;class d{constructor(n,e,t,s){this.auth=n,this.http=e,this.spinner=t,this.msgBox=s,this.id=null,this.consultationFee=0,this.insuranceProviderName="",this.insurancePlanName="",this.insuranceProviderNames=[],this.insurancePlanNames=[],this.clinicName="",this.clinicNames=[],this.consultationPlans=[],this.insurancePlans=[],this.filterRecords=""}ngOnInit(){this.loadInsurancePlans()}loadInsuranceProviderNames(){var n=this;return(0,c.Z)(function*(){n.insuranceProviderNames=[];let e={headers:(new i.WM).set("Authorization","Bearer "+n.auth.user.access_token)};n.spinner.show(),yield n.http.get(l+"/insurance_providers/get_names",e).pipe((0,r.x)(()=>n.spinner.hide())).toPromise().then(t=>{t?.forEach(s=>{n.insuranceProviderNames.push(s)})}).catch(t=>{n.msgBox.showErrorMessage(t,"Could not load Insurance Providers")})})()}loadInsurancePlans(){var n=this;return(0,c.Z)(function*(){n.insurancePlans=[];let e={headers:(new i.WM).set("Authorization","Bearer "+n.auth.user.access_token)};n.spinner.show(),yield n.http.get(l+"/insurance_plans",e).pipe((0,r.x)(()=>n.spinner.hide())).toPromise().then(t=>{n.insurancePlans=t}).catch(t=>{n.msgBox.showErrorMessage(t,"Could not load plans")})})()}loadInsurancePlanNamesByProviders(n){var e=this;return(0,c.Z)(function*(){e.insurancePlanNames=[];let t={headers:(new i.WM).set("Authorization","Bearer "+e.auth.user.access_token)};e.spinner.show(),yield e.http.get(l+"/insurance_plans/get_names_by_insurance_provider?provider_name="+n,t).pipe((0,r.x)(()=>e.spinner.hide())).toPromise().then(s=>{s?.forEach(B=>{e.insurancePlanNames.push(B)})}).catch(s=>{e.msgBox.showErrorMessage(s,"Could not load Insurance Plans")})})()}loadConsultationPlans(){var n=this;return(0,c.Z)(function*(){n.consultationPlans=[];let e={headers:(new i.WM).set("Authorization","Bearer "+n.auth.user.access_token)};n.spinner.show(),yield n.http.get(l+"/consultation_insurance_plans",e).pipe((0,r.x)(()=>n.spinner.hide())).toPromise().then(t=>{t?.forEach(s=>{n.consultationPlans.push(s)})}).catch(t=>{n.msgBox.showErrorMessage(t,"Could not load Consultation Plans")})})()}saveConsultationPlan(){var n=this;return(0,c.Z)(function*(){let e={headers:(new i.WM).set("Authorization","Bearer "+n.auth.user.access_token)};var t={id:n.id,clinic:{name:n.clinicName},insurancePlan:{name:n.insurancePlanName},consultationFee:n.consultationFee};null==n.id||""==n.id?(n.spinner.show(),yield n.http.post(l+"/consultation_insurance_plans/save",t,e).pipe((0,r.x)(()=>n.spinner.hide())).toPromise().then(s=>{n.id=s?.id,n.msgBox.showSuccessMessage("Consultation plan created successifully"),n.loadConsultationPlans()}).catch(s=>{n.msgBox.showErrorMessage(s,"Could not create Consultation Plan")})):(n.spinner.show(),yield n.http.post(l+"/consultation_insurance_plans/save",t,e).pipe((0,r.x)(()=>n.spinner.hide())).toPromise().then(s=>{n.id=s?.id,n.msgBox.showSuccessMessage("Consultation Plan updated successifully"),n.loadConsultationPlans()}).catch(s=>{n.msgBox.showErrorMessage(s,"Could not update Consultation Plan")})),n.clear()})()}clear(){this.id=null,this.clinicName="",this.insuranceProviderName="",this.insurancePlanName="",this.consultationFee=0}getConsultationPlan(n){var e=this;return(0,c.Z)(function*(){if(""==n)return;let t={headers:(new i.WM).set("Authorization","Bearer "+e.auth.user.access_token)};e.spinner.show(),yield e.http.get(l+"/consultation_insurance_plans/get?id="+n,t).pipe((0,r.x)(()=>e.spinner.hide())).toPromise().then(s=>{console.log(s),e.id=s?.id,e.clinicName=s.clinic.name,e.insuranceProviderName=s.insurancePlan.insuranceProvider.name,e.insurancePlanName=s.insurancePlan.name,e.consultationFee=s.consultationFee}).catch(s=>{console.log(s),e.msgBox.showErrorMessage(s,"Could not find Consultation Plan")})})()}deleteConsultationPlan(n){var e=this;return(0,c.Z)(function*(){if(""==n||!window.confirm("Delete this plan? Plan ID: "+n))return;let t={headers:(new i.WM).set("Authorization","Bearer "+e.auth.user.access_token)};e.spinner.show(),yield e.http.post(l+"/consultation_insurance_plans/delete?id="+n,t).pipe((0,r.x)(()=>e.spinner.hide())).toPromise().then(s=>{console.log(s),e.loadConsultationPlans()}).catch(s=>{console.log(s),e.msgBox.showErrorMessage(s,"Could not delete Consultation Plan")})})()}loadClinicNames(){var n=this;return(0,c.Z)(function*(){n.clinicNames=[];let e={headers:(new i.WM).set("Authorization","Bearer "+n.auth.user.access_token)};n.spinner.show(),yield n.http.get(l+"/clinics/get_names",e).pipe((0,r.x)(()=>n.spinner.hide())).toPromise().then(t=>{t?.forEach(s=>{n.clinicNames.push(s)})}).catch(t=>{n.msgBox.showErrorMessage(t,"Could not load clinics")})})()}grant(n){var e=!1;return n.forEach(t=>{this.auth.checkPrivilege(t)&&(e=!0)}),e}setInsurancePlanId(n,e){localStorage.setItem("insurance_plan_id",n),localStorage.setItem("insurance_plan_name",e)}}return(u=d).\u0275fac=function(n){return new(n||u)(a.Y36(C.e),a.Y36(i.eN),a.Y36(v.t2),a.Y36(E.l))},u.\u0275cmp=a.Xpm({type:u,selectors:[["app-consultation-plan"]],standalone:!0,features:[a.jDz],decls:18,vars:1,consts:[[1,"content-header"],[1,"header-title"],[1,"content"],[1,"row"],[1,"col-sm-12"],[1,"panel","panel-bd","lobidrag"],[1,"panel-heading"],[1,"text-primary"],[1,"panel-body"],[1,"col-sm-2"],["routerLink","/consultation-price",1,"btn","btn-transparent","btn-primary","btn-outline","form-control",2,"border-radius","0px",3,"click"],["class","col-sm-2",4,"ngFor","ngForOf"]],template:function(n,e){1&n&&(a.TgZ(0,"section",0)(1,"div",1)(2,"h1"),a._uU(3,"Consultation Plan"),a.qZA()()(),a.TgZ(4,"section",2)(5,"div",3)(6,"div",4)(7,"div",5)(8,"div",6)(9,"h4",7),a._uU(10,"Select Package"),a.qZA()(),a.TgZ(11,"div",8)(12,"div",4)(13,"div",3)(14,"div",9)(15,"button",10),a.NdJ("click",function(){return e.setInsurancePlanId(0,"CASH")}),a._uU(16,"CASH"),a.qZA()(),a.YNc(17,M,3,1,"div",11),a.qZA()()()()()()()),2&n&&(a.xp6(17),a.Q6J("ngForOf",e.insurancePlans))},dependencies:[p.ez,p.sg,m.u5,m.UX,P.rH]}),d})()}}]);