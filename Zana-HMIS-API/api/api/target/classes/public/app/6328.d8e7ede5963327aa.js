"use strict";(self.webpackChunkzana_hmis=self.webpackChunkzana_hmis||[]).push([[6328],{7852:(f,u,r)=>{r.r(u),r.d(u,{PrescriptionHistoryComponent:()=>I});var _=r(5861),l=r(6814),c=r(9862),p=r(95),d=r(8237),g=r(4716),m=r(4185),Z=r(553),t=r(6689),h=r(6466),y=r(585),T=r(379);function A(o,a){1&o&&(t.TgZ(0,"a",20),t._UZ(1,"i",21),t._uU(2," Back"),t.qZA())}function E(o,a){1&o&&(t.TgZ(0,"a",22),t._UZ(1,"i",21),t._uU(2," Back"),t.qZA())}function b(o,a){if(1&o&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.qZA()()),2&o){const n=t.oxw().$implicit;t.xp6(2),t.Oqu(null==n?null:n.created),t.xp6(2),t.Oqu(null==n||null==n.medicine?null:n.medicine.name),t.xp6(2),t.Oqu(null==n?null:n.dosage),t.xp6(2),t.Oqu(null==n?null:n.frequency),t.xp6(2),t.Oqu(null==n?null:n.route),t.xp6(2),t.Oqu(null==n?null:n.days),t.xp6(2),t.Oqu(null==n?null:n.status)}}function P(o,a){if(1&o&&(t.TgZ(0,"tbody"),t.YNc(1,b,15,7,"tr",23),t.qZA()),2&o){const n=a.$implicit;t.xp6(1),t.Q6J("ngIf","NOT-GIVEN"===(null==n?null:n.status)||"VERIFIED"===(null==n?null:n.status)||"APPROVED"===(null==n?null:n.status)||"GIVEN"===(null==n?null:n.status))}}const U=Z.N.apiUrl;let I=(()=>{var o;class a{constructor(i,e,s,O){this.auth=i,this.http=e,this.spinner=s,this.msgBox=O,this.patientId=null,this.prescriptions=[],this.filterRecords="",this.consultationId=null,this.admissionId=null}ngOnInit(){var i=this;return(0,_.Z)(function*(){i.patientId=localStorage.getItem("patient-id"),i.getPrescriptionHistory(),i.consultationId=localStorage.getItem("consultation-id"),i.admissionId=localStorage.getItem("admission-id")})()}getPrescriptionHistory(){var i=this;return(0,_.Z)(function*(){let e={headers:(new c.WM).set("Authorization","Bearer "+i.auth.user.access_token)};i.spinner.show(),yield i.http.get(U+"/patients/get_all_prescriptions_by_patient_id?patient_id="+i.patientId,e).pipe((0,g.x)(()=>i.spinner.hide())).toPromise().then(s=>{i.prescriptions=s,console.log(s)}).catch(s=>{i.msgBox.showErrorMessage(s,"Could not load prescriptions"),console.log(s)})})()}grant(i){var e=!1;return i.forEach(s=>{this.auth.checkPrivilege(s)&&(e=!0)}),e}}return(o=a).\u0275fac=function(i){return new(i||o)(t.Y36(h.e),t.Y36(c.eN),t.Y36(y.t2),t.Y36(T.l))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-prescription-history"]],standalone:!0,features:[t.jDz],decls:47,vars:6,consts:[[1,"content-header"],[1,"header-title"],[1,"content"],[1,"row"],[1,"col-sm-12"],[1,"panel","panel-bd","lobidrag"],[1,"panel-heading"],["class","btn btn-primary btn-outline","routerLink","/doctor-cracking",4,"ngIf"],["class","btn btn-primary btn-outline","routerLink","/doctor-inpatient",4,"ngIf"],["routerLink","/clinical-note-history",1,"btn","btn-primary","btn-outline"],["routerLink","/general-examination-history",1,"btn","btn-primary","btn-outline"],["routerLink","/final-diagnosis-history",1,"btn","btn-primary","btn-outline"],["routerLink","/lab-test-history",1,"btn","btn-primary","btn-outline"],["routerLink","/radiology-history",1,"btn","btn-primary","btn-outline"],["routerLink","/procedure-history",1,"btn","btn-primary","btn-outline"],["routerLink","/prescription-history",1,"btn","btn-primary"],[1,"panel-body"],[1,"table","table-responsive","table-striped","table-small","table-bordered"],[2,"font-weight","bold"],[4,"ngFor","ngForOf"],["routerLink","/doctor-cracking",1,"btn","btn-primary","btn-outline"],[1,"glyphicon","glyphicon-triangle-left"],["routerLink","/doctor-inpatient",1,"btn","btn-primary","btn-outline"],[4,"ngIf"]],template:function(i,e){1&i&&(t.TgZ(0,"section",0)(1,"div",1)(2,"h1"),t._uU(3,"Patient History - Medication"),t.qZA()()(),t.TgZ(4,"section",2)(5,"div",3)(6,"div",4)(7,"div",5)(8,"div",6),t.YNc(9,A,3,0,"a",7),t.YNc(10,E,3,0,"a",8),t.TgZ(11,"a",9),t._uU(12,"Clinical Notes"),t.qZA(),t.TgZ(13,"a",10),t._uU(14,"General Examination"),t.qZA(),t.TgZ(15,"a",11),t._uU(16,"Final Diagnosis"),t.qZA(),t.TgZ(17,"a",12),t._uU(18,"Lab Tests"),t.qZA(),t.TgZ(19,"a",13),t._uU(20,"Radiology Tests"),t.qZA(),t.TgZ(21,"a",14),t._uU(22,"Procedures"),t.qZA(),t.TgZ(23,"a",15),t._uU(24,"Medications"),t.qZA()(),t.TgZ(25,"div",16)(26,"div",3)(27,"div",4)(28,"table",17)(29,"thead")(30,"tr",18)(31,"td"),t._uU(32,"Prescribed At/By"),t.qZA(),t.TgZ(33,"td"),t._uU(34,"Drug"),t.qZA(),t.TgZ(35,"td"),t._uU(36,"Dosage"),t.qZA(),t.TgZ(37,"td"),t._uU(38,"Frequency"),t.qZA(),t.TgZ(39,"td"),t._uU(40,"Route"),t.qZA(),t.TgZ(41,"td"),t._uU(42,"Days"),t.qZA(),t.TgZ(43,"td"),t._uU(44,"Status"),t.qZA()()(),t.YNc(45,P,2,1,"tbody",19),t.ALo(46,"searchFilter"),t.qZA()()()()()()()()),2&i&&(t.xp6(9),t.Q6J("ngIf",null!=e.consultationId),t.xp6(1),t.Q6J("ngIf",null!=e.admissionId),t.xp6(35),t.Q6J("ngForOf",t.xi3(46,3,e.prescriptions,e.filterRecords)))},dependencies:[l.ez,l.sg,l.O5,p.u5,p.UX,m.G,d.rH]}),a})()}}]);