"use strict";(self.webpackChunkzana_hmis=self.webpackChunkzana_hmis||[]).push([[4626],{4626:(O,m,s)=>{s.r(m),s.d(m,{MedicineComponent:()=>b});var u=s(5861),r=s(6814),p=s(9862),a=s(95),_=s(4716),h=s(4185),M=s(553),e=s(6689),Z=s(6466),T=s(585),v=s(379);function A(l,c){1&l&&(e.TgZ(0,"span",38),e._uU(1,"Active"),e.qZA())}function C(l,c){1&l&&(e.TgZ(0,"span",39),e._uU(1,"Inactive"),e.qZA())}function f(l,c){if(1&l){const d=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.TgZ(13,"td",33),e._uU(14),e.ALo(15,"currency"),e.qZA(),e.TgZ(16,"td"),e.YNc(17,A,2,0,"span",34),e.YNc(18,C,2,0,"span",35),e.qZA(),e.TgZ(19,"td")(20,"a",36),e.NdJ("click",function(){const o=e.CHM(d).$implicit,i=e.oxw();return e.KtG(i.getMedicine(o.id))}),e._UZ(21,"i",37),e._uU(22,"Edit"),e.qZA()()()}if(2&l){const d=c.$implicit;e.xp6(2),e.Oqu(null==d?null:d.code),e.xp6(2),e.Oqu(null==d?null:d.name),e.xp6(2),e.Oqu(null==d?null:d.description),e.xp6(2),e.Oqu(null==d?null:d.uom),e.xp6(2),e.Oqu(null==d?null:d.type),e.xp6(2),e.Oqu(null==d?null:d.category),e.xp6(2),e.Oqu(e.Dn7(15,9,null==d?null:d.price,"","")),e.xp6(3),e.Q6J("ngIf",!0===d.active),e.xp6(1),e.Q6J("ngIf",!1===d.active)}}function U(l,c){1&l&&(e.TgZ(0,"h1",40),e._uU(1,"Add Medicine"),e.qZA())}function y(l,c){1&l&&(e.TgZ(0,"h1",40),e._uU(1,"Edit Medicine"),e.qZA())}function q(l,c){1&l&&(e.TgZ(0,"span"),e._uU(1,"Update"),e.qZA())}function E(l,c){1&l&&(e.TgZ(0,"span"),e._uU(1,"Add"),e.qZA())}const g=M.N.apiUrl;let b=(()=>{var l;class c{constructor(n,t,o,i){this.auth=n,this.http=t,this.spinner=o,this.msgBox=i,this.id=null,this.code="",this.name="",this.description="",this.uom="",this.category="",this.type="",this.price=0,this.active=!0,this.medicines=[],this.filterRecords=""}ngOnInit(){this.loadMedicines()}saveMedicine(){var n=this;return(0,u.Z)(function*(){let t={headers:(new p.WM).set("Authorization","Bearer "+n.auth.user.access_token)};var o={id:n.id,code:n.code,name:n.name,description:n.description,uom:n.uom,type:n.type,category:n.category,price:n.price,active:!0};null==n.id||""==n.id?(n.spinner.show(),yield n.http.post(g+"/medicines/save",o,t).pipe((0,_.x)(()=>n.spinner.hide())).toPromise().then(i=>{n.id=i?.id,n.code=i.code,n.name=i.name,n.description=i.description,n.price=i.price,n.uom=i.uom,n.type=i.type,n.category=i.category,n.active=i.active,n.msgBox.showSuccessMessage("Medicine created successifully"),n.loadMedicines()}).catch(i=>{n.msgBox.showErrorMessage(i,"Could not create Medicine")})):(n.spinner.show(),yield n.http.post(g+"/medicines/save",o,t).pipe((0,_.x)(()=>n.spinner.hide())).toPromise().then(i=>{n.id=i?.id,n.code=i.code,n.name=i.name,n.description=i.description,n.price=i.price,n.uom=i.uom,n.type=i.type,n.category=i.category,n.active=i.active,n.msgBox.showSuccessMessage("Medicine updated successifully"),n.loadMedicines()}).catch(i=>{n.msgBox.showErrorMessage(i,"Could not update Medicine")})),n.clear()})()}loadMedicines(){var n=this;return(0,u.Z)(function*(){n.medicines=[];let t={headers:(new p.WM).set("Authorization","Bearer "+n.auth.user.access_token)};n.spinner.show(),yield n.http.get(g+"/medicines",t).pipe((0,_.x)(()=>n.spinner.hide())).toPromise().then(o=>{o?.forEach(i=>{n.medicines.push(i)})}).catch(o=>{n.msgBox.showErrorMessage(o,"Could not load Medicines")})})()}clear(){this.id=null,this.code="",this.name="",this.description="",this.uom="",this.type="",this.category="",this.price=0,this.active=!1}getMedicine(n){var t=this;return(0,u.Z)(function*(){if(""==n)return;let o={headers:(new p.WM).set("Authorization","Bearer "+t.auth.user.access_token)};t.spinner.show(),yield t.http.get(g+"/medicines/get?id="+n,o).pipe((0,_.x)(()=>t.spinner.hide())).toPromise().then(i=>{t.id=i?.id,t.code=i.code,t.name=i.name,t.description=i.description,t.price=i.price,t.uom=i.uom,t.type=i.type,t.category=i.category,t.active=i.active}).catch(i=>{console.log(i),t.msgBox.showErrorMessage(i,"Could not find Medicine")})})()}grant(n){var t=!1;return n.forEach(o=>{this.auth.checkPrivilege(o)&&(t=!0)}),t}}return(l=c).\u0275fac=function(n){return new(n||l)(e.Y36(Z.e),e.Y36(p.eN),e.Y36(T.t2),e.Y36(v.l))},l.\u0275cmp=e.Xpm({type:l,selectors:[["app-medicine"]],standalone:!0,features:[e.jDz],decls:113,vars:18,consts:[[1,"content-header"],[1,"header-title"],[1,"content"],[1,"row"],[1,"col-sm-12"],[1,"panel","panel-bd","lobidrag"],[1,"panel-heading"],[1,"btn"],["type","button","data-toggle","modal","data-target","#add-edit-modal",1,"btn","btn-success","m-r-2","m-b-5",3,"click"],[1,"panel-body"],[1,"col-sm-12",2,"height","100%","overflow","scroll"],[1,"col-sm-4"],["type","text","placeholder","Search...",1,"form-control","pull-right",2,"max-width","8cm",3,"ngModel","ngModelChange"],[1,"table","table-bordered","table-small"],[4,"ngFor","ngForOf"],["id","add-edit-modal","tabindex","-1","role","dialog",1,"modal","fade","modal-success"],["role","document",1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],["class","modal-title",4,"ngIf"],[1,"modal-body"],["type","hidden",3,"ngModel","ngModelChange"],[1,"col-xs-12"],["type","text",1,"form-control",3,"ngModel","ngModelChange"],[1,"form-control",3,"ngModel","ngModelChange"],["type","text",1,"form-control",2,"text-align","center",3,"ngModel","ngModelChange"],["type","checkbox",2,"text-align","right",3,"ngModel","ngModelChange"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-danger"],["type","button","data-dismiss","modal",1,"btn","btn-success",3,"click"],[4,"ngIf"],[2,"text-align","right"],["class","label label-info",4,"ngIf"],["class","label label-danger",4,"ngIf"],["data-toggle","modal","data-target","#add-edit-modal",1,"",3,"click"],[1,"glyphicon","glyphicon-pencil"],[1,"label","label-info"],[1,"label","label-danger"],[1,"modal-title"]],template:function(n,t){1&n&&(e.TgZ(0,"section",0)(1,"div",1)(2,"h1"),e._uU(3,"Medicine"),e.qZA()()(),e.TgZ(4,"section",2)(5,"div",3)(6,"div",4)(7,"div",5)(8,"div",6)(9,"div",7)(10,"button",8),e.NdJ("click",function(){return t.clear()}),e._uU(11,"New"),e.qZA()()(),e.TgZ(12,"div",9)(13,"div",10)(14,"div",3),e._UZ(15,"div",11)(16,"div",11),e.TgZ(17,"div",11)(18,"input",12),e.NdJ("ngModelChange",function(i){return t.filterRecords=i}),e.qZA()()(),e._UZ(19,"br"),e.TgZ(20,"table",13)(21,"thead")(22,"tr")(23,"td"),e._uU(24,"Code"),e.qZA(),e.TgZ(25,"td"),e._uU(26,"Name"),e.qZA(),e.TgZ(27,"td"),e._uU(28,"Description"),e.qZA(),e.TgZ(29,"td"),e._uU(30,"Uom"),e.qZA(),e.TgZ(31,"td"),e._uU(32,"Type"),e.qZA(),e.TgZ(33,"td"),e._uU(34,"Category"),e.qZA(),e.TgZ(35,"td"),e._uU(36,"Price"),e.qZA(),e.TgZ(37,"td"),e._uU(38,"Active"),e.qZA(),e.TgZ(39,"td"),e._uU(40,"Action"),e.qZA()()(),e.TgZ(41,"tbody"),e.YNc(42,f,23,13,"tr",14),e.ALo(43,"searchFilter"),e.qZA()()()()()()()(),e.TgZ(44,"div",15)(45,"div",16)(46,"div",17)(47,"div",18)(48,"button",19)(49,"span",20),e._uU(50,"\xd7"),e.qZA()(),e.YNc(51,U,2,0,"h1",21),e.YNc(52,y,2,0,"h1",21),e.qZA(),e.TgZ(53,"div",22)(54,"div",3)(55,"input",23),e.NdJ("ngModelChange",function(i){return t.id=i}),e.qZA(),e.TgZ(56,"div",24)(57,"label"),e._uU(58,"Code*"),e.qZA(),e.TgZ(59,"input",25),e.NdJ("ngModelChange",function(i){return t.code=i}),e.qZA()()(),e.TgZ(60,"div",3)(61,"div",24)(62,"label"),e._uU(63,"Medicine Name*"),e.qZA(),e.TgZ(64,"input",25),e.NdJ("ngModelChange",function(i){return t.name=i}),e.qZA()()(),e.TgZ(65,"div",3)(66,"div",24)(67,"label"),e._uU(68,"Description"),e.qZA(),e.TgZ(69,"input",25),e.NdJ("ngModelChange",function(i){return t.description=i}),e.qZA()()(),e.TgZ(70,"div",3)(71,"div",24)(72,"label"),e._uU(73,"UOM"),e.qZA(),e.TgZ(74,"input",25),e.NdJ("ngModelChange",function(i){return t.uom=i}),e.qZA()()(),e.TgZ(75,"div",3)(76,"div",24)(77,"label"),e._uU(78,"Type"),e.qZA(),e.TgZ(79,"select",26),e.NdJ("ngModelChange",function(i){return t.type=i}),e.TgZ(80,"option"),e._uU(81,"ORAL"),e.qZA(),e.TgZ(82,"option"),e._uU(83,"PILL"),e.qZA(),e.TgZ(84,"option"),e._uU(85,"OTHER"),e.qZA()()()(),e.TgZ(86,"div",3)(87,"div",24)(88,"label"),e._uU(89,"Category"),e.qZA(),e.TgZ(90,"select",26),e.NdJ("ngModelChange",function(i){return t.category=i}),e.TgZ(91,"option"),e._uU(92,"MEDICINE"),e.qZA(),e.TgZ(93,"option"),e._uU(94,"PRODUCT"),e.qZA(),e.TgZ(95,"option"),e._uU(96,"EQUIPMENT"),e.qZA()()()(),e.TgZ(97,"div",3)(98,"div",24)(99,"label"),e._uU(100,"Price"),e.qZA(),e.TgZ(101,"input",27),e.NdJ("ngModelChange",function(i){return t.price=i}),e.qZA()()(),e.TgZ(102,"div",3)(103,"div",24)(104,"label"),e._uU(105,"Active"),e.qZA(),e.TgZ(106,"input",28),e.NdJ("ngModelChange",function(i){return t.active=i}),e.qZA()()()(),e.TgZ(107,"div",29)(108,"button",30),e._uU(109,"Close"),e.qZA(),e.TgZ(110,"button",31),e.NdJ("click",function(){return t.saveMedicine()}),e.YNc(111,q,2,0,"span",32),e.YNc(112,E,2,0,"span",32),e.qZA()()()()()),2&n&&(e.xp6(18),e.Q6J("ngModel",t.filterRecords),e.xp6(24),e.Q6J("ngForOf",e.xi3(43,15,t.medicines,t.filterRecords)),e.xp6(9),e.Q6J("ngIf",null===t.id),e.xp6(1),e.Q6J("ngIf",null!=t.id),e.xp6(3),e.Q6J("ngModel",t.id),e.xp6(4),e.Q6J("ngModel",t.code),e.xp6(5),e.Q6J("ngModel",t.name),e.xp6(5),e.Q6J("ngModel",t.description),e.xp6(5),e.Q6J("ngModel",t.uom),e.xp6(5),e.Q6J("ngModel",t.type),e.xp6(11),e.Q6J("ngModel",t.category),e.xp6(11),e.Q6J("ngModel",t.price),e.xp6(5),e.Q6J("ngModel",t.active),e.xp6(5),e.Q6J("ngIf",null!=t.id),e.xp6(1),e.Q6J("ngIf",null===t.id))},dependencies:[r.ez,r.sg,r.O5,r.H9,a.u5,a.YN,a.Kr,a.Fj,a.Wl,a.EJ,a.JJ,a.On,a.UX,h.G]}),c})()}}]);