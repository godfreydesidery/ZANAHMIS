"use strict";(self.webpackChunkzana_hmis=self.webpackChunkzana_hmis||[]).push([[8571],{8571:(Z,h,d)=>{d.r(h),d.d(h,{DressingComponent:()=>E});var a=d(5861),u=d(6814),l=d(9862),p=d(95),g=d(4716),m=d(4185),T=d(553),e=d(6689),D=d(6466),M=d(585),f=d(379);function y(o,c){if(1&o){const i=e.EpF();e.TgZ(0,"option",21),e.NdJ("click",function(){const t=e.CHM(i).$implicit,r=e.oxw(2);return e.KtG(r.getProcedureType(t.id))}),e._uU(1),e.qZA()}if(2&o){const i=c.$implicit;e.xp6(1),e.Oqu(i.name)}}function v(o,c){if(1&o&&(e.TgZ(0,"div",3)(1,"div",4)(2,"select",19),e.YNc(3,y,2,1,"option",20),e.qZA()()()),2&o){const i=e.oxw();e.xp6(3),e.Q6J("ngForOf",i.procedureTypes)}}function C(o,c){if(1&o){const i=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td")(4,"a",13),e.NdJ("click",function(){const t=e.CHM(i).$implicit,r=e.oxw();return e.KtG(r.deleteDressing(t.id))}),e._UZ(5,"i",22),e._uU(6,"Delete"),e.qZA()()()}if(2&o){const i=c.$implicit;e.xp6(2),e.Oqu(null==i||null==i.procedureType?null:i.procedureType.name)}}const _=T.N.apiUrl;let E=(()=>{var o;class c{constructor(n,s,t,r){this.auth=n,this.http=s,this.spinner=t,this.msgBox=r,this.id=null,this.filterRecords="",this.dressings=[],this.procedureTypeId=null,this.procedureTypeCode="",this.procedureTypeName="",this.procedureTypes=[]}ngOnInit(){this.loadDressings()}addDressing(){var n=this;return(0,a.Z)(function*(){let s={headers:(new l.WM).set("Authorization","Bearer "+n.auth.user.access_token)};var t={procedureType:{id:n.procedureTypeId}};n.spinner.show(),yield n.http.post(_+"/dressings/add",t,s).pipe((0,g.x)(()=>n.spinner.hide())).toPromise().then(r=>{n.id=r?.id,n.procedureTypeId=r?.procedureType?.id,n.msgBox.showSuccessMessage("Dressing created successifully"),n.loadDressings()}).catch(r=>{n.msgBox.showErrorMessage(r,"")}),n.clear()})()}loadDressings(){var n=this;return(0,a.Z)(function*(){n.dressings=[];let s={headers:(new l.WM).set("Authorization","Bearer "+n.auth.user.access_token)};n.spinner.show(),yield n.http.get(_+"/dressings",s).pipe((0,g.x)(()=>n.spinner.hide())).toPromise().then(t=>{t?.forEach(r=>{n.dressings.push(r)})}).catch(t=>{n.msgBox.showErrorMessage(t,"")})})()}clear(){this.id=null,this.procedureTypeId=null,this.procedureTypeName="",this.procedureTypeCode=""}deleteDressing(n){var s=this;return(0,a.Z)(function*(){let t={headers:(new l.WM).set("Authorization","Bearer "+s.auth.user.access_token)};s.spinner.show(),yield s.http.post(_+"/dressings/delete?id="+n,null,t).pipe((0,g.x)(()=>s.spinner.hide())).toPromise().then(r=>{s.msgBox.showSuccessMessage("Deleted"),s.loadDressings()}).catch(r=>{s.msgBox.showErrorMessage(r,"")})})()}grant(n){var s=!1;return n.forEach(t=>{this.auth.checkPrivilege(t)&&(s=!0)}),s}loadProcedureTypesLike(n){var s=this;return(0,a.Z)(function*(){if(s.procedureTypes=[],n.length<2)return;let t={headers:(new l.WM).set("Authorization","Bearer "+s.auth.user.access_token)};yield s.http.get(_+"/procedure_types/load_procedure_types_like?name_like="+n,t).toPromise().then(r=>{console.log(r),s.procedureTypes=r}).catch(r=>{s.msgBox.showErrorMessage(r,"")})})()}getProcedureType(n){var s=this;return(0,a.Z)(function*(){let t={headers:(new l.WM).set("Authorization","Bearer "+s.auth.user.access_token)};s.procedureTypes=[],s.spinner.show(),yield s.http.get(_+"/procedure_types/get?id="+n,t).pipe((0,g.x)(()=>s.spinner.hide())).toPromise().then(r=>{s.procedureTypeId=r?.id,s.procedureTypeCode=r.code,s.procedureTypeName=r.name}).catch(r=>{s.msgBox.showErrorMessage(r,""),console.log(r)})})()}}return(o=c).\u0275fac=function(n){return new(n||o)(e.Y36(D.e),e.Y36(l.eN),e.Y36(M.t2),e.Y36(f.l))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-dressing"]],standalone:!0,features:[e.jDz],decls:32,vars:7,consts:[[1,"content-header"],[1,"header-title"],[1,"content"],[1,"row"],[1,"col-sm-12"],[1,"panel","panel-bd","lobidrag"],[1,"panel-heading"],[1,"panel-body"],[1,"col-sm-12",2,"height","100%","overflow","scroll"],[1,"col-sm-3"],["type","text",1,"form-control",3,"ngModel","ngModelChange"],["class","row",4,"ngIf"],[1,"col-sm-1"],[3,"click"],[1,"col-sm-4"],["type","text","placeholder","Search...",1,"form-control","pull-right",2,"max-width","8cm",3,"ngModel","ngModelChange"],[1,"table","table-bordered","table-small"],[2,"font-weight","bold"],[4,"ngFor","ngForOf"],["multiple","multiple",1,"form-control"],["style","height: 1cm; cursor: pointer; font-size: large;",3,"click",4,"ngFor","ngForOf"],[2,"height","1cm","cursor","pointer","font-size","large",3,"click"],[1,"glyphicon","glyphicon-pencil"]],template:function(n,s){1&n&&(e.TgZ(0,"section",0)(1,"div",1)(2,"h1"),e._uU(3,"Dressing"),e.qZA()()(),e.TgZ(4,"section",2)(5,"div",3)(6,"div",4)(7,"div",5),e._UZ(8,"div",6),e.TgZ(9,"div",7)(10,"div",8)(11,"div",3)(12,"div",9)(13,"input",10),e.NdJ("ngModelChange",function(r){return s.procedureTypeName=r})("ngModelChange",function(r){return s.loadProcedureTypesLike(r)}),e.qZA(),e.YNc(14,v,4,1,"div",11),e.qZA(),e.TgZ(15,"div",12)(16,"button",13),e.NdJ("click",function(){return s.addDressing()}),e._uU(17,"Add"),e.qZA()(),e._UZ(18,"div",14),e.TgZ(19,"div",14)(20,"input",15),e.NdJ("ngModelChange",function(r){return s.filterRecords=r}),e.qZA()()(),e._UZ(21,"br"),e.TgZ(22,"table",16)(23,"thead")(24,"tr",17)(25,"td"),e._uU(26,"Dressing Procedure Type"),e.qZA(),e.TgZ(27,"td"),e._uU(28,"Action"),e.qZA()()(),e.TgZ(29,"tbody"),e.YNc(30,C,7,1,"tr",18),e.ALo(31,"searchFilter"),e.qZA()()()()()()()()),2&n&&(e.xp6(13),e.Q6J("ngModel",s.procedureTypeName),e.xp6(1),e.Q6J("ngIf",s.procedureTypes.length>0),e.xp6(6),e.Q6J("ngModel",s.filterRecords),e.xp6(10),e.Q6J("ngForOf",e.xi3(31,4,s.dressings,s.filterRecords)))},dependencies:[u.ez,u.sg,u.O5,p.u5,p.YN,p.Kr,p.Fj,p.JJ,p.On,p.UX,m.G]}),c})()}}]);