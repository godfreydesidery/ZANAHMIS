"use strict";(self.webpackChunkzana_hmis=self.webpackChunkzana_hmis||[]).push([[4848],{4848:(b,y,l)=>{l.r(y),l.d(y,{RadiologyComponent:()=>O});var d=l(5861),h=l(6814),_=l(9862),u=l(95),Z=l(8237),g=l(4716),v=l(4512),f=l(553),t=l(6689),x=l(6466),M=l(1581),C=l(585),E=l(379);function T(a,c){1&a&&(t.TgZ(0,"span"),t._uU(1,"NONE"),t.qZA())}function A(a,c){1&a&&(t.TgZ(0,"span"),t._uU(1,"NONE"),t.qZA())}function R(a,c){if(1&a){const o=t.EpF();t.TgZ(0,"div")(1,"h5"),t._uU(2,"Reason for rejection"),t.qZA(),t.TgZ(3,"input",26),t.NdJ("ngModelChange",function(e){t.CHM(o);const i=t.oxw().$implicit;return t.KtG(i.rejectComment=e)}),t.qZA(),t._UZ(4,"br"),t.TgZ(5,"button",27),t.NdJ("click",function(){t.CHM(o);const e=t.oxw().$implicit,i=t.oxw();return t.KtG(i.saveReasonForRejection(e.id,e.rejectComment))}),t._uU(6,"Save Reason for Rejection"),t.qZA()()}if(2&a){const o=t.oxw().$implicit;t.xp6(3),t.Q6J("ngModel",o.rejectComment)}}function U(a,c){if(1&a){const o=t.EpF();t.TgZ(0,"textarea",28),t.NdJ("ngModelChange",function(e){t.CHM(o);const i=t.oxw().$implicit;return t.KtG(i.result=e)}),t.qZA()}if(2&a){const o=t.oxw().$implicit;t.Q6J("ngModel",o.result)}}function P(a,c){if(1&a){const o=t.EpF();t.TgZ(0,"textarea",29),t.NdJ("ngModelChange",function(e){t.CHM(o);const i=t.oxw().$implicit;return t.KtG(i.result=e)}),t.qZA()}if(2&a){const o=t.oxw().$implicit;t.Q6J("ngModel",o.result)}}function B(a,c){if(1&a){const o=t.EpF();t.TgZ(0,"div",4)(1,"div",14)(2,"div",15)(3,"h4")(4,"b"),t._uU(5),t.qZA()(),t.TgZ(6,"span"),t._uU(7,"Status: "),t.qZA(),t.TgZ(8,"span")(9,"small"),t._uU(10),t.qZA()(),t._UZ(11,"br")(12,"br"),t.TgZ(13,"span"),t._uU(14),t.YNc(15,T,2,0,"span",16),t.qZA(),t._UZ(16,"br")(17,"br"),t.TgZ(18,"span"),t._uU(19),t.YNc(20,A,2,0,"span",16),t.qZA(),t._UZ(21,"br")(22,"br"),t.TgZ(23,"small"),t._uU(24),t.qZA(),t._UZ(25,"br"),t.TgZ(26,"h4",17)(27,"b"),t._uU(28,"Clinical History"),t.qZA()(),t.TgZ(29,"span"),t._uU(30),t.qZA(),t._UZ(31,"br"),t.TgZ(32,"button",18),t.NdJ("click",function(){const i=t.CHM(o).$implicit,s=t.oxw();return t.KtG(s.acceptRadiology(i))}),t._uU(33,"Accept"),t.qZA(),t.TgZ(34,"button",18),t.NdJ("click",function(){const i=t.CHM(o).$implicit,s=t.oxw();return t.KtG(s.rejectRadiology(i))}),t._uU(35,"Reject"),t.qZA(),t.YNc(36,R,7,1,"div",16),t._UZ(37,"hr"),t.qZA(),t.TgZ(38,"div",15)(39,"div",19)(40,"div",4)(41,"span"),t._uU(42,"Results"),t.qZA(),t.YNc(43,U,1,1,"textarea",20),t.YNc(44,P,1,1,"textarea",21),t.qZA(),t.TgZ(45,"div",22)(46,"span"),t._uU(47,"Attachment"),t.qZA(),t._UZ(48,"input",23),t.qZA(),t.TgZ(49,"div",22),t._UZ(50,"br"),t.TgZ(51,"button",24),t.NdJ("click",function(){const i=t.CHM(o).$implicit,s=t.oxw();return t.KtG(s.verifyRadiology(i))}),t._uU(52,"Verify Results"),t.qZA()(),t.TgZ(53,"div",4),t._UZ(54,"br"),t.TgZ(55,"span",25),t._uU(56),t.qZA()()()()()()}if(2&a){const o=c.$implicit;t.xp6(5),t.Oqu(null==o.radiologyType?null:o.radiologyType.name),t.xp6(5),t.Oqu(o.status),t.xp6(4),t.hij("Diagnosis: ",null==o||null==o.diagnosisType?null:o.diagnosisType.name," "),t.xp6(1),t.Q6J("ngIf",null===(null==o||null==o.diagnosisType?null:o.diagnosisType.name)),t.xp6(4),t.hij("Description: ",null==o?null:o.description," "),t.xp6(1),t.Q6J("ngIf",""===(null==o?null:o.description)),t.xp6(4),t.hij("Ordered At | By: ",null==o?null:o.created,""),t.xp6(6),t.Oqu(o.description),t.xp6(6),t.Q6J("ngIf","REJECTED"===(null==o?null:o.status)),t.xp6(7),t.Q6J("ngIf","ACCEPTED"===(null==o?null:o.status)),t.xp6(1),t.Q6J("ngIf","VERIFIED"===(null==o?null:o.status)),t.xp6(12),t.hij("Verified At | By: ",o.verified,"")}}const p=f.N.apiUrl;let O=(()=>{var a;class c{constructor(n,e,i,s,r,m){this.auth=n,this.http=e,this.modalService=i,this.spinner=s,this.router=r,this.msgBox=m,this.radiologies=[],this.diagnosisTypeNames=[],this.filterRecords=""}ngOnInit(){var n=this;return(0,d.Z)(function*(){n.id=localStorage.getItem("radiology-patient-id"),localStorage.removeItem("radiology-patient-id"),yield n.loadPatient(n.id),yield n.loadRadiologiesByPatient(n.id)})()}loadPatient(n){var e=this;return(0,d.Z)(function*(){let i={headers:(new _.WM).set("Authorization","Bearer "+e.auth.user.access_token)};e.spinner.show(),yield e.http.get(p+"/patients/get?id="+n,i).pipe((0,g.x)(()=>e.spinner.hide())).toPromise().then(s=>{e.id=s?.id,e.patient=s,console.log(s)}).catch(s=>{e.msgBox.showErrorMessage(s,"Could not load patient"),console.log(s)})})()}loadRadiologiesByPatient(n){var e=this;return(0,d.Z)(function*(){let i={headers:(new _.WM).set("Authorization","Bearer "+e.auth.user.access_token)};e.spinner.show(),yield e.http.get(p+"/patients/get_radiologies_by_patient_id?id="+n,i).pipe((0,g.x)(()=>e.spinner.hide())).toPromise().then(s=>{e.radiologies=s,console.log(e.radiologies)}).catch(s=>{e.radiologies=[],e.msgBox.showErrorMessage(s,"Could not load radiologies")})})()}acceptRadiology(n){var e=this;return(0,d.Z)(function*(){let i={headers:(new _.WM).set("Authorization","Bearer "+e.auth.user.access_token)};var s={id:n.id};e.spinner.show(),yield e.http.post(p+"/patients/accept_radiology",s,i).pipe((0,g.x)(()=>e.spinner.hide())).toPromise().then(r=>{e.msgBox.showSuccessMessage("Status changed : ACCEPTED")}).catch(r=>{e.msgBox.showErrorMessage(r,"")}),e.loadRadiologiesByPatient(e.id)})()}rejectRadiology(n){var e=this;return(0,d.Z)(function*(){let i={headers:(new _.WM).set("Authorization","Bearer "+e.auth.user.access_token)};var s={id:n.id};e.spinner.show(),yield e.http.post(p+"/patients/reject_radiology",s,i).pipe((0,g.x)(()=>e.spinner.hide())).toPromise().then(r=>{e.msgBox.showSuccessMessage("Status changed : REJECTED")}).catch(r=>{e.msgBox.showErrorMessage(r,"")}),e.loadRadiologiesByPatient(e.id)})()}saveReasonForRejection(n,e){var i=this;return(0,d.Z)(function*(){let s={headers:(new _.WM).set("Authorization","Bearer "+i.auth.user.access_token)};var r={id:n,rejectComment:e};i.spinner.show(),yield i.http.post(p+"/patients/radiologies/save_reason_for_rejection",r,s).pipe((0,g.x)(()=>i.spinner.hide())).toPromise().then(m=>{i.msgBox.showSuccessMessage("Success")}).catch(m=>{i.msgBox.showErrorMessage(m,"")})})()}holdRadiology(n){var e=this;return(0,d.Z)(function*(){let i={headers:(new _.WM).set("Authorization","Bearer "+e.auth.user.access_token)};var s={id:n.id};e.spinner.show(),yield e.http.post(p+"/patients/hold_radiology",s,i).pipe((0,g.x)(()=>e.spinner.hide())).toPromise().then(r=>{e.msgBox.showSuccessMessage("Status changed : PENDING")}).catch(r=>{e.msgBox.showErrorMessage(r,"")}),e.loadRadiologiesByPatient(e.id)})()}collectRadiology(n){var e=this;return(0,d.Z)(function*(){let i={headers:(new _.WM).set("Authorization","Bearer "+e.auth.user.access_token)};var s={id:n.id};e.spinner.show(),yield e.http.post(p+"/patients/collect_radiology",s,i).pipe((0,g.x)(()=>e.spinner.hide())).toPromise().then(r=>{e.msgBox.showSuccessMessage("Status changed : COLLECTED")}).catch(r=>{e.msgBox.showErrorMessage(r,"")}),e.loadRadiologiesByPatient(e.id)})()}verifyRadiology(n){var e=this;return(0,d.Z)(function*(){let i={headers:(new _.WM).set("Authorization","Bearer "+e.auth.user.access_token)};var s={id:n.id,result:n.result};e.spinner.show(),yield e.http.post(p+"/patients/verify_radiology",s,i).pipe((0,g.x)(()=>e.spinner.hide())).toPromise().then(r=>{e.msgBox.showSuccessMessage("Status changed : VERIFIED, Saved successifully")}).catch(r=>{e.msgBox.showErrorMessage(r,"")}),e.loadRadiologiesByPatient(e.id)})()}grant(n){var e=!1;return n.forEach(i=>{this.auth.checkPrivilege(i)&&(e=!0)}),e}}return(a=c).\u0275fac=function(n){return new(n||a)(t.Y36(x.e),t.Y36(_.eN),t.Y36(M.FF),t.Y36(C.t2),t.Y36(Z.F0),t.Y36(E.l))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-radiology"]],standalone:!0,features:[t.jDz],decls:35,vars:13,consts:[[1,"content-header"],[1,"header-title"],[1,"content"],[1,"row"],[1,"col-sm-12"],[1,"panel","panel-bd","lobidrag"],[1,"panel-heading"],["routerLink","/radiology-outpatient-list",1,"btn","btn-success",2,"margin-right","1mm"],["routerLink","/radiology-inpatient-list",1,"btn","btn-success",2,"margin-right","1mm"],["routerLink","/radiology-outsider-list",1,"btn","btn-success",2,"margin-right","1mm"],[1,"panel-body"],[1,"col-sm-12",2,"text-align","center"],[1,"text-primary"],["class","col-sm-12",4,"ngFor","ngForOf"],[1,"row",2,"margin","1mm","background-color","rgb(246, 246, 248)"],[1,"col-sm-4"],[4,"ngIf"],[1,"text-info"],[1,"btn","btn-default","btn-rounded",3,"click"],[1,"row",2,"padding-left","3mm","padding-right","3mm"],["class","form-control","placeholder","Input Results","style","height: 5cm;",3,"ngModel","ngModelChange",4,"ngIf"],["class","form-control","placeholder","Input Results","style","height: 5cm;","readonly","",3,"ngModel","ngModelChange",4,"ngIf"],[1,"col-sm-6"],["type","file",1,"form-control"],[1,"btn","btn-primary",3,"click"],[1,"label","label-info","m-r-15"],["type","text","placeholder","Reason for rejection",1,"form-control",3,"ngModel","ngModelChange"],[1,"btn","btn-info",3,"click"],["placeholder","Input Results",1,"form-control",2,"height","5cm",3,"ngModel","ngModelChange"],["placeholder","Input Results","readonly","",1,"form-control",2,"height","5cm",3,"ngModel","ngModelChange"]],template:function(n,e){1&n&&(t.TgZ(0,"section",0)(1,"div",1)(2,"h1"),t._uU(3,"Radiology"),t.qZA()()(),t.TgZ(4,"section",2)(5,"div",3)(6,"div",4)(7,"div",5)(8,"div",6)(9,"a",7),t._uU(10,"Outpatient List"),t.qZA(),t.TgZ(11,"a",8),t._uU(12,"Inpatient List"),t.qZA(),t.TgZ(13,"a",9),t._uU(14,"Outsider List"),t.qZA()(),t.TgZ(15,"div",10)(16,"div",3)(17,"div",11)(18,"h3",12)(19,"b"),t._uU(20),t.qZA(),t._uU(21,", "),t.TgZ(22,"b"),t._uU(23),t.qZA(),t._uU(24,", Date of birth: "),t.TgZ(25,"b"),t._uU(26),t.ALo(27,"date"),t.qZA(),t._uU(28,",Age: "),t.TgZ(29,"b"),t._uU(30),t.ALo(31,"age"),t.qZA(),t._uU(32),t.qZA()(),t._UZ(33,"hr"),t.qZA(),t.YNc(34,B,57,12,"div",13),t.qZA()()()()()),2&n&&(t.xp6(20),t.lnq("",e.patient.firstName," ",e.patient.middleName," ",e.patient.lastName,""),t.xp6(3),t.Oqu(e.patient.no),t.xp6(3),t.Oqu(t.lcZ(27,9,e.patient.dateOfBirth)),t.xp6(4),t.Oqu(t.lcZ(31,11,e.patient.dateOfBirth)),t.xp6(2),t.AsE(", ",e.patient.gender,", ",e.patient.paymentType,""),t.xp6(2),t.Q6J("ngForOf",e.radiologies))},dependencies:[h.ez,h.sg,h.O5,h.uU,u.u5,u.Fj,u.JJ,u.On,u.UX,v.C,Z.rH]}),c})()}}]);