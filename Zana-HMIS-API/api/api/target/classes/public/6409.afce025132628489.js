"use strict";(self.webpackChunkzana_hmis=self.webpackChunkzana_hmis||[]).push([[6409],{6409:(T,_,r)=>{r.r(_),r.d(_,{SupplierRegisterComponent:()=>M});var c=r(5861),m=r(6814),a=r(9862),l=r(95),u=r(4716),A=r(553),e=r(6689),C=r(6466),v=r(585),Z=r(379);function b(p,h){if(1&p&&(e.TgZ(0,"option",21),e._uU(1),e.qZA()),2&p){const d=h.$implicit;e.Q6J("ngValue",d),e.xp6(1),e.Oqu(d)}}const g=A.N.apiUrl;let M=(()=>{var p;class h{constructor(n,s,i,t){this.auth=n,this.http=s,this.spinner=i,this.msgBox=t,this.code="",this.name="",this.contactName="",this.active=!1,this.tin="",this.vrn="",this.termsOfContract="",this.physicalAddress="",this.postCode="",this.postAddress="",this.telephone="",this.mobile="",this.email="",this.fax="",this.bankAccountName="",this.bankPhysicalAddress="",this.bankPostCode="",this.bankPostAddress="",this.bankName="",this.bankAccountNo="",this.names=[],this.filterRecords=""}ngOnInit(){this.loadSupplierNames()}saveSupplier(){var n=this;return(0,c.Z)(function*(){let s={headers:(new a.WM).set("Authorization","Bearer "+n.auth.user.access_token)};var i={id:n.id,code:n.code,name:n.name,contactName:n.contactName,active:n.active,tin:n.tin,vrn:n.vrn,termsOfContract:n.termsOfContract,physicalAddress:n.physicalAddress,postCode:n.postCode,postAddress:n.postAddress,telephone:n.telephone,mobile:n.mobile,email:n.email,fax:n.fax,bankAccountName:n.bankAccountName,bankPhysicalAddress:n.bankPhysicalAddress,bankPostCode:n.bankPostCode,bankPostAddress:n.bankPostAddress,bankName:n.bankName,bankAccountNo:n.bankAccountNo};null==n.id||""==n.id?(n.spinner.show(),yield n.http.post(g+"/suppliers/save",i,s).pipe((0,u.x)(()=>n.spinner.hide())).toPromise().then(t=>{n.id=t?.id,n.code=t.code,n.name=t.name,n.contactName=t.contactName,n.active=t.active,n.tin=t.tin,n.vrn=t.vrn,n.termsOfContract=t.termsOfContract,n.physicalAddress=t.physicalAddress,n.postCode=t.postCode,n.postAddress=t.postAddress,n.telephone=t.telephone,n.mobile=t.mobile,n.email=t.email,n.fax=t.fax,n.bankAccountName=t.bankAccountName,n.bankPhysicalAddress=t.bankPhysicalAddress,n.bankPostCode=t.bankPostCode,n.bankPostAddress=t.bankPostAddress,n.bankName=t.bankName,n.bankAccountNo=t.bankAccountNo,n.msgBox.showSuccessMessage("Supplier created successifully")}).catch(t=>{n.msgBox.showErrorMessage(t,"")})):(n.spinner.show(),yield n.http.post(g+"/suppliers/save",i,s).pipe((0,u.x)(()=>n.spinner.hide())).toPromise().then(t=>{n.id=t?.id,n.code=t.code,n.name=t.name,n.contactName=t.contactName,n.active=t.active,n.tin=t.tin,n.vrn=t.vrn,n.termsOfContract=t.termsOfContract,n.physicalAddress=t.physicalAddress,n.postCode=t.postCode,n.postAddress=t.postAddress,n.telephone=t.telephone,n.mobile=t.mobile,n.email=t.email,n.fax=t.fax,n.bankAccountName=t.bankAccountName,n.bankPhysicalAddress=t.bankPhysicalAddress,n.bankPostCode=t.bankPostCode,n.bankPostAddress=t.bankPostAddress,n.bankName=t.bankName,n.bankAccountNo=t.bankAccountNo,n.msgBox.showSuccessMessage("Supplier updated successifully")}).catch(t=>{n.msgBox.showErrorMessage(t,"")}))})()}clear(){this.id=null,this.code="",this.name="",this.contactName="",this.tin="",this.vrn="",this.termsOfContract="",this.physicalAddress="",this.postCode="",this.postAddress="",this.telephone="",this.mobile="",this.email="",this.fax="",this.bankAccountName="",this.bankPhysicalAddress="",this.bankPostCode="",this.bankPostAddress="",this.bankName="",this.bankAccountNo="",this.active=!1}searchSupplier(){var n=this;return(0,c.Z)(function*(){let s={headers:(new a.WM).set("Authorization","Bearer "+n.auth.user.access_token)};var i=n.code,t=n.name;""!=i&&(t=""),n.spinner.show(),yield n.http.get(g+"/suppliers/search?code="+i+"&name="+t,s).pipe((0,u.x)(()=>n.spinner.hide())).toPromise().then(o=>{n.id=o?.id,n.code=o.code,n.name=o.name,n.contactName=o.contactName,n.active=o.active,n.tin=o.tin,n.vrn=o.vrn,n.termsOfContract=o.termsOfContract,n.physicalAddress=o.physicalAddress,n.postCode=o.postCode,n.postAddress=o.postAddress,n.telephone=o.telephone,n.mobile=o.mobile,n.email=o.email,n.fax=o.fax,n.bankAccountName=o.bankAccountName,n.bankPhysicalAddress=o.bankPhysicalAddress,n.bankPostCode=o.bankPostCode,n.bankPostAddress=o.bankPostAddress,n.bankName=o.bankName,n.bankAccountNo=o.bankAccountNo},o=>{console.log(o),n.msgBox.showErrorMessage(o,"")})})()}loadSupplierNames(){var n=this;return(0,c.Z)(function*(){let s={headers:(new a.WM).set("Authorization","Bearer "+n.auth.user.access_token)};n.spinner.show(),yield n.http.get(g+"/suppliers/get_names",s).pipe((0,u.x)(()=>n.spinner.hide())).toPromise().then(i=>{console.log(i),n.names=[],i?.forEach(t=>{n.names.push(t)})},i=>{console.log(i),n.msgBox.showErrorMessage3("Could not load supplier names")})})()}grant(n){var s=!1;return n.forEach(i=>{this.auth.checkPrivilege(i)&&(s=!0)}),s}}return(p=h).\u0275fac=function(n){return new(n||p)(e.Y36(C.e),e.Y36(a.eN),e.Y36(v.t2),e.Y36(Z.l))},p.\u0275cmp=e.Xpm({type:p,selectors:[["app-supplier-register"]],standalone:!0,features:[e.jDz],decls:151,vars:22,consts:[[1,"content-header"],[1,"header-title"],[1,"content"],[1,"row"],[1,"col-sm-12"],[1,"panel","panel-bd","lobidrag"],[1,"panel-heading"],[1,"btn"],["type","button",1,"btn","btn-success","m-r-2","m-b-5",3,"click"],[1,"panel-body"],[1,"col-sm-6"],[1,"col-sm-4"],[1,"col-sm-8"],["type","hidden",3,"ngModel","ngModelChange"],["type","text",1,"form-control",3,"ngModel","ngModelChange"],[1,"btn","btn-success",3,"click"],["type","text","list","names",1,"form-control",3,"ngModel","ngModelChange"],["id","names",2,"padding","0px"],[3,"ngValue",4,"ngFor","ngForOf"],["type","checkbox",3,"ngModel","ngModelChange"],["type","button",1,"btn","btn-success","m-r-2","m-b-5","pull-right",3,"click"],[3,"ngValue"]],template:function(n,s){1&n&&(e.TgZ(0,"section",0)(1,"div",1)(2,"h1"),e._uU(3,"Supplier Register"),e.qZA()()(),e.TgZ(4,"section",2)(5,"div",3)(6,"div",4)(7,"div",5)(8,"div",6)(9,"div",7)(10,"button",8),e.NdJ("click",function(){return s.clear()}),e._uU(11,"New"),e.qZA(),e.TgZ(12,"button",8),e.NdJ("click",function(){return s.clear()}),e._uU(13,"Clear"),e.qZA()()(),e.TgZ(14,"div",9)(15,"div",3)(16,"div",10)(17,"div",3)(18,"div",11)(19,"h4"),e._uU(20,"Code"),e.qZA()(),e.TgZ(21,"div",12)(22,"div",3)(23,"input",13),e.NdJ("ngModelChange",function(t){return s.id=t}),e.qZA(),e.TgZ(24,"div",12)(25,"input",14),e.NdJ("ngModelChange",function(t){return s.code=t}),e.qZA()(),e.TgZ(26,"div",11)(27,"button",15),e.NdJ("click",function(){return s.searchSupplier()}),e._uU(28,"Search"),e.qZA()()()()(),e.TgZ(29,"div",3)(30,"div",11)(31,"h4"),e._uU(32,"Name"),e.qZA()(),e.TgZ(33,"div",12)(34,"input",16),e.NdJ("ngModelChange",function(t){return s.name=t}),e.qZA(),e.TgZ(35,"datalist",17),e.YNc(36,b,2,2,"option",18),e.qZA()()(),e.TgZ(37,"div",3)(38,"div",11)(39,"h4"),e._uU(40,"Contact Name"),e.qZA()(),e.TgZ(41,"div",12)(42,"input",14),e.NdJ("ngModelChange",function(t){return s.contactName=t}),e.qZA()()(),e.TgZ(43,"div",3)(44,"div",11)(45,"h4"),e._uU(46,"TIN"),e.qZA()(),e.TgZ(47,"div",12)(48,"input",14),e.NdJ("ngModelChange",function(t){return s.tin=t}),e.qZA()()(),e.TgZ(49,"div",3)(50,"div",11)(51,"h4"),e._uU(52,"VRN"),e.qZA()(),e.TgZ(53,"div",12)(54,"input",14),e.NdJ("ngModelChange",function(t){return s.vrn=t}),e.qZA()()(),e.TgZ(55,"div",3)(56,"div",11)(57,"h4"),e._uU(58,"Terms of Contract"),e.qZA()(),e.TgZ(59,"div",12)(60,"input",14),e.NdJ("ngModelChange",function(t){return s.termsOfContract=t}),e.qZA()()(),e.TgZ(61,"div",3)(62,"div",11)(63,"h4"),e._uU(64,"Physical Address"),e.qZA()(),e.TgZ(65,"div",12)(66,"input",14),e.NdJ("ngModelChange",function(t){return s.physicalAddress=t}),e.qZA()()(),e.TgZ(67,"div",3)(68,"div",11)(69,"h4"),e._uU(70,"Post Code"),e.qZA()(),e.TgZ(71,"div",12)(72,"input",14),e.NdJ("ngModelChange",function(t){return s.postCode=t}),e.qZA()()(),e.TgZ(73,"div",3)(74,"div",11)(75,"h4"),e._uU(76,"Post Address"),e.qZA()(),e.TgZ(77,"div",12)(78,"input",14),e.NdJ("ngModelChange",function(t){return s.postAddress=t}),e.qZA()()(),e.TgZ(79,"div",3)(80,"div",11)(81,"h4"),e._uU(82,"Telephone"),e.qZA()(),e.TgZ(83,"div",12)(84,"input",14),e.NdJ("ngModelChange",function(t){return s.telephone=t}),e.qZA()()(),e.TgZ(85,"div",3)(86,"div",11)(87,"h4"),e._uU(88,"Mobile"),e.qZA()(),e.TgZ(89,"div",12)(90,"input",14),e.NdJ("ngModelChange",function(t){return s.mobile=t}),e.qZA()()(),e.TgZ(91,"div",3)(92,"div",11)(93,"h4"),e._uU(94,"Email"),e.qZA()(),e.TgZ(95,"div",12)(96,"input",14),e.NdJ("ngModelChange",function(t){return s.email=t}),e.qZA()()(),e.TgZ(97,"div",3)(98,"div",11)(99,"h4"),e._uU(100,"Fax"),e.qZA()(),e.TgZ(101,"div",12)(102,"input",14),e.NdJ("ngModelChange",function(t){return s.fax=t}),e.qZA()()()(),e.TgZ(103,"div",10)(104,"div",3)(105,"div",11)(106,"h4"),e._uU(107,"Bank Account Name"),e.qZA()(),e.TgZ(108,"div",12)(109,"input",14),e.NdJ("ngModelChange",function(t){return s.bankAccountName=t}),e.qZA()()(),e.TgZ(110,"div",3)(111,"div",11)(112,"h4"),e._uU(113,"Bank Physical Address"),e.qZA()(),e.TgZ(114,"div",12)(115,"input",14),e.NdJ("ngModelChange",function(t){return s.bankPhysicalAddress=t}),e.qZA()()(),e.TgZ(116,"div",3)(117,"div",11)(118,"h4"),e._uU(119,"Bank Post Code"),e.qZA()(),e.TgZ(120,"div",12)(121,"input",14),e.NdJ("ngModelChange",function(t){return s.bankPostCode=t}),e.qZA()()(),e.TgZ(122,"div",3)(123,"div",11)(124,"h4"),e._uU(125,"Bank Post Address"),e.qZA()(),e.TgZ(126,"div",12)(127,"input",14),e.NdJ("ngModelChange",function(t){return s.bankPostAddress=t}),e.qZA()()(),e.TgZ(128,"div",3)(129,"div",11)(130,"h4"),e._uU(131,"Bank Name"),e.qZA()(),e.TgZ(132,"div",12)(133,"input",14),e.NdJ("ngModelChange",function(t){return s.bankName=t}),e.qZA()()(),e.TgZ(134,"div",3)(135,"div",11)(136,"h4"),e._uU(137,"Bank Account No"),e.qZA()(),e.TgZ(138,"div",12)(139,"input",14),e.NdJ("ngModelChange",function(t){return s.bankAccountNo=t}),e.qZA()()(),e.TgZ(140,"div",3)(141,"div",11),e._UZ(142,"h4"),e.qZA(),e.TgZ(143,"div",12)(144,"input",19),e.NdJ("ngModelChange",function(t){return s.active=t}),e.qZA(),e.TgZ(145,"label"),e._uU(146,"Active"),e.qZA()()()(),e.TgZ(147,"div",4),e._UZ(148,"hr"),e.TgZ(149,"button",20),e.NdJ("click",function(){return s.saveSupplier()}),e._uU(150,"Save"),e.qZA()()()()()()()()),2&n&&(e.xp6(23),e.Q6J("ngModel",s.id),e.xp6(2),e.Q6J("ngModel",s.code),e.xp6(9),e.Q6J("ngModel",s.name),e.xp6(2),e.Q6J("ngForOf",s.names),e.xp6(6),e.Q6J("ngModel",s.contactName),e.xp6(6),e.Q6J("ngModel",s.tin),e.xp6(6),e.Q6J("ngModel",s.vrn),e.xp6(6),e.Q6J("ngModel",s.termsOfContract),e.xp6(6),e.Q6J("ngModel",s.physicalAddress),e.xp6(6),e.Q6J("ngModel",s.postCode),e.xp6(6),e.Q6J("ngModel",s.postAddress),e.xp6(6),e.Q6J("ngModel",s.telephone),e.xp6(6),e.Q6J("ngModel",s.mobile),e.xp6(6),e.Q6J("ngModel",s.email),e.xp6(6),e.Q6J("ngModel",s.fax),e.xp6(7),e.Q6J("ngModel",s.bankAccountName),e.xp6(6),e.Q6J("ngModel",s.bankPhysicalAddress),e.xp6(6),e.Q6J("ngModel",s.bankPostCode),e.xp6(6),e.Q6J("ngModel",s.bankPostAddress),e.xp6(6),e.Q6J("ngModel",s.bankName),e.xp6(6),e.Q6J("ngModel",s.bankAccountNo),e.xp6(5),e.Q6J("ngModel",s.active))},dependencies:[m.ez,m.sg,l.u5,l.YN,l.Kr,l.Fj,l.Wl,l.JJ,l.On,l.UX]}),h})()}}]);