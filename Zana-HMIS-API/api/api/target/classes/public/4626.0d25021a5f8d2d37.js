"use strict";(self.webpackChunkzana_hmis=self.webpackChunkzana_hmis||[]).push([[4626],{4626:(N,M,s)=>{s.r(M),s.d(M,{MedicineComponent:()=>P});var g=s(5861),h=s(6814),_=s(9862),a=s(95),p=s(4716),Z=s(4185),v=s(553),e=s(6689),T=s(6466),f=s(585),A=s(379);function C(d,l){1&d&&(e.TgZ(0,"span",39),e._uU(1,"Active"),e.qZA())}function U(d,l){1&d&&(e.TgZ(0,"span",40),e._uU(1,"Inactive"),e.qZA())}function y(d,l){if(1&d){const c=e.EpF();e.TgZ(0,"button",41),e.NdJ("click",function(){e.CHM(c);const n=e.oxw().$implicit,o=e.oxw();return e.KtG(o.activateMedicine(n.id))}),e._uU(1,"Activate"),e.qZA()}}function E(d,l){if(1&d){const c=e.EpF();e.TgZ(0,"button",41),e.NdJ("click",function(){e.CHM(c);const n=e.oxw().$implicit,o=e.oxw();return e.KtG(o.deactivateMedicine(n.id))}),e._uU(1,"Deactivate"),e.qZA()}}function q(d,l){if(1&d){const c=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.TgZ(13,"td",33),e._uU(14),e.ALo(15,"currency"),e.qZA(),e.TgZ(16,"td"),e.YNc(17,C,2,0,"span",34),e.YNc(18,U,2,0,"span",35),e.qZA(),e.TgZ(19,"td"),e.YNc(20,y,2,0,"button",36),e.YNc(21,E,2,0,"button",36),e.qZA(),e.TgZ(22,"td")(23,"a",37),e.NdJ("click",function(){const o=e.CHM(c).$implicit,t=e.oxw();return e.KtG(t.getMedicine(o.id))}),e._UZ(24,"i",38),e._uU(25,"Edit"),e.qZA()()()}if(2&d){const c=l.$implicit;e.xp6(2),e.Oqu(null==c?null:c.code),e.xp6(2),e.Oqu(null==c?null:c.name),e.xp6(2),e.Oqu(null==c?null:c.description),e.xp6(2),e.Oqu(null==c?null:c.uom),e.xp6(2),e.Oqu(null==c?null:c.type),e.xp6(2),e.Oqu(null==c?null:c.category),e.xp6(2),e.Oqu(e.Dn7(15,11,null==c?null:c.price,"","")),e.xp6(3),e.Q6J("ngIf",!0===c.active),e.xp6(1),e.Q6J("ngIf",!1===c.active),e.xp6(2),e.Q6J("ngIf",!1===c.active),e.xp6(1),e.Q6J("ngIf",!0===c.active)}}function b(d,l){1&d&&(e.TgZ(0,"h1",42),e._uU(1,"Add Medicine"),e.qZA())}function x(d,l){1&d&&(e.TgZ(0,"h1",42),e._uU(1,"Edit Medicine"),e.qZA())}function O(d,l){1&d&&(e.TgZ(0,"span"),e._uU(1,"Update"),e.qZA())}function J(d,l){1&d&&(e.TgZ(0,"span"),e._uU(1,"Add"),e.qZA())}const u=v.N.apiUrl;let P=(()=>{var d;class l{constructor(i,n,o,t){this.auth=i,this.http=n,this.spinner=o,this.msgBox=t,this.id=null,this.code="",this.name="",this.description="",this.uom="",this.category="",this.type="",this.price=0,this.active=!0,this.medicines=[],this.filterRecords=""}ngOnInit(){this.loadMedicines()}saveMedicine(){var i=this;return(0,g.Z)(function*(){let n={headers:(new _.WM).set("Authorization","Bearer "+i.auth.user.access_token)};var o={id:i.id,code:i.code,name:i.name,description:i.description,uom:i.uom,type:i.type,category:i.category,price:i.price,active:!0};null==i.id||""==i.id?(i.spinner.show(),yield i.http.post(u+"/medicines/save",o,n).pipe((0,p.x)(()=>i.spinner.hide())).toPromise().then(t=>{i.id=t?.id,i.code=t.code,i.name=t.name,i.description=t.description,i.price=t.price,i.uom=t.uom,i.type=t.type,i.category=t.category,i.active=t.active,i.msgBox.showSuccessMessage("Medicine created successifully"),i.loadMedicines()}).catch(t=>{i.msgBox.showErrorMessage(t,"Could not create Medicine")})):(i.spinner.show(),yield i.http.post(u+"/medicines/save",o,n).pipe((0,p.x)(()=>i.spinner.hide())).toPromise().then(t=>{i.id=t?.id,i.code=t.code,i.name=t.name,i.description=t.description,i.price=t.price,i.uom=t.uom,i.type=t.type,i.category=t.category,i.active=t.active,i.msgBox.showSuccessMessage("Medicine updated successifully"),i.loadMedicines()}).catch(t=>{i.msgBox.showErrorMessage(t,"Could not update Medicine")})),i.clear()})()}loadMedicines(){var i=this;return(0,g.Z)(function*(){i.medicines=[];let n={headers:(new _.WM).set("Authorization","Bearer "+i.auth.user.access_token)};i.spinner.show(),yield i.http.get(u+"/medicines",n).pipe((0,p.x)(()=>i.spinner.hide())).toPromise().then(o=>{o?.forEach(t=>{i.medicines.push(t)})}).catch(o=>{i.msgBox.showErrorMessage(o,"Could not load Medicines")})})()}clear(){this.id=null,this.code="",this.name="",this.description="",this.uom="",this.type="",this.category="",this.price=0,this.active=!1}getMedicine(i){var n=this;return(0,g.Z)(function*(){if(""==i)return;let o={headers:(new _.WM).set("Authorization","Bearer "+n.auth.user.access_token)};n.spinner.show(),yield n.http.get(u+"/medicines/get?id="+i,o).pipe((0,p.x)(()=>n.spinner.hide())).toPromise().then(t=>{n.id=t?.id,n.code=t.code,n.name=t.name,n.description=t.description,n.price=t.price,n.uom=t.uom,n.type=t.type,n.category=t.category,n.active=t.active}).catch(t=>{console.log(t),n.msgBox.showErrorMessage(t,"Could not find Medicine")})})()}activateMedicine(i){var n=this;return(0,g.Z)(function*(){if(!window.confirm("Activate this medicine. Confirm?"))return;let o={headers:(new _.WM).set("Authorization","Bearer "+n.auth.user.access_token)};var t={id:i};n.spinner.show(),yield n.http.post(u+"/medicines/activate_medicine",t,o).pipe((0,p.x)(()=>n.spinner.hide())).toPromise().then(r=>{n.medicines.forEach(m=>{m.id===r.id&&(m.active=r.active)})}).catch(r=>{console.log(r),n.msgBox.showErrorMessage(r,"")})})()}deactivateMedicine(i){var n=this;return(0,g.Z)(function*(){if(!window.confirm("Deactivate this medicine. Confirm?"))return;let o={headers:(new _.WM).set("Authorization","Bearer "+n.auth.user.access_token)};var t={id:i};n.spinner.show(),yield n.http.post(u+"/medicines/deactivate_medicine",t,o).pipe((0,p.x)(()=>n.spinner.hide())).toPromise().then(r=>{n.medicines.forEach(m=>{m.id===r.id&&(m.active=r.active)})}).catch(r=>{console.log(r),n.msgBox.showErrorMessage(r,"")})})()}grant(i){var n=!1;return i.forEach(o=>{this.auth.checkPrivilege(o)&&(n=!0)}),n}}return(d=l).\u0275fac=function(i){return new(i||d)(e.Y36(T.e),e.Y36(_.eN),e.Y36(f.t2),e.Y36(A.l))},d.\u0275cmp=e.Xpm({type:d,selectors:[["app-medicine"]],standalone:!0,features:[e.jDz],decls:115,vars:18,consts:[[1,"content-header"],[1,"header-title"],[1,"content"],[1,"row"],[1,"col-sm-12"],[1,"panel","panel-bd","lobidrag"],[1,"panel-heading"],[1,"btn"],["type","button","data-toggle","modal","data-target","#add-edit-modal",1,"btn","btn-success","m-r-2","m-b-5",3,"click"],[1,"panel-body"],[1,"col-sm-12",2,"height","100%","overflow","scroll"],[1,"col-sm-4"],["type","text","placeholder","Search...",1,"form-control","pull-right",2,"max-width","8cm",3,"ngModel","ngModelChange"],[1,"table","table-bordered","table-small"],[4,"ngFor","ngForOf"],["id","add-edit-modal","tabindex","-1","role","dialog",1,"modal","fade","modal-success"],["role","document",1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],["class","modal-title",4,"ngIf"],[1,"modal-body"],["type","hidden",3,"ngModel","ngModelChange"],[1,"col-xs-12"],["type","text",1,"form-control",3,"ngModel","ngModelChange"],[1,"form-control",3,"ngModel","ngModelChange"],["type","text",1,"form-control",2,"text-align","center",3,"ngModel","ngModelChange"],["type","checkbox",2,"text-align","right",3,"ngModel","ngModelChange"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-danger"],["type","button","data-dismiss","modal",1,"btn","btn-success",3,"click"],[4,"ngIf"],[2,"text-align","right"],["class","label label-info",4,"ngIf"],["class","label label-danger",4,"ngIf"],[3,"click",4,"ngIf"],["data-toggle","modal","data-target","#add-edit-modal",1,"",3,"click"],[1,"glyphicon","glyphicon-pencil"],[1,"label","label-info"],[1,"label","label-danger"],[3,"click"],[1,"modal-title"]],template:function(i,n){1&i&&(e.TgZ(0,"section",0)(1,"div",1)(2,"h1"),e._uU(3,"Medicine"),e.qZA()()(),e.TgZ(4,"section",2)(5,"div",3)(6,"div",4)(7,"div",5)(8,"div",6)(9,"div",7)(10,"button",8),e.NdJ("click",function(){return n.clear()}),e._uU(11,"New"),e.qZA()()(),e.TgZ(12,"div",9)(13,"div",10)(14,"div",3),e._UZ(15,"div",11)(16,"div",11),e.TgZ(17,"div",11)(18,"input",12),e.NdJ("ngModelChange",function(t){return n.filterRecords=t}),e.qZA()()(),e._UZ(19,"br"),e.TgZ(20,"table",13)(21,"thead")(22,"tr")(23,"td"),e._uU(24,"Code"),e.qZA(),e.TgZ(25,"td"),e._uU(26,"Name"),e.qZA(),e.TgZ(27,"td"),e._uU(28,"Description"),e.qZA(),e.TgZ(29,"td"),e._uU(30,"Uom"),e.qZA(),e.TgZ(31,"td"),e._uU(32,"Type"),e.qZA(),e.TgZ(33,"td"),e._uU(34,"Category"),e.qZA(),e.TgZ(35,"td"),e._uU(36,"Price"),e.qZA(),e.TgZ(37,"td"),e._uU(38,"Active"),e.qZA(),e.TgZ(39,"td"),e._uU(40,"Activate"),e.qZA(),e.TgZ(41,"td"),e._uU(42,"Action"),e.qZA()()(),e.TgZ(43,"tbody"),e.YNc(44,q,26,15,"tr",14),e.ALo(45,"searchFilter"),e.qZA()()()()()()()(),e.TgZ(46,"div",15)(47,"div",16)(48,"div",17)(49,"div",18)(50,"button",19)(51,"span",20),e._uU(52,"\xd7"),e.qZA()(),e.YNc(53,b,2,0,"h1",21),e.YNc(54,x,2,0,"h1",21),e.qZA(),e.TgZ(55,"div",22)(56,"div",3)(57,"input",23),e.NdJ("ngModelChange",function(t){return n.id=t}),e.qZA(),e.TgZ(58,"div",24)(59,"label"),e._uU(60,"Code*"),e.qZA(),e.TgZ(61,"input",25),e.NdJ("ngModelChange",function(t){return n.code=t}),e.qZA()()(),e.TgZ(62,"div",3)(63,"div",24)(64,"label"),e._uU(65,"Medicine Name*"),e.qZA(),e.TgZ(66,"input",25),e.NdJ("ngModelChange",function(t){return n.name=t}),e.qZA()()(),e.TgZ(67,"div",3)(68,"div",24)(69,"label"),e._uU(70,"Description"),e.qZA(),e.TgZ(71,"input",25),e.NdJ("ngModelChange",function(t){return n.description=t}),e.qZA()()(),e.TgZ(72,"div",3)(73,"div",24)(74,"label"),e._uU(75,"UOM"),e.qZA(),e.TgZ(76,"input",25),e.NdJ("ngModelChange",function(t){return n.uom=t}),e.qZA()()(),e.TgZ(77,"div",3)(78,"div",24)(79,"label"),e._uU(80,"Type"),e.qZA(),e.TgZ(81,"select",26),e.NdJ("ngModelChange",function(t){return n.type=t}),e.TgZ(82,"option"),e._uU(83,"ORAL"),e.qZA(),e.TgZ(84,"option"),e._uU(85,"PILL"),e.qZA(),e.TgZ(86,"option"),e._uU(87,"OTHER"),e.qZA()()()(),e.TgZ(88,"div",3)(89,"div",24)(90,"label"),e._uU(91,"Category"),e.qZA(),e.TgZ(92,"select",26),e.NdJ("ngModelChange",function(t){return n.category=t}),e.TgZ(93,"option"),e._uU(94,"MEDICINE"),e.qZA(),e.TgZ(95,"option"),e._uU(96,"PRODUCT"),e.qZA(),e.TgZ(97,"option"),e._uU(98,"EQUIPMENT"),e.qZA()()()(),e.TgZ(99,"div",3)(100,"div",24)(101,"label"),e._uU(102,"Price"),e.qZA(),e.TgZ(103,"input",27),e.NdJ("ngModelChange",function(t){return n.price=t}),e.qZA()()(),e.TgZ(104,"div",3)(105,"div",24)(106,"label"),e._uU(107,"Active"),e.qZA(),e.TgZ(108,"input",28),e.NdJ("ngModelChange",function(t){return n.active=t}),e.qZA()()()(),e.TgZ(109,"div",29)(110,"button",30),e._uU(111,"Close"),e.qZA(),e.TgZ(112,"button",31),e.NdJ("click",function(){return n.saveMedicine()}),e.YNc(113,O,2,0,"span",32),e.YNc(114,J,2,0,"span",32),e.qZA()()()()()),2&i&&(e.xp6(18),e.Q6J("ngModel",n.filterRecords),e.xp6(26),e.Q6J("ngForOf",e.xi3(45,15,n.medicines,n.filterRecords)),e.xp6(9),e.Q6J("ngIf",null===n.id),e.xp6(1),e.Q6J("ngIf",null!=n.id),e.xp6(3),e.Q6J("ngModel",n.id),e.xp6(4),e.Q6J("ngModel",n.code),e.xp6(5),e.Q6J("ngModel",n.name),e.xp6(5),e.Q6J("ngModel",n.description),e.xp6(5),e.Q6J("ngModel",n.uom),e.xp6(5),e.Q6J("ngModel",n.type),e.xp6(11),e.Q6J("ngModel",n.category),e.xp6(11),e.Q6J("ngModel",n.price),e.xp6(5),e.Q6J("ngModel",n.active),e.xp6(5),e.Q6J("ngIf",null!=n.id),e.xp6(1),e.Q6J("ngIf",null===n.id))},dependencies:[h.ez,h.sg,h.O5,h.H9,a.u5,a.YN,a.Kr,a.Fj,a.Wl,a.EJ,a.JJ,a.On,a.UX,Z.G]}),l})()}}]);