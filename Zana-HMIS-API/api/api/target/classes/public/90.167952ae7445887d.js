"use strict";(self.webpackChunkzana_hmis=self.webpackChunkzana_hmis||[]).push([[90],{90:(O,m,o)=>{o.r(m),o.d(m,{InsurancePlanComponent:()=>N});var p=o(5861),g=o(6814),c=o(9862),d=o(95),u=o(4716),h=o(4185),v=o(553),n=o(6689),P=o(6466),Z=o(585),f=o(379);function T(s,l){1&s&&(n.TgZ(0,"span",35),n._uU(1,"Active"),n.qZA())}function C(s,l){1&s&&(n.TgZ(0,"span",36),n._uU(1,"Inactive"),n.qZA())}function M(s,l){if(1&s){const r=n.EpF();n.TgZ(0,"tr")(1,"td"),n._uU(2),n.qZA(),n.TgZ(3,"td"),n._uU(4),n.qZA(),n.TgZ(5,"td"),n._uU(6),n.qZA(),n.TgZ(7,"td"),n._uU(8),n.qZA(),n.TgZ(9,"td"),n.YNc(10,T,2,0,"span",31),n.YNc(11,C,2,0,"span",32),n.qZA(),n.TgZ(12,"td")(13,"a",33),n.NdJ("click",function(){const i=n.CHM(r).$implicit,t=n.oxw();return n.KtG(t.getInsurancePlan(i.id))}),n._UZ(14,"i",34),n._uU(15,"Edit"),n.qZA()()()}if(2&s){const r=l.$implicit;n.xp6(2),n.Oqu(r.code),n.xp6(2),n.Oqu(r.name),n.xp6(2),n.Oqu(r.insuranceProvider.name),n.xp6(2),n.Oqu(r.description),n.xp6(2),n.Q6J("ngIf",!0===r.active),n.xp6(1),n.Q6J("ngIf",!1===r.active)}}function I(s,l){1&s&&(n.TgZ(0,"h1",37),n._uU(1,"Add Insurance Plan"),n.qZA())}function A(s,l){1&s&&(n.TgZ(0,"h1",37),n._uU(1,"Edit Insurance Plan"),n.qZA())}function U(s,l){if(1&s&&(n.TgZ(0,"option"),n._uU(1),n.qZA()),2&s){const r=l.$implicit;n.xp6(1),n.Oqu(r)}}function E(s,l){1&s&&(n.TgZ(0,"span"),n._uU(1,"Update"),n.qZA())}function b(s,l){1&s&&(n.TgZ(0,"span"),n._uU(1,"Add"),n.qZA())}const _=v.N.apiUrl;let N=(()=>{var s;class l{constructor(e,a,i,t){this.auth=e,this.http=a,this.spinner=i,this.msgBox=t,this.id=null,this.code="",this.name="",this.description="",this.active=!0,this.insurancePlans=[],this.insuranceProviderNames=[],this.insuranceProviderName="",this.filterRecords=""}ngOnInit(){this.loadInsurancePlans(),this.loadInsuranceProviderNames()}saveInsurancePlan(){var e=this;return(0,p.Z)(function*(){let a={headers:(new c.WM).set("Authorization","Bearer "+e.auth.user.access_token)};var i={id:e.id,code:e.code,name:e.name,description:e.description,insuranceProvider:{name:e.insuranceProviderName},active:!0};null==e.id||""==e.id?(e.spinner.show(),yield e.http.post(_+"/insurance_plans/save",i,a).pipe((0,u.x)(()=>e.spinner.hide())).toPromise().then(t=>{e.id=t?.id,e.code=t.code,e.name=t.name,e.description=t.description,e.active=t.active,e.msgBox.showSuccessMessage("Insurance Plan created successifully"),e.loadInsurancePlans()}).catch(t=>{e.msgBox.showErrorMessage(t,"Could not create insurance plan")})):(e.spinner.show(),yield e.http.post(_+"/insurance_plans/save",i,a).pipe((0,u.x)(()=>e.spinner.hide())).toPromise().then(t=>{e.id=t?.id,e.code=t.code,e.name=t.name,e.description=t.description,e.active=t.active,e.msgBox.showSuccessMessage("Insurance Plan updated successifully"),e.loadInsurancePlans()}).catch(t=>{e.msgBox.showErrorMessage(t,"Could not update insurance plan")})),e.clear()})()}loadInsurancePlans(){var e=this;return(0,p.Z)(function*(){e.insurancePlans=[];let a={headers:(new c.WM).set("Authorization","Bearer "+e.auth.user.access_token)};e.spinner.show(),yield e.http.get(_+"/insurance_plans",a).pipe((0,u.x)(()=>e.spinner.hide())).toPromise().then(i=>{i?.forEach(t=>{e.insurancePlans.push(t)})}).catch(i=>{e.msgBox.showErrorMessage(i,"Could not load insurance plans")})})()}clear(){this.id=null,this.code="",this.name="",this.insuranceProviderName="",this.description="",this.active=!1}getInsurancePlan(e){var a=this;return(0,p.Z)(function*(){if(""==e)return;let i={headers:(new c.WM).set("Authorization","Bearer "+a.auth.user.access_token)};a.spinner.show(),yield a.http.get(_+"/insurance_plans/get?id="+e,i).pipe((0,u.x)(()=>a.spinner.hide())).toPromise().then(t=>{a.id=t?.id,a.code=t.code,a.name=t.name,a.insuranceProviderName=t.insuranceProvider.name,a.description=t.description,a.active=t.active}).catch(t=>{console.log(t),a.msgBox.showErrorMessage(t,"Could not find insurance plan")})})()}loadInsuranceProviderNames(){var e=this;return(0,p.Z)(function*(){e.insuranceProviderNames=[];let a={headers:(new c.WM).set("Authorization","Bearer "+e.auth.user.access_token)};e.spinner.show(),yield e.http.get(_+"/insurance_providers/get_names",a).pipe((0,u.x)(()=>e.spinner.hide())).toPromise().then(i=>{i?.forEach(t=>{e.insuranceProviderNames.push(t)})}).catch(i=>{e.msgBox.showErrorMessage(i,"Could not load Providers")})})()}grant(e){var a=!1;return e.forEach(i=>{this.auth.checkPrivilege(i)&&(a=!0)}),a}}return(s=l).\u0275fac=function(e){return new(e||s)(n.Y36(P.e),n.Y36(c.eN),n.Y36(Z.t2),n.Y36(f.l))},s.\u0275cmp=n.Xpm({type:s,selectors:[["app-insurance-plan"]],standalone:!0,features:[n.jDz],decls:82,vars:16,consts:[[1,"content-header"],[1,"header-title"],[1,"content"],[1,"row"],[1,"col-sm-12"],[1,"panel","panel-bd","lobidrag"],[1,"panel-heading"],[1,"btn"],["type","button","data-toggle","modal","data-target","#add-edit-modal",1,"btn","btn-success","m-r-2","m-b-5",3,"click"],[1,"panel-body"],[1,"col-sm-4"],["type","text","placeholder","Search...",1,"form-control",3,"ngModel","ngModelChange"],[1,"table","table-bordered","table-small"],[4,"ngFor","ngForOf"],["id","add-edit-modal","tabindex","-1","role","dialog",1,"modal","fade","modal-success"],["role","document",1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],["class","modal-title",4,"ngIf"],[1,"modal-body"],["type","hidden",3,"ngModel","ngModelChange"],[1,"col-xs-12"],["type","text",1,"form-control",3,"ngModel","ngModelChange"],[1,"form-control",3,"ngModel","ngModelChange"],["type","checkbox",2,"text-align","right",3,"ngModel","ngModelChange"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-danger"],["type","button","data-dismiss","modal",1,"btn","btn-success",3,"click"],[4,"ngIf"],["class","label label-info",4,"ngIf"],["class","label label-danger",4,"ngIf"],["data-toggle","modal","data-target","#add-edit-modal",1,"",3,"click"],[1,"glyphicon","glyphicon-pencil"],[1,"label","label-info"],[1,"label","label-danger"],[1,"modal-title"]],template:function(e,a){1&e&&(n.TgZ(0,"section",0)(1,"div",1)(2,"h1"),n._uU(3,"Insurance Plan"),n.qZA()()(),n.TgZ(4,"section",2)(5,"div",3)(6,"div",4)(7,"div",5)(8,"div",6)(9,"div",7)(10,"button",8),n.NdJ("click",function(){return a.clear()}),n._uU(11,"New"),n.qZA()()(),n.TgZ(12,"div",9)(13,"div",4)(14,"div",3),n._UZ(15,"div",10)(16,"div",10),n.TgZ(17,"div",10)(18,"input",11),n.NdJ("ngModelChange",function(t){return a.filterRecords=t}),n.qZA()()(),n._UZ(19,"br"),n.TgZ(20,"table",12)(21,"thead")(22,"tr")(23,"td"),n._uU(24,"Code"),n.qZA(),n.TgZ(25,"td"),n._uU(26,"Name"),n.qZA(),n.TgZ(27,"td"),n._uU(28,"Provider"),n.qZA(),n.TgZ(29,"td"),n._uU(30,"Description"),n.qZA(),n.TgZ(31,"td"),n._uU(32,"Active"),n.qZA(),n.TgZ(33,"td"),n._uU(34,"Action"),n.qZA()()(),n.TgZ(35,"tbody"),n.YNc(36,M,16,6,"tr",13),n.ALo(37,"searchFilter"),n.qZA()()()()()()()(),n.TgZ(38,"div",14)(39,"div",15)(40,"div",16)(41,"div",17)(42,"button",18)(43,"span",19),n._uU(44,"\xd7"),n.qZA()(),n.YNc(45,I,2,0,"h1",20),n.YNc(46,A,2,0,"h1",20),n.qZA(),n.TgZ(47,"div",21)(48,"div",3)(49,"input",22),n.NdJ("ngModelChange",function(t){return a.id=t}),n.qZA(),n.TgZ(50,"div",23)(51,"label"),n._uU(52,"Code*"),n.qZA(),n.TgZ(53,"input",24),n.NdJ("ngModelChange",function(t){return a.code=t}),n.qZA()()(),n.TgZ(54,"div",3)(55,"div",23)(56,"label"),n._uU(57,"Insurance Plan Name*"),n.qZA(),n.TgZ(58,"input",24),n.NdJ("ngModelChange",function(t){return a.name=t}),n.qZA()()(),n.TgZ(59,"div",3)(60,"div",23)(61,"label"),n._uU(62,"Select Insurance Provider*"),n.qZA(),n.TgZ(63,"select",25),n.NdJ("ngModelChange",function(t){return a.insuranceProviderName=t}),n._UZ(64,"option"),n.YNc(65,U,2,1,"option",13),n.qZA()()(),n.TgZ(66,"div",3)(67,"div",23)(68,"label"),n._uU(69,"Description"),n.qZA(),n.TgZ(70,"input",24),n.NdJ("ngModelChange",function(t){return a.description=t}),n.qZA()()(),n.TgZ(71,"div",3)(72,"div",23)(73,"label"),n._uU(74,"Active"),n.qZA(),n.TgZ(75,"input",26),n.NdJ("ngModelChange",function(t){return a.active=t}),n.qZA()()()(),n.TgZ(76,"div",27)(77,"button",28),n._uU(78,"Close"),n.qZA(),n.TgZ(79,"button",29),n.NdJ("click",function(){return a.saveInsurancePlan()}),n.YNc(80,E,2,0,"span",30),n.YNc(81,b,2,0,"span",30),n.qZA()()()()()),2&e&&(n.xp6(18),n.Q6J("ngModel",a.filterRecords),n.xp6(18),n.Q6J("ngForOf",n.xi3(37,13,a.insurancePlans,a.filterRecords)),n.xp6(9),n.Q6J("ngIf",null===a.id),n.xp6(1),n.Q6J("ngIf",null!=a.id),n.xp6(3),n.Q6J("ngModel",a.id),n.xp6(4),n.Q6J("ngModel",a.code),n.xp6(5),n.Q6J("ngModel",a.name),n.xp6(5),n.Q6J("ngModel",a.insuranceProviderName),n.xp6(2),n.Q6J("ngForOf",a.insuranceProviderNames),n.xp6(5),n.Q6J("ngModel",a.description),n.xp6(5),n.Q6J("ngModel",a.active),n.xp6(5),n.Q6J("ngIf",null!=a.id),n.xp6(1),n.Q6J("ngIf",null===a.id))},dependencies:[g.ez,g.sg,g.O5,d.u5,d.YN,d.Kr,d.Fj,d.Wl,d.EJ,d.JJ,d.On,d.UX,h.G]}),l})()}}]);