"use strict";(self.webpackChunkzana_hmis=self.webpackChunkzana_hmis||[]).push([[279],{279:(T,d,i)=>{i.r(d),i.d(d,{PatientInsuranceInvoicesComponent:()=>f});var _=i(5861),h=i(6814),p=i(9862),l=i(95),v=i(8237),g=i(4716),E=i(4185),P=i(553),n=i(6689),I=i(6466),M=i(1581),Z=i(585),A=i(379);function O(a,u){if(1&a){const o=n.EpF();n.TgZ(0,"tr")(1,"td"),n._uU(2),n.qZA(),n.TgZ(3,"td"),n._uU(4),n.qZA(),n.TgZ(5,"td"),n._uU(6),n.qZA(),n.TgZ(7,"td")(8,"span",16),n.NdJ("click",function(){const s=n.CHM(o).$implicit,r=n.oxw();return n.KtG(r.setInvoice(s.id))}),n._uU(9,"Select"),n.qZA()()()}if(2&a){const o=u.$implicit;n.xp6(2),n.Oqu(o.no),n.xp6(2),n.lnq("",null==o||null==o.patient?null:o.patient.firstName," ",null==o||null==o.patient?null:o.patient.middleName," ",null==o||null==o.patient?null:o.patient.lastName,""),n.xp6(2),n.Oqu(null==o||null==o.patient?null:o.patient.no)}}const m=P.N.apiUrl;let f=(()=>{var a;class u{constructor(t,e,s,r,c,C){this.auth=t,this.http=e,this.modalService=s,this.spinner=r,this.router=c,this.msgBox=C,this.invoices=[],this.filterRecords=""}ngOnInit(){var t=this;return(0,_.Z)(function*(){t.loadPatientDirectInvoices()})()}loadPatientDirectInvoices(){var t=this;return(0,_.Z)(function*(){let e={headers:(new p.WM).set("Authorization","Bearer "+t.auth.user.access_token)};t.spinner.show(),yield t.http.get(m+"/patients/get_patient_insurance_pending_invoices",e).pipe((0,g.x)(()=>t.spinner.hide())).toPromise().then(s=>{t.invoices=s,console.log(s)}).catch(s=>{t.msgBox.showErrorMessage(s,""),console.log(s)})})()}postConsultation(t){var e=this;return(0,_.Z)(function*(){localStorage.setItem("consultation-id",t);let s={headers:(new p.WM).set("Authorization","Bearer "+e.auth.user.access_token)};var r=!1;e.spinner.show(),yield e.http.get(m+"/patients/open_consultation?consultation_id="+t,s).pipe((0,g.x)(()=>e.spinner.hide())).toPromise().then(c=>{r=!0}).catch(c=>{e.msgBox.showErrorMessage(c,""),console.log(c)}),r?e.router.navigate(["doctor-cracking"]):e.msgBox.showErrorMessage3("Could not open")})()}setInvoice(t){return(0,_.Z)(function*(){localStorage.setItem("patient-invoice-id",t)})()}grant(t){var e=!1;return t.forEach(s=>{this.auth.checkPrivilege(s)&&(e=!0)}),e}}return(a=u).\u0275fac=function(t){return new(t||a)(n.Y36(I.e),n.Y36(p.eN),n.Y36(M.FF),n.Y36(Z.t2),n.Y36(v.F0),n.Y36(A.l))},a.\u0275cmp=n.Xpm({type:a,selectors:[["app-patient-insurance-invoices"]],standalone:!0,features:[n.jDz],decls:33,vars:5,consts:[[1,"content-header"],[1,"header-title"],[1,"content"],[1,"row"],[1,"col-sm-12"],[1,"panel","panel-bd","lobidrag"],[1,"panel-heading"],[1,"btn-group"],[1,"panel-body"],[1,"col-sm-12",2,"height","100%","overflow","scroll"],[1,"col-sm-4"],["type","text","placeholder","Search...",1,"form-control","pull-right",2,"max-width","8cm",3,"ngModel","ngModelChange"],[1,"table-responsive"],[1,"table","table-bordered","table-hover","text-small"],[1,"success"],[4,"ngFor","ngForOf"],["routerLink","/patient-invoice",3,"click"]],template:function(t,e){1&t&&(n.TgZ(0,"section",0)(1,"div",1)(2,"h1"),n._uU(3,"Patient Insurance Invoices"),n.qZA()()(),n.TgZ(4,"section",2)(5,"div",3)(6,"div",4)(7,"div",5)(8,"div",6),n._UZ(9,"div",7),n.qZA(),n.TgZ(10,"div",8)(11,"div",9)(12,"div",3),n._UZ(13,"div",10)(14,"div",10),n.TgZ(15,"div",10)(16,"input",11),n.NdJ("ngModelChange",function(r){return e.filterRecords=r}),n.qZA()()(),n._UZ(17,"br"),n.TgZ(18,"div",12)(19,"table",13)(20,"thead",14)(21,"tr")(22,"th"),n._uU(23,"Invoice No"),n.qZA(),n.TgZ(24,"th"),n._uU(25,"Name"),n.qZA(),n.TgZ(26,"th"),n._uU(27,"Patient's File No"),n.qZA(),n.TgZ(28,"th"),n._uU(29,"Action"),n.qZA()()(),n.TgZ(30,"tbody"),n.YNc(31,O,10,5,"tr",15),n.ALo(32,"searchFilter"),n.qZA()()()()()()()()()),2&t&&(n.xp6(16),n.Q6J("ngModel",e.filterRecords),n.xp6(15),n.Q6J("ngForOf",n.xi3(32,2,e.invoices,e.filterRecords)))},dependencies:[h.ez,h.sg,l.u5,l.Fj,l.JJ,l.On,l.UX,E.G,v.rH]}),u})()}}]);