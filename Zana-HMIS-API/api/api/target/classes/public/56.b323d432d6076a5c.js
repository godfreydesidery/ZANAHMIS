"use strict";(self.webpackChunkzana_hmis=self.webpackChunkzana_hmis||[]).push([[56],{56:(v,u,r)=>{r.r(u),r.d(u,{ProcedureHistoryComponent:()=>U});var _=r(5861),l=r(6814),d=r(9862),c=r(95),p=r(8237),g=r(4716),m=r(4185),h=r(553),t=r(6689),Z=r(6466),y=r(585),T=r(379);function P(o,s){1&o&&(t.TgZ(0,"a",20),t._UZ(1,"i",21),t._uU(2," Back"),t.qZA())}function b(o,s){1&o&&(t.TgZ(0,"a",22),t._UZ(1,"i",21),t._uU(2," Back"),t.qZA())}function A(o,s){if(1&o&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA()()),2&o){const e=s.$implicit;t.xp6(2),t.Oqu(null==e?null:e.created),t.xp6(2),t.Oqu(null==e||null==e.procedureType?null:e.procedureType.name),t.xp6(2),t.Oqu(null==e?null:e.note),t.xp6(2),t.Oqu(null==e||null==e.diagnosisType?null:e.diagnosisType.name),t.xp6(2),t.Oqu(null==e?null:e.status)}}const E=h.N.apiUrl;let U=(()=>{var o;class s{constructor(n,i,a,O){this.auth=n,this.http=i,this.spinner=a,this.msgBox=O,this.patientId=null,this.procedures=[],this.filterRecords="",this.consultationId=null,this.admissionId=null}ngOnInit(){var n=this;return(0,_.Z)(function*(){n.patientId=localStorage.getItem("patient-id"),n.getProcedureHistory(),n.consultationId=localStorage.getItem("consultation-id"),n.admissionId=localStorage.getItem("admission-id")})()}getProcedureHistory(){var n=this;return(0,_.Z)(function*(){let i={headers:(new d.WM).set("Authorization","Bearer "+n.auth.user.access_token)};n.spinner.show(),yield n.http.get(E+"/patients/get_all_procedures_by_patient_id?patient_id="+n.patientId,i).pipe((0,g.x)(()=>n.spinner.hide())).toPromise().then(a=>{n.procedures=a,console.log(a)}).catch(a=>{n.msgBox.showErrorMessage(a,"Could not load procedures"),console.log(a)})})()}grant(n){var i=!1;return n.forEach(a=>{this.auth.checkPrivilege(a)&&(i=!0)}),i}}return(o=s).\u0275fac=function(n){return new(n||o)(t.Y36(Z.e),t.Y36(d.eN),t.Y36(y.t2),t.Y36(T.l))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-procedure-history"]],standalone:!0,features:[t.jDz],decls:44,vars:6,consts:[[1,"content-header"],[1,"header-title"],[1,"content"],[1,"row"],[1,"col-sm-12"],[1,"panel","panel-bd","lobidrag"],[1,"panel-heading"],["class","btn btn-primary btn-outline","routerLink","/doctor-cracking",4,"ngIf"],["class","btn btn-primary btn-outline","routerLink","/doctor-inpatient",4,"ngIf"],["routerLink","/clinical-note-history",1,"btn","btn-primary","btn-outline"],["routerLink","/general-examination-history",1,"btn","btn-primary","btn-outline"],["routerLink","/final-diagnosis-history",1,"btn","btn-primary","btn-outline"],["routerLink","/lab-test-history",1,"btn","btn-primary","btn-outline"],["routerLink","/radiology-history",1,"btn","btn-primary","btn-outline"],["routerLink","/procedure-history",1,"btn","btn-primary"],["routerLink","/prescription-history",1,"btn","btn-primary","btn-outline"],[1,"panel-body"],[1,"table","table-responsive","table-striped","table-small","table-bordered"],[2,"font-weight","bold"],[4,"ngFor","ngForOf"],["routerLink","/doctor-cracking",1,"btn","btn-primary","btn-outline"],[1,"glyphicon","glyphicon-triangle-left"],["routerLink","/doctor-inpatient",1,"btn","btn-primary","btn-outline"]],template:function(n,i){1&n&&(t.TgZ(0,"section",0)(1,"div",1)(2,"h1"),t._uU(3,"Patient History - Procedure"),t.qZA()()(),t.TgZ(4,"section",2)(5,"div",3)(6,"div",4)(7,"div",5)(8,"div",6),t.YNc(9,P,3,0,"a",7),t.YNc(10,b,3,0,"a",8),t.TgZ(11,"a",9),t._uU(12,"Clinical Notes"),t.qZA(),t.TgZ(13,"a",10),t._uU(14,"General Examination"),t.qZA(),t.TgZ(15,"a",11),t._uU(16,"Final Diagnosis"),t.qZA(),t.TgZ(17,"a",12),t._uU(18,"Lab Tests"),t.qZA(),t.TgZ(19,"a",13),t._uU(20,"Radiology Tests"),t.qZA(),t.TgZ(21,"a",14),t._uU(22,"Procedures"),t.qZA(),t.TgZ(23,"a",15),t._uU(24,"Medications"),t.qZA()(),t.TgZ(25,"div",16)(26,"div",3)(27,"div",4)(28,"table",17)(29,"thead")(30,"tr",18)(31,"td"),t._uU(32,"Ordered By/At"),t.qZA(),t.TgZ(33,"td"),t._uU(34,"Procedure"),t.qZA(),t.TgZ(35,"td"),t._uU(36,"Procedure Note"),t.qZA(),t.TgZ(37,"td"),t._uU(38,"Diagnosis"),t.qZA(),t.TgZ(39,"td"),t._uU(40,"Status"),t.qZA()()(),t.TgZ(41,"tbody"),t.YNc(42,A,11,5,"tr",19),t.ALo(43,"searchFilter"),t.qZA()()()()()()()()()),2&n&&(t.xp6(9),t.Q6J("ngIf",null!=i.consultationId),t.xp6(1),t.Q6J("ngIf",null!=i.admissionId),t.xp6(32),t.Q6J("ngForOf",t.xi3(43,3,i.procedures,i.filterRecords)))},dependencies:[l.ez,l.sg,l.O5,c.u5,c.UX,m.G,p.rH]}),s})()}}]);