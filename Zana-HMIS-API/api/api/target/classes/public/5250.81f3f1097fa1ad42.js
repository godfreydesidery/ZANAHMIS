"use strict";(self.webpackChunkzana_hmis=self.webpackChunkzana_hmis||[]).push([[5250],{5250:(P,u,s)=>{s.r(u),s.d(u,{TheatreComponent:()=>x});var p=s(5861),g=s(6814),c=s(9862),l=s(95),h=s(4716),m=s(4185),T=s(553),e=s(6689),Z=s(6466),v=s(585),f=s(379);function C(i,r){1&i&&(e.TgZ(0,"span",35),e._uU(1,"Active"),e.qZA())}function M(i,r){1&i&&(e.TgZ(0,"span",36),e._uU(1,"Inactive"),e.qZA())}function A(i,r){if(1&i){const d=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e.YNc(8,C,2,0,"span",31),e.YNc(9,M,2,0,"span",32),e.qZA(),e.TgZ(10,"td")(11,"a",33),e.NdJ("click",function(){const a=e.CHM(d).$implicit,o=e.oxw();return e.KtG(o.getTheatre(a.id))}),e._UZ(12,"i",34),e._uU(13,"Edit"),e.qZA()()()}if(2&i){const d=r.$implicit;e.xp6(2),e.Oqu(d.code),e.xp6(2),e.Oqu(d.name),e.xp6(2),e.Oqu(d.description),e.xp6(2),e.Q6J("ngIf",!0===d.active),e.xp6(1),e.Q6J("ngIf",!1===d.active)}}function E(i,r){1&i&&(e.TgZ(0,"h1",37),e._uU(1,"Add Theatre"),e.qZA())}function U(i,r){1&i&&(e.TgZ(0,"h1",37),e._uU(1,"Edit Theatre"),e.qZA())}function b(i,r){1&i&&(e.TgZ(0,"span"),e._uU(1,"Update"),e.qZA())}function O(i,r){1&i&&(e.TgZ(0,"span"),e._uU(1,"Add"),e.qZA())}const _=T.N.apiUrl;let x=(()=>{var i;class r{constructor(t,n,a,o){this.auth=t,this.http=n,this.spinner=a,this.msgBox=o,this.code="",this.name="",this.description="",this.location="",this.active=!0,this.theatres=[],this.filterRecords=""}ngOnInit(){this.loadTheatres()}saveTheatre(){var t=this;return(0,p.Z)(function*(){let n={headers:(new c.WM).set("Authorization","Bearer "+t.auth.user.access_token)};var a={id:t.id,code:t.code,name:t.name,description:t.description,active:!0};null==t.id||""==t.id?(t.spinner.show(),yield t.http.post(_+"/theatres/save",a,n).pipe((0,h.x)(()=>t.spinner.hide())).toPromise().then(o=>{t.id=o?.id,t.code=o.code,t.name=o.name,t.description=o.description,t.active=o.active,t.msgBox.showSuccessMessage("Theatre created successifully"),t.loadTheatres(),t.clear()}).catch(o=>{t.msgBox.showErrorMessage(o,"Could not create theatre")})):(t.spinner.show(),yield t.http.post(_+"/theatres/save",a,n).pipe((0,h.x)(()=>t.spinner.hide())).toPromise().then(o=>{t.id=o?.id,t.code=o.code,t.name=o.name,t.description=o.description,t.active=o.active,t.msgBox.showSuccessMessage("Theatre updated successifully"),t.loadTheatres()}).catch(o=>{t.msgBox.showErrorMessage(o,"Could not update theatre")}))})()}loadTheatres(){var t=this;return(0,p.Z)(function*(){t.theatres=[];let n={headers:(new c.WM).set("Authorization","Bearer "+t.auth.user.access_token)};t.spinner.show(),yield t.http.get(_+"/theatres",n).pipe((0,h.x)(()=>t.spinner.hide())).toPromise().then(a=>{a?.forEach(o=>{t.theatres.push(o)})}).catch(a=>{t.msgBox.showErrorMessage(a,"Could not load theatres")})})()}clear(){this.id=null,this.code="",this.name="",this.description=""}getTheatre(t){var n=this;return(0,p.Z)(function*(){if(""==t)return;let a={headers:(new c.WM).set("Authorization","Bearer "+n.auth.user.access_token)};n.spinner.show(),yield n.http.get(_+"/theatres/get?id="+t,a).pipe((0,h.x)(()=>n.spinner.hide())).toPromise().then(o=>{n.id=o?.id,n.code=o.code,n.name=o.name,n.description=o.description,n.active=o.active}).catch(o=>{console.log(o),n.msgBox.showErrorMessage(o,"Could not find theatre")})})()}grant(t){var n=!1;return t.forEach(a=>{this.auth.checkPrivilege(a)&&(n=!0)}),n}}return(i=r).\u0275fac=function(t){return new(t||i)(e.Y36(Z.e),e.Y36(c.eN),e.Y36(v.t2),e.Y36(f.l))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-theatre"]],standalone:!0,features:[e.jDz],decls:73,vars:14,consts:[[1,"content-header"],[1,"header-title"],[1,"content"],[1,"row"],[1,"col-sm-12"],[1,"panel","panel-bd","lobidrag"],[1,"panel-heading"],[1,"btn"],["type","button","data-toggle","modal","data-target","#add-edit-modal",1,"btn","btn-success","m-r-2","m-b-5",3,"click"],[1,"panel-body"],[1,"col-sm-12",2,"height","100%","overflow","scroll"],[1,"col-sm-4"],["type","text","placeholder","Search...",1,"form-control","pull-right",2,"max-width","8cm",3,"ngModel","ngModelChange"],[1,"table","table-bordered","table-small"],[4,"ngFor","ngForOf"],["id","add-edit-modal","tabindex","-1","role","dialog",1,"modal","fade","modal-success"],["role","document",1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],["class","modal-title",4,"ngIf"],[1,"modal-body"],["type","hidden",3,"ngModel","ngModelChange"],[1,"col-xs-12"],["type","text",1,"form-control",3,"ngModel","ngModelChange"],["type","checkbox",2,"text-align","right",3,"ngModel","ngModelChange"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-danger"],["type","button","data-dismiss","modal",1,"btn","btn-success",3,"click"],[4,"ngIf"],["class","label label-info",4,"ngIf"],["class","label label-danger",4,"ngIf"],["data-toggle","modal","data-target","#add-edit-modal",3,"click"],[1,"glyphicon","glyphicon-pencil"],[1,"label","label-info"],[1,"label","label-danger"],[1,"modal-title"]],template:function(t,n){1&t&&(e.TgZ(0,"section",0)(1,"div",1)(2,"h1"),e._uU(3,"Theatre Register"),e.qZA()()(),e.TgZ(4,"section",2)(5,"div",3)(6,"div",4)(7,"div",5)(8,"div",6)(9,"div",7)(10,"button",8),e.NdJ("click",function(){return n.clear()}),e._uU(11,"New Theatre"),e.qZA()()(),e.TgZ(12,"div",9)(13,"div",10)(14,"div",3),e._UZ(15,"div",11)(16,"div",11),e.TgZ(17,"div",11)(18,"input",12),e.NdJ("ngModelChange",function(o){return n.filterRecords=o}),e.qZA()()(),e._UZ(19,"br"),e.TgZ(20,"table",13)(21,"thead")(22,"tr")(23,"td"),e._uU(24,"Code"),e.qZA(),e.TgZ(25,"td"),e._uU(26,"Name"),e.qZA(),e.TgZ(27,"td"),e._uU(28,"Description"),e.qZA(),e.TgZ(29,"td"),e._uU(30,"Status"),e.qZA(),e.TgZ(31,"td"),e._uU(32,"Action"),e.qZA()()(),e.TgZ(33,"tbody"),e.YNc(34,A,14,5,"tr",14),e.ALo(35,"searchFilter"),e.qZA()()()()()()()(),e.TgZ(36,"div",15)(37,"div",16)(38,"div",17)(39,"div",18)(40,"button",19)(41,"span",20),e._uU(42,"\xd7"),e.qZA()(),e.YNc(43,E,2,0,"h1",21),e.YNc(44,U,2,0,"h1",21),e.qZA(),e.TgZ(45,"div",22)(46,"div",3)(47,"input",23),e.NdJ("ngModelChange",function(o){return n.id=o}),e.qZA(),e.TgZ(48,"div",24)(49,"label"),e._uU(50,"Theatre Code*"),e.qZA(),e.TgZ(51,"input",25),e.NdJ("ngModelChange",function(o){return n.code=o}),e.qZA()()(),e.TgZ(52,"div",3)(53,"div",24)(54,"label"),e._uU(55,"Theatre Name*"),e.qZA(),e.TgZ(56,"input",25),e.NdJ("ngModelChange",function(o){return n.name=o}),e.qZA()()(),e.TgZ(57,"div",3)(58,"div",24)(59,"label"),e._uU(60,"Description"),e.qZA(),e.TgZ(61,"input",25),e.NdJ("ngModelChange",function(o){return n.description=o}),e.qZA()()(),e.TgZ(62,"div",3)(63,"div",24)(64,"label"),e._uU(65,"Active"),e.qZA(),e.TgZ(66,"input",26),e.NdJ("ngModelChange",function(o){return n.active=o}),e.qZA()()()(),e.TgZ(67,"div",27)(68,"button",28),e._uU(69,"Close"),e.qZA(),e.TgZ(70,"button",29),e.NdJ("click",function(){return n.saveTheatre()}),e.YNc(71,b,2,0,"span",30),e.YNc(72,O,2,0,"span",30),e.qZA()()()()()),2&t&&(e.xp6(18),e.Q6J("ngModel",n.filterRecords),e.xp6(16),e.Q6J("ngForOf",e.xi3(35,11,n.theatres,n.filterRecords)),e.xp6(9),e.Q6J("ngIf",null===n.id),e.xp6(1),e.Q6J("ngIf",null!=n.id),e.xp6(3),e.Q6J("ngModel",n.id),e.xp6(4),e.Q6J("ngModel",n.code),e.xp6(5),e.Q6J("ngModel",n.name),e.xp6(5),e.Q6J("ngModel",n.description),e.xp6(5),e.Q6J("ngModel",n.active),e.xp6(5),e.Q6J("ngIf",null!=n.id),e.xp6(1),e.Q6J("ngIf",null===n.id))},dependencies:[g.ez,g.sg,g.O5,l.u5,l.Fj,l.Wl,l.JJ,l.On,l.UX,m.G]}),r})()}}]);