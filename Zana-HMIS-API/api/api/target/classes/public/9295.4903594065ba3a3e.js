"use strict";(self.webpackChunkzana_hmis=self.webpackChunkzana_hmis||[]).push([[9295],{9295:(f,m,a)=>{a.r(m),a.d(m,{CompanyProfileComponent:()=>M});var _=a(5861),d=a(9862),C=a(553),u=a(4716),c=a(6814),l=a(95),e=a(6689),A=a(6466),b=a(6593),k=a(585),P=a(379);function N(i,g){if(1&i&&(e.TgZ(0,"div",20),e._UZ(1,"img",21),e.qZA()),2&i){const r=e.oxw();e.xp6(1),e.Q6J("src",r.retrievedImage,e.LSH)}}function Z(i,g){if(1&i){const r=e.EpF();e.TgZ(0,"input",22),e.NdJ("click",function(){e.CHM(r);const t=e.oxw();return e.KtG(t.onUpload())}),e.qZA()}}const p=C.N.apiUrl;let M=(()=>{var i;class g{constructor(n,t,s,o,h){this.http=n,this.auth=t,this.sanitizer=s,this.spinner=o,this.msgBox=h,this.id="",this.companyName="",this.contactName="",this.logo=[],this.tin="",this.vrn="",this.physicalAddress="",this.postCode="",this.postAddress="",this.telephone="",this.mobile="",this.email="",this.website="",this.fax="",this.bankAccountName="",this.bankPhysicalAddress="",this.bankPostCode="",this.bankPostAddress="",this.bankName="",this.bankAccountNo="",this.bankAccountName2="",this.bankPhysicalAddress2="",this.bankPostCode2="",this.bankPostAddress2="",this.bankName2="",this.bankAccountNo2="",this.bankAccountName3="",this.bankPhysicalAddress3="",this.bankPostCode3="",this.bankPostAddress3="",this.bankName3="",this.bankAccountNo3="",this.quotationNotes="",this.salesInvoiceNotes="",this.logoUrl="",this.registrationFee=0,this.publicPath=""}ngOnInit(){this.getCompanyProfile(),this.getLogo()}getCompanyProfile(){var n=this;return(0,_.Z)(function*(){let t={headers:(new d.WM).set("Authorization","Bearer "+n.auth.user.access_token)};n.spinner.show(),yield n.http.get(p+"/company_profile/get",t).pipe((0,u.x)(()=>n.spinner.hide())).toPromise().then(s=>{n.id=s?.id,n.companyName=s.companyName,n.contactName=s.contactName,n.logo=s.logo,n.tin=s.tin,n.vrn=s.vrn,n.physicalAddress=s.physicalAddress,n.postCode=s.postCode,n.postAddress=s.postAddress,n.telephone=s.telephone,n.mobile=s.mobile,n.email=s.email,n.website=s.website,n.fax=s.fax,n.bankAccountName=s.bankAccountName,n.bankPhysicalAddress=s.bankPhysicalAddress,n.bankPostCode=s.bankPostCode,n.bankPostAddress=s.bankPostAddress,n.bankName=s.bankName,n.bankAccountNo=s.bankAccountNo,n.bankAccountName2=s.bankAccountName2,n.bankPhysicalAddress2=s.bankPhysicalAddress2,n.bankPostCode2=s.bankPostCode2,n.bankPostAddress2=s.bankPostAddress2,n.bankName2=s.bankName2,n.bankAccountNo2=s.bankAccountNo2,n.bankAccountName3=s.bankAccountName3,n.bankPhysicalAddress3=s.bankPhysicalAddress3,n.bankPostCode3=s.bankPostCode3,n.bankPostAddress3=s.bankPostAddress3,n.bankName3=s.bankName3,n.bankAccountNo3=s.bankAccountNo3,n.quotationNotes=s.quotationNotes,n.salesInvoiceNotes=s.salesInvoiceNotes,n.registrationFee=s.registrationFee,n.publicPath=s.publicPath,null==n.companyName&&n.msgBox.showErrorMessage3("Could not find company details")}).catch(s=>{console.log(s),n.msgBox.showErrorMessage(s,"Could not load company information")}),n.getLogo()})()}getSantizeUrl(n){return this.sanitizer.bypassSecurityTrustUrl(n)}arrayBufferToBase64(n){var t="";return[].slice.call(new Uint8Array(n)).forEach(o=>t+=String.fromCharCode(o)),window.btoa(t)}saveCompanyProfile(){var n=this;return(0,_.Z)(function*(){let t={headers:(new d.WM).set("Authorization","Bearer "+n.auth.user.access_token)};var s={id:n.id,companyName:n.companyName,contactName:n.contactName,tin:n.tin,vrn:n.vrn,physicalAddress:n.physicalAddress,postCode:n.postCode,postAddress:n.postAddress,telephone:n.telephone,mobile:n.mobile,email:n.email,website:n.website,fax:n.fax,bankAccountName:n.bankAccountName,bankPhysicalAddress:n.bankPhysicalAddress,bankPostCode:n.bankPostCode,bankPostAddress:n.bankPostAddress,bankName:n.bankName,bankAccountNo:n.bankAccountNo,bankAccountName2:n.bankAccountName2,bankPhysicalAddress2:n.bankPhysicalAddress2,bankPostCode2:n.bankPostCode2,bankPostAddress2:n.bankPostAddress2,bankName2:n.bankName2,bankAccountNo2:n.bankAccountNo2,bankAccountName3:n.bankAccountName3,bankPhysicalAddress3:n.bankPhysicalAddress3,bankPostCode3:n.bankPostCode3,bankPostAddress3:n.bankPostAddress3,bankName3:n.bankName3,bankAccountNo3:n.bankAccountNo3,quotationNotes:n.quotationNotes,salesInvoiceNotes:n.salesInvoiceNotes,registrationFee:n.registrationFee,publicPath:n.publicPath};n.spinner.show(),yield n.http.post(p+"/company_profile/save",s,t).pipe((0,u.x)(()=>n.spinner.hide())).toPromise().then(o=>{n.id=o?.id,n.companyName=o.companyName,n.contactName=o.contactName,n.logo=o.logo,n.tin=o.tin,n.vrn=o.vrn,n.physicalAddress=o.physicalAddress,n.postCode=o.postCode,n.postAddress=o.postAddress,n.telephone=o.telephone,n.mobile=o.mobile,n.email=o.email,n.website=o.website,n.fax=o.fax,n.bankAccountName=o.bankAccountName,n.bankPhysicalAddress=o.bankPhysicalAddress,n.bankPostCode=o.bankPostCode,n.bankPostAddress=o.bankPostAddress,n.bankName=o.bankName,n.bankAccountNo=o.bankAccountNo,n.bankAccountName2=o.bankAccountName2,n.bankPhysicalAddress2=o.bankPhysicalAddress2,n.bankPostCode2=o.bankPostCode2,n.bankPostAddress2=o.bankPostAddress2,n.bankName2=o.bankName2,n.bankAccountNo2=o.bankAccountNo2,n.bankAccountName3=o.bankAccountName3,n.bankPhysicalAddress3=o.bankPhysicalAddress3,n.bankPostCode3=o.bankPostCode3,n.bankPostAddress3=o.bankPostAddress3,n.bankName3=o.bankName3,n.bankAccountNo3=o.bankAccountNo3,n.quotationNotes=o.quotationNotes,n.salesInvoiceNotes=o.salesInvoiceNotes,n.registrationFee=o.registrationFee,n.publicPath=o.publicPath;try{n.onUpload()}catch{}alert("Company details saved successifully")}).catch(o=>{console.log(o),n.msgBox.showErrorMessage(o,"Could not save company details")}),n.getLogo()})()}onFileChanged(n){this.selectedFile=n.target.files[0]}onUpload(){let n={headers:(new d.WM).set("Authorization","Bearer "+this.auth.user.access_token)};console.log(this.selectedFile);const t=new FormData;t.append("logo",this.selectedFile,this.selectedFile.name),this.spinner.show(),this.http.post(p+"/company_profile/save_logo",t,n).pipe((0,u.x)(()=>this.spinner.hide())).subscribe(()=>{this.getCompanyProfile(),this.msgBox.showSuccessMessage("Upload succesiful")},s=>{this.msgBox.showErrorMessage(s,"Upload failed")})}getLogo(){var n=this;return(0,_.Z)(function*(){yield n.http.get(p+"/company_profile/get_logo").toPromise().then(t=>{n.retrieveResponse=t,n.base64Data=n.retrieveResponse.logo,n.retrievedImage="data:image/png;base64,"+n.base64Data,console.log(n.retrievedImage)}).catch(t=>{console.log(t)})})()}grant(n){var t=!1;return n.forEach(s=>{this.auth.checkPrivilege(s)&&(t=!0)}),t}}return(i=g).\u0275fac=function(n){return new(n||i)(e.Y36(d.eN),e.Y36(A.e),e.Y36(b.H7),e.Y36(k.t2),e.Y36(P.l))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-company-profile"]],standalone:!0,features:[e.jDz],decls:201,vars:38,consts:[[1,"content-header"],[1,"header-title"],[1,"content"],[1,"row"],[1,"col-sm-12"],[1,"panel","panel-bd","lobidrag"],[1,"panel-heading"],[1,"panel-body"],[1,"table","table-bordered","table-small"],["type","hidden",3,"ngModel","ngModelChange"],[2,"text-align","right","width","50mm"],["type","text",1,"form-control","special",3,"ngModel","ngModelChange"],["style","height: 3cm; width: 3cm;",4,"ngIf"],["type","file",3,"ngModel","change","ngModelChange"],["type","button","value","Upload Logo",3,"click",4,"ngIf"],["type","tel",1,"form-control","special",3,"ngModel","ngModelChange"],["type","email",1,"form-control","special",3,"ngModel","ngModelChange"],[1,"form-control","special",3,"ngModel","ngModelChange"],[1,"form-control",3,"ngModel","ngModelChange"],["type","button",1,"btn","btn-success","m-r-2","m-b-5","pull-right",3,"click"],[2,"height","3cm","width","3cm"],[1,"img-fluid","img-thumbnail",3,"src"],["type","button","value","Upload Logo",3,"click"]],template:function(n,t){1&n&&(e.TgZ(0,"section",0)(1,"div",1)(2,"h1"),e._uU(3,"Company Profile"),e.qZA()()(),e.TgZ(4,"section",2)(5,"div",3)(6,"div",4)(7,"div",5),e._UZ(8,"div",6),e.TgZ(9,"div",7)(10,"div",4)(11,"table",8)(12,"tbody")(13,"tr")(14,"input",9),e.NdJ("ngModelChange",function(o){return t.id=o}),e.qZA(),e.TgZ(15,"td",10),e._uU(16,"Company Name"),e.qZA(),e.TgZ(17,"td")(18,"input",11),e.NdJ("ngModelChange",function(o){return t.companyName=o}),e.qZA()()(),e.TgZ(19,"tr")(20,"td",10),e._uU(21,"Logo"),e.qZA(),e.TgZ(22,"td"),e.YNc(23,N,2,1,"div",12),e.TgZ(24,"input",13),e.NdJ("change",function(o){return t.onFileChanged(o)})("ngModelChange",function(o){return t.logo=o}),e.qZA(),e._UZ(25,"hr"),e.YNc(26,Z,1,0,"input",14),e.qZA()(),e.TgZ(27,"tr")(28,"td",10),e._uU(29,"Contact Name"),e.qZA(),e.TgZ(30,"td")(31,"input",11),e.NdJ("ngModelChange",function(o){return t.contactName=o}),e.qZA()()(),e.TgZ(32,"tr")(33,"td",10),e._uU(34,"TIN"),e.qZA(),e.TgZ(35,"td")(36,"input",11),e.NdJ("ngModelChange",function(o){return t.tin=o}),e.qZA()()(),e.TgZ(37,"tr")(38,"td",10),e._uU(39,"VRN"),e.qZA(),e.TgZ(40,"td")(41,"input",11),e.NdJ("ngModelChange",function(o){return t.vrn=o}),e.qZA()()(),e.TgZ(42,"tr")(43,"td",10),e._uU(44,"Physical Address"),e.qZA(),e.TgZ(45,"td")(46,"input",11),e.NdJ("ngModelChange",function(o){return t.physicalAddress=o}),e.qZA()()(),e.TgZ(47,"tr")(48,"td",10),e._uU(49,"Post Code"),e.qZA(),e.TgZ(50,"td")(51,"input",11),e.NdJ("ngModelChange",function(o){return t.postCode=o}),e.qZA()()(),e.TgZ(52,"tr")(53,"td",10),e._uU(54,"Post Address"),e.qZA(),e.TgZ(55,"td")(56,"input",11),e.NdJ("ngModelChange",function(o){return t.postAddress=o}),e.qZA()()(),e.TgZ(57,"tr")(58,"td",10),e._uU(59,"Telephone"),e.qZA(),e.TgZ(60,"td")(61,"input",15),e.NdJ("ngModelChange",function(o){return t.telephone=o}),e.qZA()()(),e.TgZ(62,"tr")(63,"td",10),e._uU(64,"Mobile"),e.qZA(),e.TgZ(65,"td")(66,"input",15),e.NdJ("ngModelChange",function(o){return t.mobile=o}),e.qZA()()(),e.TgZ(67,"tr")(68,"td",10),e._uU(69,"Email"),e.qZA(),e.TgZ(70,"td")(71,"input",16),e.NdJ("ngModelChange",function(o){return t.email=o}),e.qZA()()(),e.TgZ(72,"tr")(73,"td",10),e._uU(74,"Website"),e.qZA(),e.TgZ(75,"td")(76,"input",11),e.NdJ("ngModelChange",function(o){return t.website=o}),e.qZA()()(),e.TgZ(77,"tr")(78,"td",10),e._uU(79,"Fax"),e.qZA(),e.TgZ(80,"td")(81,"input",15),e.NdJ("ngModelChange",function(o){return t.fax=o}),e.qZA()()(),e._UZ(82,"hr"),e.TgZ(83,"tr")(84,"td",10),e._uU(85,"Bank Acc Name"),e.qZA(),e.TgZ(86,"td")(87,"input",11),e.NdJ("ngModelChange",function(o){return t.bankAccountName=o}),e.qZA()()(),e.TgZ(88,"tr")(89,"td",10),e._uU(90,"Bank Physical Address"),e.qZA(),e.TgZ(91,"td")(92,"input",11),e.NdJ("ngModelChange",function(o){return t.bankPhysicalAddress=o}),e.qZA()()(),e.TgZ(93,"tr")(94,"td",10),e._uU(95,"Bank Post Address"),e.qZA(),e.TgZ(96,"td")(97,"input",11),e.NdJ("ngModelChange",function(o){return t.bankPostAddress=o}),e.qZA()()(),e.TgZ(98,"tr")(99,"td",10),e._uU(100,"Bank Post Code"),e.qZA(),e.TgZ(101,"td")(102,"input",11),e.NdJ("ngModelChange",function(o){return t.bankPostCode=o}),e.qZA()()(),e.TgZ(103,"tr")(104,"td",10),e._uU(105,"Bank Name"),e.qZA(),e.TgZ(106,"td")(107,"input",11),e.NdJ("ngModelChange",function(o){return t.bankName=o}),e.qZA()()(),e.TgZ(108,"tr")(109,"td",10),e._uU(110,"Bank Acc No"),e.qZA(),e.TgZ(111,"td")(112,"input",11),e.NdJ("ngModelChange",function(o){return t.bankAccountNo=o}),e.qZA()()(),e._UZ(113,"hr"),e.TgZ(114,"tr")(115,"td",10),e._uU(116,"Bank Acc Name"),e.qZA(),e.TgZ(117,"td")(118,"input",11),e.NdJ("ngModelChange",function(o){return t.bankAccountName2=o}),e.qZA()()(),e.TgZ(119,"tr")(120,"td",10),e._uU(121,"Bank Physical Address"),e.qZA(),e.TgZ(122,"td")(123,"input",11),e.NdJ("ngModelChange",function(o){return t.bankPhysicalAddress2=o}),e.qZA()()(),e.TgZ(124,"tr")(125,"td",10),e._uU(126,"Bank Post Address"),e.qZA(),e.TgZ(127,"td")(128,"input",11),e.NdJ("ngModelChange",function(o){return t.bankPostAddress2=o}),e.qZA()()(),e.TgZ(129,"tr")(130,"td",10),e._uU(131,"Bank Post Code"),e.qZA(),e.TgZ(132,"td")(133,"input",11),e.NdJ("ngModelChange",function(o){return t.bankPostCode2=o}),e.qZA()()(),e.TgZ(134,"tr")(135,"td",10),e._uU(136,"Bank Name"),e.qZA(),e.TgZ(137,"td")(138,"input",11),e.NdJ("ngModelChange",function(o){return t.bankName2=o}),e.qZA()()(),e.TgZ(139,"tr")(140,"td",10),e._uU(141,"Bank Acc No"),e.qZA(),e.TgZ(142,"td")(143,"input",11),e.NdJ("ngModelChange",function(o){return t.bankAccountNo2=o}),e.qZA()()(),e._UZ(144,"hr"),e.TgZ(145,"tr")(146,"td",10),e._uU(147,"Bank Acc Name"),e.qZA(),e.TgZ(148,"td")(149,"input",11),e.NdJ("ngModelChange",function(o){return t.bankAccountName3=o}),e.qZA()()(),e.TgZ(150,"tr")(151,"td",10),e._uU(152,"Bank Physical Address"),e.qZA(),e.TgZ(153,"td")(154,"input",11),e.NdJ("ngModelChange",function(o){return t.bankPhysicalAddress3=o}),e.qZA()()(),e.TgZ(155,"tr")(156,"td",10),e._uU(157,"Bank Post Address"),e.qZA(),e.TgZ(158,"td")(159,"input",11),e.NdJ("ngModelChange",function(o){return t.bankPostAddress3=o}),e.qZA()()(),e.TgZ(160,"tr")(161,"td",10),e._uU(162,"Bank Post Code"),e.qZA(),e.TgZ(163,"td")(164,"input",11),e.NdJ("ngModelChange",function(o){return t.bankPostCode3=o}),e.qZA()()(),e.TgZ(165,"tr")(166,"td",10),e._uU(167,"Bank Name"),e.qZA(),e.TgZ(168,"td")(169,"input",11),e.NdJ("ngModelChange",function(o){return t.bankName3=o}),e.qZA()()(),e.TgZ(170,"tr")(171,"td",10),e._uU(172,"Bank Acc No"),e.qZA(),e.TgZ(173,"td")(174,"input",11),e.NdJ("ngModelChange",function(o){return t.bankAccountNo3=o}),e.qZA()()(),e._UZ(175,"hr"),e.TgZ(176,"tr")(177,"td",10),e._uU(178,"Quotation Notes"),e.qZA(),e.TgZ(179,"td")(180,"textarea",17),e.NdJ("ngModelChange",function(o){return t.quotationNotes=o}),e.qZA()()(),e.TgZ(181,"tr")(182,"td",10),e._uU(183,"Sales Invoice Notes"),e.qZA(),e.TgZ(184,"td")(185,"textarea",17),e.NdJ("ngModelChange",function(o){return t.salesInvoiceNotes=o}),e.qZA()()(),e.TgZ(186,"tr")(187,"td",10),e._uU(188,"Registration Fee"),e.qZA(),e.TgZ(189,"td")(190,"input",11),e.NdJ("ngModelChange",function(o){return t.registrationFee=o}),e.qZA()()(),e.TgZ(191,"tr")(192,"td",10),e._uU(193,"Public Path"),e.qZA(),e.TgZ(194,"td")(195,"select",18),e.NdJ("ngModelChange",function(o){return t.publicPath=o}),e.TgZ(196,"option"),e._uU(197,"C:\\zana_attachments\\"),e.qZA()()()()()()(),e.TgZ(198,"div")(199,"button",19),e.NdJ("click",function(){return t.saveCompanyProfile()}),e._uU(200,"Save"),e.qZA()()()()()()()),2&n&&(e.xp6(14),e.Q6J("ngModel",t.id),e.xp6(4),e.Q6J("ngModel",t.companyName),e.xp6(5),e.Q6J("ngIf",t.retrievedImage),e.xp6(1),e.Q6J("ngModel",t.logo),e.xp6(2),e.Q6J("ngIf",null!=t.logo),e.xp6(5),e.Q6J("ngModel",t.contactName),e.xp6(5),e.Q6J("ngModel",t.tin),e.xp6(5),e.Q6J("ngModel",t.vrn),e.xp6(5),e.Q6J("ngModel",t.physicalAddress),e.xp6(5),e.Q6J("ngModel",t.postCode),e.xp6(5),e.Q6J("ngModel",t.postAddress),e.xp6(5),e.Q6J("ngModel",t.telephone),e.xp6(5),e.Q6J("ngModel",t.mobile),e.xp6(5),e.Q6J("ngModel",t.email),e.xp6(5),e.Q6J("ngModel",t.website),e.xp6(5),e.Q6J("ngModel",t.fax),e.xp6(6),e.Q6J("ngModel",t.bankAccountName),e.xp6(5),e.Q6J("ngModel",t.bankPhysicalAddress),e.xp6(5),e.Q6J("ngModel",t.bankPostAddress),e.xp6(5),e.Q6J("ngModel",t.bankPostCode),e.xp6(5),e.Q6J("ngModel",t.bankName),e.xp6(5),e.Q6J("ngModel",t.bankAccountNo),e.xp6(6),e.Q6J("ngModel",t.bankAccountName2),e.xp6(5),e.Q6J("ngModel",t.bankPhysicalAddress2),e.xp6(5),e.Q6J("ngModel",t.bankPostAddress2),e.xp6(5),e.Q6J("ngModel",t.bankPostCode2),e.xp6(5),e.Q6J("ngModel",t.bankName2),e.xp6(5),e.Q6J("ngModel",t.bankAccountNo2),e.xp6(6),e.Q6J("ngModel",t.bankAccountName3),e.xp6(5),e.Q6J("ngModel",t.bankPhysicalAddress3),e.xp6(5),e.Q6J("ngModel",t.bankPostAddress3),e.xp6(5),e.Q6J("ngModel",t.bankPostCode3),e.xp6(5),e.Q6J("ngModel",t.bankName3),e.xp6(5),e.Q6J("ngModel",t.bankAccountNo3),e.xp6(6),e.Q6J("ngModel",t.quotationNotes),e.xp6(5),e.Q6J("ngModel",t.salesInvoiceNotes),e.xp6(5),e.Q6J("ngModel",t.registrationFee),e.xp6(5),e.Q6J("ngModel",t.publicPath))},dependencies:[c.ez,c.O5,l.u5,l.YN,l.Kr,l.Fj,l.EJ,l.JJ,l.On,l.UX]}),g})()}}]);